(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();var bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ln(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ex(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),i}var a0={exports:{}},sa=typeof Reflect=="object"?Reflect:null,iw=sa&&typeof sa.apply=="function"?sa.apply:function(e,i,n){return Function.prototype.apply.call(e,i,n)},yc;sa&&typeof sa.ownKeys=="function"?yc=sa.ownKeys:Object.getOwnPropertySymbols?yc=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:yc=function(e){return Object.getOwnPropertyNames(e)};function hA(t){console&&console.warn&&console.warn(t)}var Ax=Number.isNaN||function(e){return e!==e};function xt(){xt.init.call(this)}a0.exports=xt;a0.exports.once=dA;xt.EventEmitter=xt;xt.prototype._events=void 0;xt.prototype._eventsCount=0;xt.prototype._maxListeners=void 0;var nw=10;function Cf(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(xt,"defaultMaxListeners",{enumerable:!0,get:function(){return nw},set:function(t){if(typeof t!="number"||t<0||Ax(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");nw=t}});xt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};xt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Ax(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Rx(t){return t._maxListeners===void 0?xt.defaultMaxListeners:t._maxListeners}xt.prototype.getMaxListeners=function(){return Rx(this)};xt.prototype.emit=function(e){for(var i=[],n=1;n<arguments.length;n++)i.push(arguments[n]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var a;if(i.length>0&&(a=i[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var h=s[e];if(h===void 0)return!1;if(typeof h=="function")iw(h,this,i);else for(var p=h.length,d=Dx(h,p),n=0;n<p;++n)iw(d[n],this,i);return!0};function Lx(t,e,i,n){var r,s,a;if(Cf(i),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,i.listener?i.listener:i),s=t._events),a=s[e]),a===void 0)a=s[e]=i,++t._eventsCount;else if(typeof a=="function"?a=s[e]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),r=Rx(t),r>0&&a.length>r&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,hA(l)}return t}xt.prototype.addListener=function(e,i){return Lx(this,e,i,!1)};xt.prototype.on=xt.prototype.addListener;xt.prototype.prependListener=function(e,i){return Lx(this,e,i,!0)};function cA(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ox(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=cA.bind(n);return r.listener=i,n.wrapFn=r,r}xt.prototype.once=function(e,i){return Cf(i),this.on(e,Ox(this,e,i)),this};xt.prototype.prependOnceListener=function(e,i){return Cf(i),this.prependListener(e,Ox(this,e,i)),this};xt.prototype.removeListener=function(e,i){var n,r,s,a,l;if(Cf(i),r=this._events,r===void 0)return this;if(n=r[e],n===void 0)return this;if(n===i||n.listener===i)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||i));else if(typeof n!="function"){for(s=-1,a=n.length-1;a>=0;a--)if(n[a]===i||n[a].listener===i){l=n[a].listener,s=a;break}if(s<0)return this;s===0?n.shift():fA(n,s),n.length===1&&(r[e]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",e,l||i)}return this};xt.prototype.off=xt.prototype.removeListener;xt.prototype.removeAllListeners=function(e){var i,n,r;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),a;for(r=0;r<s.length;++r)a=s[r],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(i=n[e],typeof i=="function")this.removeListener(e,i);else if(i!==void 0)for(r=i.length-1;r>=0;r--)this.removeListener(e,i[r]);return this};function Ix(t,e,i){var n=t._events;if(n===void 0)return[];var r=n[e];return r===void 0?[]:typeof r=="function"?i?[r.listener||r]:[r]:i?pA(r):Dx(r,r.length)}xt.prototype.listeners=function(e){return Ix(this,e,!0)};xt.prototype.rawListeners=function(e){return Ix(this,e,!1)};xt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Nx.call(t,e)};xt.prototype.listenerCount=Nx;function Nx(t){var e=this._events;if(e!==void 0){var i=e[t];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}xt.prototype.eventNames=function(){return this._eventsCount>0?yc(this._events):[]};function Dx(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}function fA(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function pA(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}function dA(t,e){return new Promise(function(i,n){function r(a){t.removeListener(e,s),n(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),i([].slice.call(arguments))}Bx(t,e,s,{once:!0}),e!=="error"&&gA(t,r,{once:!0})})}function gA(t,e,i){typeof t.on=="function"&&Bx(t,"error",e,i)}function Bx(t,e,i,n){if(typeof t.on=="function")n.once?t.once(e,i):t.on(e,i);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){n.once&&t.removeEventListener(e,r),i(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Mf=a0.exports,mA=yA;function yA(t){if(typeof t!="number"||isNaN(t))throw new TypeError("Expected a number, got "+typeof t);var e=t<0,i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(e&&(t=-t),t<1)return(e?"-":"")+t+" B";var n=Math.min(Math.floor(Math.log(t)/Math.log(1e3)),i.length-1);t=Number(t/Math.pow(1e3,n));var r=i[n];return t>=10||t%1===0?(e?"-":"")+t.toFixed(0)+" "+r:(e?"-":"")+t.toFixed(1)+" "+r}var vA=mA,wA=_A;function _A(){Object.defineProperty(window.choo,"storage",{get:t,set:bA});function t(){if(navigator.storage)return navigator.storage.estimate().then(function(i){var n=(i.usage/i.quota).toFixed();Hp("Max storage:",rw(i.quota)),Hp("Storage used:",rw(i.usage)+" ("+n+"%)"),navigator.storage.persisted().then(function(r){var s=r?"enabled":"disabled";Hp("Persistent storage:",s)})}),"Calculating storage quota…";var e=window.location.protocol;return/https/.test(e)?"The Storage API is unavailable in this browser. We're sorry!":"The Storage API is unavailable. Serving this site over HTTPS might help enable it!"}}function Hp(t,e){var i="#cc99cc";console.log("%c"+t,"color: "+i,e)}function rw(t){return vA(t).replace(" ","")}function bA(){}Ar.notEqual=SA;Ar.notOk=CA;Ar.equal=xA;Ar.ok=Ar;var $i=Ar;function xA(t,e,i){Ar(t==e,i)}function SA(t,e,i){Ar(t!=e,i)}function CA(t,e){Ar(!t,e)}function Ar(t,e){if(!t)throw new Error(e||"AssertionError")}var MA=$i,kA=typeof window<"u";function TA(){var t;return kA?(window._nanoScheduler||(window._nanoScheduler=new lu(!0)),t=window._nanoScheduler):t=new lu,t}function lu(t){this.hasWindow=t,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}lu.prototype.push=function(t){MA.equal(typeof t,"function","nanoscheduler.push: cb should be type function"),this.queue.push(t),this.schedule()};lu.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var t=this;this.method(function(e){for(var i;t.queue.length&&e.timeRemaining()>0;)i=t.queue.shift(),i(e);t.scheduled=!1,t.queue.length&&t.schedule()})}};lu.prototype.setTimeout=function(t){setTimeout(t,0,{timeRemaining:function(){return 1}})};var Lu=TA,Ux={exports:{}};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var sw=Object.getOwnPropertySymbols,EA=Object.prototype.hasOwnProperty,AA=Object.prototype.propertyIsEnumerable;function RA(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function LA(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(n.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(s){r[s]=s}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var OA=LA()?Object.assign:function(t,e){for(var i,n=RA(t),r,s=1;s<arguments.length;s++){i=Object(arguments[s]);for(var a in i)EA.call(i,a)&&(n[a]=i[a]);if(sw){r=sw(i);for(var l=0;l<r.length;l++)AA.call(i,r[l])&&(n[r[l]]=i[r[l]])}}return n},Jx={},IA=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"},Mg={exports:{}};typeof Object.create=="function"?Mg.exports=function(e,i){e.super_=i,e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:Mg.exports=function(e,i){e.super_=i;var n=function(){};n.prototype=i.prototype,e.prototype=new n,e.prototype.constructor=e};var NA=Mg.exports;(function(t){var e=/%[sdj%]/g;t.format=function(W){if(!B(W)){for(var $=[],ne=0;ne<arguments.length;ne++)$.push(r(arguments[ne]));return $.join(" ")}for(var ne=1,we=arguments,ye=we.length,xe=String(W).replace(e,function(Re){if(Re==="%%")return"%";if(ne>=ye)return Re;switch(Re){case"%s":return String(we[ne++]);case"%d":return Number(we[ne++]);case"%j":try{return JSON.stringify(we[ne++])}catch{return"[Circular]"}default:return Re}}),Se=we[ne];ne<ye;Se=we[++ne])b(Se)||!F(Se)?xe+=" "+Se:xe+=" "+r(Se);return xe},t.deprecate=function(W,$){if(I(bt.process))return function(){return t.deprecate(W,$).apply(this,arguments)};if(process.noDeprecation===!0)return W;var ne=!1;function we(){if(!ne){if(process.throwDeprecation)throw new Error($);process.traceDeprecation?console.trace($):console.error($),ne=!0}return W.apply(this,arguments)}return we};var i={},n;t.debuglog=function(W){if(I(n)&&(n={}.NODE_DEBUG||""),W=W.toUpperCase(),!i[W])if(new RegExp("\\b"+W+"\\b","i").test(n)){var $=process.pid;i[W]=function(){var ne=t.format.apply(t,arguments);console.error("%s %d: %s",W,$,ne)}}else i[W]=function(){};return i[W]};function r(W,$){var ne={seen:[],stylize:a};return arguments.length>=3&&(ne.depth=arguments[2]),arguments.length>=4&&(ne.colors=arguments[3]),M($)?ne.showHidden=$:$&&t._extend(ne,$),I(ne.showHidden)&&(ne.showHidden=!1),I(ne.depth)&&(ne.depth=2),I(ne.colors)&&(ne.colors=!1),I(ne.customInspect)&&(ne.customInspect=!0),ne.colors&&(ne.stylize=s),h(ne,W,ne.depth)}t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(W,$){var ne=r.styles[$];return ne?"\x1B["+r.colors[ne][0]+"m"+W+"\x1B["+r.colors[ne][1]+"m":W}function a(W,$){return W}function l(W){var $={};return W.forEach(function(ne,we){$[ne]=!0}),$}function h(W,$,ne){if(W.customInspect&&$&&A($.inspect)&&$.inspect!==t.inspect&&!($.constructor&&$.constructor.prototype===$)){var we=$.inspect(ne,W);return B(we)||(we=h(W,we,ne)),we}var ye=p(W,$);if(ye)return ye;var xe=Object.keys($),Se=l(xe);if(W.showHidden&&(xe=Object.getOwnPropertyNames($)),V($)&&(xe.indexOf("message")>=0||xe.indexOf("description")>=0))return d($);if(xe.length===0){if(A($)){var Re=$.name?": "+$.name:"";return W.stylize("[Function"+Re+"]","special")}if(O($))return W.stylize(RegExp.prototype.toString.call($),"regexp");if(U($))return W.stylize(Date.prototype.toString.call($),"date");if(V($))return d($)}var Ze="",se=!1,oe=["{","}"];if(S($)&&(se=!0,oe=["[","]"]),A($)){var ve=$.name?": "+$.name:"";Ze=" [Function"+ve+"]"}if(O($)&&(Ze=" "+RegExp.prototype.toString.call($)),U($)&&(Ze=" "+Date.prototype.toUTCString.call($)),V($)&&(Ze=" "+d($)),xe.length===0&&(!se||$.length==0))return oe[0]+Ze+oe[1];if(ne<0)return O($)?W.stylize(RegExp.prototype.toString.call($),"regexp"):W.stylize("[Object]","special");W.seen.push($);var ke;return se?ke=m(W,$,ne,Se,xe):ke=xe.map(function(Fe){return y(W,$,ne,Se,Fe,se)}),W.seen.pop(),v(ke,Ze,oe)}function p(W,$){if(I($))return W.stylize("undefined","undefined");if(B($)){var ne="'"+JSON.stringify($).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return W.stylize(ne,"string")}if(E($))return W.stylize(""+$,"number");if(M($))return W.stylize(""+$,"boolean");if(b($))return W.stylize("null","null")}function d(W){return"["+Error.prototype.toString.call(W)+"]"}function m(W,$,ne,we,ye){for(var xe=[],Se=0,Re=$.length;Se<Re;++Se)Z($,String(Se))?xe.push(y(W,$,ne,we,String(Se),!0)):xe.push("");return ye.forEach(function(Ze){Ze.match(/^\d+$/)||xe.push(y(W,$,ne,we,Ze,!0))}),xe}function y(W,$,ne,we,ye,xe){var Se,Re,Ze;if(Ze=Object.getOwnPropertyDescriptor($,ye)||{value:$[ye]},Ze.get?Ze.set?Re=W.stylize("[Getter/Setter]","special"):Re=W.stylize("[Getter]","special"):Ze.set&&(Re=W.stylize("[Setter]","special")),Z(we,ye)||(Se="["+ye+"]"),Re||(W.seen.indexOf(Ze.value)<0?(b(ne)?Re=h(W,Ze.value,null):Re=h(W,Ze.value,ne-1),Re.indexOf(`
`)>-1&&(xe?Re=Re.split(`
`).map(function(se){return"  "+se}).join(`
`).substr(2):Re=`
`+Re.split(`
`).map(function(se){return"   "+se}).join(`
`))):Re=W.stylize("[Circular]","special")),I(Se)){if(xe&&ye.match(/^\d+$/))return Re;Se=JSON.stringify(""+ye),Se.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Se=Se.substr(1,Se.length-2),Se=W.stylize(Se,"name")):(Se=Se.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Se=W.stylize(Se,"string"))}return Se+": "+Re}function v(W,$,ne){var we=W.reduce(function(ye,xe){return xe.indexOf(`
`)>=0,ye+xe.replace(/\u001b\[\d\d?m/g,"").length+1},0);return we>60?ne[0]+($===""?"":$+`
 `)+" "+W.join(`,
  `)+" "+ne[1]:ne[0]+$+" "+W.join(", ")+" "+ne[1]}function S(W){return Array.isArray(W)}t.isArray=S;function M(W){return typeof W=="boolean"}t.isBoolean=M;function b(W){return W===null}t.isNull=b;function w(W){return W==null}t.isNullOrUndefined=w;function E(W){return typeof W=="number"}t.isNumber=E;function B(W){return typeof W=="string"}t.isString=B;function L(W){return typeof W=="symbol"}t.isSymbol=L;function I(W){return W===void 0}t.isUndefined=I;function O(W){return F(W)&&H(W)==="[object RegExp]"}t.isRegExp=O;function F(W){return typeof W=="object"&&W!==null}t.isObject=F;function U(W){return F(W)&&H(W)==="[object Date]"}t.isDate=U;function V(W){return F(W)&&(H(W)==="[object Error]"||W instanceof Error)}t.isError=V;function A(W){return typeof W=="function"}t.isFunction=A;function Q(W){return W===null||typeof W=="boolean"||typeof W=="number"||typeof W=="string"||typeof W=="symbol"||typeof W>"u"}t.isPrimitive=Q,t.isBuffer=IA;function H(W){return Object.prototype.toString.call(W)}function re(W){return W<10?"0"+W.toString(10):W.toString(10)}var le=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function q(){var W=new Date,$=[re(W.getHours()),re(W.getMinutes()),re(W.getSeconds())].join(":");return[W.getDate(),le[W.getMonth()],$].join(" ")}t.log=function(){console.log("%s - %s",q(),t.format.apply(t,arguments))},t.inherits=NA,t._extend=function(W,$){if(!$||!F($))return W;for(var ne=Object.keys($),we=ne.length;we--;)W[ne[we]]=$[ne[we]];return W};function Z(W,$){return Object.prototype.hasOwnProperty.call(W,$)}})(Jx);var DA=OA;/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function ow(t,e){if(t===e)return 0;for(var i=t.length,n=e.length,r=0,s=Math.min(i,n);r<s;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0}function Wl(t){return bt.Buffer&&typeof bt.Buffer.isBuffer=="function"?bt.Buffer.isBuffer(t):!!(t!=null&&t._isBuffer)}var Jn=Jx,BA=Object.prototype.hasOwnProperty,aw=Array.prototype.slice,Px=function(){return(function(){}).name==="foo"}();function lw(t){return Object.prototype.toString.call(t)}function uw(t){return Wl(t)||typeof bt.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t?!!(t instanceof DataView||t.buffer&&t.buffer instanceof ArrayBuffer):!1}var ut=Ux.exports=jx,UA=/\s*function\s+([^\(\s]*)\s*/;function Fx(t){if(Jn.isFunction(t)){if(Px)return t.name;var e=t.toString(),i=e.match(UA);return i&&i[1]}}ut.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=JA(this),this.generatedMessage=!0);var i=e.stackStartFunction||Hi;if(Error.captureStackTrace)Error.captureStackTrace(this,i);else{var n=new Error;if(n.stack){var r=n.stack,s=Fx(i),a=r.indexOf(`
`+s);if(a>=0){var l=r.indexOf(`
`,a+1);r=r.substring(l+1)}this.stack=r}}};Jn.inherits(ut.AssertionError,Error);function hw(t,e){return typeof t=="string"?t.length<e?t:t.slice(0,e):t}function cw(t){if(Px||!Jn.isFunction(t))return Jn.inspect(t);var e=Fx(t),i=e?": "+e:"";return"[Function"+i+"]"}function JA(t){return hw(cw(t.actual),128)+" "+t.operator+" "+hw(cw(t.expected),128)}function Hi(t,e,i,n,r){throw new ut.AssertionError({message:i,actual:t,expected:e,operator:n,stackStartFunction:r})}ut.fail=Hi;function jx(t,e){t||Hi(t,!0,e,"==",ut.ok)}ut.ok=jx;ut.equal=function(e,i,n){e!=i&&Hi(e,i,n,"==",ut.equal)};ut.notEqual=function(e,i,n){e==i&&Hi(e,i,n,"!=",ut.notEqual)};ut.deepEqual=function(e,i,n){da(e,i,!1)||Hi(e,i,n,"deepEqual",ut.deepEqual)};ut.deepStrictEqual=function(e,i,n){da(e,i,!0)||Hi(e,i,n,"deepStrictEqual",ut.deepStrictEqual)};function da(t,e,i,n){if(t===e)return!0;if(Wl(t)&&Wl(e))return ow(t,e)===0;if(Jn.isDate(t)&&Jn.isDate(e))return t.getTime()===e.getTime();if(Jn.isRegExp(t)&&Jn.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if((t===null||typeof t!="object")&&(e===null||typeof e!="object"))return i?t===e:t==e;if(uw(t)&&uw(e)&&lw(t)===lw(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return ow(new Uint8Array(t.buffer),new Uint8Array(e.buffer))===0;if(Wl(t)!==Wl(e))return!1;n=n||{actual:[],expected:[]};var r=n.actual.indexOf(t);return r!==-1&&r===n.expected.indexOf(e)?!0:(n.actual.push(t),n.expected.push(e),PA(t,e,i,n))}function fw(t){return Object.prototype.toString.call(t)=="[object Arguments]"}function PA(t,e,i,n){if(t==null||e===null||e===void 0)return!1;if(Jn.isPrimitive(t)||Jn.isPrimitive(e))return t===e;if(i&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=fw(t),s=fw(e);if(r&&!s||!r&&s)return!1;if(r)return t=aw.call(t),e=aw.call(e),da(t,e,i);var a=dw(t),l=dw(e),h,p;if(a.length!==l.length)return!1;for(a.sort(),l.sort(),p=a.length-1;p>=0;p--)if(a[p]!==l[p])return!1;for(p=a.length-1;p>=0;p--)if(h=a[p],!da(t[h],e[h],i,n))return!1;return!0}ut.notDeepEqual=function(e,i,n){da(e,i,!1)&&Hi(e,i,n,"notDeepEqual",ut.notDeepEqual)};ut.notDeepStrictEqual=Wx;function Wx(t,e,i){da(t,e,!0)&&Hi(t,e,i,"notDeepStrictEqual",Wx)}ut.strictEqual=function(e,i,n){e!==i&&Hi(e,i,n,"===",ut.strictEqual)};ut.notStrictEqual=function(e,i,n){e===i&&Hi(e,i,n,"!==",ut.notStrictEqual)};function pw(t,e){if(!t||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(t);try{if(t instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},t)===!0}function FA(t){var e;try{t()}catch(i){e=i}return e}function Gx(t,e,i,n){var r;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof i=="string"&&(n=i,i=null),r=FA(e),n=(i&&i.name?" ("+i.name+").":".")+(n?" "+n:"."),t&&!r&&Hi(r,i,"Missing expected exception"+n);var s=typeof n=="string",a=!t&&Jn.isError(r),l=!t&&r&&!i;if((a&&s&&pw(r,i)||l)&&Hi(r,i,"Got unwanted exception"+n),t&&r&&i&&!pw(r,i)||!t&&r)throw r}ut.throws=function(t,e,i){Gx(!0,t,e,i)};ut.doesNotThrow=function(t,e,i){Gx(!1,t,e,i)};ut.ifError=function(t){if(t)throw t};function Vx(t,e){t||Hi(t,!0,e,"==",Vx)}ut.strict=DA(Vx,ut,{equal:ut.strictEqual,deepEqual:ut.deepStrictEqual,notEqual:ut.notStrictEqual,notDeepEqual:ut.notDeepStrictEqual});ut.strict.strict=ut.strict;var dw=Object.keys||function(t){var e=[];for(var i in t)BA.call(t,i)&&e.push(i);return e},kf=Ux.exports,jA=kf,WA={trace:"🔍",debug:"🐛",info:"✨",warn:"⚠️",error:"🚨",fatal:"💀"},Kx={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},GA={foreground:"#d3c0c8",background:"#2d2d2d",black:"#2d2d2d",red:"#f2777a",green:"#99cc99",yellow:"#ffcc66",blue:"#6699cc",magenta:"#cc99cc",cyan:"#66cccc",white:"#d3d0c8",brightBlack:"#747369"},l0=gr;function gr(t,e){if(e=e||{},!(this instanceof gr))return new gr(t,e);jA.equal(typeof e,"object","nanologger: opts should be type object"),this._name=t||"",this._colors=Object.assign({},GA,e.colors||{});try{this.logLevel=window.localStorage.getItem("logLevel")||"info"}catch{this.logLevel="info"}this._logLevel=Kx[this.logLevel]}gr.prototype.trace=function(){for(var t=["trace"],e=0,i=arguments.length;e<i;e++)t.push(arguments[e]);this._print.apply(this,t)};gr.prototype.debug=function(){for(var t=["debug"],e=0,i=arguments.length;e<i;e++)t.push(arguments[e]);this._print.apply(this,t)};gr.prototype.info=function(){for(var t=["info"],e=0,i=arguments.length;e<i;e++)t.push(arguments[e]);this._print.apply(this,t)};gr.prototype.warn=function(){for(var t=["warn"],e=0,i=arguments.length;e<i;e++)t.push(arguments[e]);this._print.apply(this,t)};gr.prototype.error=function(){for(var t=["error"],e=0,i=arguments.length;e<i;e++)t.push(arguments[e]);this._print.apply(this,t)};gr.prototype.fatal=function(){for(var t=["fatal"],e=0,i=arguments.length;e<i;e++)t.push(arguments[e]);this._print.apply(this,t)};gr.prototype._print=function(t){if(!(Kx[t]<this._logLevel)){var e=VA(),i=WA[t],n=this._name||"unknown",r=t==="error"||t.fatal?this._colors.red:t==="warn"?this._colors.yellow:this._colors.green,s=[],a=[null],l="%c%s "+i+" %c%s";a.push(Fo(this._colors.brightBlack),e),a.push(Fo(this._colors.magenta),n);for(var h=1,p=arguments.length;h<p;h++){var d=arguments[h];typeof d=="string"?h===1?(l+=" %c%s",a.push(Fo(r)),a.push(d)):/ms$/.test(d)?(l+=" %c%s",a.push(Fo(this._colors.brightBlack)),a.push(d)):(l+=" %c%s",a.push(Fo(this._colors.white)),a.push(d)):typeof d=="number"?(l+=" %c%d",a.push(Fo(this._colors.magenta)),a.push(d)):s.push(d)}a[0]=l,s.forEach(function(m){a.push(m)}),Function.prototype.apply.apply(console.log,[console,a])}};function Fo(t){return"color: "+t+";"}function VA(){var t=new Date,e=Qp(t.getHours().toString()),i=Qp(t.getMinutes().toString()),n=Qp(t.getSeconds().toString());return e+":"+i+":"+n}function Qp(t){return t.length!==2?0+t:t}var KA=Lu(),zA=$i,HA=["frame","measure","navigation","resource","longtask"],zx=QA;function QA(t){zA.equal(typeof t,"function","on-performance: cb should be type function");var e=typeof window<"u"&&window.PerformanceObserver;if(!e)return;if(window._onperformance)return window._onperformance.push(t),n;window._onperformance=[t];var i=new e(r);return setTimeout(function(){r(window.performance),i.observe({entryTypes:HA})},0),n;function n(){window._onperformance.splice(window._onperformance.indexOf(t),1)}function r(a){a.getEntries().forEach(function(l){KA.push(function(){s(l),window._onperformance.forEach(function(h){h(l)})})})}function s(a){var l=a.entryType;l==="measure"?window.performance.clearMeasures(a.name):l==="resource"&&window.performance.clearResourceTimings()}}var YA=zx,$A=Lu(),ZA=kf,qA=ga;function ga(t){if(!(this instanceof ga))return new ga(t);ZA.equal(typeof t,"object"),this.hasWindow=typeof window<"u",this.hasIdleCallback=this.hasWindow&&window.requestIdleCallback,this.hasPerformance=this.hasWindow&&window.performance&&window.performance.getEntriesByName,this.emitter=t,this.listeners={},this.buffer={render:{},events:{}}}ga.prototype.on=function(t,e){this.listeners[t]=e};ga.prototype.start=function(){var t=this;this.hasPerformance&&(window.performance.onresourcetimingbufferfull=function(){var e=t.listeners["resource-timing-buffer-full"];e&&e()}),YA(function(e){if(e&&e.entryType==="measure"){var i=e.name;if(/choo\.morph/.test(i))t.buffer.render.morph=e;else if(/choo\.route/.test(i))t.buffer.render.route=e;else if(/choo\.render/.test(i))t.buffer.render.render=e;else if(/choo\.emit/.test(i)&&!/log:/.test(i)){var n=t.listeners.event;if(n){var r=i.match(/choo\.emit\('(.*)'\)/)[1];if(r==="render"||r==="DOMContentLoaded")return;var s=i.match(/\[(\d+)\]/)[1],a=t.buffer.events[s];t.buffer.events[s]=null,n(r,a,e)}}var l=t.buffer.render;if(l.render&&l.route&&l.morph){var h=t.listeners.render;if(!h)return;for(var p={};t.buffer.render.length;){var d=t.buffer.render.pop(),m=d.name;/choo\.render/.test(m)?p.render=d:/choo\.morph/.test(m)?p.morph=d:p.route=d}l.render=l.route=l.morph=void 0,h(p)}}}),this.emitter.on("*",function(e,i,n){var r=/^log:(\w{4,5})/.exec(e);if(!t.hasPerformance&&e==="render"){var s=t.listeners.render;s&&s()}else if(e==="DOMContentLoaded")t._emitLoaded();else if(r){r=r[1];var a=t.listeners["log:"+r];a&&a.apply(null,Array.prototype.slice.call(arguments,0,arguments.length-1))}else if(t.emitter.listeners(e).length)e!=="render"&&t.hasPerformance&&(t.buffer.events[n]=i);else{var l=t.listeners.unhandled;l&&l(e,i)}})};ga.prototype._emitLoaded=function(){var t=this;$A.push(function(){var i=t.listeners.DOMContentLoaded,n=t.hasWindow&&window.performance&&window.performance.timing;i&&n&&i({interactive:n.domInteractive-n.navigationStart,loaded:n.domContentLoadedEventEnd-n.navigationStart})})};var XA=Lu(),e2=l0,t2=qA,i2=n2;function n2(t,e,i){var n=!0,r=t2(e),s=e2("choo");r.on("log:debug",a("debug")),r.on("log:info",a("info")),r.on("log:warn",a("warn")),r.on("log:error",a("error")),r.on("log:fatal",a("fatal")),r.on("event",function(l,h,p){if(!(i.filter&&!i.filter(l,h,p)))if(p){var d=p.duration.toFixed(),m=d<50?"info":"warn";h!==void 0?a(m)(l,h,d+"ms"):a(m)(l,d+"ms")}else h!==void 0?a("info")(l,h):a("info")(l)}),r.on("unhandled",function(l,h){a("error")("No listeners for "+l)}),r.on("DOMContentLoaded",function(l){if(!l)return a("info")("DOMContentLoaded");var h=l.interactive<1e3?"info":"warn";a(h)("DOMContentLoaded",l.interactive+"ms to interactive")}),r.on("render",function(l){if(!l||!l.render)return a("info")("render");var h=l.render.duration.toFixed(),p="render";n&&(n=!1,p="initial "+p);var d=Math.min((600/h).toFixed(),60);if(d===60)a("info")(p,d+"fps",h+"ms");else{var m={render:l.render.duration.toFixed()+"ms"};l.morph&&(m.morph=l.morph.duration.toFixed()+"ms"),a("warn")(p,d+"fps",h+"ms",m)}}),r.on("resource-timing-buffer-full",function(){a("error")("The browser's Resource Resource timing buffer is full. Cannot store any more timing information")}),r.start();function a(l){return function(){for(var h=[],p=0,d=arguments.length;p<d;p++)h.push(arguments[p]);XA.push(function(){s[l].apply(s,h)})}}}var gw=kf,r2=s2;function s2(t,e){return gw.equal(typeof t,"object","object-change-callsite: target should be type object"),gw.equal(typeof e,"function","object-change-callsite: callback should be type function"),new Proxy(t,{set:function(i,n,r){var s=new Error,a=mw(s.stack);return e(n,r,a),i[n]=r,!0},deleteProperty:function(i,n){var r=new Error,s=mw(r.stack);return e(n,void 0,s),n in i?(delete i[n],!0):!1}})}function mw(t){var e=t.split(`
`);return e=e.length>2?e.slice(2):e,e[0]=e[0].replace(/^ {4}at /,""),`
`+e.join(`
`)}var o2=r2,a2=l0,l2=kf,Yp="Debugging enabled. To disable run: `choo.debug = false`",u2="Debugging disabled. We hope it was helpful! 🙌",h2=c2;function c2(t,e,i,n){var r=a2("choo-devtools"),s=window.localStorage.logLevel==="debug";s&&r.info(Yp),t=o2(t,function(a,l,h){s&&(h=h.split(`
`)[1].replace(/^ +/,""),r.info("state."+a,l,`
`+h))}),i.state=t,Object.defineProperty(window.choo,"debug",{get:function(){return window.localStorage.logLevel="debug",n.emit("debug",!0),s=!0,Yp},set:function(a){l2.equal(typeof a,"boolean","choo-devtools.debug: bool should be type boolean"),window.localStorage.logLevel=a?"debug":"info",s=a,n.emit("debug",s),s?r.info(Yp):r.info(u2)}})}var Hx=uu;uu.default=uu;uu.stable=$x;uu.stableStringify=$x;var Nc="[...]",Qx="[Circular]",ao=[],eo=[];function Yx(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function uu(t,e,i,n){typeof n>"u"&&(n=Yx()),kg(t,"",0,[],void 0,0,n);var r;try{eo.length===0?r=JSON.stringify(t,e,i):r=JSON.stringify(t,Zx(e),i)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ao.length!==0;){var s=ao.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return r}function oa(t,e,i,n){var r=Object.getOwnPropertyDescriptor(n,i);r.get!==void 0?r.configurable?(Object.defineProperty(n,i,{value:t}),ao.push([n,i,e,r])):eo.push([e,i,t]):(n[i]=t,ao.push([n,i,e]))}function kg(t,e,i,n,r,s,a){s+=1;var l;if(typeof t=="object"&&t!==null){for(l=0;l<n.length;l++)if(n[l]===t){oa(Qx,t,e,r);return}if(typeof a.depthLimit<"u"&&s>a.depthLimit){oa(Nc,t,e,r);return}if(typeof a.edgesLimit<"u"&&i+1>a.edgesLimit){oa(Nc,t,e,r);return}if(n.push(t),Array.isArray(t))for(l=0;l<t.length;l++)kg(t[l],l,l,n,t,s,a);else{var h=Object.keys(t);for(l=0;l<h.length;l++){var p=h[l];kg(t[p],p,l,n,t,s,a)}}n.pop()}}function f2(t,e){return t<e?-1:t>e?1:0}function $x(t,e,i,n){typeof n>"u"&&(n=Yx());var r=Tg(t,"",0,[],void 0,0,n)||t,s;try{eo.length===0?s=JSON.stringify(r,e,i):s=JSON.stringify(r,Zx(e),i)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ao.length!==0;){var a=ao.pop();a.length===4?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return s}function Tg(t,e,i,n,r,s,a){s+=1;var l;if(typeof t=="object"&&t!==null){for(l=0;l<n.length;l++)if(n[l]===t){oa(Qx,t,e,r);return}try{if(typeof t.toJSON=="function")return}catch{return}if(typeof a.depthLimit<"u"&&s>a.depthLimit){oa(Nc,t,e,r);return}if(typeof a.edgesLimit<"u"&&i+1>a.edgesLimit){oa(Nc,t,e,r);return}if(n.push(t),Array.isArray(t))for(l=0;l<t.length;l++)Tg(t[l],l,l,n,t,s,a);else{var h={},p=Object.keys(t).sort(f2);for(l=0;l<p.length;l++){var d=p[l];Tg(t[d],d,l,n,t,s,a),h[d]=t[d]}if(typeof r<"u")ao.push([r,e,t]),r[e]=h;else return h}n.pop()}}function Zx(t){return t=typeof t<"u"?t:function(e,i){return i},function(e,i){if(eo.length>0)for(var n=0;n<eo.length;n++){var r=eo[n];if(r[1]===e&&r[0]===i){i=r[2],eo.splice(n,1);break}}return t.call(this,e,i)}}/*! clipboard-copy. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var p2=d2;function d2(t){if(navigator.clipboard)return navigator.clipboard.writeText(t).catch(function(s){throw s!==void 0?s:new DOMException("The request is not allowed","NotAllowedError")});var e=document.createElement("span");e.textContent=t,e.style.whiteSpace="pre",e.style.webkitUserSelect="auto",e.style.userSelect="all",document.body.appendChild(e);var i=window.getSelection(),n=window.document.createRange();i.removeAllRanges(),n.selectNode(e),i.addRange(n);var r=!1;try{r=window.document.execCommand("copy")}catch(s){console.log("error",s)}return i.removeAllRanges(),window.document.body.removeChild(e),r?Promise.resolve():Promise.reject(new DOMException("The request is not allowed","NotAllowedError"))}var g2=Hx,m2=p2;function y2(t){try{return JSON.stringify(t)}catch{}}function v2(t){var e=y2(t)||g2(t);m2(e)}var w2=v2,_2=b2;function b2(t,e){return arguments.length>=2?yw(t)(e):yw(t)}function yw(t){if(t=typeof t=="string"?String(t).trim().split("."):t,t.length<2)return t=t[0],i;var e=t.length;return n;function i(r){return r[t]}function n(r){for(var s=0;s<e&&!(typeof r>"u");s++)r=r[t[s]];return r}}var x2=w2,S2=_2,C2=M2;function M2(t){var e=t&&typeof t=="string",i=e&&arguments.length===1&&t.indexOf("state.")===0;(!t||typeof t=="function")&&(t=window.choo.state),i&&[].push.call(arguments,{state:window.choo.state}),x2(e?S2.apply(this,arguments):t)}var k2=T2;function T2(){Object.defineProperty(window.choo,"help",{get:t,set:E2});function t(){return setTimeout(function(){Yn("copy","Serialize the current state to the clipboard."),Yn("debug","Enable Choo debug mode."),Yn("emit","Emit an event in the Choo emitter."),Yn("help","Print usage information."),Yn("log","Print the last 150 events emitted."),Yn("on","Listen for an event in the Choo emitter."),Yn("once","Listen for an event once in the Choo emitter."),Yn("perf","Print out performance metrics"),Yn("state","Print the Choo state object."),Yn("storage","Print browser storage information.")},0),"Choo command overview"}}function Yn(t,e){var i="#cc99cc";console.log("  %cchoo."+t,"color: "+i,"— "+e)}function E2(){}var A2=zx,R2="█",L2=O2;function O2(t,e,i,n){var r={};window.choo.perf={};var s=new Gl(r,"all");Object.defineProperty(window.choo.perf,"all",{get:s.get.bind(s),set:kh});var a=new Gl(r,"core",function(p){return/^choo/.test(p)});Object.defineProperty(window.choo.perf,"core",{get:a.get.bind(a),set:kh});var l=new Gl(r,"components",function(p){return!/^choo/.test(p)&&!/^bankai/.test(p)});Object.defineProperty(window.choo.perf,"components",{get:l.get.bind(l),set:kh});var h=new Gl(r,"events",function(p){return/^choo\.emit/.test(p)},function(p){return p.replace(/^choo\.emit\('/,"").replace(/'\)$/,"")});Object.defineProperty(window.choo.perf,"events",{get:h.get.bind(h),set:kh}),A2(function(p){if(p.entryType==="measure"){var d=p.name.replace(/ .*$/,"");r[d]||(r[d]={name:d,count:0,entries:[]});var m=r[d];m.count+=1,m.entries.push(p.duration)}})}function Gl(t,e,i,n){this.stats=t,this.name=e,this.filter=i||function(){return!0},this.rename=n||function(r){return r}}Gl.prototype.get=function(){var t=Object.keys(this.stats).filter(this.filter),e=this,i=0,n=0,r=t.map(function(h){var p=e.stats[h],d=Number(p.entries.reduce(function(v,S){return v+S},0).toFixed(2));d>i&&(i=d);var m=N2(p.entries);m>n&&(n=m);var y=e.rename(p.name);return new I2(y,d,m,p.count)}),s=10;r.forEach(function(h){var p=h["Total Time (ms)"],d=h["Median (ms)"];h[" "]=a(p/i*100/s),h["  "]=a(d/n*100/s)});function a(h){for(var p="",d=0,m=Math.round(h);d<m;d++)p+=R2;return p}var l=r.sort(function(h,p){return p["Total Time (ms)"]-h["Total Time (ms)"]});return console.table(l),"Showing performance events for '"+this.name+"'"};function I2(t,e,i,n){this.Name=t,this["Total Time (ms)"]=e,this[" "]=0,this["Median (ms)"]=i,this["  "]=0,this["Total Count"]=n}function N2(t){if(!t.length)return 0;var e=t.slice(0).sort(function(s,a){return s-a}),i=Math.floor(e.length/2),n=e.length%2===0,r=n?(e[i]+e[i-1])/2:e[i];return Number(r.toFixed(2))}function kh(){}function D2(t,e,i){var n,r=t.length;if(!(e>=r||i<=0||e<0)){i=e+i>r?r-e:i;var s=r-i;for(n=e;n<s;++n)t[n]=t[n+i];t.length=s}}const B2=Object.freeze(Object.defineProperty({__proto__:null,default:D2},Symbol.toStringTag,{value:"Module"})),U2=Ex(B2);var $p={exports:{}},vw;function J2(){return vw||(vw=1,function(t){var e=function(){function i(y,v){return v!=null&&y instanceof v}var n;try{n=Map}catch{n=function(){}}var r;try{r=Set}catch{r=function(){}}var s;try{s=Promise}catch{s=function(){}}function a(y,v,S,M,b){typeof v=="object"&&(S=v.depth,M=v.prototype,b=v.includeNonEnumerable,v=v.circular);var w=[],E=[],B=typeof Buffer<"u";typeof v>"u"&&(v=!0),typeof S>"u"&&(S=1/0);function L(I,O){if(I===null)return null;if(O===0)return I;var F,U;if(typeof I!="object")return I;if(i(I,n))F=new n;else if(i(I,r))F=new r;else if(i(I,s))F=new s(function(W,$){I.then(function(ne){W(L(ne,O-1))},function(ne){$(L(ne,O-1))})});else if(a.__isArray(I))F=[];else if(a.__isRegExp(I))F=new RegExp(I.source,m(I)),I.lastIndex&&(F.lastIndex=I.lastIndex);else if(a.__isDate(I))F=new Date(I.getTime());else{if(B&&Buffer.isBuffer(I))return Buffer.allocUnsafe?F=Buffer.allocUnsafe(I.length):F=new Buffer(I.length),I.copy(F),F;i(I,Error)?F=Object.create(I):typeof M>"u"?(U=Object.getPrototypeOf(I),F=Object.create(U)):(F=Object.create(M),U=M)}if(v){var V=w.indexOf(I);if(V!=-1)return E[V];w.push(I),E.push(F)}i(I,n)&&I.forEach(function(W,$){var ne=L($,O-1),we=L(W,O-1);F.set(ne,we)}),i(I,r)&&I.forEach(function(W){var $=L(W,O-1);F.add($)});for(var A in I){var Q;U&&(Q=Object.getOwnPropertyDescriptor(U,A)),!(Q&&Q.set==null)&&(F[A]=L(I[A],O-1))}if(Object.getOwnPropertySymbols)for(var H=Object.getOwnPropertySymbols(I),A=0;A<H.length;A++){var re=H[A],le=Object.getOwnPropertyDescriptor(I,re);le&&!le.enumerable&&!b||(F[re]=L(I[re],O-1),le.enumerable||Object.defineProperty(F,re,{enumerable:!1}))}if(b)for(var q=Object.getOwnPropertyNames(I),A=0;A<q.length;A++){var Z=q[A],le=Object.getOwnPropertyDescriptor(I,Z);le&&le.enumerable||(F[Z]=L(I[Z],O-1),Object.defineProperty(F,Z,{enumerable:!1}))}return F}return L(y,S)}a.clonePrototype=function(v){if(v===null)return null;var S=function(){};return S.prototype=v,new S};function l(y){return Object.prototype.toString.call(y)}a.__objToStr=l;function h(y){return typeof y=="object"&&l(y)==="[object Date]"}a.__isDate=h;function p(y){return typeof y=="object"&&l(y)==="[object Array]"}a.__isArray=p;function d(y){return typeof y=="object"&&l(y)==="[object RegExp]"}a.__isRegExp=d;function m(y){var v="";return y.global&&(v+="g"),y.ignoreCase&&(v+="i"),y.multiline&&(v+="m"),v}return a.__getRegExpFlags=m,a}();t.exports&&(t.exports=e)}($p)),$p.exports}var P2=U2,F2=Lu(),j2=l0,W2=j2("choo"),G2=J2(),Zp=150,V2=K2;function K2(t,e,i,n){var r=window.localStorage.logLevel==="debug",s=[],a=0,l=!0;n.on("debug",function(m){r=m}),window.choo._history=s,window.choo.history=h,Object.defineProperty(window.choo,"log",{get:h,set:ww}),Object.defineProperty(window.choo,"history",{get:h,set:ww}),e.on("*",function(m,y){a+=1;var v=new p(m,y,t);s.push(v),F2.push(function(){var S=s.length;S>Zp&&P2(s,0,S-Zp)})});function h(){setTimeout(function(){console.table(s)},0);var m=a===1?"event":"events",y=a+" "+m+" recorded, showing the last "+Zp+".";return r===!1?y+=" Enable state capture by calling `choo.debug`.":y+=" Disable state capture by calling `choo.debug = false`.",y}function p(m,y,v){this.name=m,this.data=y===void 0?"<no data>":y,this.state=r?d(v):"<disabled>"}function d(m){try{var y=G2(m);return l||(l=!0),y}catch{return l&&(W2.warn("Could not clone your app state. Make sure to have a serializable state so it can be cloned"),l=!1),"<unserializable>"}}}function ww(){}var _w=$i,z2=H2,qx=function(t,e){var i=e||"/",n={},r=t.nodes;return Object.keys(r).forEach(function(s){var a=(i==="/"?i:i+"/")+(s==="$$"?":"+t.name:s),l=r[s].cb;if(l!==void 0&&(n[a]=l),Object.keys(r[s].nodes).length!==0){var h=qx(r[s],a);Object.keys(h).forEach(function(p){n[p]=h[p]})}}),n};function H2(t){_w.equal(typeof t,"function","wayfarer.getAllRoutes: router should be an function");var e=t._trie;_w.equal(typeof e,"object","wayfarer.getAllRoutes: trie should be an object");var i=e.trie;return qx(i)}var Q2=Mf.EventEmitter,Y2=wA,$2=i2,Z2=h2,q2=C2,X2=k2,eR=L2,tR=V2,iR=z2,nR=rR;function rR(t){return t=t||{},e.storeName="choo-devtools",e;function e(i,n,r){var s=new Q2;typeof window<"u"&&$2(i,n,t),n.on("DOMContentLoaded",function(){typeof window>"u"||(window.choo={},window.choo.state=i,window.choo.emit=function(){n.emit.apply(n,arguments)},window.choo.on=function(a,l){n.on(a,l)},Z2(i,n,r,s),tR(i,n,r,s),eR(),window.choo.copy=q2,r.router&&r.router.router&&(window.choo.routes=Object.keys(iR(r.router.router))),Y2(),X2())})}}const sR=ln(nR);var oR=aR;function aR(t,e){if(t)try{var i=document.querySelector(t);i&&i.scrollIntoView(e)}catch{}}var lR=uR;function uR(t){if(typeof document>"u")throw new Error("document-ready only runs in the browser");var e=document.readyState;if(e==="complete"||e==="interactive")return setTimeout(t,0);document.addEventListener("DOMContentLoaded",function(){t()})}var Xx=Lu(),hR=$i,ts;Tf.disabled=!0;try{ts=window.performance,Tf.disabled=window.localStorage.DISABLE_NANOTIMING==="true"||!ts.mark}catch{}var u0=Tf;function Tf(t){if(hR.equal(typeof t,"string","nanotiming: name should be type string"),Tf.disabled)return cR;var e=(ts.now()*1e4).toFixed()%Number.MAX_SAFE_INTEGER,i="start-"+e+"-"+t;ts.mark(i);function n(r){var s="end-"+e+"-"+t;ts.mark(s),Xx.push(function(){var a=null;try{var l=t+" ["+e+"]";ts.measure(l,i,s),ts.clearMarks(i),ts.clearMarks(s)}catch(h){a=h}r&&r(a,t)})}return n.uuid=e,n}function cR(t){t&&Xx.push(function(){t(new Error("nanotiming: performance API unavailable"))})}var Dc=$i,fR=ma;function ma(){if(!(this instanceof ma))return new ma;this.trie={nodes:{}}}ma.prototype.create=function(t){Dc.equal(typeof t,"string","route should be a string");var e=t.replace(/^\//,"").split("/");function i(n,r){var s=vc(e,n)&&e[n];if(s===!1)return r;var a=null;return/^:|^\*/.test(s)?(vc(r.nodes,"$$")?a=r.nodes.$$:(a={nodes:{}},r.nodes.$$=a),s[0]==="*"&&(r.wildcard=!0),r.name=s.replace(/^:|^\*/,"")):vc(r.nodes,s)?a=r.nodes[s]:(a={nodes:{}},r.nodes[s]=a),i(n+1,a)}return i(0,this.trie)};ma.prototype.match=function(t){Dc.equal(typeof t,"string","route should be a string");var e=t.replace(/^\//,"").split("/"),i={};function n(s,a){if(a!==void 0){var l=e[s];if(l===void 0)return a;if(vc(a.nodes,l))return n(s+1,a.nodes[l]);if(a.name){try{i[a.name]=decodeURIComponent(l)}catch{return n(s,void 0)}return n(s+1,a.nodes.$$)}else if(a.wildcard){try{i.wildcard=decodeURIComponent(e.slice(s).join("/"))}catch{return n(s,void 0)}return a.nodes.$$}else return n(s+1)}}var r=n(0,this.trie);if(r)return r=Object.assign({},r),r.params=i,r};ma.prototype.mount=function(t,e){Dc.equal(typeof t,"string","route should be a string"),Dc.equal(typeof e,"object","trie should be a object");var i=t.replace(/^\//,"").split("/"),n=null,r=null;if(i.length===1)r=i[0],n=this.create(r);else{var s=i.join("/");r=i[0],n=this.create(s)}Object.assign(n.nodes,e.nodes),e.name&&(n.name=e.name),n.nodes[""]&&(Object.keys(n.nodes[""]).forEach(function(a){a!=="nodes"&&(n[a]=n.nodes[""][a])}),Object.assign(n.nodes,n.nodes[""].nodes),delete n.nodes[""].nodes)};function vc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var qp=$i,pR=fR,dR=Eg;function Eg(t){if(!(this instanceof Eg))return new Eg(t);var e=(t||"").replace(/^\//,""),i=pR();return r._trie=i,r.on=n,r.emit=r,r.match=s,r._wayfarer=!0,r;function n(l,h){if(qp.equal(typeof l,"string"),qp.equal(typeof h,"function"),l=l||"/",h._wayfarer&&h._trie)i.mount(l,h._trie.trie);else{var p=i.create(l);p.cb=h,p.route=l}return r}function r(l){var h=s(l),p=new Array(arguments.length);p[0]=h.params;for(var d=1;d<p.length;d++)p[d]=arguments[d];return h.cb.apply(h.cb,p)}function s(l){qp.notEqual(l,void 0,"'route' must be defined");var h=i.match(l);if(h&&h.cb)return new a(h);var p=i.match(e);if(p&&p.cb)return new a(p);throw new Error("route '"+l+"' did not match")}function a(l){this.cb=l.cb,this.route=l.route,this.params=l.params}}var h0=$i,gR=dR,eS=/file:\/\//.test(typeof window=="object"&&window.location&&window.location.origin),mR="^(file://|/)(.*.html?/?)?",yR="^(http(s)?(://))?(www.)?",vR="[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?",wR="[?].*$",_R=new RegExp(mR),bR=new RegExp(yR+vR),xR=new RegExp("#"),SR=new RegExp(wR),CR=ya;function ya(t){if(!(this instanceof ya))return new ya(t);t=t||{},this.router=gR(t.default||"/404")}ya.prototype.on=function(t,e){h0.equal(typeof t,"string"),t=t.replace(/^[#/]/,""),this.router.on(t,e)};ya.prototype.emit=function(t){return h0.equal(typeof t,"string"),t=tS(t,eS),this.router.emit(t)};ya.prototype.match=function(t){return h0.equal(typeof t,"string"),t=tS(t,eS),this.router.match(t)};function tS(t,e){return e?t=t.replace(_R,""):t=t.replace(bR,""),decodeURI(t.replace(SR,"").replace(xR,"/"))}var MR=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","onanimationend","onanimationiteration","onanimationstart","oncontextmenu","onfocusin","onfocusout"],iS=MR,kR=iS.length,TR=1,ER=3,AR=8,RR=LR;function LR(t,e){var i=t.nodeType,n=t.nodeName;i===TR&&OR(t,e),(i===ER||i===AR)&&e.nodeValue!==t.nodeValue&&(e.nodeValue=t.nodeValue),n==="INPUT"?DR(t,e):n==="OPTION"?NR(t,e):n==="TEXTAREA"&&BR(t,e),IR(t,e)}function OR(t,e){for(var i=e.attributes,n=t.attributes,r=null,s=null,a=null,l=null,h=null,p=n.length-1;p>=0;--p)h=n[p],l=h.name,r=h.namespaceURI,s=h.value,r?(l=h.localName||l,a=e.getAttributeNS(r,l),a!==s&&e.setAttributeNS(r,l,s)):e.hasAttribute(l)?(a=e.getAttribute(l),a!==s&&(s==="null"||s==="undefined"?e.removeAttribute(l):e.setAttribute(l,s))):e.setAttribute(l,s);for(var d=i.length-1;d>=0;--d)h=i[d],h.specified!==!1&&(l=h.name,r=h.namespaceURI,r?(l=h.localName||l,t.hasAttributeNS(r,l)||e.removeAttributeNS(r,l)):t.hasAttributeNS(null,l)||e.removeAttribute(l))}function IR(t,e){for(var i=0;i<kR;i++){var n=iS[i];t[n]?e[n]=t[n]:e[n]&&(e[n]=void 0)}}function NR(t,e){Ag(t,e,"selected")}function DR(t,e){var i=t.value,n=e.value;Ag(t,e,"checked"),Ag(t,e,"disabled"),t.indeterminate!==e.indeterminate&&(e.indeterminate=t.indeterminate),e.type!=="file"&&(i!==n&&(e.setAttribute("value",i),e.value=i),i==="null"&&(e.value="",e.removeAttribute("value")),t.hasAttributeNS(null,"value")?e.type==="range"&&(e.value=i):e.removeAttribute("value"))}function BR(t,e){var i=t.value;if(i!==e.value&&(e.value=i),e.firstChild&&e.firstChild.nodeValue!==i){if(i===""&&e.firstChild.nodeValue===e.placeholder)return;e.firstChild.nodeValue=i}}function Ag(t,e,i){t[i]!==e[i]&&(e[i]=t[i],t[i]?e.setAttribute(i,""):e.removeAttribute(i))}var Xp=$i,UR=RR,JR=3,nS=PR;function PR(t,e,i){return Xp.equal(typeof t,"object","nanomorph: oldTree should be an object"),Xp.equal(typeof e,"object","nanomorph: newTree should be an object"),i&&i.childrenOnly?(rS(e,t),t):(Xp.notEqual(e.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),wc(e,t))}function wc(t,e){return e?t?t.isSameNode&&t.isSameNode(e)?e:t.tagName!==e.tagName||bw(t)!==bw(e)?t:(UR(t,e),rS(t,e),e):null:t}function bw(t){return t.dataset?t.dataset.nanomorphComponentId:void 0}function rS(t,e){for(var i,n,r,s,a=0,l=0;i=e.childNodes[l],n=t.childNodes[l-a],!(!i&&!n);l++)if(!n)e.removeChild(i),l--;else if(!i)e.appendChild(n),a++;else if(xw(n,i))r=wc(n,i),r!==i&&(e.replaceChild(r,i),a++);else{s=null;for(var h=l;h<e.childNodes.length;h++)if(xw(e.childNodes[h],n)){s=e.childNodes[h];break}s?(r=wc(n,s),r!==s&&a++,e.insertBefore(r,i)):!n.id&&!i.id?(r=wc(n,i),r!==i&&(e.replaceChild(r,i),a++)):(e.insertBefore(n,i),a++)}}function xw(t,e){return t.id?t.id===e.id:t.isSameNode?t.isSameNode(e):t.tagName!==e.tagName?!1:t.type===JR?t.nodeValue===e.nodeValue:!1}var FR=/([^?=&]+)(=([^&]*))?/g,jR=$i,WR=GR;function GR(t){jR.equal(typeof t,"string","nanoquery: url should be type string");var e={};return t.replace(/^.*\?/,"").replace(FR,function(i,n,r,s){var a=decodeURIComponent(s),l=decodeURIComponent(n);e.hasOwnProperty(l)?Array.isArray(e[l])?e[l].push(a):e[l]=[e[l],a]:e[l]=a}),e}var ed=$i,VR=/(noopener|noreferrer) (noopener|noreferrer)/,KR=/^[\w-_]+:/,zR=HR;function HR(t,e){ed.notEqual(typeof window,"undefined","nanohref: expected window to exist"),e=e||window.document,ed.equal(typeof t,"function","nanohref: cb should be type function"),ed.equal(typeof e,"object","nanohref: root should be type object"),window.addEventListener("click",function(i){if(!(i.button&&i.button!==0||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey||i.defaultPrevented)){var n=function r(s){if(!(!s||s===e))return s.localName!=="a"||s.href===void 0?r(s.parentNode):s}(i.target);n&&(window.location.protocol!==n.protocol||window.location.hostname!==n.hostname||window.location.port!==n.port||n.hasAttribute("data-nanohref-ignore")||n.hasAttribute("download")||n.getAttribute("target")==="_blank"&&VR.test(n.getAttribute("rel"))||KR.test(n.getAttribute("href"))||(i.preventDefault(),t(n)))}})}var Sw=$i,QR=YR;function YR(t,e){Sw.equal(typeof t,"function","nanoraf: render should be a function"),Sw.ok(typeof e=="function"||typeof e>"u","nanoraf: raf should be a function or undefined"),e||(e=window.requestAnimationFrame);var i=!1,n=null;return function(){n===null&&!i&&(i=!0,e(function(){i=!1;for(var a=n.length,l=new Array(a),h=0;h<a;h++)l[h]=n[h];t.apply(t,l),n=null})),n=arguments}}var $R=function(e,i,n){var r,s=e.length;if(!(i>=s||n===0)){n=i+n>s?s-i:n;var a=s-n;for(r=i;r<a;++r)e[r]=e[r+n];e.length=a}},ZR=$R,qR=u0,Fn=$i,sS=an;function an(t){if(!(this instanceof an))return new an(t);this._name=t||"nanobus",this._starListeners=[],this._listeners={}}an.prototype.emit=function(t){Fn.ok(typeof t=="string"||typeof t=="symbol","nanobus.emit: eventName should be type string or symbol");for(var e=[],i=1,n=arguments.length;i<n;i++)e.push(arguments[i]);var r=qR(this._name+"('"+t.toString()+"')"),s=this._listeners[t];return s&&s.length>0&&this._emit(this._listeners[t],e),this._starListeners.length>0&&this._emit(this._starListeners,t,e,r.uuid),r(),this};an.prototype.on=an.prototype.addListener=function(t,e){return Fn.ok(typeof t=="string"||typeof t=="symbol","nanobus.on: eventName should be type string or symbol"),Fn.equal(typeof e,"function","nanobus.on: listener should be type function"),t==="*"?this._starListeners.push(e):(this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)),this};an.prototype.prependListener=function(t,e){return Fn.ok(typeof t=="string"||typeof t=="symbol","nanobus.prependListener: eventName should be type string or symbol"),Fn.equal(typeof e,"function","nanobus.prependListener: listener should be type function"),t==="*"?this._starListeners.unshift(e):(this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].unshift(e)),this};an.prototype.once=function(t,e){Fn.ok(typeof t=="string"||typeof t=="symbol","nanobus.once: eventName should be type string or symbol"),Fn.equal(typeof e,"function","nanobus.once: listener should be type function");var i=this;this.on(t,n);function n(){e.apply(i,arguments),i.removeListener(t,n)}return this};an.prototype.prependOnceListener=function(t,e){Fn.ok(typeof t=="string"||typeof t=="symbol","nanobus.prependOnceListener: eventName should be type string or symbol"),Fn.equal(typeof e,"function","nanobus.prependOnceListener: listener should be type function");var i=this;this.prependListener(t,n);function n(){e.apply(i,arguments),i.removeListener(t,n)}return this};an.prototype.removeListener=function(t,e){if(Fn.ok(typeof t=="string"||typeof t=="symbol","nanobus.removeListener: eventName should be type string or symbol"),Fn.equal(typeof e,"function","nanobus.removeListener: listener should be type function"),t==="*")return this._starListeners=this._starListeners.slice(),i(this._starListeners,e);return typeof this._listeners[t]<"u"&&(this._listeners[t]=this._listeners[t].slice()),i(this._listeners[t],e);function i(n,r){if(n){var s=n.indexOf(r);if(s!==-1)return ZR(n,s,1),!0}}};an.prototype.removeAllListeners=function(t){return t?t==="*"?this._starListeners=[]:this._listeners[t]=[]:(this._starListeners=[],this._listeners={}),this};an.prototype.listeners=function(t){var e=t!=="*"?this._listeners[t]:this._starListeners,i=[];if(e)for(var n=e.length,r=0;r<n;r++)i.push(e[r]);return i};an.prototype._emit=function(t,e,i,n){if(!(typeof t>"u")&&t.length!==0){i===void 0&&(i=e,e=null),e&&(n!==void 0?i=[e].concat(i,n):i=[e].concat(i));for(var r=t.length,s=0;s<r;s++){var a=t[s];a.apply(a,i)}}};const XR=ln(sS);var eL=_n;function _n(t){if(!(this instanceof _n))return new _n(t);typeof t=="number"&&(t={max:t}),t||(t={}),this.cache={},this.head=this.tail=null,this.length=0,this.max=t.max||1e3,this.maxAge=t.maxAge||0}Object.defineProperty(_n.prototype,"keys",{get:function(){return Object.keys(this.cache)}});_n.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};_n.prototype.remove=function(t){if(typeof t!="string"&&(t=""+t),!!this.cache.hasOwnProperty(t)){var e=this.cache[t];return delete this.cache[t],this._unlink(t,e.prev,e.next),e.value}};_n.prototype._unlink=function(t,e,i){this.length--,this.length===0?this.head=this.tail=null:this.head===t?(this.head=e,this.cache[this.head].next=null):this.tail===t?(this.tail=i,this.cache[this.tail].prev=null):(this.cache[e].next=i,this.cache[i].prev=e)};_n.prototype.peek=function(t){if(this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return e.value}};_n.prototype.set=function(t,e){typeof t!="string"&&(t=""+t);var i;if(this.cache.hasOwnProperty(t)){if(i=this.cache[t],i.value=e,this.maxAge&&(i.modified=Date.now()),t===this.head)return e;this._unlink(t,i.prev,i.next)}else i={value:e,modified:0,next:null,prev:null},this.maxAge&&(i.modified=Date.now()),this.cache[t]=i,this.length===this.max&&this.evict();return this.length++,i.next=null,i.prev=this.head,this.head&&(this.cache[this.head].next=t),this.head=t,this.tail||(this.tail=t),e};_n.prototype._checkAge=function(t,e){return this.maxAge&&Date.now()-e.modified>this.maxAge?(this.remove(t),!1):!0};_n.prototype.get=function(t){if(typeof t!="string"&&(t=""+t),!!this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return this.head!==t&&(t===this.tail?(this.tail=e.next,this.cache[this.tail].prev=null):this.cache[e.prev].next=e.next,this.cache[e.next].prev=e.prev,this.cache[this.head].next=t,e.prev=this.head,e.next=null,this.head=t),e.value}};_n.prototype.evict=function(){this.tail&&this.remove(this.tail)};var eu=$i,Cw=eL,tL=c0;function c0(t,e,i){eu.ok(this instanceof c0,"ChooComponentCache should be created with `new`"),eu.equal(typeof t,"object","ChooComponentCache: state should be type object"),eu.equal(typeof e,"function","ChooComponentCache: emit should be type function"),typeof i=="number"?this.cache=new Cw(i):this.cache=i||new Cw(100),this.state=t,this.emit=e}c0.prototype.render=function(t,e){eu.equal(typeof t,"function","ChooComponentCache.render: Component should be type function"),eu.ok(typeof e=="string"||typeof e=="number","ChooComponentCache.render: id should be type string or type number");var i=this.cache.get(e);if(!i){for(var n=[],r=2,s=arguments.length;r<s;r++)n.push(arguments[r]);n.unshift(t,e,this.state,this.emit),i=Mw.apply(Mw,n),this.cache.set(e,i)}return i};function Mw(t){return new(t.bind.apply(t,arguments))}var kw=oR,oS=lR,fr=u0,iL=CR,aS=nS,nL=WR,rL=zR,sL=QR,oL=sS,Vt=$i,aL=tL,lL=jn,Tw={};function jn(t){var e=fr("choo.constructor");if(!(this instanceof jn))return new jn(t);t=t||{},Vt.equal(typeof t,"object","choo: opts should be type object");var i=this;this._events={DOMCONTENTLOADED:"DOMContentLoaded",DOMTITLECHANGE:"DOMTitleChange",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=t.history===void 0?!0:t.history,this._hrefEnabled=t.href===void 0?!0:t.href,this._hashEnabled=t.hash===void 0?!1:t.hash,this._hasWindow=typeof window<"u",this._cache=t.cache,this._loaded=!1,this._stores=[r],this._tree=null;var n={events:this._events,components:{}};this._hasWindow?(this.state=window.initialState?Object.assign({},window.initialState,n):n,delete window.initialState):this.state=n,this.router=iL({curry:!0}),this.emitter=oL("choo.emit"),this.emit=this.emitter.emit.bind(this.emitter),this._hasWindow&&(this.state.title=document.title);function r(s){i.emitter.prependListener(i._events.DOMTITLECHANGE,function(a){Vt.equal(typeof a,"string","events.DOMTitleChange: title should be type string"),s.title=a,i._hasWindow&&(document.title=a)})}e()}jn.prototype.route=function(t,e){var i=fr("choo.route('"+t+"')");Vt.equal(typeof t,"string","choo.route: route should be type string"),Vt.equal(typeof e,"function","choo.handler: route should be type function"),this.router.on(t,e),i()};jn.prototype.use=function(t){Vt.equal(typeof t,"function","choo.use: cb should be type function");var e=this;this._stores.push(function(i){var n="choo.use";n=t.storeName?n+"("+t.storeName+")":n;var r=fr(n);t(i,e.emitter,e),r()})};jn.prototype.start=function(){Vt.equal(typeof window,"object","choo.start: window was not found. .start() must be called in a browser, use .toString() if running in Node");var t=fr("choo.start"),e=this;return this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){e._matchRoute(e.state),e._loaded&&(e.emitter.emit(e._events.RENDER),setTimeout(kw.bind(null,window.location.hash),0))}),this.emitter.prependListener(this._events.POPSTATE,function(){e.emitter.emit(e._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(i){Vt.equal(typeof i,"string","events.pushState: href should be type string"),window.history.pushState(Tw,null,i),e.emitter.emit(e._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(i){Vt.equal(typeof i,"string","events.replaceState: href should be type string"),window.history.replaceState(Tw,null,i),e.emitter.emit(e._events.NAVIGATE)}),window.onpopstate=function(){e.emitter.emit(e._events.POPSTATE)},e._hrefEnabled&&rL(function(i){var n=i.href,r=i.hash;if(n===window.location.href){!e._hashEnabled&&r&&kw(r);return}e.emitter.emit(e._events.PUSHSTATE,n)})),this._setCache(this.state),this._matchRoute(this.state),this._stores.forEach(function(i){i(e.state)}),this._tree=this._prerender(this.state),Vt.ok(this._tree,"choo.start: no valid DOM node returned for location "+this.state.href),this.emitter.prependListener(e._events.RENDER,sL(function(){var i=fr("choo.render"),n=e._prerender(e.state);Vt.ok(n,"choo.render: no valid DOM node returned for location "+e.state.href),Vt.equal(e._tree.nodeName,n.nodeName,"choo.render: The target node <"+e._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+n.nodeName.toLowerCase()+">.");var r=fr("choo.morph");aS(e._tree,n),r(),i()})),oS(function(){e.emitter.emit(e._events.DOMCONTENTLOADED),e._loaded=!0}),t(),this._tree};jn.prototype.mount=function(e){var i=fr("choo.mount('"+e+"')");if(typeof window!="object")return Vt.ok(typeof e=="string","choo.mount: selector should be type String"),this.selector=e,i(),this;Vt.ok(typeof e=="string"||typeof e=="object","choo.mount: selector should be type String or HTMLElement");var n=this;oS(function(){var r=fr("choo.render"),s=n.start();typeof e=="string"?n._tree=document.querySelector(e):n._tree=e,Vt.ok(n._tree,"choo.mount: could not query selector: "+e),Vt.equal(n._tree.nodeName,s.nodeName,"choo.mount: The target node <"+n._tree.nodeName.toLowerCase()+"> is not the same type as the new node <"+s.nodeName.toLowerCase()+">.");var a=fr("choo.morph");aS(n._tree,s),a(),r()}),i()};jn.prototype.toString=function(t,e){e=e||{},e.components=e.components||{},e.events=Object.assign({},e.events,this._events),Vt.notEqual(typeof window,"object","choo.mount: window was found. .toString() must be called in Node, use .start() or .mount() if running in the browser"),Vt.equal(typeof t,"string","choo.toString: location should be type string"),Vt.equal(typeof e,"object","choo.toString: state should be type object"),this._setCache(e),this._matchRoute(e,t),this.emitter.removeAllListeners(),this._stores.forEach(function(n){n(e)});var i=this._prerender(e);return Vt.ok(i,"choo.toString: no valid value returned for the route "+t),Vt(!Array.isArray(i),"choo.toString: return value was an array for the route "+t),typeof i.outerHTML=="string"?i.outerHTML:i.toString()};jn.prototype._matchRoute=function(t,e){var i,n;e?(i=e.replace(/\?.+$/,"").replace(/\/$/,""),this._hashEnabled||(i=i.replace(/#.+$/,"")),n=e):(i=window.location.pathname.replace(/\/$/,""),this._hashEnabled&&(i+=window.location.hash.replace(/^#/,"/")),n=window.location.search);var r=this.router.match(i);this._handler=r.cb,t.href=i,t.query=nL(n),t.route=r.route,t.params=r.params};jn.prototype._prerender=function(t){var e=fr("choo.prerender('"+t.route+"')"),i=this._handler(t,this.emit);return e(),i};jn.prototype._setCache=function(t){var e=new aL(t,this.emitter.emit.bind(this.emitter),this._cache);t.cache=i;function i(n,r){Vt.equal(typeof n,"function","choo.state.cache: Component should be type function");for(var s=[],a=0,l=arguments.length;a<l;a++)s.push(arguments[a]);return e.render.apply(e,s)}i.toJSON=function(){return null}};const uL=ln(lL),hL="modulepreload",cL=function(t,e){return new URL(t,e).href},Ew={},Aw=function(e,i,n){if(!i||i.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(i.map(s=>{if(s=cL(s,n),s in Ew)return;Ew[s]=!0;const a=s.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!n)for(let d=r.length-1;d>=0;d--){const m=r[d];if(m.href===s&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const p=document.createElement("link");if(p.rel=a?"stylesheet":hL,a||(p.as="script",p.crossOrigin=""),p.href=s,document.head.appendChild(p),a)return new Promise((d,m)=>{p.addEventListener("load",d),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})};var pr;const fL=t=>{pr=t},_c=(t,e="")=>{console.log("logging",t,e),pr&&(pr.innerHTML=` >> <span class=${e}> ${t} </span> `)},pL=()=>{pr&&(pr.style.display="none")},dL=()=>{pr&&(pr.style.display="block")},gL=()=>{pr.style.display=="none"?pr.style.display="block":pr.style.display="none"},mL={init:fL,log:_c,hide:pL,show:dL,toggle:gL},Rg={eval:(t,e)=>{var i=`(async() => {
    ${t}
})().catch(${r=>_c(r.message,"log-error")})`,n=!1;try{window.eval(i),_c("")}catch(r){n=!0,console.log("logging",r),_c(r.message,"log-error")}e&&e(i,n)}};var yL=vL,Rw={class:"className",for:"htmlFor","http-equiv":"httpEquiv"};function vL(t){return function(e,i,n){for(var r in i)r in Rw&&(i[Rw[r]]=i[r],delete i[r]);return t(e,i,n)}}var wL=yL,jo=0,$n=1,Wi=2,Th=3,On=4,Jt=5,td=6,Hs=7,ni=8,qo=9,Xo=10,Rl=11,Qs=12,Wo=13,_L=function(t,e){e||(e={});var i=e.concat||function(r,s){return String(r)+String(s)};return e.attrToProp!==!1&&(t=wL(t)),function(r){for(var s=$n,a="",l=arguments.length,h=[],p=0;p<r.length;p++)if(p<l-1){var d=arguments[p+1],m=O(r[p]),y=s;y===Xo&&(y=ni),y===qo&&(y=ni),y===Hs&&(y=ni),y===On&&(y=Jt),y===Wi?a==="/"?(m.push([Wi,"/",d]),a=""):m.push([Wi,d]):y===Wo&&e.comments?a+=String(d):y!==Wo&&m.push([jo,y,d]),h.push.apply(h,m)}else h.push.apply(h,O(r[p]));for(var v=[null,{},[]],S=[[v,-1]],p=0;p<h.length;p++){var M=S[S.length-1][0],m=h[p],b=m[0];if(b===Wi&&/^\//.test(m[1])){var w=S[S.length-1][1];S.length>1&&(S.pop(),S[S.length-1][0][2][w]=t(M[0],M[1],M[2].length?M[2]:void 0))}else if(b===Wi){var E=[m[1],{},[]];M[2].push(E),S.push([E,M[2].length-1])}else if(b===Jt||b===jo&&m[1]===Jt){for(var B="",L;p<h.length;p++)if(h[p][0]===Jt)B=i(B,h[p][1]);else if(h[p][0]===jo&&h[p][1]===Jt)if(typeof h[p][2]=="object"&&!B)for(L in h[p][2])h[p][2].hasOwnProperty(L)&&!M[1][L]&&(M[1][L]=h[p][2][L]);else B=i(B,h[p][2]);else break;h[p][0]===Rl&&p++;for(var I=p;p<h.length;p++)if(h[p][0]===ni||h[p][0]===Jt)M[1][B]?h[p][1]===""||(M[1][B]=i(M[1][B],h[p][1])):M[1][B]=n(h[p][1]);else if(h[p][0]===jo&&(h[p][1]===ni||h[p][1]===Jt))M[1][B]?h[p][2]===""||(M[1][B]=i(M[1][B],h[p][2])):M[1][B]=n(h[p][2]);else{B.length&&!M[1][B]&&p===I&&(h[p][0]===Th||h[p][0]===Qs)&&(M[1][B]=B.toLowerCase()),h[p][0]===Th&&p--;break}}else if(b===Jt)M[1][m[1]]=!0;else if(b===jo&&m[1]===Jt)M[1][m[2]]=!0;else if(b===Th){if(SL(M[0])&&S.length){var w=S[S.length-1][1];S.pop(),S[S.length-1][0][2][w]=t(M[0],M[1],M[2].length?M[2]:void 0)}}else if(b===jo&&m[1]===$n)m[2]===void 0||m[2]===null?m[2]="":m[2]||(m[2]=i("",m[2])),Array.isArray(m[2][0])?M[2].push.apply(M[2],m[2]):M[2].push(m[2]);else if(b===$n)M[2].push(m[1]);else if(!(b===Rl||b===Qs))throw new Error("unhandled: "+b)}if(v[2].length>1&&/^\s*$/.test(v[2][0])&&v[2].shift(),v[2].length>2||v[2].length===2&&/\S/.test(v[2][1])){if(e.createFragment)return e.createFragment(v[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(v[2][0])&&typeof v[2][0][0]=="string"&&Array.isArray(v[2][0][2])&&(v[2][0]=t(v[2][0][0],v[2][0][1],v[2][0][2])),v[2][0];function O(F){var U=[];s===Hs&&(s=On);for(var V=0;V<F.length;V++){var A=F.charAt(V);s===$n&&A==="<"?(a.length&&U.push([$n,a]),a="",s=Wi):A===">"&&!bL(s)&&s!==Wo?(s===Wi&&a.length?U.push([Wi,a]):s===Jt?U.push([Jt,a]):s===ni&&a.length&&U.push([ni,a]),U.push([Th]),a="",s=$n):s===Wo&&/-$/.test(a)&&A==="-"?(e.comments&&U.push([ni,a.substr(0,a.length-1)]),a="",s=$n):s===Wi&&/^!--$/.test(a)?(e.comments&&U.push([Wi,a],[Jt,"comment"],[Rl]),a=A,s=Wo):s===$n||s===Wo?a+=A:s===Wi&&A==="/"&&a.length||(s===Wi&&/\s/.test(A)?(a.length&&U.push([Wi,a]),a="",s=On):s===Wi?a+=A:s===On&&/[^\s"'=/]/.test(A)?(s=Jt,a=A):s===On&&/\s/.test(A)?(a.length&&U.push([Jt,a]),U.push([Qs])):s===Jt&&/\s/.test(A)?(U.push([Jt,a]),a="",s=td):s===Jt&&A==="="?(U.push([Jt,a],[Rl]),a="",s=Hs):s===Jt?a+=A:(s===td||s===On)&&A==="="?(U.push([Rl]),s=Hs):(s===td||s===On)&&!/\s/.test(A)?(U.push([Qs]),/[\w-]/.test(A)?(a+=A,s=Jt):s=On):s===Hs&&A==='"'?s=Xo:s===Hs&&A==="'"?s=qo:s===Xo&&A==='"'?(U.push([ni,a],[Qs]),a="",s=On):s===qo&&A==="'"?(U.push([ni,a],[Qs]),a="",s=On):s===Hs&&!/\s/.test(A)?(s=ni,V--):s===ni&&/\s/.test(A)?(U.push([ni,a],[Qs]),a="",s=On):(s===ni||s===qo||s===Xo)&&(a+=A))}return s===$n&&a.length?(U.push([$n,a]),a=""):s===ni&&a.length?(U.push([ni,a]),a=""):s===Xo&&a.length?(U.push([ni,a]),a=""):s===qo&&a.length?(U.push([ni,a]),a=""):s===Jt&&(U.push([Jt,a]),a=""),U}};function n(r){return typeof r=="function"||typeof r=="string"||r&&typeof r=="object"||r==null?r:i("",r)}};function bL(t){return t===qo||t===Xo}var xL=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-￿_:-]+)*$");function SL(t){return xL.test(t)}var Eh=/\n[\s]+$/,Ah=/^\n[\s]+/,Lw=/[\s]+$/,Ow=/^[\s]+/,Rh=/[\n\s]+/g,Iw=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],Lh=["code","pre","textarea"],CL=function t(e,i){if(Array.isArray(i))for(var n=e.nodeName.toLowerCase(),r=!1,s,a,l=0,h=i.length;l<h;l++){var p=i[l];if(Array.isArray(p)){t(e,p);continue}(typeof p=="number"||typeof p=="boolean"||typeof p=="function"||p instanceof Date||p instanceof RegExp)&&(p=p.toString());var d=e.childNodes[e.childNodes.length-1];if(typeof p=="string")r=!0,d&&d.nodeName==="#text"?d.nodeValue+=p:(p=e.ownerDocument.createTextNode(p),e.appendChild(p),d=p),l===h-1&&(r=!1,Iw.indexOf(n)===-1&&Lh.indexOf(n)===-1?(s=d.nodeValue.replace(Ah,"").replace(Lw,"").replace(Eh,"").replace(Rh," "),s===""?e.removeChild(d):d.nodeValue=s):Lh.indexOf(n)===-1&&(a=l===0?"":" ",s=d.nodeValue.replace(Ah,a).replace(Ow," ").replace(Lw,"").replace(Eh,"").replace(Rh," "),d.nodeValue=s));else if(p&&p.nodeType){r&&(r=!1,Iw.indexOf(n)===-1&&Lh.indexOf(n)===-1?(s=d.nodeValue.replace(Ah,"").replace(Eh," ").replace(Rh," "),s===""?e.removeChild(d):d.nodeValue=s):Lh.indexOf(n)===-1&&(s=d.nodeValue.replace(Ow," ").replace(Ah,"").replace(Eh," ").replace(Rh," "),d.nodeValue=s));var m=p.nodeName;m&&(n=m.toLowerCase()),e.appendChild(p)}}},ML=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],kL=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"],TL=["indeterminate"],EL=_L,AL=CL,RL=ML,LL=kL,OL=TL,IL="http://www.w3.org/2000/svg",NL="http://www.w3.org/1999/xlink",DL="!--",BL=function(t){function e(r,s,a){var l;RL.indexOf(r)!==-1&&(s.namespace=IL);var h=!1;s.namespace&&(h=s.namespace,delete s.namespace);var p=!1;if(s.is&&(p=s.is,delete s.is),h)p?l=t.createElementNS(h,r,{is:p}):l=t.createElementNS(h,r);else{if(r===DL)return t.createComment(s.comment);p?l=t.createElement(r,{is:p}):l=t.createElement(r)}for(var d in s)if(s.hasOwnProperty(d)){var m=d.toLowerCase(),y=s[d];if(m==="classname"&&(m="class",d="class"),d==="htmlFor"&&(d="for"),LL.indexOf(m)!==-1){if(String(y)==="true")y=m;else if(String(y)==="false")continue}m.slice(0,2)==="on"||OL.indexOf(m)!==-1?l[d]=y:h?d==="xlink:href"?l.setAttributeNS(NL,d,y):/^xmlns($|:)/i.test(d)||l.setAttributeNS(null,d,y):l.setAttribute(d,y)}return AL(l,a),l}function i(r){for(var s=t.createDocumentFragment(),a=0;a<r.length;a++)r[a]!=null&&(Array.isArray(r[a])?s.appendChild(i(r[a])):(typeof r[a]=="string"&&(r[a]=t.createTextNode(r[a])),s.appendChild(r[a])));return s}var n=EL(e,{comments:!0,createFragment:i});return n.default=n,n.createComment=e,n},UL=BL(document),JL=UL;const Yt=ln(JL),PL={},FL=Object.freeze(Object.defineProperty({__proto__:null,default:PL},Symbol.toStringTag,{value:"Module"})),Aa=Ex(FL);var Nw=typeof bt<"u"?bt:typeof window<"u"?window:{},jL=Aa,Vl;typeof document<"u"?Vl=document:(Vl=Nw["__GLOBAL_DOCUMENT_CACHE@4"],Vl||(Vl=Nw["__GLOBAL_DOCUMENT_CACHE@4"]=jL));var lS=Vl,Ef={exports:{}},Kl;typeof window<"u"?Kl=window:typeof bt<"u"?Kl=bt:typeof self<"u"?Kl=self:Kl={};var WL=Kl,id=lS,Dw=WL,hi=Object.create(null),uS="onloadid"+Math.random().toString(36).slice(2),lo="data-"+uS,nd=0;if(Dw&&Dw.MutationObserver){var GL=new MutationObserver(function(t){if(!(Object.keys(hi).length<1))for(var e=0;e<t.length;e++){if(t[e].attributeName===lo){VL(t[e],Bw,Uw);continue}Lg(t[e].removedNodes,function(i,n){id.documentElement.contains(n)||Uw(i,n)}),Lg(t[e].addedNodes,function(i,n){id.documentElement.contains(n)&&Bw(i,n)})}});GL.observe(id.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[lo]})}Ef.exports=function t(e,i,n,r){return i=i||function(){},n=n||function(){},e.setAttribute(lo,"o"+nd),hi["o"+nd]=[i,n,0,r||t.caller],nd+=1,e};Ef.exports.KEY_ATTR=lo;Ef.exports.KEY_ID=uS;function Bw(t,e){hi[t][0]&&hi[t][2]===0&&(hi[t][0](e),hi[t][2]=1)}function Uw(t,e){hi[t][1]&&hi[t][2]===1&&(hi[t][1](e),hi[t][2]=0)}function VL(t,e,i){var n=t.target.getAttribute(lo);if(KL(t.oldValue,n)){hi[n]=hi[t.oldValue];return}hi[t.oldValue]&&i(t.oldValue,t.target),hi[n]&&e(n,t.target)}function KL(t,e){return!t||!e?!1:hi[t][3]===hi[e][3]}function Lg(t,e){for(var i=Object.keys(hi),n=0;n<t.length;n++){if(t[n]&&t[n].getAttribute&&t[n].getAttribute(lo)){var r=t[n].getAttribute(lo);i.forEach(function(s){r===s&&e(s,t[n])})}t[n]&&t[n].childNodes.length>0&&Lg(t[n].childNodes,e)}}var zL=Ef.exports,HL=cS;class hS extends Error{}hS.prototype.name="AssertionError";function cS(t,e){if(!t){var i=new hS(e);throw Error.captureStackTrace&&Error.captureStackTrace(i,cS),i}}const fS=lS,zl=u0,QL=nS,f0=zL,Og=HL,YL=f0.KEY_ID,$L=f0.KEY_ATTR;var ZL=Qi;function qL(){return"ncid-"+Math.floor((1+Math.random())*65536).toString(16).substring(1)}Qi.makeID=qL;function Qi(t){this._hasWindow=typeof window<"u",this._id=null,this._ncID=null,this._olID=null,this._proxy=null,this._loaded=!1,this._rootNodeName=null,this._name=t||"nanocomponent",this._rerender=!1,this._handleLoad=this._handleLoad.bind(this),this._handleUnload=this._handleUnload.bind(this),this._arguments=[];const e=this;Object.defineProperty(this,"element",{get:function(){const i=fS.getElementById(e._id);if(i)return i.dataset.nanocomponent===e._ncID?i:void 0}})}Qi.prototype.render=function(){const t=zl(this._name+".render"),e=this,i=new Array(arguments.length);let n;for(let r=0;r<arguments.length;r++)i[r]=arguments[r];if(this._hasWindow)if(this.element){n=this.element;const r=zl(this._name+".update"),s=this._rerender||this.update.apply(this,i);if(r(),this._rerender&&(this._rerender=!1),s){const a=this._handleRender(i),l=zl(this._name+".morph");QL(n,a),l(),this.afterupdate&&this.afterupdate(n)}return this._proxy||(this._proxy=this._createProxy()),t(),this._proxy}else return this._reset(),n=this._handleRender(i),this.beforerender&&this.beforerender(n),(this.load||this.unload||this.afterreorder)&&(f0(n,e._handleLoad,e._handleUnload,e._ncID),this._olID=n.dataset[YL]),t(),n;else{const r=zl(this._name+".create");return n=this.createElement.apply(this,i),r(),t(),n}};Qi.prototype.rerender=function(){Og(this.element,"nanocomponent: cant rerender on an unmounted dom node"),this._rerender=!0,this.render.apply(this,this._arguments)};Qi.prototype._handleRender=function(t){const e=zl(this._name+".createElement"),i=this.createElement.apply(this,t);return e(),this._rootNodeName||(this._rootNodeName=i.nodeName),Og(i instanceof window.Element,"nanocomponent: createElement should return a single DOM node"),Og(this._rootNodeName===i.nodeName,"nanocomponent: root node types cannot differ between re-renders"),this._arguments=t,this._brandNode(this._ensureID(i))};Qi.prototype._createProxy=function(){const t=fS.createElement(this._rootNodeName),e=this;return this._brandNode(t),t.id=this._id,t.setAttribute("data-proxy",""),t.isSameNode=function(i){return i&&i.dataset.nanocomponent===e._ncID},t};Qi.prototype._reset=function(){this._ncID=Qi.makeID(),this._olID=null,this._id=null,this._proxy=null,this._rootNodeName=null};Qi.prototype._brandNode=function(t){return t.setAttribute("data-nanocomponent",this._ncID),this._olID&&t.setAttribute($L,this._olID),t};Qi.prototype._ensureID=function(t){return t.id?this._id=t.id:t.id=this._id=this._ncID,this._proxy&&this._proxy.id!==this._id&&(this._proxy.id=this._id),t};Qi.prototype._handleLoad=function(t){if(this._loaded){this.afterreorder&&this.afterreorder(t);return}this._loaded=!0,this.load&&this.load(t)};Qi.prototype._handleUnload=function(t){this.element||(this._loaded=!1,this.unload&&this.unload(t))};Qi.prototype.createElement=function(){throw new Error("nanocomponent: createElement should be implemented!")};Qi.prototype.update=function(){throw new Error("nanocomponent: update should be implemented!")};var XL=ZL;const p0=ln(XL);class dt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,i,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(i,this.length,r,1),sr.from(r,this.length-(i-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,i=this.length){let n=[];return this.decompose(e,i,n,0),sr.from(n,i-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let i=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new tu(this),s=new tu(e);for(let a=i,l=i;;){if(r.next(a),s.next(a),a=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=n)return!0}}iter(e=1){return new tu(this,e)}iterRange(e,i=this.length){return new pS(this,e,i)}iterLines(e,i){let n;if(e==null)n=this.iter();else{i==null&&(i=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new dS(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?dt.empty:e.length<=32?new Gt(e):sr.from(Gt.split(e,[]))}}class Gt extends dt{constructor(e,i=eO(e)){super(),this.text=e,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(e,i,n,r){for(let s=0;;s++){let a=this.text[s],l=r+a.length;if((i?n:l)>=e)return new tO(r,l,n,a);r=l+1,n++}}decompose(e,i,n,r){let s=e<=0&&i>=this.length?this:new Gt(Jw(this.text,e,i),Math.min(i,this.length)-Math.max(0,e));if(r&1){let a=n.pop(),l=bc(s.text,a.text.slice(),0,s.length);if(l.length<=32)n.push(new Gt(l,a.length+s.length));else{let h=l.length>>1;n.push(new Gt(l.slice(0,h)),new Gt(l.slice(h)))}}else n.push(s)}replace(e,i,n){if(!(n instanceof Gt))return super.replace(e,i,n);let r=bc(this.text,bc(n.text,Jw(this.text,0,e)),i),s=this.length+n.length-(i-e);return r.length<=32?new Gt(r,s):sr.from(Gt.split(r,[]),s)}sliceString(e,i=this.length,n=`
`){let r="";for(let s=0,a=0;s<=i&&a<this.text.length;a++){let l=this.text[a],h=s+l.length;s>e&&a&&(r+=n),e<h&&i>s&&(r+=l.slice(Math.max(0,e-s),i-s)),s=h+1}return r}flatten(e){for(let i of this.text)e.push(i)}scanIdentical(){return 0}static split(e,i){let n=[],r=-1;for(let s of e)n.push(s),r+=s.length+1,n.length==32&&(i.push(new Gt(n,r)),n=[],r=-1);return r>-1&&i.push(new Gt(n,r)),i}}class sr extends dt{constructor(e,i){super(),this.children=e,this.length=i,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,i,n,r){for(let s=0;;s++){let a=this.children[s],l=r+a.length,h=n+a.lines-1;if((i?h:l)>=e)return a.lineInner(e,i,n,r);r=l+1,n=h+1}}decompose(e,i,n,r){for(let s=0,a=0;a<=i&&s<this.children.length;s++){let l=this.children[s],h=a+l.length;if(e<=h&&i>=a){let p=r&((a<=e?1:0)|(h>=i?2:0));a>=e&&h<=i&&!p?n.push(l):l.decompose(e-a,i-a,n,p)}a=h+1}}replace(e,i,n){if(n.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let a=this.children[r],l=s+a.length;if(e>=s&&i<=l){let h=a.replace(e-s,i-s,n),p=this.lines-a.lines+h.lines;if(h.lines<p>>5-1&&h.lines>p>>5+1){let d=this.children.slice();return d[r]=h,new sr(d,this.length-(i-e)+n.length)}return super.replace(s,l,h)}s=l+1}return super.replace(e,i,n)}sliceString(e,i=this.length,n=`
`){let r="";for(let s=0,a=0;s<this.children.length&&a<=i;s++){let l=this.children[s],h=a+l.length;a>e&&s&&(r+=n),e<h&&i>a&&(r+=l.sliceString(e-a,i-a,n)),a=h+1}return r}flatten(e){for(let i of this.children)i.flatten(e)}scanIdentical(e,i){if(!(e instanceof sr))return 0;let n=0,[r,s,a,l]=i>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=i,s+=i){if(r==a||s==l)return n;let h=this.children[r],p=e.children[s];if(h!=p)return n+h.scanIdentical(p,i);n+=h.length+1}}static from(e,i=e.reduce((n,r)=>n+r.length+1,-1)){let n=0;for(let v of e)n+=v.lines;if(n<32){let v=[];for(let S of e)S.flatten(v);return new Gt(v,i)}let r=Math.max(32,n>>5),s=r<<1,a=r>>1,l=[],h=0,p=-1,d=[];function m(v){let S;if(v.lines>s&&v instanceof sr)for(let M of v.children)m(M);else v.lines>a&&(h>a||!h)?(y(),l.push(v)):v instanceof Gt&&h&&(S=d[d.length-1])instanceof Gt&&v.lines+S.lines<=32?(h+=v.lines,p+=v.length+1,d[d.length-1]=new Gt(S.text.concat(v.text),S.length+1+v.length)):(h+v.lines>r&&y(),h+=v.lines,p+=v.length+1,d.push(v))}function y(){h!=0&&(l.push(d.length==1?d[0]:sr.from(d,p)),p=-1,h=d.length=0)}for(let v of e)m(v);return y(),l.length==1?l[0]:new sr(l,i)}}dt.empty=new Gt([""],0);function eO(t){let e=-1;for(let i of t)e+=i.length+1;return e}function bc(t,e,i=0,n=1e9){for(let r=0,s=0,a=!0;s<t.length&&r<=n;s++){let l=t[s],h=r+l.length;h>=i&&(h>n&&(l=l.slice(0,n-r)),r<i&&(l=l.slice(i-r)),a?(e[e.length-1]+=l,a=!1):e.push(l)),r=h+1}return e}function Jw(t,e,i){return bc(t,[""],e,i)}class tu{constructor(e,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[i>0?1:(e instanceof Gt?e.text.length:e.children.length)<<1]}nextInner(e,i){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],s=this.offsets[n],a=s>>1,l=r instanceof Gt?r.text.length:r.children.length;if(a==(i>0?l:0)){if(n==0)return this.done=!0,this.value="",this;i>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(i>0?0:1)){if(this.offsets[n]+=i,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Gt){let h=r.text[a+(i<0?-1:0)];if(this.offsets[n]+=i,h.length>Math.max(0,e))return this.value=e==0?h:i>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=r.children[a+(i<0?-1:0)];e>h.length?(e-=h.length,this.offsets[n]+=i):(i<0&&this.offsets[n]--,this.nodes.push(h),this.offsets.push(i>0?1:(h instanceof Gt?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class pS{constructor(e,i,n){this.value="",this.done=!1,this.cursor=new tu(e,i>n?-1:1),this.pos=i>n?e.length:0,this.from=Math.min(i,n),this.to=Math.max(i,n)}nextInner(e,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let n=i<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*i,this.value=r.length<=n?r:i<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class dS{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:i,lineBreak:n,value:r}=this.inner.next(e);return i?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(dt.prototype[Symbol.iterator]=function(){return this.iter()},tu.prototype[Symbol.iterator]=pS.prototype[Symbol.iterator]=dS.prototype[Symbol.iterator]=function(){return this});class tO{constructor(e,i,n,r){this.from=e,this.to=i,this.number=n,this.text=r}get length(){return this.to-this.from}}let aa="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<aa.length;t++)aa[t]+=aa[t-1];function iO(t){for(let e=1;e<aa.length;e+=2)if(aa[e]>t)return aa[e-1]<=t;return!1}function Pw(t){return t>=127462&&t<=127487}const Fw=8205;function bi(t,e,i=!0,n=!0){return(i?gS:nO)(t,e,n)}function gS(t,e,i){if(e==t.length)return e;e&&mS(t.charCodeAt(e))&&yS(t.charCodeAt(e-1))&&e--;let n=ai(t,e);for(e+=gn(n);e<t.length;){let r=ai(t,e);if(n==Fw||r==Fw||i&&iO(r))e+=gn(r),n=r;else if(Pw(r)){let s=0,a=e-2;for(;a>=0&&Pw(ai(t,a));)s++,a-=2;if(s%2==0)break;e+=2}else break}return e}function nO(t,e,i){for(;e>0;){let n=gS(t,e-2,i);if(n<e)return n;e--}return 0}function mS(t){return t>=56320&&t<57344}function yS(t){return t>=55296&&t<56320}function ai(t,e){let i=t.charCodeAt(e);if(!yS(i)||e+1==t.length)return i;let n=t.charCodeAt(e+1);return mS(n)?(i-55296<<10)+(n-56320)+65536:i}function d0(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function gn(t){return t<65536?1:2}const Ig=/\r\n?|\n/;var Ni=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Ni||(Ni={}));class dr{constructor(e){this.sections=e}get length(){let e=0;for(let i=0;i<this.sections.length;i+=2)e+=this.sections[i];return e}get newLength(){let e=0;for(let i=0;i<this.sections.length;i+=2){let n=this.sections[i+1];e+=n<0?this.sections[i]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let i=0,n=0,r=0;i<this.sections.length;){let s=this.sections[i++],a=this.sections[i++];a<0?(e(n,r,s),r+=s):r+=a,n+=s}}iterChangedRanges(e,i=!1){Ng(this,e,i)}get invertedDesc(){let e=[];for(let i=0;i<this.sections.length;){let n=this.sections[i++],r=this.sections[i++];r<0?e.push(n,r):e.push(r,n)}return new dr(e)}composeDesc(e){return this.empty?e:e.empty?this:vS(this,e)}mapDesc(e,i=!1){return e.empty?this:Dg(this,e,i)}mapPos(e,i=-1,n=Ni.Simple){let r=0,s=0;for(let a=0;a<this.sections.length;){let l=this.sections[a++],h=this.sections[a++],p=r+l;if(h<0){if(p>e)return s+(e-r);s+=l}else{if(n!=Ni.Simple&&p>=e&&(n==Ni.TrackDel&&r<e&&p>e||n==Ni.TrackBefore&&r<e||n==Ni.TrackAfter&&p>e))return null;if(p>e||p==e&&i<0&&!l)return e==r||i<0?s:s+h;s+=h}r=p}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,i=e){for(let n=0,r=0;n<this.sections.length&&r<=i;){let s=this.sections[n++],a=this.sections[n++],l=r+s;if(a>=0&&r<=i&&l>=e)return r<e&&l>i?"cover":!0;r=l}return!1}toString(){let e="";for(let i=0;i<this.sections.length;){let n=this.sections[i++],r=this.sections[i++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new dr(e)}static create(e){return new dr(e)}}class qt extends dr{constructor(e,i){super(e),this.inserted=i}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Ng(this,(i,n,r,s,a)=>e=e.replace(r,r+(n-i),a),!1),e}mapDesc(e,i=!1){return Dg(this,e,i,!0)}invert(e){let i=this.sections.slice(),n=[];for(let r=0,s=0;r<i.length;r+=2){let a=i[r],l=i[r+1];if(l>=0){i[r]=l,i[r+1]=a;let h=r>>1;for(;n.length<h;)n.push(dt.empty);n.push(a?e.slice(s,s+a):dt.empty)}s+=a}return new qt(i,n)}compose(e){return this.empty?e:e.empty?this:vS(this,e,!0)}map(e,i=!1){return e.empty?this:Dg(this,e,i,!0)}iterChanges(e,i=!1){Ng(this,e,i)}get desc(){return dr.create(this.sections)}filter(e){let i=[],n=[],r=[],s=new hu(this);e:for(let a=0,l=0;;){let h=a==e.length?1e9:e[a++];for(;l<h||l==h&&s.len==0;){if(s.done)break e;let d=Math.min(s.len,h-l);wi(r,d,-1);let m=s.ins==-1?-1:s.off==0?s.ins:0;wi(i,d,m),m>0&&ls(n,i,s.text),s.forward(d),l+=d}let p=e[a++];for(;l<p;){if(s.done)break e;let d=Math.min(s.len,p-l);wi(i,d,-1),wi(r,d,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(d),l+=d}}return{changes:new qt(i,n),filtered:dr.create(r)}}toJSON(){let e=[];for(let i=0;i<this.sections.length;i+=2){let n=this.sections[i],r=this.sections[i+1];r<0?e.push(n):r==0?e.push([n]):e.push([n].concat(this.inserted[i>>1].toJSON()))}return e}static of(e,i,n){let r=[],s=[],a=0,l=null;function h(d=!1){if(!d&&!r.length)return;a<i&&wi(r,i-a,-1);let m=new qt(r,s);l=l?l.compose(m.map(l)):m,r=[],s=[],a=0}function p(d){if(Array.isArray(d))for(let m of d)p(m);else if(d instanceof qt){if(d.length!=i)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${i})`);h(),l=l?l.compose(d.map(l)):d}else{let{from:m,to:y=m,insert:v}=d;if(m>y||m<0||y>i)throw new RangeError(`Invalid change range ${m} to ${y} (in doc of length ${i})`);let S=v?typeof v=="string"?dt.of(v.split(n||Ig)):v:dt.empty,M=S.length;if(m==y&&M==0)return;m<a&&h(),m>a&&wi(r,m-a,-1),wi(r,y-m,M),ls(s,r,S),a=y}}return p(e),h(!l),l}static empty(e){return new qt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],n=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")i.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((a,l)=>l&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)i.push(s[0],0);else{for(;n.length<r;)n.push(dt.empty);n[r]=dt.of(s.slice(1)),i.push(s[0],n[r].length)}}}return new qt(i,n)}static createSet(e,i){return new qt(e,i)}}function wi(t,e,i,n=!1){if(e==0&&i<=0)return;let r=t.length-2;r>=0&&i<=0&&i==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=i:n?(t[r]+=e,t[r+1]+=i):t.push(e,i)}function ls(t,e,i){if(i.length==0)return;let n=e.length-2>>1;if(n<t.length)t[t.length-1]=t[t.length-1].append(i);else{for(;t.length<n;)t.push(dt.empty);t.push(i)}}function Ng(t,e,i){let n=t.inserted;for(let r=0,s=0,a=0;a<t.sections.length;){let l=t.sections[a++],h=t.sections[a++];if(h<0)r+=l,s+=l;else{let p=r,d=s,m=dt.empty;for(;p+=l,d+=h,h&&n&&(m=m.append(n[a-2>>1])),!(i||a==t.sections.length||t.sections[a+1]<0);)l=t.sections[a++],h=t.sections[a++];e(r,p,s,d,m),r=p,s=d}}}function Dg(t,e,i,n=!1){let r=[],s=n?[]:null,a=new hu(t),l=new hu(e);for(let h=-1;;)if(a.ins==-1&&l.ins==-1){let p=Math.min(a.len,l.len);wi(r,p,-1),a.forward(p),l.forward(p)}else if(l.ins>=0&&(a.ins<0||h==a.i||a.off==0&&(l.len<a.len||l.len==a.len&&!i))){let p=l.len;for(wi(r,l.ins,-1);p;){let d=Math.min(a.len,p);a.ins>=0&&h<a.i&&a.len<=d&&(wi(r,0,a.ins),s&&ls(s,r,a.text),h=a.i),a.forward(d),p-=d}l.next()}else if(a.ins>=0){let p=0,d=a.len;for(;d;)if(l.ins==-1){let m=Math.min(d,l.len);p+=m,d-=m,l.forward(m)}else if(l.ins==0&&l.len<d)d-=l.len,l.next();else break;wi(r,p,h<a.i?a.ins:0),s&&h<a.i&&ls(s,r,a.text),h=a.i,a.forward(a.len-d)}else{if(a.done&&l.done)return s?qt.createSet(r,s):dr.create(r);throw new Error("Mismatched change set lengths")}}function vS(t,e,i=!1){let n=[],r=i?[]:null,s=new hu(t),a=new hu(e);for(let l=!1;;){if(s.done&&a.done)return r?qt.createSet(n,r):dr.create(n);if(s.ins==0)wi(n,s.len,0,l),s.next();else if(a.len==0&&!a.done)wi(n,0,a.ins,l),r&&ls(r,n,a.text),a.next();else{if(s.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(s.len2,a.len),p=n.length;if(s.ins==-1){let d=a.ins==-1?-1:a.off?0:a.ins;wi(n,h,d,l),r&&d&&ls(r,n,a.text)}else a.ins==-1?(wi(n,s.off?0:s.len,h,l),r&&ls(r,n,s.textBit(h))):(wi(n,s.off?0:s.len,a.off?0:a.ins,l),r&&!a.off&&ls(r,n,a.text));l=(s.ins>h||a.ins>=0&&a.len>h)&&(l||n.length>p),s.forward2(h),a.forward(h)}}}}class hu{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,i=this.i-2>>1;return i>=e.length?dt.empty:e[i]}textBit(e){let{inserted:i}=this.set,n=this.i-2>>1;return n>=i.length&&!e?dt.empty:i[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class to{constructor(e,i,n){this.from=e,this.to=i,this.flags=n}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,i=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,i):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new to(n,r,this.flags)}extend(e,i=e){if(e<=this.anchor&&i>=this.anchor)return de.range(e,i);let n=Math.abs(e-this.anchor)>Math.abs(i-this.anchor)?e:i;return de.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return de.range(e.anchor,e.head)}static create(e,i,n){return new to(e,i,n)}}class de{constructor(e,i){this.ranges=e,this.mainIndex=i}map(e,i=-1){return e.empty?this:de.create(this.ranges.map(n=>n.map(e,i)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new de([this.main],0)}addRange(e,i=!0){return de.create([e].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(e,i=this.mainIndex){let n=this.ranges.slice();return n[i]=e,de.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new de(e.ranges.map(i=>to.fromJSON(i)),e.main)}static single(e,i=e){return new de([de.range(e,i)],0)}static create(e,i=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=n:s.from<n)return de.normalized(e.slice(),i);n=s.to}return new de(e,i)}static cursor(e,i=0,n,r){return to.create(e,e,(i==0?0:i<0?4:8)|(n==null?3:Math.min(2,n))|(r??33554431)<<5)}static range(e,i,n,r){let s=(n??33554431)<<5|(r==null?3:Math.min(2,r));return i<e?to.create(i,e,24|s):to.create(e,i,(i>e?4:0)|s)}static normalized(e,i=0){let n=e[i];e.sort((r,s)=>r.from-s.from),i=e.indexOf(n);for(let r=1;r<e.length;r++){let s=e[r],a=e[r-1];if(s.empty?s.from<=a.to:s.from<a.to){let l=a.from,h=Math.max(s.to,a.to);r<=i&&i--,e.splice(--r,2,s.anchor>s.head?de.range(h,l):de.range(l,h))}}return new de(e,i)}}function wS(t,e){for(let i of t.ranges)if(i.to>e)throw new RangeError("Selection points outside of document")}let g0=0;class Oe{constructor(e,i,n,r,s){this.combine=e,this.compareInput=i,this.compare=n,this.isStatic=r,this.id=g0++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new Oe(e.combine||(i=>i),e.compareInput||((i,n)=>i===n),e.compare||(e.combine?(i,n)=>i===n:m0),!!e.static,e.enables)}of(e){return new xc([],this,0,e)}compute(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new xc(e,this,1,i)}computeN(e,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new xc(e,this,2,i)}from(e,i){return i||(i=n=>n),this.compute([e],n=>i(n.field(e)))}}function m0(t,e){return t==e||t.length==e.length&&t.every((i,n)=>i===e[n])}class xc{constructor(e,i,n,r){this.dependencies=e,this.facet=i,this.type=n,this.value=r,this.id=g0++}dynamicSlot(e){var i;let n=this.value,r=this.facet.compareInput,s=this.id,a=e[s]>>1,l=this.type==2,h=!1,p=!1,d=[];for(let m of this.dependencies)m=="doc"?h=!0:m=="selection"?p=!0:((i=e[m.id])!==null&&i!==void 0?i:1)&1||d.push(e[m.id]);return{create(m){return m.values[a]=n(m),1},update(m,y){if(h&&y.docChanged||p&&(y.docChanged||y.selection)||Bg(m,d)){let v=n(m);if(l?!jw(v,m.values[a],r):!r(v,m.values[a]))return m.values[a]=v,1}return 0},reconfigure:(m,y)=>{let v,S=y.config.address[s];if(S!=null){let M=Uc(y,S);if(this.dependencies.every(b=>b instanceof Oe?y.facet(b)===m.facet(b):b instanceof ci?y.field(b,!1)==m.field(b,!1):!0)||(l?jw(v=n(m),M,r):r(v=n(m),M)))return m.values[a]=M,0}else v=n(m);return m.values[a]=v,1}}}}function jw(t,e,i){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1;return!0}function Bg(t,e){let i=!1;for(let n of e)iu(t,n)&1&&(i=!0);return i}function rO(t,e,i){let n=i.map(h=>t[h.id]),r=i.map(h=>h.type),s=n.filter(h=>!(h&1)),a=t[e.id]>>1;function l(h){let p=[];for(let d=0;d<n.length;d++){let m=Uc(h,n[d]);if(r[d]==2)for(let y of m)p.push(y);else p.push(m)}return e.combine(p)}return{create(h){for(let p of n)iu(h,p);return h.values[a]=l(h),1},update(h,p){if(!Bg(h,s))return 0;let d=l(h);return e.compare(d,h.values[a])?0:(h.values[a]=d,1)},reconfigure(h,p){let d=Bg(h,n),m=p.config.facets[e.id],y=p.facet(e);if(m&&!d&&m0(i,m))return h.values[a]=y,0;let v=l(h);return e.compare(v,y)?(h.values[a]=y,0):(h.values[a]=v,1)}}}const Ww=Oe.define({static:!0});class ci{constructor(e,i,n,r,s){this.id=e,this.createF=i,this.updateF=n,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let i=new ci(g0++,e.create,e.update,e.compare||((n,r)=>n===r),e);return e.provide&&(i.provides=e.provide(i)),i}create(e){let i=e.facet(Ww).find(n=>n.field==this);return((i==null?void 0:i.create)||this.createF)(e)}slot(e){let i=e[this.id]>>1;return{create:n=>(n.values[i]=this.create(n),1),update:(n,r)=>{let s=n.values[i],a=this.updateF(s,r);return this.compareF(s,a)?0:(n.values[i]=a,1)},reconfigure:(n,r)=>r.config.address[this.id]!=null?(n.values[i]=r.field(this),0):(n.values[i]=this.create(n),1)}}init(e){return[this,Ww.of({field:this,create:e})]}get extension(){return this}}const $s={lowest:4,low:3,default:2,high:1,highest:0};function Ll(t){return e=>new _S(e,t)}const Ra={highest:Ll($s.highest),high:Ll($s.high),default:Ll($s.default),low:Ll($s.low),lowest:Ll($s.lowest)};class _S{constructor(e,i){this.inner=e,this.prec=i}}class Af{of(e){return new Ug(this,e)}reconfigure(e){return Af.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Ug{constructor(e,i){this.compartment=e,this.inner=i}}class Bc{constructor(e,i,n,r,s,a){for(this.base=e,this.compartments=i,this.dynamicSlots=n,this.address=r,this.staticValues=s,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let i=this.address[e.id];return i==null?e.default:this.staticValues[i>>1]}static resolve(e,i,n){let r=[],s=Object.create(null),a=new Map;for(let y of sO(e,i,a))y instanceof ci?r.push(y):(s[y.facet.id]||(s[y.facet.id]=[])).push(y);let l=Object.create(null),h=[],p=[];for(let y of r)l[y.id]=p.length<<1,p.push(v=>y.slot(v));let d=n==null?void 0:n.config.facets;for(let y in s){let v=s[y],S=v[0].facet,M=d&&d[y]||[];if(v.every(b=>b.type==0))if(l[S.id]=h.length<<1|1,m0(M,v))h.push(n.facet(S));else{let b=S.combine(v.map(w=>w.value));h.push(n&&S.compare(b,n.facet(S))?n.facet(S):b)}else{for(let b of v)b.type==0?(l[b.id]=h.length<<1|1,h.push(b.value)):(l[b.id]=p.length<<1,p.push(w=>b.dynamicSlot(w)));l[S.id]=p.length<<1,p.push(b=>rO(b,S,v))}}let m=p.map(y=>y(l));return new Bc(e,a,m,l,h,s)}}function sO(t,e,i){let n=[[],[],[],[],[]],r=new Map;function s(a,l){let h=r.get(a);if(h!=null){if(h<=l)return;let p=n[h].indexOf(a);p>-1&&n[h].splice(p,1),a instanceof Ug&&i.delete(a.compartment)}if(r.set(a,l),Array.isArray(a))for(let p of a)s(p,l);else if(a instanceof Ug){if(i.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let p=e.get(a.compartment)||a.inner;i.set(a.compartment,p),s(p,l)}else if(a instanceof _S)s(a.inner,a.prec);else if(a instanceof ci)n[l].push(a),a.provides&&s(a.provides,l);else if(a instanceof xc)n[l].push(a),a.facet.extensions&&s(a.facet.extensions,$s.default);else{let p=a.extension;if(!p)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(p,l)}}return s(t,$s.default),n.reduce((a,l)=>a.concat(l))}function iu(t,e){if(e&1)return 2;let i=e>>1,n=t.status[i];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;t.status[i]=4;let r=t.computeSlot(t,t.config.dynamicSlots[i]);return t.status[i]=2|r}function Uc(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const bS=Oe.define(),xS=Oe.define({combine:t=>t.some(e=>e),static:!0}),SS=Oe.define({combine:t=>t.length?t[0]:void 0,static:!0}),CS=Oe.define(),MS=Oe.define(),kS=Oe.define(),TS=Oe.define({combine:t=>t.length?t[0]:!1});class Nr{constructor(e,i){this.type=e,this.value=i}static define(){return new oO}}class oO{of(e){return new Nr(this,e)}}class aO{constructor(e){this.map=e}of(e){return new ze(this,e)}}class ze{constructor(e,i){this.type=e,this.value=i}map(e){let i=this.type.map(this.value,e);return i===void 0?void 0:i==this.value?this:new ze(this.type,i)}is(e){return this.type==e}static define(e={}){return new aO(e.map||(i=>i))}static mapEffects(e,i){if(!e.length)return e;let n=[];for(let r of e){let s=r.map(i);s&&n.push(s)}return n}}ze.reconfigure=ze.define();ze.appendConfig=ze.define();class Xt{constructor(e,i,n,r,s,a){this.startState=e,this.changes=i,this.selection=n,this.effects=r,this.annotations=s,this.scrollIntoView=a,this._doc=null,this._state=null,n&&wS(n,i.newLength),s.some(l=>l.type==Xt.time)||(this.annotations=s.concat(Xt.time.of(Date.now())))}static create(e,i,n,r,s,a){return new Xt(e,i,n,r,s,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let i of this.annotations)if(i.type==e)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let i=this.annotation(Xt.userEvent);return!!(i&&(i==e||i.length>e.length&&i.slice(0,e.length)==e&&i[e.length]=="."))}}Xt.time=Nr.define();Xt.userEvent=Nr.define();Xt.addToHistory=Nr.define();Xt.remote=Nr.define();function lO(t,e){let i=[];for(let n=0,r=0;;){let s,a;if(n<t.length&&(r==e.length||e[r]>=t[n]))s=t[n++],a=t[n++];else if(r<e.length)s=e[r++],a=e[r++];else return i;!i.length||i[i.length-1]<s?i.push(s,a):i[i.length-1]<a&&(i[i.length-1]=a)}}function ES(t,e,i){var n;let r,s,a;return i?(r=e.changes,s=qt.empty(e.changes.length),a=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),a=t.changes.compose(r)),{changes:a,selection:e.selection?e.selection.map(s):(n=t.selection)===null||n===void 0?void 0:n.map(r),effects:ze.mapEffects(t.effects,r).concat(ze.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Jg(t,e,i){let n=e.selection,r=la(e.annotations);return e.userEvent&&(r=r.concat(Xt.userEvent.of(e.userEvent))),{changes:e.changes instanceof qt?e.changes:qt.of(e.changes||[],i,t.facet(SS)),selection:n&&(n instanceof de?n:de.single(n.anchor,n.head)),effects:la(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function AS(t,e,i){let n=Jg(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(i=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(i=!1);let a=!!e[s].sequential;n=ES(n,Jg(t,e[s],a?n.changes.newLength:t.doc.length),a)}let r=Xt.create(t,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return hO(i?uO(r):r)}function uO(t){let e=t.startState,i=!0;for(let r of e.facet(CS)){let s=r(t);if(s===!1){i=!1;break}Array.isArray(s)&&(i=i===!0?s:lO(i,s))}if(i!==!0){let r,s;if(i===!1)s=t.changes.invertedDesc,r=qt.empty(e.doc.length);else{let a=t.changes.filter(i);r=a.changes,s=a.filtered.mapDesc(a.changes).invertedDesc}t=Xt.create(e,r,t.selection&&t.selection.map(s),ze.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let n=e.facet(MS);for(let r=n.length-1;r>=0;r--){let s=n[r](t);s instanceof Xt?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Xt?t=s[0]:t=AS(e,la(s),!1)}return t}function hO(t){let e=t.startState,i=e.facet(kS),n=t;for(let r=i.length-1;r>=0;r--){let s=i[r](t);s&&Object.keys(s).length&&(n=ES(n,Jg(e,s,t.changes.newLength),!0))}return n==t?t:Xt.create(e,t.changes,t.selection,n.effects,n.annotations,n.scrollIntoView)}const cO=[];function la(t){return t==null?cO:Array.isArray(t)?t:[t]}var Dt=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Dt||(Dt={}));const fO=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Pg;try{Pg=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function pO(t){if(Pg)return Pg.test(t);for(let e=0;e<t.length;e++){let i=t[e];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||fO.test(i)))return!0}return!1}function dO(t){return e=>{if(!/\S/.test(e))return Dt.Space;if(pO(e))return Dt.Word;for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return Dt.Word;return Dt.Other}}class lt{constructor(e,i,n,r,s,a){this.config=e,this.doc=i,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,a&&(a._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)iu(this,l<<1);this.computeSlot=null}field(e,i=!0){let n=this.config.address[e.id];if(n==null){if(i)throw new RangeError("Field is not present in this state");return}return iu(this,n),Uc(this,n)}update(...e){return AS(this,e,!0)}applyTransaction(e){let i=this.config,{base:n,compartments:r}=i;for(let a of e.effects)a.is(Af.reconfigure)?(i&&(r=new Map,i.compartments.forEach((l,h)=>r.set(h,l)),i=null),r.set(a.value.compartment,a.value.extension)):a.is(ze.reconfigure)?(i=null,n=a.value):a.is(ze.appendConfig)&&(i=null,n=la(n).concat(a.value));let s;i?s=e.startState.values.slice():(i=Bc.resolve(n,r,this),s=new lt(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(l,h)=>h.reconfigure(l,this),null).values),new lt(i,e.newDoc,e.newSelection,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:e},range:de.cursor(i.from+e.length)}))}changeByRange(e){let i=this.selection,n=e(i.ranges[0]),r=this.changes(n.changes),s=[n.range],a=la(n.effects);for(let l=1;l<i.ranges.length;l++){let h=e(i.ranges[l]),p=this.changes(h.changes),d=p.map(r);for(let y=0;y<l;y++)s[y]=s[y].map(d);let m=r.mapDesc(p,!0);s.push(h.range.map(m)),r=r.compose(d),a=ze.mapEffects(a,d).concat(ze.mapEffects(la(h.effects),m))}return{changes:r,selection:de.create(s,i.mainIndex),effects:a}}changes(e=[]){return e instanceof qt?e:qt.of(e,this.doc.length,this.facet(lt.lineSeparator))}toText(e){return dt.of(e.split(this.facet(lt.lineSeparator)||Ig))}sliceDoc(e=0,i=this.doc.length){return this.doc.sliceString(e,i,this.lineBreak)}facet(e){let i=this.config.address[e.id];return i==null?e.default:(iu(this,i),Uc(this,i))}toJSON(e){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof ci&&this.config.address[r.id]!=null&&(i[n]=r.spec.toJSON(this.field(e[n]),this))}return i}static fromJSON(e,i={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n){for(let s in n)if(Object.prototype.hasOwnProperty.call(e,s)){let a=n[s],l=e[s];r.push(a.init(h=>a.spec.fromJSON(l,h)))}}return lt.create({doc:e.doc,selection:de.fromJSON(e.selection),extensions:i.extensions?r.concat([i.extensions]):r})}static create(e={}){let i=Bc.resolve(e.extensions||[],new Map),n=e.doc instanceof dt?e.doc:dt.of((e.doc||"").split(i.staticFacet(lt.lineSeparator)||Ig)),r=e.selection?e.selection instanceof de?e.selection:de.single(e.selection.anchor,e.selection.head):de.single(0);return wS(r,n.length),i.staticFacet(xS)||(r=r.asSingle()),new lt(i,n,r,i.dynamicSlots.map(()=>null),(s,a)=>a.create(s),null)}get tabSize(){return this.facet(lt.tabSize)}get lineBreak(){return this.facet(lt.lineSeparator)||`
`}get readOnly(){return this.facet(TS)}phrase(e,...i){for(let n of this.facet(lt.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return i.length&&(e=e.replace(/\$(\$|\d*)/g,(n,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>i.length?n:i[s-1]})),e}languageDataAt(e,i,n=-1){let r=[];for(let s of this.facet(bS))for(let a of s(this,i,n))Object.prototype.hasOwnProperty.call(a,e)&&r.push(a[e]);return r}charCategorizer(e){return dO(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:i,from:n,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),a=e-n,l=e-n;for(;a>0;){let h=bi(i,a,!1);if(s(i.slice(h,a))!=Dt.Word)break;a=h}for(;l<r;){let h=bi(i,l);if(s(i.slice(l,h))!=Dt.Word)break;l=h}return a==l?null:de.range(a+n,l+n)}}lt.allowMultipleSelections=xS;lt.tabSize=Oe.define({combine:t=>t.length?t[0]:4});lt.lineSeparator=SS;lt.readOnly=TS;lt.phrases=Oe.define({compare(t,e){let i=Object.keys(t),n=Object.keys(e);return i.length==n.length&&i.every(r=>t[r]==e[r])}});lt.languageData=bS;lt.changeFilter=CS;lt.transactionFilter=MS;lt.transactionExtender=kS;Af.reconfigure=ze.define();function Dr(t,e,i={}){let n={};for(let r of t)for(let s of Object.keys(r)){let a=r[s],l=n[s];if(l===void 0)n[s]=a;else if(!(l===a||a===void 0))if(Object.hasOwnProperty.call(i,s))n[s]=i[s](l,a);else throw new Error("Config merge conflict for field "+s)}for(let r in e)n[r]===void 0&&(n[r]=e[r]);return n}class uo{eq(e){return this==e}range(e,i=e){return Fg.create(e,i,this)}}uo.prototype.startSide=uo.prototype.endSide=0;uo.prototype.point=!1;uo.prototype.mapMode=Ni.TrackDel;let Fg=class RS{constructor(e,i,n){this.from=e,this.to=i,this.value=n}static create(e,i,n){return new RS(e,i,n)}};function jg(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class y0{constructor(e,i,n,r){this.from=e,this.to=i,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,i,n,r=0){let s=n?this.to:this.from;for(let a=r,l=s.length;;){if(a==l)return a;let h=a+l>>1,p=s[h]-e||(n?this.value[h].endSide:this.value[h].startSide)-i;if(h==a)return p>=0?a:l;p>=0?l=h:a=h+1}}between(e,i,n,r){for(let s=this.findIndex(i,-1e9,!0),a=this.findIndex(n,1e9,!1,s);s<a;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,i){let n=[],r=[],s=[],a=-1,l=-1;for(let h=0;h<this.value.length;h++){let p=this.value[h],d=this.from[h]+e,m=this.to[h]+e,y,v;if(d==m){let S=i.mapPos(d,p.startSide,p.mapMode);if(S==null||(y=v=S,p.startSide!=p.endSide&&(v=i.mapPos(d,p.endSide),v<y)))continue}else if(y=i.mapPos(d,p.startSide),v=i.mapPos(m,p.endSide),y>v||y==v&&p.startSide>0&&p.endSide<=0)continue;(v-y||p.endSide-p.startSide)<0||(a<0&&(a=y),p.point&&(l=Math.max(l,v-y)),n.push(p),r.push(y-a),s.push(v-a))}return{mapped:n.length?new y0(r,s,n,l):null,pos:a}}}class It{constructor(e,i,n,r){this.chunkPos=e,this.chunk=i,this.nextLayer=n,this.maxPoint=r}static create(e,i,n,r){return new It(e,i,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let i of this.chunk)e+=i.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:i=[],sort:n=!1,filterFrom:r=0,filterTo:s=this.length}=e,a=e.filter;if(i.length==0&&!a)return this;if(n&&(i=i.slice().sort(jg)),this.isEmpty)return i.length?It.of(i):this;let l=new LS(this,null,-1).goto(0),h=0,p=[],d=new ho;for(;l.value||h<i.length;)if(h<i.length&&(l.from-i[h].from||l.startSide-i[h].value.startSide)>=0){let m=i[h++];d.addInner(m.from,m.to,m.value)||p.push(m)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(h==i.length||this.chunkEnd(l.chunkIndex)<i[h].from)&&(!a||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&d.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!a||r>l.to||s<l.from||a(l.from,l.to,l.value))&&(d.addInner(l.from,l.to,l.value)||p.push(Fg.create(l.from,l.to,l.value))),l.next());return d.finishInner(this.nextLayer.isEmpty&&!p.length?It.empty:this.nextLayer.update({add:p,filter:a,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let i=[],n=[],r=-1;for(let a=0;a<this.chunk.length;a++){let l=this.chunkPos[a],h=this.chunk[a],p=e.touchesRange(l,l+h.length);if(p===!1)r=Math.max(r,h.maxPoint),i.push(h),n.push(e.mapPos(l));else if(p===!0){let{mapped:d,pos:m}=h.map(l,e);d&&(r=Math.max(r,d.maxPoint),i.push(d),n.push(m))}}let s=this.nextLayer.map(e);return i.length==0?s:new It(n,i,s||It.empty,r)}between(e,i,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],a=this.chunk[r];if(i>=s&&e<=s+a.length&&a.between(s,e-s,i-s,n)===!1)return}this.nextLayer.between(e,i,n)}}iter(e=0){return cu.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,i=0){return cu.from(e).goto(i)}static compare(e,i,n,r,s=-1){let a=e.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=s),l=i.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=s),h=Gw(a,l,n),p=new Ol(a,h,s),d=new Ol(l,h,s);n.iterGaps((m,y,v)=>Vw(p,m,d,y,v,r)),n.empty&&n.length==0&&Vw(p,0,d,0,0,r)}static eq(e,i,n=0,r){r==null&&(r=1e9-1);let s=e.filter(d=>!d.isEmpty&&i.indexOf(d)<0),a=i.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(s.length!=a.length)return!1;if(!s.length)return!0;let l=Gw(s,a),h=new Ol(s,l,0).goto(n),p=new Ol(a,l,0).goto(n);for(;;){if(h.to!=p.to||!Wg(h.active,p.active)||h.point&&(!p.point||!h.point.eq(p.point)))return!1;if(h.to>r)return!0;h.next(),p.next()}}static spans(e,i,n,r,s=-1){let a=new Ol(e,null,s).goto(i),l=i,h=a.openStart;for(;;){let p=Math.min(a.to,n);if(a.point){let d=a.activeForPoint(a.to),m=a.pointFrom<i?d.length+1:Math.min(d.length,h);r.point(l,p,a.point,d,m,a.pointRank),h=Math.min(a.openEnd(p),d.length)}else p>l&&(r.span(l,p,a.active,h),h=a.openEnd(p));if(a.to>n)return h+(a.point&&a.to>n?1:0);l=a.to,a.next()}}static of(e,i=!1){let n=new ho;for(let r of e instanceof Fg?[e]:i?gO(e):e)n.add(r.from,r.to,r.value);return n.finish()}}It.empty=new It([],[],null,-1);function gO(t){if(t.length>1)for(let e=t[0],i=1;i<t.length;i++){let n=t[i];if(jg(e,n)>0)return t.slice().sort(jg);e=n}return t}It.empty.nextLayer=It.empty;class ho{finishChunk(e){this.chunks.push(new y0(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,i,n){this.addInner(e,i,n)||(this.nextLayer||(this.nextLayer=new ho)).add(e,i,n)}addInner(e,i,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(i-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=i,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,i-e)),!0)}addChunk(e,i){if((e-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(e);let n=i.value.length-1;return this.last=i.value[n],this.lastFrom=i.from[n]+e,this.lastTo=i.to[n]+e,!0}finish(){return this.finishInner(It.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let i=It.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,i}}function Gw(t,e,i){let n=new Map;for(let s of t)for(let a=0;a<s.chunk.length;a++)s.chunk[a].maxPoint<=0&&n.set(s.chunk[a],s.chunkPos[a]);let r=new Set;for(let s of e)for(let a=0;a<s.chunk.length;a++){let l=n.get(s.chunk[a]);l!=null&&(i?i.mapPos(l):l)==s.chunkPos[a]&&!(i!=null&&i.touchesRange(l,l+s.chunk[a].length))&&r.add(s.chunk[a])}return r}class LS{constructor(e,i,n,r=0){this.layer=e,this.skip=i,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,i,!1),this}gotoInner(e,i,n){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],i,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,i){(this.to-e||this.endSide-i)<0&&this.gotoInner(e,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],n=e+i.from[this.rangeIndex];if(this.from=n,this.to=e+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class cu{constructor(e){this.heap=e}static from(e,i=null,n=-1){let r=[];for(let s=0;s<e.length;s++)for(let a=e[s];!a.isEmpty;a=a.nextLayer)a.maxPoint>=n&&r.push(new LS(a,i,n,s));return r.length==1?r[0]:new cu(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,i=-1e9){for(let n of this.heap)n.goto(e,i);for(let n=this.heap.length>>1;n>=0;n--)rd(this.heap,n);return this.next(),this}forward(e,i){for(let n of this.heap)n.forward(e,i);for(let n=this.heap.length>>1;n>=0;n--)rd(this.heap,n);(this.to-e||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),rd(this.heap,0)}}}function rd(t,e){for(let i=t[e];;){let n=(e<<1)+1;if(n>=t.length)break;let r=t[n];if(n+1<t.length&&r.compare(t[n+1])>=0&&(r=t[n+1],n++),i.compare(r)<0)break;t[n]=i,t[e]=r,e=n}}class Ol{constructor(e,i,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=cu.from(e,i,n)}goto(e,i=-1e9){return this.cursor.goto(e,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=i,this.openStart=-1,this.next(),this}forward(e,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(e,i)}removeActive(e){Oh(this.active,e),Oh(this.activeTo,e),Oh(this.activeRank,e),this.minActive=Kw(this.active,this.activeTo)}addActive(e){let i=0,{value:n,to:r,rank:s}=this.cursor;for(;i<this.activeRank.length&&this.activeRank[i]<=s;)i++;Ih(this.active,i,n),Ih(this.activeTo,i,r),Ih(this.activeRank,i,s),e&&Ih(e,i,this.cursor.from),this.minActive=Kw(this.active,this.activeTo)}next(){let e=this.to,i=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&Oh(n,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(n),this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let r=n.length-1;r>=0&&n[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let i=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&i.push(this.active[n]);return i.reverse()}openEnd(e){let i=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)i++;return i}}function Vw(t,e,i,n,r,s){t.goto(e),i.goto(n);let a=n+r,l=n,h=n-e;for(;;){let p=t.to+h-i.to||t.endSide-i.endSide,d=p<0?t.to+h:i.to,m=Math.min(d,a);if(t.point||i.point?t.point&&i.point&&(t.point==i.point||t.point.eq(i.point))&&Wg(t.activeForPoint(t.to),i.activeForPoint(i.to))||s.comparePoint(l,m,t.point,i.point):m>l&&!Wg(t.active,i.active)&&s.compareRange(l,m,t.active,i.active),d>a)break;l=d,p<=0&&t.next(),p>=0&&i.next()}}function Wg(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!=e[i]&&!t[i].eq(e[i]))return!1;return!0}function Oh(t,e){for(let i=e,n=t.length-1;i<n;i++)t[i]=t[i+1];t.pop()}function Ih(t,e,i){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=i}function Kw(t,e){let i=-1,n=1e9;for(let r=0;r<e.length;r++)(e[r]-n||t[r].endSide-t[i].endSide)<0&&(i=r,n=e[r]);return i}function La(t,e,i=t.length){let n=0;for(let r=0;r<i;)t.charCodeAt(r)==9?(n+=e-n%e,r++):(n++,r=bi(t,r));return n}function Gg(t,e,i,n){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?i-s%i:1,r=bi(t,r)}return n===!0?-1:t.length}const Vg="ͼ",zw=typeof Symbol>"u"?"__"+Vg:Symbol.for(Vg),Kg=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Hw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class _s{constructor(e,i){this.rules=[];let{finish:n}=i||{};function r(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function s(a,l,h,p){let d=[],m=/^@(\w+)\b/.exec(a[0]),y=m&&m[1]=="keyframes";if(m&&l==null)return h.push(a[0]+";");for(let v in l){let S=l[v];if(/&/.test(v))s(v.split(/,\s*/).map(M=>a.map(b=>M.replace(/&/,b))).reduce((M,b)=>M.concat(b)),S,h);else if(S&&typeof S=="object"){if(!m)throw new RangeError("The value of a property ("+v+") should be a primitive value.");s(r(v),S,d,y)}else S!=null&&d.push(v.replace(/_.*/,"").replace(/[A-Z]/g,M=>"-"+M.toLowerCase())+": "+S+";")}(d.length||y)&&h.push((n&&!m&&!p?a.map(n):a).join(", ")+" {"+d.join(" ")+"}")}for(let a in e)s(r(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Hw[zw]||1;return Hw[zw]=e+1,Vg+e.toString(36)}static mount(e,i,n){let r=e[Kg],s=n&&n.nonce;r?s&&r.setNonce(s):r=new mO(e,s),r.mount(Array.isArray(i)?i:[i])}}let Qw=new Map;class mO{constructor(e,i){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=Qw.get(n);if(s)return e.adoptedStyleSheets=[s.sheet,...e.adoptedStyleSheets],e[Kg]=s;this.sheet=new r.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Qw.set(n,this)}else{this.styleTag=n.createElement("style"),i&&this.styleTag.setAttribute("nonce",i);let s=e.head||e;s.insertBefore(this.styleTag,s.firstChild)}this.modules=[],e[Kg]=this}mount(e){let i=this.sheet,n=0,r=0;for(let s=0;s<e.length;s++){let a=e[s],l=this.modules.indexOf(a);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,a),i)for(let h=0;h<a.rules.length;h++)i.insertRule(a.rules[h],n++)}else{for(;r<l;)n+=this.modules[r++].rules.length;n+=a.rules.length,r++}}if(!i){let s="";for(let a=0;a<this.modules.length;a++)s+=this.modules[a].getRules()+`
`;this.styleTag.textContent=s}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var bs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},fu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},yO=typeof navigator<"u"&&/Mac/.test(navigator.platform),vO=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var li=0;li<10;li++)bs[48+li]=bs[96+li]=String(li);for(var li=1;li<=24;li++)bs[li+111]="F"+li;for(var li=65;li<=90;li++)bs[li]=String.fromCharCode(li+32),fu[li]=String.fromCharCode(li);for(var sd in bs)fu.hasOwnProperty(sd)||(fu[sd]=bs[sd]);function wO(t){var e=yO&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||vO&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",i=!e&&t.key||(t.shiftKey?fu:bs)[t.keyCode]||t.key||"Unidentified";return i=="Esc"&&(i="Escape"),i=="Del"&&(i="Delete"),i=="Left"&&(i="ArrowLeft"),i=="Up"&&(i="ArrowUp"),i=="Right"&&(i="ArrowRight"),i=="Down"&&(i="ArrowDown"),i}function Jc(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function zg(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function _O(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Sc(t,e){if(!e.anchorNode)return!1;try{return zg(t,e.anchorNode)}catch{return!1}}function pu(t){return t.nodeType==3?co(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Pc(t,e,i,n){return i?Yw(t,e,i,n,-1)||Yw(t,e,i,n,1):!1}function Fc(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Yw(t,e,i,n,r){for(;;){if(t==i&&e==n)return!0;if(e==(r<0?0:xs(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Fc(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?xs(t):0}else return!1}}function xs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function v0(t,e){let i=e?t.left:t.right;return{left:i,right:i,top:t.top,bottom:t.bottom}}function bO(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function xO(t,e,i,n,r,s,a,l){let h=t.ownerDocument,p=h.defaultView||window;for(let d=t,m=!1;d&&!m;)if(d.nodeType==1){let y,v=d==h.body;if(v)y=bO(p);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(m=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let b=d.getBoundingClientRect();y={left:b.left,right:b.left+d.clientWidth,top:b.top,bottom:b.top+d.clientHeight}}let S=0,M=0;if(r=="nearest")e.top<y.top?(M=-(y.top-e.top+a),i>0&&e.bottom>y.bottom+M&&(M=e.bottom-y.bottom+M+a)):e.bottom>y.bottom&&(M=e.bottom-y.bottom+a,i<0&&e.top-M<y.top&&(M=-(y.top+M-e.top+a)));else{let b=e.bottom-e.top,w=y.bottom-y.top;M=(r=="center"&&b<=w?e.top+b/2-w/2:r=="start"||r=="center"&&i<0?e.top-a:e.bottom-w+a)-y.top}if(n=="nearest"?e.left<y.left?(S=-(y.left-e.left+s),i>0&&e.right>y.right+S&&(S=e.right-y.right+S+s)):e.right>y.right&&(S=e.right-y.right+s,i<0&&e.left<y.left+S&&(S=-(y.left+S-e.left+s))):S=(n=="center"?e.left+(e.right-e.left)/2-(y.right-y.left)/2:n=="start"==l?e.left-s:e.right-(y.right-y.left)+s)-y.left,S||M)if(v)p.scrollBy(S,M);else{let b=0,w=0;if(M){let E=d.scrollTop;d.scrollTop+=M,w=d.scrollTop-E}if(S){let E=d.scrollLeft;d.scrollLeft+=S,b=d.scrollLeft-E}e={left:e.left-b,top:e.top-w,right:e.right-b,bottom:e.bottom-w},b&&Math.abs(b-S)<1&&(n="nearest"),w&&Math.abs(w-M)<1&&(r="nearest")}if(v)break;d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function SO(t){let e=t.ownerDocument;for(let i=t.parentNode;i&&i!=e.body;)if(i.nodeType==1){if(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)return i;i=i.assignedSlot||i.parentNode}else if(i.nodeType==11)i=i.host;else break;return null}class CO{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:i,focusNode:n}=e;this.set(i,Math.min(e.anchorOffset,i?xs(i):0),n,Math.min(e.focusOffset,n?xs(n):0))}set(e,i,n,r){this.anchorNode=e,this.anchorOffset=i,this.focusNode=n,this.focusOffset=r}}let Go=null;function OS(t){if(t.setActive)return t.setActive();if(Go)return t.focus(Go);let e=[];for(let i=t;i&&(e.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(t.focus(Go==null?{get preventScroll(){return Go={preventScroll:!0},!0}}:void 0),!Go){Go=!1;for(let i=0;i<e.length;){let n=e[i++],r=e[i++],s=e[i++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=s&&(n.scrollLeft=s)}}}let $w;function co(t,e,i=e){let n=$w||($w=document.createRange());return n.setEnd(t,i),n.setStart(t,e),n}function ua(t,e,i){let n={key:e,code:e,keyCode:i,which:i,cancelable:!0},r=new KeyboardEvent("keydown",n);r.synthetic=!0,t.dispatchEvent(r);let s=new KeyboardEvent("keyup",n);return s.synthetic=!0,t.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function MO(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function IS(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function kO(t,e){let i=e.focusNode,n=e.focusOffset;if(!i||e.anchorNode!=i||e.anchorOffset!=n)return!1;for(n=Math.min(n,xs(i));;)if(n){if(i.nodeType!=1)return!1;let r=i.childNodes[n-1];r.contentEditable=="false"?n--:(i=r,n=xs(i))}else{if(i==t)return!0;n=Fc(i),i=i.parentNode}}function NS(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class Di{constructor(e,i,n=!0){this.node=e,this.offset=i,this.precise=n}static before(e,i){return new Di(e.parentNode,Fc(e),i)}static after(e,i){return new Di(e.parentNode,Fc(e)+1,i)}}const w0=[];class At{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let i=this.posAtStart;for(let n of this.children){if(n==e)return i;i+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,i){if(this.flags&2){let n=this.dom,r=null,s;for(let a of this.children){if(a.flags&7){if(!a.dom&&(s=r?r.nextSibling:n.firstChild)){let l=At.get(s);(!l||!l.parent&&l.canReuseDOM(a))&&a.reuseDOM(s)}a.sync(e,i),a.flags&=-8}if(s=r?r.nextSibling:n.firstChild,i&&!i.written&&i.node==n&&s!=a.dom&&(i.written=!0),a.dom.parentNode==n)for(;s&&s!=a.dom;)s=Zw(s);else n.insertBefore(a.dom,s);r=a.dom}for(s=r?r.nextSibling:n.firstChild,s&&i&&i.node==n&&(i.written=!0);s;)s=Zw(s)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,i),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,i){let n;if(e==this.dom)n=this.dom.childNodes[i];else{let r=xs(e)==0?0:i==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!At.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,s=0;;r++){let a=this.children[r];if(a.dom==n)return s;s+=a.length+a.breakAfter}}domBoundsAround(e,i,n=0){let r=-1,s=-1,a=-1,l=-1;for(let h=0,p=n,d=n;h<this.children.length;h++){let m=this.children[h],y=p+m.length;if(p<e&&y>i)return m.domBoundsAround(e,i,p);if(y>=e&&r==-1&&(r=h,s=p),p>i&&m.dom.parentNode==this.dom){a=h,l=d;break}d=y,p=y+m.breakAfter}return{from:s,to:l<0?n+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let i=this.parent;i;i=i.parent){if(e&&(i.flags|=2),i.flags&1)return;i.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let i=e.parent;if(!i)return e;e=i}}replaceChildren(e,i,n=w0){this.markDirty();for(let r=e;r<i;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,i-e,...n);for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new DS(this.children,e,this.children.length)}childPos(e,i=1){return this.childCursor().findPos(e,i)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,i,n,r,s,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){this.parent=null}}At.prototype.breakAfter=0;function Zw(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class DS{constructor(e,i,n){this.children=e,this.pos=i,this.i=n,this.off=0}findPos(e,i=1){for(;;){if(e>this.pos||e==this.pos&&(i>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function BS(t,e,i,n,r,s,a,l,h){let{children:p}=t,d=p.length?p[e]:null,m=s.length?s[s.length-1]:null,y=m?m.breakAfter:a;if(!(e==n&&d&&!a&&!y&&s.length<2&&d.merge(i,r,s.length?m:null,i==0,l,h))){if(n<p.length){let v=p[n];v&&r<v.length?(e==n&&(v=v.split(r),r=0),!y&&m&&v.merge(0,r,m,!0,0,h)?s[s.length-1]=v:(r&&v.merge(0,r,null,!1,0,h),s.push(v))):v!=null&&v.breakAfter&&(m?m.breakAfter=1:a=1),n++}for(d&&(d.breakAfter=a,i>0&&(!a&&s.length&&d.merge(i,d.length,s[0],!1,l,0)?d.breakAfter=s.shift().breakAfter:(i<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(i,d.length,null,!1,l,0),e++));e<n&&s.length;)if(p[n-1].become(s[s.length-1]))n--,s.pop(),h=s.length?0:l;else if(p[e].become(s[0]))e++,s.shift(),l=s.length?0:h;else break;!s.length&&e&&n<p.length&&!p[e-1].breakAfter&&p[n].merge(0,0,p[e-1],!1,l,h)&&e--,(e<n||s.length)&&t.replaceChildren(e,n,s)}}function US(t,e,i,n,r,s){let a=t.childCursor(),{i:l,off:h}=a.findPos(i,1),{i:p,off:d}=a.findPos(e,-1),m=e-i;for(let y of n)m+=y.length;t.length+=m,BS(t,p,d,l,h,n,0,r,s)}const na="￿";class JS{constructor(e,i){this.points=e,this.text="",this.lineSeparator=i.facet(lt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=na}readRange(e,i){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let s=this.text.length;this.readNode(r);let a=r.nextSibling;if(a==i)break;let l=At.get(r),h=At.get(a);(l&&h?l.breakAfter:(l?l.breakAfter:qw(r))||qw(a)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=a}return this.findPointBefore(n,i),this}readTextNode(e){let i=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,i.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,a=1,l;if(this.lineSeparator?(s=i.indexOf(this.lineSeparator,n),a=this.lineSeparator.length):(l=r.exec(i))&&(s=l.index,a=l[0].length),this.append(i.slice(n,s<0?i.length:s)),s<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);n=s+a}}readNode(e){if(e.cmIgnore)return;let i=At.get(e),n=i&&i.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let r=n.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,i){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==i&&(n.pos=this.text.length)}findPointInside(e,i){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(i,n.offset))}}function qw(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class Xw{constructor(e,i){this.node=e,this.offset=i,this.pos=-1}}let sn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Hg=typeof document<"u"?document:{documentElement:{style:{}}};const Qg=/Edge\/(\d+)/.exec(sn.userAgent),PS=/MSIE \d/.test(sn.userAgent),Yg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(sn.userAgent),Rf=!!(PS||Yg||Qg),e_=!Rf&&/gecko\/(\d+)/i.test(sn.userAgent),od=!Rf&&/Chrome\/(\d+)/.exec(sn.userAgent),t_="webkitFontSmoothing"in Hg.documentElement.style,FS=!Rf&&/Apple Computer/.test(sn.vendor),i_=FS&&(/Mobile\/\w+/.test(sn.userAgent)||sn.maxTouchPoints>2);var Ae={mac:i_||/Mac/.test(sn.platform),windows:/Win/.test(sn.platform),linux:/Linux|X11/.test(sn.platform),ie:Rf,ie_version:PS?Hg.documentMode||6:Yg?+Yg[1]:Qg?+Qg[1]:0,gecko:e_,gecko_version:e_?+(/Firefox\/(\d+)/.exec(sn.userAgent)||[0,0])[1]:0,chrome:!!od,chrome_version:od?+od[1]:0,ios:i_,android:/Android\b/.test(sn.userAgent),webkit:t_,safari:FS,webkit_version:t_?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Hg.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const TO=256;class mr extends At{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,i){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(i&&i.node==this.dom&&(i.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,i,n){return this.flags&8||n&&(!(n instanceof mr)||this.length-(i-e)+n.length>TO||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(i),this.markDirty(),!0)}split(e){let i=new mr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),i.flags|=this.flags&8,i}localPosFromDOM(e,i){return e==this.dom?i:i?this.text.length:0}domAtPos(e){return new Di(this.dom,e)}domBoundsAround(e,i,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,i){return EO(this.dom,e,i)}}class Rr extends At{constructor(e,i=[],n=0){super(),this.mark=e,this.children=i,this.length=n;for(let r of i)r.setParent(this)}setAttrs(e){if(IS(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let i in this.mark.attrs)e.setAttribute(i,this.mark.attrs[i]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,i){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,i)}merge(e,i,n,r,s,a){return n&&(!(n instanceof Rr&&n.mark.eq(this.mark))||e&&s<=0||i<this.length&&a<=0)?!1:(US(this,e,i,n?n.children:[],s-1,a-1),this.markDirty(),!0)}split(e){let i=[],n=0,r=-1,s=0;for(let l of this.children){let h=n+l.length;h>e&&i.push(n<e?l.split(e-n):l),r<0&&n>=e&&(r=s),n=h,s++}let a=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Rr(this.mark,i,a)}domAtPos(e){return jS(this,e)}coordsAt(e,i){return GS(this,e,i)}}function EO(t,e,i){let n=t.nodeValue.length;e>n&&(e=n);let r=e,s=e,a=0;e==0&&i<0||e==n&&i>=0?Ae.chrome||Ae.gecko||(e?(r--,a=1):s<n&&(s++,a=-1)):i<0?r--:s<n&&s++;let l=co(t,r,s).getClientRects();if(!l.length)return null;let h=l[(a?a<0:i>=0)?0:l.length-1];return Ae.safari&&!a&&h.width==0&&(h=Array.prototype.find.call(l,p=>p.width)||h),a?v0(h,a<0):h||null}class us extends At{static create(e,i,n){return new us(e,i,n)}constructor(e,i,n){super(),this.widget=e,this.length=i,this.side=n,this.prevWidget=null}split(e){let i=us.create(this.widget,this.length-e,this.side);return this.length-=e,i}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,i,n,r,s,a){return n&&(!(n instanceof us)||!this.widget.compare(n.widget)||e>0&&s<=0||i<this.length&&a<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-i),!0)}become(e){return e instanceof us&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return dt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:i}=e,n=i&&i.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):dt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Di.before(this.dom):Di.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,i){let n=this.widget.coordsAt(this.dom,e,i);if(n)return n;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let a=this.side?this.side<0:e>0;for(let l=a?r.length-1:0;s=r[l],!(e>0?l==0:l==r.length-1||s.top<s.bottom);l+=a?-1:1);return v0(s,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class va extends At{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof va&&e.side==this.side}split(){return new va(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Di.before(this.dom):Di.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return dt.empty}get isHidden(){return!0}}mr.prototype.children=us.prototype.children=va.prototype.children=w0;function jS(t,e){let i=t.dom,{children:n}=t,r=0;for(let s=0;r<n.length;r++){let a=n[r],l=s+a.length;if(!(l==s&&a.getSide()<=0)){if(e>s&&e<l&&a.dom.parentNode==i)return a.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let a=n[s-1];if(a.dom.parentNode==i)return a.domAtPos(a.length)}for(let s=r;s<n.length;s++){let a=n[s];if(a.dom.parentNode==i)return a.domAtPos(0)}return new Di(i,0)}function WS(t,e,i){let n,{children:r}=t;i>0&&e instanceof Rr&&r.length&&(n=r[r.length-1])instanceof Rr&&n.mark.eq(e.mark)?WS(n,e.children[0],i-1):(r.push(e),e.setParent(t)),t.length+=e.length}function GS(t,e,i){let n=null,r=-1,s=null,a=-1;function l(p,d){for(let m=0,y=0;m<p.children.length&&y<=d;m++){let v=p.children[m],S=y+v.length;S>=d&&(v.children.length?l(v,d-y):(!s||s.isHidden&&i>0)&&(S>d||y==S&&v.getSide()>0)?(s=v,a=d-y):(y<d||y==S&&v.getSide()<0&&!v.isHidden)&&(n=v,r=d-y)),y=S}}l(t,e);let h=(i<0?n:s)||n||s;return h?h.coordsAt(Math.max(0,h==n?r:a),i):AO(t)}function AO(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let i=pu(e);return i[i.length-1]||null}function $g(t,e){for(let i in t)i=="class"&&e.class?e.class+=" "+t.class:i=="style"&&e.style?e.style+=";"+t.style:e[i]=t[i];return e}const n_=Object.create(null);function _0(t,e,i){if(t==e)return!0;t||(t=n_),e||(e=n_);let n=Object.keys(t),r=Object.keys(e);if(n.length-(i&&n.indexOf(i)>-1?1:0)!=r.length-(i&&r.indexOf(i)>-1?1:0))return!1;for(let s of n)if(s!=i&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Zg(t,e,i){let n=!1;if(e)for(let r in e)i&&r in i||(n=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(i)for(let r in i)e&&e[r]==i[r]||(n=!0,r=="style"?t.style.cssText=i[r]:t.setAttribute(r,i[r]));return n}function RO(t){let e=Object.create(null);for(let i=0;i<t.attributes.length;i++){let n=t.attributes[i];e[n.name]=n.value}return e}class ks{eq(e){return!1}updateDOM(e,i){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,i,n){return null}get isHidden(){return!1}destroy(e){}}var Kt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Kt||(Kt={}));class Ve extends uo{constructor(e,i,n,r){super(),this.startSide=e,this.endSide=i,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Ou(e)}static widget(e){let i=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return i+=n&&!e.inlineOrder?i>0?3e8:-4e8:i>0?1e8:-1e8,new Ss(e,i,i,n,e.widget||null,!1)}static replace(e){let i=!!e.block,n,r;if(e.isBlockGap)n=-5e8,r=4e8;else{let{start:s,end:a}=VS(e,i);n=(s?i?-3e8:-1:5e8)-1,r=(a?i?2e8:1:-6e8)+1}return new Ss(e,n,r,i,e.widget||null,!0)}static line(e){return new Iu(e)}static set(e,i=!1){return It.of(e,i)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ve.none=It.empty;class Ou extends Ve{constructor(e){let{start:i,end:n}=VS(e);super(i?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var i,n;return this==e||e instanceof Ou&&this.tagName==e.tagName&&(this.class||((i=this.attrs)===null||i===void 0?void 0:i.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&_0(this.attrs,e.attrs,"class")}range(e,i=e){if(e>=i)throw new RangeError("Mark decorations may not be empty");return super.range(e,i)}}Ou.prototype.point=!1;class Iu extends Ve{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Iu&&this.spec.class==e.spec.class&&_0(this.spec.attributes,e.spec.attributes)}range(e,i=e){if(i!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,i)}}Iu.prototype.mapMode=Ni.TrackBefore;Iu.prototype.point=!0;class Ss extends Ve{constructor(e,i,n,r,s,a){super(i,n,s,e),this.block=r,this.isReplace=a,this.mapMode=r?i<=0?Ni.TrackBefore:Ni.TrackAfter:Ni.TrackDel}get type(){return this.startSide<this.endSide?Kt.WidgetRange:this.startSide<=0?Kt.WidgetBefore:Kt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ss&&LO(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,i=e){if(this.isReplace&&(e>i||e==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,i)}}Ss.prototype.point=!0;function VS(t,e=!1){let{inclusiveStart:i,inclusiveEnd:n}=t;return i==null&&(i=t.inclusive),n==null&&(n=t.inclusive),{start:i??e,end:n??e}}function LO(t,e){return t==e||!!(t&&e&&t.compare(e))}function qg(t,e,i,n=0){let r=i.length-1;r>=0&&i[r]+n>=t?i[r]=Math.max(i[r],e):i.push(t,e)}class Ii extends At{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,i,n,r,s,a){if(n){if(!(n instanceof Ii))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),US(this,e,i,n?n.children:[],s,a),!0}split(e){let i=new Ii;if(i.breakAfter=this.breakAfter,this.length==0)return i;let{i:n,off:r}=this.childPos(e);r&&(i.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let s=n;s<this.children.length;s++)i.append(this.children[s],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,i}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){_0(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,i){WS(this,e,i)}addLineDeco(e){let i=e.spec.attributes,n=e.spec.class;i&&(this.attrs=$g(i,this.attrs||{})),n&&(this.attrs=$g({class:n},this.attrs||{}))}domAtPos(e){return jS(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,i){var n;this.dom?this.flags&4&&(IS(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Zg(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,i);let r=this.dom.lastChild;for(;r&&At.get(r)instanceof Rr;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((n=At.get(r))===null||n===void 0?void 0:n.isEditable)==!1&&(!Ae.ios||!this.children.some(s=>s instanceof mr))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,i;for(let n of this.children){if(!(n instanceof mr)||/[^ -~]/.test(n.text))return null;let r=pu(n.dom);if(r.length!=1)return null;e+=r[0].width,i=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:i}:null}coordsAt(e,i){let n=GS(this,e,i);if(!this.children.length&&n&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=n.bottom-n.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let a=(s-r.textHeight)/2;return{top:n.top+a,bottom:n.bottom-a,left:n.left,right:n.left}}}return n}become(e){return!1}get type(){return Kt.Text}static find(e,i){for(let n=0,r=0;n<e.children.length;n++){let s=e.children[n],a=r+s.length;if(a>=i){if(s instanceof Ii)return s;if(a>i)break}r=a+s.breakAfter}return null}}class no extends At{constructor(e,i,n){super(),this.widget=e,this.length=i,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,i,n,r,s,a){return n&&(!(n instanceof no)||!this.widget.compare(n.widget)||e>0&&s<=0||i<this.length&&a<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-i),!0)}domAtPos(e){return e==0?Di.before(this.dom):Di.after(this.dom,e==this.length)}split(e){let i=this.length-e;this.length=e;let n=new no(this.widget,i,this.type);return n.breakAfter=this.breakAfter,n}get children(){return w0}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):dt.empty}domBoundsAround(){return null}become(e){return e instanceof no&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,i){return this.widget.coordsAt(this.dom,e,i)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class nu{constructor(e,i,n,r){this.doc=e,this.pos=i,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=i}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof no&&e.type==Kt.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ii),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Nh(new va(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,i,n){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(i.slice(i.length-n)),this.getLine().append(Nh(new mr(this.text.slice(this.textOff,this.textOff+r)),i),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,i,n,r){this.buildText(i-e,n,r),this.pos=i,this.openStart<0&&(this.openStart=r)}point(e,i,n,r,s,a){if(this.disallowBlockEffectsFor[a]&&n instanceof Ss){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(i>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=i-e;if(n instanceof Ss)if(n.block){let{type:h}=n;h==Kt.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new no(n.widget||new r_("div"),l,h))}else{let h=us.create(n.widget||new r_("span"),l,l?0:n.startSide),p=this.atCursorPos&&!h.isEditable&&s<=r.length&&(e<i||n.startSide>0),d=!h.isEditable&&(e<i||s>r.length||n.startSide<=0),m=this.getLine();this.pendingBuffer==2&&!p&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),p&&(m.append(Nh(new va(1),r),s),s=r.length+Math.max(0,s-r.length)),m.append(Nh(h,r),s),this.atCursorPos=d,this.pendingBuffer=d?e<i||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=i),this.openStart<0&&(this.openStart=s)}static build(e,i,n,r,s){let a=new nu(e,i,n,s);return a.openEnd=It.spans(r,i,n,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Nh(t,e){for(let i of e)t=new Rr(i,[t],t.length);return t}class r_ extends ks{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const KS=Oe.define(),zS=Oe.define(),HS=Oe.define(),QS=Oe.define(),Xg=Oe.define(),YS=Oe.define(),$S=Oe.define(),ZS=Oe.define({combine:t=>t.some(e=>e)}),qS=Oe.define({combine:t=>t.some(e=>e)});class jc{constructor(e,i="nearest",n="nearest",r=5,s=5){this.range=e,this.y=i,this.x=n,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new jc(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const s_=ze.define({map:(t,e)=>t.map(e)});function vn(t,e,i){let n=t.facet(QS);n.length?n[0](e):window.onerror?window.onerror(String(e),i,void 0,void 0,e):i?console.error(i+":",e):console.error(e)}const Lf=Oe.define({combine:t=>t.length?t[0]:!0});let OO=0;const Hl=Oe.define();class Si{constructor(e,i,n,r){this.id=e,this.create=i,this.domEventHandlers=n,this.extension=r(this)}static define(e,i){const{eventHandlers:n,provide:r,decorations:s}=i||{};return new Si(OO++,e,n,a=>{let l=[Hl.of(a)];return s&&l.push(du.of(h=>{let p=h.plugin(a);return p?s(p):Ve.none})),r&&l.push(r(a)),l})}static fromClass(e,i){return Si.define(n=>new e(n),i)}}class ad{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let i=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(i)}catch(n){if(vn(i.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(i){vn(e.state,i,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var i;if(!((i=this.value)===null||i===void 0)&&i.destroy)try{this.value.destroy()}catch(n){vn(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const XS=Oe.define(),b0=Oe.define(),du=Oe.define(),x0=Oe.define(),eC=Oe.define();function o_(t,e,i){let n=t.state.facet(eC);if(!n.length)return n;let r=n.map(a=>a instanceof Function?a(t):a),s=[];return It.spans(r,e,i,{point(){},span(a,l,h,p){let d=s;for(let m=h.length-1;m>=0;m--,p--){let y=h[m].spec.bidiIsolate,v;if(y!=null)if(p>0&&d.length&&(v=d[d.length-1]).to==a&&v.direction==y)v.to=l,d=v.inner;else{let S={from:a,to:l,direction:y,inner:[]};d.push(S),d=S.inner}}}}),s}const tC=Oe.define();function iC(t){let e=0,i=0,n=0,r=0;for(let s of t.state.facet(tC)){let a=s(t);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(i=Math.max(i,a.right)),a.top!=null&&(n=Math.max(n,a.top)),a.bottom!=null&&(r=Math.max(r,a.bottom)))}return{left:e,right:i,top:n,bottom:r}}const Ql=Oe.define();class wn{constructor(e,i,n,r){this.fromA=e,this.toA=i,this.fromB=n,this.toB=r}join(e){return new wn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let i=e.length,n=this;for(;i>0;i--){let r=e[i-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(i-1,1)}}return e.splice(i,0,n),e}static extendWithRanges(e,i){if(i.length==0)return e;let n=[];for(let r=0,s=0,a=0,l=0;;r++){let h=r==e.length?null:e[r],p=a-l,d=h?h.fromB:1e9;for(;s<i.length&&i[s]<d;){let m=i[s],y=i[s+1],v=Math.max(l,m),S=Math.min(d,y);if(v<=S&&new wn(v+p,S+p,v,S).addToSet(n),y>d)break;s+=2}if(!h)return n;new wn(h.fromA,h.toA,h.fromB,h.toB).addToSet(n),a=h.toA,l=h.toB}}}class Wc{constructor(e,i,n){this.view=e,this.state=i,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=qt.empty(this.startState.doc.length);for(let s of n)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,a,l,h)=>r.push(new wn(s,a,l,h))),this.changedRanges=r}static create(e,i,n){return new Wc(e,i,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Ft=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ft||(Ft={}));const gu=Ft.LTR,nC=Ft.RTL;function rC(t){let e=[];for(let i=0;i<t.length;i++)e.push(1<<+t[i]);return e}const IO=rC("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),NO=rC("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),em=Object.create(null),Zn=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),i=t.charCodeAt(1);em[e]=i,em[i]=-e}function DO(t){return t<=247?IO[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?NO[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8203?256:64336<=t&&t<=65023?4:t==8204?256:1}const BO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class hs{get dir(){return this.level%2?nC:gu}constructor(e,i,n){this.from=e,this.to=i,this.level=n}side(e,i){return this.dir==i==e?this.to:this.from}static find(e,i,n,r){let s=-1;for(let a=0;a<e.length;a++){let l=e[a];if(l.from<=i&&l.to>=i){if(l.level==n)return a;(s<0||(r!=0?r<0?l.from<i:l.to>i:e[s].level>l.level))&&(s=a)}}if(s<0)throw new RangeError("Index out of range");return s}}function sC(t,e){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++){let n=t[i],r=e[i];if(n.from!=r.from||n.to!=r.to||n.direction!=r.direction||!sC(n.inner,r.inner))return!1}return!0}const Mt=[];function UO(t,e,i,n,r){for(let s=0;s<=n.length;s++){let a=s?n[s-1].to:e,l=s<n.length?n[s].from:i,h=s?256:r;for(let p=a,d=h,m=h;p<l;p++){let y=DO(t.charCodeAt(p));y==512?y=d:y==8&&m==4&&(y=16),Mt[p]=y==4?2:y,y&7&&(m=y),d=y}for(let p=a,d=h,m=h;p<l;p++){let y=Mt[p];if(y==128)p<l-1&&d==Mt[p+1]&&d&24?y=Mt[p]=d:Mt[p]=256;else if(y==64){let v=p+1;for(;v<l&&Mt[v]==64;)v++;let S=p&&d==8||v<i&&Mt[v]==8?m==1?1:8:256;for(let M=p;M<v;M++)Mt[M]=S;p=v-1}else y==8&&m==1&&(Mt[p]=1);d=y,y&7&&(m=y)}}}function JO(t,e,i,n,r){let s=r==1?2:1;for(let a=0,l=0,h=0;a<=n.length;a++){let p=a?n[a-1].to:e,d=a<n.length?n[a].from:i;for(let m=p,y,v,S;m<d;m++)if(v=em[y=t.charCodeAt(m)])if(v<0){for(let M=l-3;M>=0;M-=3)if(Zn[M+1]==-v){let b=Zn[M+2],w=b&2?r:b&4?b&1?s:r:0;w&&(Mt[m]=Mt[Zn[M]]=w),l=M;break}}else{if(Zn.length==189)break;Zn[l++]=m,Zn[l++]=y,Zn[l++]=h}else if((S=Mt[m])==2||S==1){let M=S==r;h=M?0:1;for(let b=l-3;b>=0;b-=3){let w=Zn[b+2];if(w&2)break;if(M)Zn[b+2]|=2;else{if(w&4)break;Zn[b+2]|=4}}}}}function PO(t,e,i,n){for(let r=0,s=n;r<=i.length;r++){let a=r?i[r-1].to:t,l=r<i.length?i[r].from:e;for(let h=a;h<l;){let p=Mt[h];if(p==256){let d=h+1;for(;;)if(d==l){if(r==i.length)break;d=i[r++].to,l=r<i.length?i[r].from:e}else if(Mt[d]==256)d++;else break;let m=s==1,y=(d<e?Mt[d]:n)==1,v=m==y?m?1:2:n;for(let S=d,M=r,b=M?i[M-1].to:t;S>h;)S==b&&(S=i[--M].from,b=M?i[M-1].to:t),Mt[--S]=v;h=d}else s=p,h++}}}function tm(t,e,i,n,r,s,a){let l=n%2?2:1;if(n%2==r%2)for(let h=e,p=0;h<i;){let d=!0,m=!1;if(p==s.length||h<s[p].from){let M=Mt[h];M!=l&&(d=!1,m=M==16)}let y=!d&&l==1?[]:null,v=d?n:n+1,S=h;e:for(;;)if(p<s.length&&S==s[p].from){if(m)break e;let M=s[p];if(!d)for(let b=M.to,w=p+1;;){if(b==i)break e;if(w<s.length&&s[w].from==b)b=s[w++].to;else{if(Mt[b]==l)break e;break}}if(p++,y)y.push(M);else{M.from>h&&a.push(new hs(h,M.from,v));let b=M.direction==gu!=!(v%2);im(t,b?n+1:n,r,M.inner,M.from,M.to,a),h=M.to}S=M.to}else{if(S==i||(d?Mt[S]!=l:Mt[S]==l))break;S++}y?tm(t,h,S,n+1,r,y,a):h<S&&a.push(new hs(h,S,v)),h=S}else for(let h=i,p=s.length;h>e;){let d=!0,m=!1;if(!p||h>s[p-1].to){let M=Mt[h-1];M!=l&&(d=!1,m=M==16)}let y=!d&&l==1?[]:null,v=d?n:n+1,S=h;e:for(;;)if(p&&S==s[p-1].to){if(m)break e;let M=s[--p];if(!d)for(let b=M.from,w=p;;){if(b==e)break e;if(w&&s[w-1].to==b)b=s[--w].from;else{if(Mt[b-1]==l)break e;break}}if(y)y.push(M);else{M.to<h&&a.push(new hs(M.to,h,v));let b=M.direction==gu!=!(v%2);im(t,b?n+1:n,r,M.inner,M.from,M.to,a),h=M.from}S=M.from}else{if(S==e||(d?Mt[S-1]!=l:Mt[S-1]==l))break;S--}y?tm(t,S,h,n+1,r,y,a):S<h&&a.push(new hs(S,h,v)),h=S}}function im(t,e,i,n,r,s,a){let l=e%2?2:1;UO(t,r,s,n,l),JO(t,r,s,n,l),PO(r,s,n,l),tm(t,r,s,e,i,n,a)}function FO(t,e,i){if(!t)return[new hs(0,0,e==nC?1:0)];if(e==gu&&!i.length&&!BO.test(t))return oC(t.length);if(i.length)for(;t.length>Mt.length;)Mt[Mt.length]=256;let n=[],r=e==gu?0:1;return im(t,r,r,i,0,t.length,n),n}function oC(t){return[new hs(0,t,0)]}let aC="";function jO(t,e,i,n,r){var s;let a=n.head-t.from,l=-1;if(a==0){if(!r||!t.length)return null;e[0].level!=i&&(a=e[0].side(!1,i),l=0)}else if(a==t.length){if(r)return null;let y=e[e.length-1];y.level!=i&&(a=y.side(!0,i),l=e.length-1)}l<0&&(l=hs.find(e,a,(s=n.bidiLevel)!==null&&s!==void 0?s:-1,n.assoc));let h=e[l];a==h.side(r,i)&&(h=e[l+=r?1:-1],a=h.side(!r,i));let p=r==(h.dir==i),d=bi(t.text,a,p);if(aC=t.text.slice(Math.min(a,d),Math.max(a,d)),d!=h.side(r,i))return de.cursor(d+t.from,p?-1:1,h.level);let m=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return!m&&h.level!=i?de.cursor(r?t.to:t.from,r?-1:1,i):m&&m.level<h.level?de.cursor(m.side(!r,i)+t.from,r?1:-1,m.level):de.cursor(d+t.from,r?-1:1,h.level)}class a_ extends At{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ii],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new wn(0,0,0,e.state.doc.length)],0,null)}update(e){let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:l,toA:h})=>h<this.minWidthFrom||l>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let n=this.view.inputState.composing<0?null:GO(this.view,e.changes);if(this.hasComposition){this.markedForComposition.clear();let{from:l,to:h}=this.hasComposition;i=new wn(l,h,e.changes.mapPos(l,-1),e.changes.mapPos(h,1)).addToSet(i.slice())}this.hasComposition=n?{from:n.range.fromB,to:n.range.toB}:null,(Ae.ie||Ae.chrome)&&!n&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,s=this.updateDeco(),a=zO(r,s,e.changes);return i=wn.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,n),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,i,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,i,n);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=Ae.chrome||Ae.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||r.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof no&&a.widget instanceof l_&&s.push(a.dom);r.updateGaps(s)}updateChildren(e,i,n){let r=n?n.range.addToSet(e.slice()):e,s=this.childCursor(i);for(let a=r.length-1;;a--){let l=a>=0?r[a]:null;if(!l)break;let{fromA:h,toA:p,fromB:d,toB:m}=l,y,v,S,M;if(n&&n.range.fromB<m&&n.range.toB>d){let L=nu.build(this.view.state.doc,d,n.range.fromB,this.decorations,this.dynamicDecorationMap),I=nu.build(this.view.state.doc,n.range.toB,m,this.decorations,this.dynamicDecorationMap);v=L.breakAtStart,S=L.openStart,M=I.openEnd;let O=this.compositionView(n);I.breakAtStart?O.breakAfter=1:I.content.length&&O.merge(O.length,O.length,I.content[0],!1,I.openStart,0)&&(O.breakAfter=I.content[0].breakAfter,I.content.shift()),L.content.length&&O.merge(0,0,L.content[L.content.length-1],!0,0,L.openEnd)&&L.content.pop(),y=L.content.concat(O).concat(I.content)}else({content:y,breakAtStart:v,openStart:S,openEnd:M}=nu.build(this.view.state.doc,d,m,this.decorations,this.dynamicDecorationMap));let{i:b,off:w}=s.findPos(p,1),{i:E,off:B}=s.findPos(h,-1);BS(this,E,B,b,w,y,v,S,M)}n&&this.fixCompositionDOM(n)}compositionView(e){let i=new mr(e.text.nodeValue);i.flags|=8;for(let{deco:r}of e.marks)i=new Rr(r,[i],i.length);let n=new Ii;return n.append(i,0),n}fixCompositionDOM(e){let i=(s,a)=>{a.flags|=8,this.markedForComposition.add(a);let l=At.get(s);l!=a&&(l&&(l.dom=null),a.setDOM(s))},n=this.childPos(e.range.fromB,1),r=this.children[n.i];i(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)n=r.childPos(n.off,1),r=r.children[n.i],i(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,i=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,r=n==this.dom,s=!r&&Sc(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(r||i||s))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,h=this.domAtPos(l.anchor),p=l.empty?h:this.domAtPos(l.head);if(Ae.gecko&&l.empty&&!this.hasComposition&&WO(h)){let m=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(m,h.node.childNodes[h.offset]||null)),h=p=new Di(m,0),a=!0}let d=this.view.observer.selectionRange;(a||!d.focusNode||!Pc(h.node,h.offset,d.anchorNode,d.anchorOffset)||!Pc(p.node,p.offset,d.focusNode,d.focusOffset))&&(this.view.observer.ignore(()=>{Ae.android&&Ae.chrome&&this.dom.contains(d.focusNode)&&HO(d.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let m=Jc(this.view.root);if(m)if(l.empty){if(Ae.gecko){let y=VO(h.node,h.offset);if(y&&y!=3){let v=uC(h.node,h.offset,y==1?1:-1);v&&(h=new Di(v,y==1?0:v.nodeValue.length))}}m.collapse(h.node,h.offset),l.bidiLevel!=null&&d.caretBidiLevel!=null&&(d.caretBidiLevel=l.bidiLevel)}else if(m.extend){m.collapse(h.node,h.offset);try{m.extend(p.node,p.offset)}catch{}}else{let y=document.createRange();l.anchor>l.head&&([h,p]=[p,h]),y.setEnd(p.node,p.offset),y.setStart(h.node,h.offset),m.removeAllRanges(),m.addRange(y)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(h,p)),this.impreciseAnchor=h.precise?null:new Di(d.anchorNode,d.anchorOffset),this.impreciseHead=p.precise?null:new Di(d.focusNode,d.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,i=e.state.selection.main,n=Jc(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!n||!i.empty||!i.assoc||!n.modify)return;let a=Ii.find(this,i.head);if(!a)return;let l=a.posAtStart;if(i.head==l||i.head==l+a.length)return;let h=this.coordsAt(i.head,-1),p=this.coordsAt(i.head,1);if(!h||!p||h.bottom>p.top)return;let d=this.domAtPos(i.head+i.assoc);n.collapse(d.node,d.offset),n.modify("move",i.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let m=e.observer.selectionRange;e.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=i.from&&n.collapse(r,s)}nearest(e){for(let i=e;i;){let n=At.get(i);if(n&&n.rootView==this)return n;i=i.parentNode}return null}posFromDOM(e,i){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,i)+n.posAtStart}domAtPos(e){let{i,off:n}=this.childCursor().findPos(e,-1);for(;i<this.children.length-1;){let r=this.children[i];if(n<r.length||r instanceof Ii)break;i++,n=0}return this.children[i].domAtPos(n)}coordsAt(e,i){for(let n=this.length,r=this.children.length-1;;r--){let s=this.children[r],a=n-s.breakAfter-s.length;if(e>a||e==a&&s.type!=Kt.WidgetBefore&&s.type!=Kt.WidgetAfter&&(!r||i==2||this.children[r-1].breakAfter||this.children[r-1].type==Kt.WidgetBefore&&i>-2))return s.coordsAt(e-a,i);n=a}}coordsForChar(e){let{i,off:n}=this.childPos(e,1),r=this.children[i];if(!(r instanceof Ii))return null;for(;r.children.length;){let{i:l,off:h}=r.childPos(n,1);for(;;l++){if(l==r.children.length)return null;if((r=r.children[l]).length)break}n=h}if(!(r instanceof mr))return null;let s=bi(r.text,n);if(s==n)return null;let a=co(r.dom,n,s).getClientRects();return!a.length||a[0].top>=a[0].bottom?null:a[0]}measureVisibleLineHeights(e){let i=[],{from:n,to:r}=e,s=this.view.contentDOM.clientWidth,a=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,h=this.view.textDirection==Ft.LTR;for(let p=0,d=0;d<this.children.length;d++){let m=this.children[d],y=p+m.length;if(y>r)break;if(p>=n){let v=m.dom.getBoundingClientRect();if(i.push(v.height),a){let S=m.dom.lastChild,M=S?pu(S):[];if(M.length){let b=M[M.length-1],w=h?b.right-v.left:v.right-b.left;w>l&&(l=w,this.minWidth=s,this.minWidthFrom=p,this.minWidthTo=y)}}}p=y+m.breakAfter}return i}textDirectionAt(e){let{i}=this.childPos(e,1);return getComputedStyle(this.children[i].dom).direction=="rtl"?Ft.RTL:Ft.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Ii){let a=s.measureTextSize();if(a)return a}let e=document.createElement("div"),i,n,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=pu(e.firstChild)[0];i=e.getBoundingClientRect().height,n=s?s.width/27:7,r=s?s.height:i,e.remove()}),{lineHeight:i,charWidth:n,textHeight:r}}childCursor(e=this.length){let i=this.children.length;return i&&(e-=this.children[--i].length),new DS(this.children,e,i)}computeBlockGapDeco(){let e=[],i=this.view.viewState;for(let n=0,r=0;;r++){let s=r==i.viewports.length?null:i.viewports[r],a=s?s.from-1:this.length;if(a>n){let l=i.lineBlockAt(a).bottom-i.lineBlockAt(n).top;e.push(Ve.replace({widget:new l_(l),block:!0,inclusive:!0,isBlockGap:!0}).range(n,a))}if(!s)break;n=s.to+1}return Ve.set(e)}updateDeco(){let e=this.view.state.facet(du).map((i,n)=>(this.dynamicDecorationMap[n]=typeof i=="function")?i(this.view):i);for(let i=e.length;i<e.length+3;i++)this.dynamicDecorationMap[i]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:i}=e,n=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1),r;if(!n)return;!i.empty&&(r=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(n={left:Math.min(n.left,r.left),top:Math.min(n.top,r.top),right:Math.max(n.right,r.right),bottom:Math.max(n.bottom,r.bottom)});let s=iC(this.view),a={left:n.left-s.left,top:n.top-s.top,right:n.right+s.right,bottom:n.bottom+s.bottom};xO(this.view.scrollDOM,a,i.head<i.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Ft.LTR)}}function WO(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class l_ extends ks{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function lC(t,e){let i=t.observer.selectionRange,n=i.focusNode&&uC(i.focusNode,i.focusOffset,0);if(!n)return null;let r=At.get(n),s,a;if(r instanceof mr)s=r.posAtStart,a=s+r.length;else{let l=Math.max(0,n.nodeValue.length-e);e:for(let h=0,p=n;;){for(let m=p.previousSibling,y;m;m=m.previousSibling){if(y=At.get(m)){a=y.posAtEnd+h,s=Math.max(0,a-l);break e}let v=new JS([],t.state);if(v.readNode(m),v.text.indexOf(na)>-1)return null;h+=v.text.length}if(p=p.parentNode,!p)return null;let d=At.get(p);if(d){s=d.posAtStart+h,a=s+l;break}}}return{from:s,to:a,node:n}}function GO(t,e){let i=lC(t,e.newLength-e.length);if(!i)return null;let{from:n,to:r,node:s}=i,a=e.mapPos(n,-1),l=e.mapPos(r,1),h=s.nodeValue;if(/[\n\r]/.test(h))return null;if(l-a!=h.length){let y=e.mapPos(n,1),v=e.mapPos(r,-1);if(v-y==h.length)a=y,l=v;else if(t.state.doc.sliceString(l-h.length,l)==h)a=l-h.length;else if(t.state.doc.sliceString(a,a+h.length)==h)l=a+h.length;else return null}let{main:p}=t.state.selection;if(t.state.doc.sliceString(a,l)!=h||a>p.head||l<p.head)return null;let d=[],m=new wn(n,r,a,l);for(let y=s.parentNode;;y=y.parentNode){let v=At.get(y);if(v instanceof Rr)d.push({node:y,deco:v.mark});else{if(v instanceof Ii||y.nodeName=="DIV"&&y.parentNode==t.contentDOM)return{range:m,text:s,marks:d,line:y};if(y!=t.contentDOM)d.push({node:y,deco:new Ou({inclusive:!0,attributes:RO(y),tagName:y.tagName.toLowerCase()})});else return null}}}function uC(t,e,i){if(i<=0)for(let n=t,r=e;;){if(n.nodeType==3)return n;if(n.nodeType==1&&r>0)n=n.childNodes[r-1],r=xs(n);else break}if(i>=0)for(let n=t,r=e;;){if(n.nodeType==3)return n;if(n.nodeType==1&&r<n.childNodes.length&&i>=0)n=n.childNodes[r],r=0;else break}return null}function VO(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let KO=class{constructor(){this.changes=[]}compareRange(e,i){qg(e,i,this.changes)}comparePoint(e,i){qg(e,i,this.changes)}};function zO(t,e,i){let n=new KO;return It.compare(t,e,i,n),n.changes}function HO(t,e){for(let i=t;i&&i!=e;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function QO(t,e,i=1){let n=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return de.cursor(e);s==0?i=1:s==r.length&&(i=-1);let a=s,l=s;i<0?a=bi(r.text,s,!1):l=bi(r.text,s);let h=n(r.text.slice(a,l));for(;a>0;){let p=bi(r.text,a,!1);if(n(r.text.slice(p,a))!=h)break;a=p}for(;l<r.length;){let p=bi(r.text,l);if(n(r.text.slice(l,p))!=h)break;l=p}return de.range(a+r.from,l+r.from)}function YO(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function $O(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function ld(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function u_(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function h_(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function nm(t,e,i){let n,r,s,a,l=!1,h,p,d,m;for(let S=t.firstChild;S;S=S.nextSibling){let M=pu(S);for(let b=0;b<M.length;b++){let w=M[b];r&&ld(r,w)&&(w=u_(h_(w,r.bottom),r.top));let E=YO(e,w),B=$O(i,w);if(E==0&&B==0)return S.nodeType==3?c_(S,e,i):nm(S,e,i);if(!n||a>B||a==B&&s>E){n=S,r=w,s=E,a=B;let L=B?i<w.top?-1:1:E?e<w.left?-1:1:0;l=!L||(L>0?b<M.length-1:b>0)}E==0?i>w.bottom&&(!d||d.bottom<w.bottom)?(h=S,d=w):i<w.top&&(!m||m.top>w.top)&&(p=S,m=w):d&&ld(d,w)?d=h_(d,w.bottom):m&&ld(m,w)&&(m=u_(m,w.top))}}if(d&&d.bottom>=i?(n=h,r=d):m&&m.top<=i&&(n=p,r=m),!n)return{node:t,offset:0};let y=Math.max(r.left,Math.min(r.right,e));if(n.nodeType==3)return c_(n,y,i);if(l&&n.contentEditable!="false")return nm(n,y,i);let v=Array.prototype.indexOf.call(t.childNodes,n)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:v}}function c_(t,e,i){let n=t.nodeValue.length,r=-1,s=1e9,a=0;for(let l=0;l<n;l++){let h=co(t,l,l+1).getClientRects();for(let p=0;p<h.length;p++){let d=h[p];if(d.top==d.bottom)continue;a||(a=e-d.left);let m=(d.top>i?d.top-i:i-d.bottom)-1;if(d.left-1<=e&&d.right+1>=e&&m<s){let y=e>=(d.left+d.right)/2,v=y;if((Ae.chrome||Ae.gecko)&&co(t,l).getBoundingClientRect().left==d.right&&(v=!y),m<=0)return{node:t,offset:l+(v?1:0)};r=l+(v?1:0),s=m}}}return{node:t,offset:r>-1?r:a>0?t.nodeValue.length:0}}function hC(t,e,i,n=-1){var r,s;let a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,h,{docHeight:p}=t.viewState,{x:d,y:m}=e,y=m-l;if(y<0)return 0;if(y>p)return t.state.doc.length;for(let L=t.viewState.heightOracle.textHeight/2,I=!1;h=t.elementAtHeight(y),h.type!=Kt.Text;)for(;y=n>0?h.bottom+L:h.top-L,!(y>=0&&y<=p);){if(I)return i?null:0;I=!0,n=-n}m=l+y;let v=h.from;if(v<t.viewport.from)return t.viewport.from==0?0:i?null:f_(t,a,h,d,m);if(v>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:i?null:f_(t,a,h,d,m);let S=t.dom.ownerDocument,M=t.root.elementFromPoint?t.root:S,b=M.elementFromPoint(d,m);b&&!t.contentDOM.contains(b)&&(b=null),b||(d=Math.max(a.left+1,Math.min(a.right-1,d)),b=M.elementFromPoint(d,m),b&&!t.contentDOM.contains(b)&&(b=null));let w,E=-1;if(b&&((r=t.docView.nearest(b))===null||r===void 0?void 0:r.isEditable)!=!1){if(S.caretPositionFromPoint){let L=S.caretPositionFromPoint(d,m);L&&({offsetNode:w,offset:E}=L)}else if(S.caretRangeFromPoint){let L=S.caretRangeFromPoint(d,m);L&&({startContainer:w,startOffset:E}=L,(!t.contentDOM.contains(w)||Ae.safari&&ZO(w,E,d)||Ae.chrome&&qO(w,E,d))&&(w=void 0))}}if(!w||!t.docView.dom.contains(w)){let L=Ii.find(t.docView,v);if(!L)return y>h.top+h.height/2?h.to:h.from;({node:w,offset:E}=nm(L.dom,d,m))}let B=t.docView.nearest(w);if(!B)return null;if(B.isWidget&&((s=B.dom)===null||s===void 0?void 0:s.nodeType)==1){let L=B.dom.getBoundingClientRect();return e.y<L.top||e.y<=L.bottom&&e.x<=(L.left+L.right)/2?B.posAtStart:B.posAtEnd}else return B.localPosFromDOM(w,E)+B.posAtStart}function f_(t,e,i,n,r){let s=Math.round((n-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&i.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,h=Math.floor((r-i.top-(t.defaultLineHeight-l)*.5)/l);s+=h*t.viewState.heightOracle.lineLength}let a=t.state.sliceDoc(i.from,i.to);return i.from+Gg(a,s,t.state.tabSize)}function ZO(t,e,i){let n;if(t.nodeType!=3||e!=(n=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return co(t,n-1,n).getBoundingClientRect().left>i}function qO(t,e,i){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let n=t.nodeType==1?t.getBoundingClientRect():co(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return i-n.left>5}function rm(t,e){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){for(let n of i.type)if(n.to>e||n.to==e&&(n.to==i.to||n.type==Kt.Text))return n}return i}function XO(t,e,i,n){let r=rm(t,e.head),s=!n||r.type!=Kt.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let a=t.dom.getBoundingClientRect(),l=t.textDirectionAt(r.from),h=t.posAtCoords({x:i==(l==Ft.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(h!=null)return de.cursor(h,i?-1:1)}return de.cursor(i?r.to:r.from,i?-1:1)}function p_(t,e,i,n){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),a=t.textDirectionAt(r.from);for(let l=e,h=null;;){let p=jO(r,s,a,l,i),d=aC;if(!p){if(r.number==(i?t.state.doc.lines:1))return l;d=`
`,r=t.state.doc.line(r.number+(i?1:-1)),s=t.bidiSpans(r),p=de.cursor(i?r.from:r.to)}if(h){if(!h(d))return l}else{if(!n)return p;h=n(d)}l=p}}function eI(t,e,i){let n=t.state.charCategorizer(e),r=n(i);return s=>{let a=n(s);return r==Dt.Space&&(r=a),r==a}}function tI(t,e,i,n){let r=e.head,s=i?1:-1;if(r==(i?t.state.doc.length:0))return de.cursor(r,e.assoc);let a=e.goalColumn,l,h=t.contentDOM.getBoundingClientRect(),p=t.coordsAtPos(r),d=t.documentTop;if(p)a==null&&(a=p.left-h.left),l=s<0?p.top:p.bottom;else{let v=t.viewState.lineBlockAt(r);a==null&&(a=Math.min(h.right-h.left,t.defaultCharacterWidth*(r-v.from))),l=(s<0?v.top:v.bottom)+d}let m=h.left+a,y=n??t.viewState.heightOracle.textHeight>>1;for(let v=0;;v+=10){let S=l+(y+v)*s,M=hC(t,{x:m,y:S},!1,s);if(S<h.top||S>h.bottom||(s<0?M<r:M>r))return de.cursor(M,e.assoc,void 0,a)}}function Cc(t,e,i){for(;;){let n=0;for(let r of t)r.between(e-1,e+1,(s,a,l)=>{if(e>s&&e<a){let h=n||i||(e-s<a-e?-1:1);e=h<0?s:a,n=h}});if(!n)return e}}function ud(t,e,i){let n=Cc(t.state.facet(x0).map(r=>r(t)),i.from,e.head>i.from?-1:1);return n==i.from?i:de.cursor(n,n<i.from?1:-1)}class iI{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let i=(n,r)=>{this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(r.type,e,r)?r.preventDefault():n(e,r))};for(let n in Qt){let r=Qt[n];e.contentDOM.addEventListener(n,s=>{d_(e,s)&&i(r,s)},sm[n]),this.registeredEvents.push(n)}e.scrollDOM.addEventListener("mousedown",n=>{if(n.target==e.scrollDOM&&n.clientY>e.contentDOM.getBoundingClientRect().bottom&&(i(Qt.mousedown,n),!n.defaultPrevented&&n.button==2)){let r=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=r,200)}}),e.scrollDOM.addEventListener("drop",n=>{n.target==e.scrollDOM&&n.clientY>e.contentDOM.getBoundingClientRect().bottom&&i(Qt.drop,n)}),Ae.chrome&&Ae.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,Ae.safari&&e.contentDOM.addEventListener("input",()=>null),Ae.gecko&&mI(e.contentDOM.ownerDocument)}ensureHandlers(e,i){var n;let r;this.customHandlers=[];for(let s of i)if(r=(n=s.update(e).spec)===null||n===void 0?void 0:n.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let a in r)this.registeredEvents.indexOf(a)<0&&a!="scroll"&&(this.registeredEvents.push(a),e.contentDOM.addEventListener(a,l=>{d_(e,l)&&this.runCustomHandlers(a,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,i,n){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,n,i)||n.defaultPrevented)return!0}catch(a){vn(i.state,a)}}return!1}runScrollHandlers(e,i){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,i,e)}catch(s){vn(e.state,s)}}}keydown(e,i){if(this.lastKeyCode=i.keyCode,this.lastKeyTime=Date.now(),i.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(i.keyCode!=27&&fC.indexOf(i.keyCode)<0&&(e.inputState.lastEscPress=0),Ae.android&&Ae.chrome&&!i.synthetic&&(i.keyCode==13||i.keyCode==8))return e.observer.delayAndroidKey(i.key,i.keyCode),!0;let n;return Ae.ios&&!i.synthetic&&!i.altKey&&!i.metaKey&&((n=cC.find(r=>r.keyCode==i.keyCode))&&!i.ctrlKey||nI.indexOf(i.key)>-1&&i.ctrlKey&&!i.shiftKey)?(this.pendingIOSKey=n||i,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let i=this.pendingIOSKey;return i?(this.pendingIOSKey=void 0,ua(e.contentDOM,i.key,i.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ae.safari&&!Ae.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const cC=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],nI="dthko",fC=[16,17,18,20,91,92,224,225],Dh=6;function Bh(t){return Math.max(0,t)*.7+8}function rI(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class sI{constructor(e,i,n,r){this.view=e,this.startEvent=i,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=i,this.scrollParent=SO(e.contentDOM),this.atoms=e.state.facet(x0).map(a=>a(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=e.state.facet(lt.allowMultipleSelections)&&oI(e,i),this.dragging=lI(e,i)&&mC(i)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var i;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&rI(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,s=((i=this.scrollParent)===null||i===void 0?void 0:i.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},a=iC(this.view);e.clientX-a.left<=s.left+Dh?n=-Bh(s.left-e.clientX):e.clientX+a.right>=s.right-Dh&&(n=Bh(e.clientX-s.right)),e.clientY-a.top<=s.top+Dh?r=-Bh(s.top-e.clientY):e.clientY+a.bottom>=s.bottom-Dh&&(r=Bh(e.clientY-s.bottom)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,i){this.scrollSpeed={x:e,y:i},e||i?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let i=null;for(let n=0;n<e.ranges.length;n++){let r=e.ranges[n],s=null;if(r.empty){let a=Cc(this.atoms,r.from,0);a!=r.from&&(s=de.cursor(a,-1))}else{let a=Cc(this.atoms,r.from,-1),l=Cc(this.atoms,r.to,1);(a!=r.from||l!=r.to)&&(s=de.range(r.from==r.anchor?a:l,r.from==r.head?a:l))}s&&(i||(i=e.ranges.slice()),i[n]=s)}return i?de.create(i,e.mainIndex):e}select(e){let{view:i}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(i.state.selection)||n.main.assoc!=i.state.selection.main.assoc&&this.dragging===!1)&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function oI(t,e){let i=t.state.facet(KS);return i.length?i[0](e):Ae.mac?e.metaKey:e.ctrlKey}function aI(t,e){let i=t.state.facet(zS);return i.length?i[0](e):Ae.mac?!e.altKey:!e.ctrlKey}function lI(t,e){let{main:i}=t.state.selection;if(i.empty)return!1;let n=Jc(t.root);if(!n||n.rangeCount==0)return!0;let r=n.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let a=r[s];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function d_(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i=e.target,n;i!=t.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(n=At.get(i))&&n.ignoreEvent(e))return!1;return!0}const Qt=Object.create(null),sm=Object.create(null),pC=Ae.ie&&Ae.ie_version<15||Ae.ios&&Ae.webkit_version<604;function uI(t){let e=t.dom.parentNode;if(!e)return;let i=e.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{t.focus(),i.remove(),dC(t,i.value)},50)}function dC(t,e){let{state:i}=t,n,r=1,s=i.toText(e),a=s.lines==i.selection.ranges.length;if(om!=null&&i.selection.ranges.every(h=>h.empty)&&om==s.toString()){let h=-1;n=i.changeByRange(p=>{let d=i.doc.lineAt(p.from);if(d.from==h)return{range:p};h=d.from;let m=i.toText((a?s.line(r++).text:e)+i.lineBreak);return{changes:{from:d.from,insert:m},range:de.cursor(p.from+m.length)}})}else a?n=i.changeByRange(h=>{let p=s.line(r++);return{changes:{from:h.from,to:h.to,insert:p.text},range:de.cursor(h.from+p.length)}}):n=i.replaceSelection(s);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Qt.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now())};Qt.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Qt.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};sm.touchstart=sm.touchmove={passive:!0};Qt.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let i=null;for(let n of t.state.facet(HS))if(i=n(t,e),i)break;if(!i&&e.button==0&&(i=fI(t,e)),i){let n=!t.hasFocus;t.inputState.startMouseSelection(new sI(t,e,i,n)),n&&t.observer.ignore(()=>OS(t.contentDOM)),t.inputState.mouseSelection&&t.inputState.mouseSelection.start(e)}};function g_(t,e,i,n){if(n==1)return de.cursor(e,i);if(n==2)return QO(t.state,e,i);{let r=Ii.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),a=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<t.state.doc.length&&l==s.to&&l++,de.range(a,l)}}let gC=(t,e)=>t>=e.top&&t<=e.bottom,m_=(t,e,i)=>gC(e,i)&&t>=i.left&&t<=i.right;function hI(t,e,i,n){let r=Ii.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let a=r.coordsAt(s,-1);if(a&&m_(i,n,a))return-1;let l=r.coordsAt(s,1);return l&&m_(i,n,l)?1:a&&gC(n,a)?-1:1}function y_(t,e){let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:i,bias:hI(t,i,e.clientX,e.clientY)}}const cI=Ae.ie&&Ae.ie_version<=11;let v_=null,w_=0,__=0;function mC(t){if(!cI)return t.detail;let e=v_,i=__;return v_=t,__=Date.now(),w_=!e||i>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(w_+1)%3:1}function fI(t,e){let i=y_(t,e),n=mC(e),r=t.state.selection;return{update(s){s.docChanged&&(i.pos=s.changes.mapPos(i.pos),r=r.map(s.changes))},get(s,a,l){let h=y_(t,s),p,d=g_(t,h.pos,h.bias,n);if(i.pos!=h.pos&&!a){let m=g_(t,i.pos,i.bias,n),y=Math.min(m.from,d.from),v=Math.max(m.to,d.to);d=y<d.from?de.range(y,v):de.range(v,y)}return a?r.replaceRange(r.main.extend(d.from,d.to)):l&&n==1&&r.ranges.length>1&&(p=pI(r,h.pos))?p:l?r.addRange(d):de.create([d])}}}function pI(t,e){for(let i=0;i<t.ranges.length;i++){let{from:n,to:r}=t.ranges[i];if(n<=e&&r>=e)return de.create(t.ranges.slice(0,i).concat(t.ranges.slice(i+1)),t.mainIndex==i?0:t.mainIndex-(t.mainIndex>i?1:0))}return null}Qt.dragstart=(t,e)=>{let{selection:{main:i}}=t.state,{mouseSelection:n}=t.inputState;n&&(n.dragging=i),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(i.from,i.to)),e.dataTransfer.effectAllowed="copyMove")};function b_(t,e,i,n){if(!i)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=t.inputState,a=n&&s&&s.dragging&&aI(t,e)?{from:s.dragging.from,to:s.dragging.to}:null,l={from:r,insert:i},h=t.state.changes(a?[a,l]:l);t.focus(),t.dispatch({changes:h,selection:{anchor:h.mapPos(r,-1),head:h.mapPos(r,1)},userEvent:a?"move.drop":"input.drop"})}Qt.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let i=e.dataTransfer.files;if(i&&i.length){e.preventDefault();let n=Array(i.length),r=0,s=()=>{++r==i.length&&b_(t,e,n.filter(a=>a!=null).join(t.state.lineBreak),!1)};for(let a=0;a<i.length;a++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(n[a]=l.result),s()},l.readAsText(i[a])}}else b_(t,e,e.dataTransfer.getData("Text"),!0)};Qt.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let i=pC?null:e.clipboardData;i?(dC(t,i.getData("text/plain")||i.getData("text/uri-text")),e.preventDefault()):uI(t)};function dI(t,e){let i=t.dom.parentNode;if(!i)return;let n=i.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),t.focus()},50)}function gI(t){let e=[],i=[],n=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),i.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let a=t.doc.lineAt(s);a.number>r&&(e.push(a.text),i.push({from:a.from,to:Math.min(t.doc.length,a.to+1)})),r=a.number}n=!0}return{text:e.join(t.lineBreak),ranges:i,linewise:n}}let om=null;Qt.copy=Qt.cut=(t,e)=>{let{text:i,ranges:n,linewise:r}=gI(t.state);if(!i&&!r)return;om=r?i:null;let s=pC?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",i)):dI(t,i),e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"})};const yC=Nr.define();function vC(t,e){let i=[];for(let n of t.facet($S)){let r=n(t,e);r&&i.push(r)}return i?t.update({effects:i,annotations:yC.of(!0)}):null}function wC(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let i=vC(t.state,e);i?t.dispatch(i):t.update([])}},10)}Qt.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),wC(t)};Qt.blur=t=>{t.observer.clearSelectionRange(),wC(t)};Qt.compositionstart=Qt.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};Qt.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ae.chrome&&Ae.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};Qt.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Qt.beforeinput=(t,e)=>{var i;let n;if(Ae.chrome&&Ae.android&&(n=cC.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}};const x_=new Set;function mI(t){x_.has(t)||(x_.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const S_=["pre-wrap","normal","pre-line","break-spaces"];class yI{constructor(e){this.lineWrapping=e,this.doc=dt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,i){let n=this.doc.lineAt(i).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((i-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return S_.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let i=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(r*10)]||(i=!0,this.heightSamples[Math.floor(r*10)]=!0)}return i}refresh(e,i,n,r,s,a){let l=S_.indexOf(e)>-1,h=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=i,this.charWidth=n,this.textHeight=r,this.lineLength=s,h){this.heightSamples={};for(let p=0;p<a.length;p++){let d=a[p];d<0?p++:this.heightSamples[Math.floor(d*10)]=!0}}return h}}class vI{constructor(e,i){this.from=e,this.heights=i,this.index=0}get more(){return this.index<this.heights.length}}class or{constructor(e,i,n,r,s){this.from=e,this.length=i,this.top=n,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Kt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ss?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let i=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new or(this.from,this.length+e.length,this.top,this.height+e.height,i)}}var Lt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Lt||(Lt={}));const Mc=.001;class Bi{constructor(e,i,n=2){this.length=e,this.height=i,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,i){this.height!=i&&(Math.abs(this.height-i)>Mc&&(e.heightChanged=!0),this.height=i)}replace(e,i,n){return Bi.of(n)}decomposeLeft(e,i){i.push(this)}decomposeRight(e,i){i.push(this)}applyChanges(e,i,n,r){let s=this,a=n.doc;for(let l=r.length-1;l>=0;l--){let{fromA:h,toA:p,fromB:d,toB:m}=r[l],y=s.lineAt(h,Lt.ByPosNoHeight,n.setDoc(i),0,0),v=y.to>=p?y:s.lineAt(p,Lt.ByPosNoHeight,n,0,0);for(m+=v.to-p,p=v.to;l>0&&y.from<=r[l-1].toA;)h=r[l-1].fromA,d=r[l-1].fromB,l--,h<y.from&&(y=s.lineAt(h,Lt.ByPosNoHeight,n,0,0));d+=y.from-h,h=y.from;let S=S0.build(n.setDoc(a),e,d,m);s=s.replace(h,p,S)}return s.updateHeight(n,0)}static empty(){return new nn(0,0)}static of(e){if(e.length==1)return e[0];let i=0,n=e.length,r=0,s=0;for(;;)if(i==n)if(r>s*2){let l=e[i-1];l.break?e.splice(--i,1,l.left,null,l.right):e.splice(--i,1,l.left,l.right),n+=1+l.break,r-=l.size}else if(s>r*2){let l=e[n];l.break?e.splice(n,1,l.left,null,l.right):e.splice(n,1,l.left,l.right),n+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[i++];l&&(r+=l.size)}else{let l=e[--n];l&&(s+=l.size)}let a=0;return e[i-1]==null?(a=1,i--):e[i]==null&&(a=1,n++),new wI(Bi.of(e.slice(0,i)),a,Bi.of(e.slice(n)))}}Bi.prototype.size=1;class _C extends Bi{constructor(e,i,n){super(e,i),this.deco=n}blockAt(e,i,n,r){return new or(r,this.length,n,this.height,this.deco||0)}lineAt(e,i,n,r,s){return this.blockAt(0,n,r,s)}forEachLine(e,i,n,r,s,a){e<=s+this.length&&i>=s&&a(this.blockAt(0,n,r,s))}updateHeight(e,i=0,n=!1,r){return r&&r.from<=i&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class nn extends _C{constructor(e,i){super(e,i,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,i,n,r){return new or(r,this.length,n,this.height,this.breaks)}replace(e,i,n){let r=n[0];return n.length==1&&(r instanceof nn||r instanceof oi&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof oi?r=new nn(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Bi.of(n)}updateHeight(e,i=0,n=!1,r){return r&&r.from<=i&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class oi extends Bi{constructor(e){super(e,0)}heightMetrics(e,i){let n=e.doc.lineAt(i).number,r=e.doc.lineAt(i+this.length).number,s=r-n+1,a,l=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*s);a=h/s,this.length>s+1&&(l=(this.height-h)/(this.length-s-1))}else a=this.height/s;return{firstLine:n,lastLine:r,perLine:a,perChar:l}}blockAt(e,i,n,r){let{firstLine:s,lastLine:a,perLine:l,perChar:h}=this.heightMetrics(i,r);if(i.lineWrapping){let p=r+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),d=i.doc.lineAt(p),m=l+d.length*h,y=Math.max(n,e-m/2);return new or(d.from,d.length,y,m,0)}else{let p=Math.max(0,Math.min(a-s,Math.floor((e-n)/l))),{from:d,length:m}=i.doc.line(s+p);return new or(d,m,n+l*p,l,0)}}lineAt(e,i,n,r,s){if(i==Lt.ByHeight)return this.blockAt(e,n,r,s);if(i==Lt.ByPosNoHeight){let{from:v,to:S}=n.doc.lineAt(e);return new or(v,S-v,0,0,0)}let{firstLine:a,perLine:l,perChar:h}=this.heightMetrics(n,s),p=n.doc.lineAt(e),d=l+p.length*h,m=p.number-a,y=r+l*m+h*(p.from-s-m);return new or(p.from,p.length,Math.max(r,Math.min(y,r+this.height-d)),d,0)}forEachLine(e,i,n,r,s,a){e=Math.max(e,s),i=Math.min(i,s+this.length);let{firstLine:l,perLine:h,perChar:p}=this.heightMetrics(n,s);for(let d=e,m=r;d<=i;){let y=n.doc.lineAt(d);if(d==e){let S=y.number-l;m+=h*S+p*(e-s-S)}let v=h+p*y.length;a(new or(y.from,y.length,m,v,0)),m+=v,d=y.to+1}}replace(e,i,n){let r=this.length-i;if(r>0){let s=n[n.length-1];s instanceof oi?n[n.length-1]=new oi(s.length+r):n.push(null,new oi(r-1))}if(e>0){let s=n[0];s instanceof oi?n[0]=new oi(e+s.length):n.unshift(new oi(e-1),null)}return Bi.of(n)}decomposeLeft(e,i){i.push(new oi(e-1),null)}decomposeRight(e,i){i.push(null,new oi(this.length-e-1))}updateHeight(e,i=0,n=!1,r){let s=i+this.length;if(r&&r.from<=i+this.length&&r.more){let a=[],l=Math.max(i,r.from),h=-1;for(r.from>i&&a.push(new oi(r.from-i-1).updateHeight(e,i));l<=s&&r.more;){let d=e.doc.lineAt(l).length;a.length&&a.push(null);let m=r.heights[r.index++];h==-1?h=m:Math.abs(m-h)>=Mc&&(h=-2);let y=new nn(d,m);y.outdated=!1,a.push(y),l+=d+1}l<=s&&a.push(null,new oi(s-l).updateHeight(e,l));let p=Bi.of(a);return(h<0||Math.abs(p.height-this.height)>=Mc||Math.abs(h-this.heightMetrics(e,i).perLine)>=Mc)&&(e.heightChanged=!0),p}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class wI extends Bi{constructor(e,i,n){super(e.length+i+n.length,e.height+n.height,i|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,i,n,r){let s=n+this.left.height;return e<s?this.left.blockAt(e,i,n,r):this.right.blockAt(e,i,s,r+this.left.length+this.break)}lineAt(e,i,n,r,s){let a=r+this.left.height,l=s+this.left.length+this.break,h=i==Lt.ByHeight?e<a:e<l,p=h?this.left.lineAt(e,i,n,r,s):this.right.lineAt(e,i,n,a,l);if(this.break||(h?p.to<l:p.from>l))return p;let d=i==Lt.ByPosNoHeight?Lt.ByPosNoHeight:Lt.ByPos;return h?p.join(this.right.lineAt(l,d,n,a,l)):this.left.lineAt(l,d,n,r,s).join(p)}forEachLine(e,i,n,r,s,a){let l=r+this.left.height,h=s+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,i,n,r,s,a),i>=h&&this.right.forEachLine(e,i,n,l,h,a);else{let p=this.lineAt(h,Lt.ByPos,n,r,s);e<p.from&&this.left.forEachLine(e,p.from-1,n,r,s,a),p.to>=e&&p.from<=i&&a(p),i>p.to&&this.right.forEachLine(p.to+1,i,n,l,h,a)}}replace(e,i,n){let r=this.left.length+this.break;if(i<r)return this.balanced(this.left.replace(e,i,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,i-r,n));let s=[];e>0&&this.decomposeLeft(e,s);let a=s.length;for(let l of n)s.push(l);if(e>0&&C_(s,a-1),i<this.length){let l=s.length;this.decomposeRight(i,s),C_(s,l)}return Bi.of(s)}decomposeLeft(e,i){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,i);i.push(this.left),this.break&&(n++,e>=n&&i.push(null)),e>n&&this.right.decomposeLeft(e-n,i)}decomposeRight(e,i){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,i);e<n&&this.left.decomposeRight(e,i),this.break&&e<r&&i.push(null),i.push(this.right)}balanced(e,i){return e.size>2*i.size||i.size>2*e.size?Bi.of(this.break?[e,null,i]:[e,i]):(this.left=e,this.right=i,this.height=e.height+i.height,this.outdated=e.outdated||i.outdated,this.size=e.size+i.size,this.length=e.length+this.break+i.length,this)}updateHeight(e,i=0,n=!1,r){let{left:s,right:a}=this,l=i+s.length+this.break,h=null;return r&&r.from<=i+s.length&&r.more?h=s=s.updateHeight(e,i,n,r):s.updateHeight(e,i,n),r&&r.from<=l+a.length&&r.more?h=a=a.updateHeight(e,l,n,r):a.updateHeight(e,l,n),h?this.balanced(s,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function C_(t,e){let i,n;t[e]==null&&(i=t[e-1])instanceof oi&&(n=t[e+1])instanceof oi&&t.splice(e-1,3,new oi(i.length+1+n.length))}const _I=5;class S0{constructor(e,i){this.pos=e,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,i){if(this.lineStart>-1){let n=Math.min(i,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof nn?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new nn(n-this.pos,-1)),this.writtenTo=n,i>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(e,i,n){if(e<i||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,s=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let a=i-e;n.block?this.addBlock(new _C(a,r,n)):(a||s||r>=_I)&&this.addLineDeco(r,s,a)}else i>e&&this.span(e,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=i,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new nn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,i){let n=new oi(i-e);return this.oracle.doc.lineAt(e).to==i&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof nn)return e;let i=new nn(0,-1);return this.nodes.push(i),i}addBlock(e){var i;this.enterLine();let n=(i=e.deco)===null||i===void 0?void 0:i.type;n==Kt.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n!=Kt.WidgetBefore&&(this.covering=e)}addLineDeco(e,i,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=i,this.writtenTo=this.pos=this.pos+n}finish(e){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof nn)&&!this.isCovered?this.nodes.push(new nn(0,-1)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let r of this.nodes)r instanceof nn&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(e,i,n,r){let s=new S0(n,e);return It.spans(i,n,r,s,0),s.finish(n)}}function bI(t,e,i){let n=new xI;return It.compare(t,e,i,n,0),n.changes}class xI{constructor(){this.changes=[]}compareRange(){}comparePoint(e,i,n,r){(e<i||n&&n.heightRelevant||r&&r.heightRelevant)&&qg(e,i,this.changes,5)}}function SI(t,e){let i=t.getBoundingClientRect(),n=t.ownerDocument,r=n.defaultView||window,s=Math.max(0,i.left),a=Math.min(r.innerWidth,i.right),l=Math.max(0,i.top),h=Math.min(r.innerHeight,i.bottom);for(let p=t.parentNode;p&&p!=n.body;)if(p.nodeType==1){let d=p,m=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&m.overflow!="visible"){let y=d.getBoundingClientRect();s=Math.max(s,y.left),a=Math.min(a,y.right),l=Math.max(l,y.top),h=p==t.parentNode?y.bottom:Math.min(h,y.bottom)}p=m.position=="absolute"||m.position=="fixed"?d.offsetParent:d.parentNode}else if(p.nodeType==11)p=p.host;else break;return{left:s-i.left,right:Math.max(s,a)-i.left,top:l-(i.top+e),bottom:Math.max(l,h)-(i.top+e)}}function CI(t,e){let i=t.getBoundingClientRect();return{left:0,right:i.right-i.left,top:e,bottom:i.bottom-(i.top+e)}}class hd{constructor(e,i,n){this.from=e,this.to=i,this.size=n}static same(e,i){if(e.length!=i.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],s=i[n];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return Ve.replace({widget:new MI(this.size,e)}).range(this.from,this.to)}}class MI extends ks{constructor(e,i){super(),this.size=e,this.vertical=i}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class M_{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=k_,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ft.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let i=e.facet(b0).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new yI(i),this.stateDeco=e.facet(du).filter(n=>typeof n!="function"),this.heightMap=Bi.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle.setDoc(e.doc),[new wn(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ve.set(this.lineGaps.map(n=>n.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:i}=this.state.selection;for(let n=0;n<=1;n++){let r=n?i.head:i.anchor;if(!e.some(({from:s,to:a})=>r>=s&&r<=a)){let{from:s,to:a}=this.lineBlockAt(r);e.push(new Uh(s,a))}}this.viewports=e.sort((n,r)=>n.from-r.from),this.scaler=this.heightMap.height<=7e6?k_:new EI(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Yl(e,this.scaler))})}update(e,i=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(du).filter(d=>typeof d!="function");let r=e.changedRanges,s=wn.extendWithRanges(r,bI(n,this.stateDeco,e?e.changes:qt.empty(this.state.doc.length))),a=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=a&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let h=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(i&&(i.range.head<h.from||i.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,i));let p=!e.changes.empty||e.flags&2||h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,this.updateForViewport(),p&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),i&&(this.scrollTarget=i),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(qS)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let i=e.contentDOM,n=window.getComputedStyle(i),r=this.heightOracle,s=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Ft.RTL:Ft.LTR;let a=this.heightOracle.mustRefreshForWrapping(s),l=i.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let p=0,d=0,m=parseInt(n.paddingTop)||0,y=parseInt(n.paddingBottom)||0;(this.paddingTop!=m||this.paddingBottom!=y)&&(this.paddingTop=m,this.paddingBottom=y,p|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,p|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=NS(e.scrollDOM);let v=(this.printing?CI:SI)(i,this.paddingTop),S=v.top-this.pixelViewport.top,M=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(h=!0)),!this.inView&&!this.scrollTarget)return 0;let w=l.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,p|=8),h){let B=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(B)&&(a=!0),a||r.lineWrapping&&Math.abs(w-this.contentDOMWidth)>r.charWidth){let{lineHeight:L,charWidth:I,textHeight:O}=e.docView.measureTextSize();a=L>0&&r.refresh(s,L,I,O,w/I,B),a&&(e.docView.minWidth=0,p|=8)}S>0&&M>0?d=Math.max(S,M):S<0&&M<0&&(d=Math.min(S,M)),r.heightChanged=!1;for(let L of this.viewports){let I=L.from==this.viewport.from?B:e.docView.measureVisibleLineHeights(L);this.heightMap=(a?Bi.empty().applyChanges(this.stateDeco,dt.empty,this.heightOracle,[new wn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,a,new vI(L.from,I))}r.heightChanged&&(p|=2)}let E=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return E&&(this.viewport=this.getViewport(d,this.scrollTarget)),this.updateForViewport(),(p&2||E)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),p|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),p}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,i){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:a,visibleBottom:l}=this,h=new Uh(r.lineAt(a-n*1e3,Lt.ByHeight,s,0,0).from,r.lineAt(l+(1-n)*1e3,Lt.ByHeight,s,0,0).to);if(i){let{head:p}=i.range;if(p<h.from||p>h.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=r.lineAt(p,Lt.ByPos,s,0,0),y;i.y=="center"?y=(m.top+m.bottom)/2-d/2:i.y=="start"||i.y=="nearest"&&p<h.from?y=m.top:y=m.bottom-d,h=new Uh(r.lineAt(y-1e3/2,Lt.ByHeight,s,0,0).from,r.lineAt(y+d+1e3/2,Lt.ByHeight,s,0,0).to)}}return h}mapViewport(e,i){let n=i.mapPos(e.from,-1),r=i.mapPos(e.to,1);return new Uh(this.heightMap.lineAt(n,Lt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Lt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:i},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Lt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(i,Lt.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:l}=this;return(e==0||r<=a-Math.max(10,Math.min(-n,250)))&&(i==this.state.doc.length||s>=l+Math.max(10,Math.min(n,250)))&&r>a-2*1e3&&s<l+2*1e3}mapLineGaps(e,i){if(!e.length||i.empty)return e;let n=[];for(let r of e)i.touchesRange(r.from,r.to)||n.push(new hd(i.mapPos(r.from),i.mapPos(r.to),r.size));return n}ensureLineGaps(e,i){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,s=r>>1,a=r<<1;if(this.defaultTextDirection!=Ft.LTR&&!n)return[];let l=[],h=(p,d,m,y)=>{if(d-p<s)return;let v=this.state.selection.main,S=[v.from];v.empty||S.push(v.to);for(let b of S)if(b>p&&b<d){h(p,b-10,m,y),h(b+10,d,m,y);return}let M=TI(e,b=>b.from>=m.from&&b.to<=m.to&&Math.abs(b.from-p)<s&&Math.abs(b.to-d)<s&&!S.some(w=>b.from<w&&b.to>w));if(!M){if(d<m.to&&i&&n&&i.visibleRanges.some(b=>b.from<=d&&b.to>=d)){let b=i.moveToLineBoundary(de.cursor(d),!1,!0).head;b>p&&(d=b)}M=new hd(p,d,this.gapSize(m,p,d,y))}l.push(M)};for(let p of this.viewportLines){if(p.length<a)continue;let d=kI(p.from,p.to,this.stateDeco);if(d.total<a)continue;let m=this.scrollTarget?this.scrollTarget.range.head:null,y,v;if(n){let S=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,M,b;if(m!=null){let w=Ph(d,m),E=((this.visibleBottom-this.visibleTop)/2+S)/p.height;M=w-E,b=w+E}else M=(this.visibleTop-p.top-S)/p.height,b=(this.visibleBottom-p.top+S)/p.height;y=Jh(d,M),v=Jh(d,b)}else{let S=d.total*this.heightOracle.charWidth,M=r*this.heightOracle.charWidth,b,w;if(m!=null){let E=Ph(d,m),B=((this.pixelViewport.right-this.pixelViewport.left)/2+M)/S;b=E-B,w=E+B}else b=(this.pixelViewport.left-M)/S,w=(this.pixelViewport.right+M)/S;y=Jh(d,b),v=Jh(d,w)}y>p.from&&h(p.from,y,p,d),v<p.to&&h(v,p.to,p,d)}return l}gapSize(e,i,n,r){let s=Ph(r,n)-Ph(r,i);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){hd.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ve.set(e.map(i=>i.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let i=[];It.spans(e,this.viewport.from,this.viewport.to,{span(r,s){i.push({from:r,to:s})},point(){}},20);let n=i.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=i[s].from||r.to!=i[s].to);return this.visibleRanges=i,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(i=>i.from<=e&&i.to>=e)||Yl(this.heightMap.lineAt(e,Lt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Yl(this.heightMap.lineAt(this.scaler.fromDOM(e),Lt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let i=this.lineBlockAtHeight(e+8);return i.from>=this.viewport.from||this.viewportLines[0].top-e>200?i:this.viewportLines[0]}elementAtHeight(e){return Yl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Uh{constructor(e,i){this.from=e,this.to=i}}function kI(t,e,i){let n=[],r=t,s=0;return It.spans(i,t,e,{span(){},point(a,l){a>r&&(n.push({from:r,to:a}),s+=a-r),r=l}},20),r<e&&(n.push({from:r,to:e}),s+=e-r),{total:s,ranges:n}}function Jh({total:t,ranges:e},i){if(i<=0)return e[0].from;if(i>=1)return e[e.length-1].to;let n=Math.floor(t*i);for(let r=0;;r++){let{from:s,to:a}=e[r],l=a-s;if(n<=l)return s+n;n-=l}}function Ph(t,e){let i=0;for(let{from:n,to:r}of t.ranges){if(e<=r){i+=e-n;break}i+=r-n}return i/t.total}function TI(t,e){for(let i of t)if(e(i))return i}const k_={toDOM(t){return t},fromDOM(t){return t},scale:1};class EI{constructor(e,i,n){let r=0,s=0,a=0;this.viewports=n.map(({from:l,to:h})=>{let p=i.lineAt(l,Lt.ByPos,e,0,0).top,d=i.lineAt(h,Lt.ByPos,e,0,0).bottom;return r+=d-p,{from:l,to:h,top:p,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(i.height-r);for(let l of this.viewports)l.domTop=a+(l.top-s)*this.scale,a=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let i=0,n=0,r=0;;i++){let s=i<this.viewports.length?this.viewports[i]:null;if(!s||e<s.top)return r+(e-n)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);n=s.bottom,r=s.domBottom}}fromDOM(e){for(let i=0,n=0,r=0;;i++){let s=i<this.viewports.length?this.viewports[i]:null;if(!s||e<s.domTop)return n+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);n=s.bottom,r=s.domBottom}}}function Yl(t,e){if(e.scale==1)return t;let i=e.toDOM(t.top),n=e.toDOM(t.bottom);return new or(t.from,t.length,i,n-i,Array.isArray(t._content)?t._content.map(r=>Yl(r,e)):t._content)}const Fh=Oe.define({combine:t=>t.join(" ")}),am=Oe.define({combine:t=>t.indexOf(!0)>-1}),lm=_s.newName(),bC=_s.newName(),xC=_s.newName(),SC={"&light":"."+bC,"&dark":"."+xC};function um(t,e,i){return new _s(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,r=>{if(r=="&")return t;if(!i||!i[r])throw new RangeError(`Unsupported selector: ${r}`);return i[r]}):t+" "+n}})}const AI=um("."+lm,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},SC);class RI{constructor(e,i,n,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&i>-1)this.newSel=null;else if(i>-1&&(this.bounds=e.docView.domBoundsAround(i,n,0))){let l=s||a?[]:II(e),h=new JS(l,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=NI(l,this.bounds.from)}else{let l=e.observer.selectionRange,h=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!zg(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),p=a&&a.node==l.anchorNode&&a.offset==l.anchorOffset||!zg(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=de.single(p,h)}}}function CC(t,e){let i,{newSel:n}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:l}=e.bounds,h=r.from,p=null;(s===8||Ae.android&&e.text.length<l-a)&&(h=r.to,p="end");let d=OI(t.state.doc.sliceString(a,l,na),e.text,h-a,p);d&&(Ae.chrome&&s==13&&d.toB==d.from+2&&e.text.slice(d.from,d.toB)==na+na&&d.toB--,i={from:a+d.from,to:a+d.toA,insert:dt.of(e.text.slice(d.from,d.toB).split(na))})}else n&&(!t.hasFocus&&t.state.facet(Lf)||n.main.eq(r))&&(n=null);if(!i&&!n)return!1;if(!i&&e.typeOver&&!r.empty&&n&&n.main.empty?i={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:i&&i.from>=r.from&&i.to<=r.to&&(i.from!=r.from||i.to!=r.to)&&r.to-r.from-(i.to-i.from)<=4?i={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,i.from).append(i.insert).append(t.state.doc.slice(i.to,r.to))}:(Ae.mac||Ae.android)&&i&&i.from==i.to&&i.from==r.head-1&&/^\. ?$/.test(i.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(n&&i.insert.length==2&&(n=de.single(n.main.anchor-1,n.main.head-1)),i={from:r.from,to:r.to,insert:dt.of([" "])}):Ae.chrome&&i&&i.from==i.to&&i.from==r.head&&i.insert.toString()==`
 `&&t.lineWrapping&&(n&&(n=de.single(n.main.anchor-1,n.main.head-1)),i={from:r.from,to:r.to,insert:dt.of([" "])}),i){if(Ae.ios&&t.inputState.flushIOSKey(t)||Ae.android&&(i.from==r.from&&i.to==r.to&&i.insert.length==1&&i.insert.lines==2&&ua(t.contentDOM,"Enter",13)||(i.from==r.from-1&&i.to==r.to&&i.insert.length==0||s==8&&i.insert.length<i.to-i.from&&i.to>r.head)&&ua(t.contentDOM,"Backspace",8)||i.from==r.from&&i.to==r.to+1&&i.insert.length==0&&ua(t.contentDOM,"Delete",46)))return!0;let a=i.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,h=()=>l||(l=LI(t,i,n));return t.state.facet(YS).some(p=>p(t,i.from,i.to,a,h))||t.dispatch(h()),!0}else if(n&&!n.main.eq(r)){let a=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(a=!0),l=t.inputState.lastSelectionOrigin),t.dispatch({selection:n,scrollIntoView:a,userEvent:l}),!0}else return!1}function LI(t,e,i){let n,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!i||i.main.empty&&i.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=s.from<e.from?r.sliceDoc(s.from,e.from):"",h=s.to>e.to?r.sliceDoc(e.to,s.to):"";n=r.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+h))}else{let l=r.changes(e),h=i&&i.main.to<=l.newLength?i.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let p=t.state.sliceDoc(e.from,e.to),d=lC(t,e.insert.length-(e.to-e.from))||t.state.doc.lineAt(s.head),m=s.to-e.to,y=s.to-s.from;n=r.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:l,range:h||v.map(l)};let S=v.to-m,M=S-p.length;if(v.to-v.from!=y||t.state.sliceDoc(M,S)!=p||d&&v.to>=d.from&&v.from<=d.to)return{range:v};let b=r.changes({from:M,to:S,insert:e.insert}),w=v.to-s.to;return{changes:b,range:h?de.range(Math.max(0,h.anchor+w),Math.max(0,h.head+w)):v.map(b)}})}else n={changes:l,selection:h&&r.selection.replaceRange(h)}}let a="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,a+=".compose",t.inputState.compositionFirstChange&&(a+=".start",t.inputState.compositionFirstChange=!1)),r.update(n,{userEvent:a,scrollIntoView:!0})}function OI(t,e,i,n){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let a=t.length,l=e.length;for(;a>0&&l>0&&t.charCodeAt(a-1)==e.charCodeAt(l-1);)a--,l--;if(n=="end"){let h=Math.max(0,s-Math.min(a,l));i-=a+h-s}if(a<s&&t.length<e.length){let h=i<=s&&i>=a?s-i:0;s-=h,l=s+(l-a),a=s}else if(l<s){let h=i<=s&&i>=l?s-i:0;s-=h,a=s+(a-l),l=s}return{from:s,toA:a,toB:l}}function II(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:s}=t.observer.selectionRange;return i&&(e.push(new Xw(i,n)),(r!=i||s!=n)&&e.push(new Xw(r,s))),e}function NI(t,e){if(t.length==0)return null;let i=t[0].pos,n=t.length==2?t[1].pos:i;return i>-1&&n>-1?de.single(i+e,n+e):null}const DI={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},cd=Ae.ie&&Ae.ie_version<=11;class BI{constructor(e){this.view=e,this.active=!1,this.selectionRange=new CO,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(i=>{for(let n of i)this.queue.push(n);(Ae.ie&&Ae.ie_version<=11||Ae.ios&&e.composing)&&i.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),cd&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var i;((i=this.view.docView)===null||i===void 0?void 0:i.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((i,n)=>i!=e[n]))){this.gapIntersection.disconnect();for(let i of e)this.gapIntersection.observe(i);this.gaps=e}}onSelectionChange(e){let i=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(Lf)?n.root.activeElement!=this.dom:!Sc(n.dom,r))return;let s=r.anchorNode&&n.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){i||(this.selectionChanged=!1);return}(Ae.ie&&Ae.ie_version<=11||Ae.android&&Ae.chrome)&&!n.state.selection.main.empty&&r.focusNode&&Pc(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,i=Ae.safari&&e.root.nodeType==11&&_O(this.dom.ownerDocument)==this.dom&&UI(this.view)||Jc(e.root);if(!i||this.selectionRange.eq(i))return!1;let n=Sc(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&kO(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,i){this.selectionRange.set(e.node,e.offset,i.node,i.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,i=null;for(let n=this.dom;n;)if(n.nodeType==1)!i&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:i||(i=this.scrollTargets.slice(0,e)),i&&i.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!i&&(i=this.scrollTargets.slice(0,e)),i){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=i)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,DI),cd&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),cd&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,i){var n;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&ua(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:i,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let i=-1,n=-1,r=!1;for(let s of e){let a=this.readMutation(s);a&&(a.typeOver&&(r=!0),i==-1?{from:i,to:n}=a:(i=Math.min(a.from,i),n=Math.max(a.to,n)))}return{from:i,to:n,typeOver:r}}readChange(){let{from:e,to:i,typeOver:n}=this.processRecords(),r=this.selectionChanged&&Sc(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new RI(this.view,e,i,n))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let i=this.readChange();if(!i)return!1;let n=this.view.state,r=CC(this.view,i);return this.view.state==n&&this.view.update([]),r}readMutation(e){let i=this.view.docView.nearest(e.target);if(!i||i.ignoreMutation(e))return null;if(i.markDirty(e.type=="attributes"),e.type=="attributes"&&(i.flags|=4),e.type=="childList"){let n=T_(i,e.previousSibling||e.target.previousSibling,-1),r=T_(i,e.nextSibling||e.target.nextSibling,1);return{from:n?i.posAfter(n):i.posAtStart,to:r?i.posBefore(r):i.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,i,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(i=this.gapIntersection)===null||i===void 0||i.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function T_(t,e,i){for(;e;){let n=At.get(e);if(n&&n.parent==t)return n;let r=e.parentNode;e=r!=t.dom?r:i>0?e.nextSibling:e.previousSibling}return null}function UI(t){let e=null;function i(h){h.preventDefault(),h.stopImmediatePropagation(),e=h.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),!e)return null;let n=e.startContainer,r=e.startOffset,s=e.endContainer,a=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor);return Pc(l.node,l.offset,s,a)&&([n,r,s,a]=[s,a,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:a}}class Te{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(r=>i(r,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||MO(e.parent)||document,this.viewState=new M_(e.state||lt.create(e)),this.plugins=this.state.facet(Hl).map(n=>new ad(n));for(let n of this.plugins)n.update(this);this.observer=new BI(this),this.inputState=new iI(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new a_(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}dispatch(...e){let i=e.length==1&&e[0]instanceof Xt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(i,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,n=!1,r,s=this.state;for(let y of e){if(y.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=y.state}if(this.destroyed){this.viewState.state=s;return}let a=this.hasFocus,l=0,h=null;e.some(y=>y.annotation(yC))?(this.inputState.notifiedFocused=a,l=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,h=vC(s,a),h||(l=1));let p=this.observer.delayedAndroidKey,d=null;if(p?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(d=null)):this.observer.clear(),s.facet(lt.phrases)!=this.state.facet(lt.phrases))return this.setState(s);r=Wc.create(this,s,e),r.flags|=l;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let y of e){if(m&&(m=m.map(y.changes)),y.scrollIntoView){let{main:v}=y.state.selection;m=new jc(v.empty?v:de.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of y.effects)v.is(s_)&&(m=v.value)}this.viewState.update(r,m),this.bidiCache=Gc.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),i=this.docView.update(r),this.state.facet(Ql)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some(y=>y.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Fh)!=r.state.facet(Fh)&&(this.viewState.mustMeasureContent=!0),(i||n||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let y of this.state.facet(Xg))y(r);(h||d)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),d&&!CC(this,d)&&p.force&&ua(this.contentDOM,p.key,p.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let i=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new M_(e),this.plugins=e.facet(Hl).map(n=>new ad(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView=new a_(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(e){let i=e.startState.facet(Hl),n=e.state.facet(Hl);if(i!=n){let r=[];for(let s of n){let a=i.indexOf(s);if(a<0)r.push(new ad(s));else{let l=this.plugins[a];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let i=null,n=this.scrollDOM,{scrollTop:r}=n,{scrollAnchorPos:s,scrollAnchorHeight:a}=this.viewState;r!=this.viewState.scrollTop&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(a<0)if(NS(n))s=-1,a=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(r);s=v.from,a=v.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let p=[];h&4||([this.measureRequests,p]=[p,this.measureRequests]);let d=p.map(v=>{try{return v.read(this)}catch(S){return vn(this.state,S),E_}}),m=Wc.create(this,this.state,[]),y=!1;m.flags|=h,i?i.flags|=h:i=m,this.updateState=2,m.empty||(this.updatePlugins(m),this.inputState.update(m),this.updateAttrs(),y=this.docView.update(m));for(let v=0;v<p.length;v++)if(d[v]!=E_)try{let S=p[v];S.write&&S.write(d[v],this)}catch(S){vn(this.state,S)}if(y&&this.docView.updateSelection(!0),!m.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let S=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-a;if(S>1||S<-1){r=n.scrollTop=r+S,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let l of this.state.facet(Xg))l(i)}get themeClasses(){return lm+" "+(this.state.facet(am)?xC:bC)+" "+this.state.facet(Fh)}updateAttrs(){let e=A_(this,XS,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Lf)?"true":"false",class:"cm-content",style:`${Ae.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),A_(this,b0,i);let n=this.observer.ignore(()=>{let r=Zg(this.contentDOM,this.contentAttrs,i),s=Zg(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=i,n}showAnnouncements(e){let i=!0;for(let n of e)for(let r of n.effects)if(r.is(Te.announce)){i&&(this.announceDOM.textContent=""),i=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Ql);let e=this.state.facet(Te.cspNonce);_s.mount(this.root,this.styleModules.concat(AI).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===e.key){this.measureRequests[i]=e;return}}this.measureRequests.push(e)}}plugin(e){let i=this.pluginMap.get(e);return(i===void 0||i&&i.spec!=e)&&this.pluginMap.set(e,i=this.plugins.find(n=>n.spec==e)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,i,n){return ud(this,e,p_(this,e,i,n))}moveByGroup(e,i){return ud(this,e,p_(this,e,i,n=>eI(this,e.head,n)))}moveToLineBoundary(e,i,n=!0){return XO(this,e,i,n)}moveVertically(e,i,n){return ud(this,e,tI(this,e,i,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,i=0){return this.docView.posFromDOM(e,i)}posAtCoords(e,i=!0){return this.readMeasured(),hC(this,e,i)}coordsAtPos(e,i=1){this.readMeasured();let n=this.docView.coordsAt(e,i);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),a=s[hs.find(s,e-r.from,-1,i)];return v0(n,a.dir==Ft.LTR==i>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(ZS)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>JI)return oC(e.length);let i=this.textDirectionAt(e.from),n;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==i&&(s.fresh||sC(s.isolates,n=o_(this,e.from,e.to))))return s.order;n||(n=o_(this,e.from,e.to));let r=FO(e.text,i,n);return this.bidiCache.push(new Gc(e.from,e.to,i,n,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ae.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{OS(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,i={}){return s_.of(new jc(typeof e=="number"?de.cursor(e):e,i.y,i.x,i.yMargin,i.xMargin))}static domEventHandlers(e){return Si.define(()=>({}),{eventHandlers:e})}static theme(e,i){let n=_s.newName(),r=[Fh.of(n),Ql.of(um(`.${n}`,e))];return i&&i.dark&&r.push(am.of(!0)),r}static baseTheme(e){return Ra.lowest(Ql.of(um("."+lm,e,SC)))}static findFromDOM(e){var i;let n=e.querySelector(".cm-content"),r=n&&At.get(n)||At.get(e);return((i=r==null?void 0:r.rootView)===null||i===void 0?void 0:i.view)||null}}Te.styleModule=Ql;Te.inputHandler=YS;Te.focusChangeEffect=$S;Te.perLineTextDirection=ZS;Te.exceptionSink=QS;Te.updateListener=Xg;Te.editable=Lf;Te.mouseSelectionStyle=HS;Te.dragMovesSelection=zS;Te.clickAddsSelectionRange=KS;Te.decorations=du;Te.atomicRanges=x0;Te.bidiIsolatedRanges=eC;Te.scrollMargins=tC;Te.darkTheme=am;Te.cspNonce=Oe.define({combine:t=>t.length?t[0]:""});Te.contentAttributes=b0;Te.editorAttributes=XS;Te.lineWrapping=Te.contentAttributes.of({class:"cm-lineWrapping"});Te.announce=ze.define();const JI=4096,E_={};class Gc{constructor(e,i,n,r,s,a){this.from=e,this.to=i,this.dir=n,this.isolates=r,this.fresh=s,this.order=a}static update(e,i){if(i.empty&&!e.some(s=>s.fresh))return e;let n=[],r=e.length?e[e.length-1].dir:Ft.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let a=e[s];a.dir==r&&!i.touchesRange(a.from,a.to)&&n.push(new Gc(i.mapPos(a.from,1),i.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return n}}function A_(t,e,i){for(let n=t.state.facet(e),r=n.length-1;r>=0;r--){let s=n[r],a=typeof s=="function"?s(t):s;a&&$g(a,i)}return i}const PI=Ae.mac?"mac":Ae.windows?"win":Ae.linux?"linux":"key";function FI(t,e){const i=t.split(/-(?!$)/);let n=i[i.length-1];n=="Space"&&(n=" ");let r,s,a,l;for(let h=0;h<i.length-1;++h){const p=i[h];if(/^(cmd|meta|m)$/i.test(p))l=!0;else if(/^a(lt)?$/i.test(p))r=!0;else if(/^(c|ctrl|control)$/i.test(p))s=!0;else if(/^s(hift)?$/i.test(p))a=!0;else if(/^mod$/i.test(p))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+p)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),l&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function jh(t,e,i){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),i!==!1&&e.shiftKey&&(t="Shift-"+t),t}const jI=Ra.default(Te.domEventHandlers({keydown(t,e){return kC(MC(e.state),t,e,"editor")}})),Of=Oe.define({enables:jI}),R_=new WeakMap;function MC(t){let e=t.facet(Of),i=R_.get(e);return i||R_.set(e,i=VI(e.reduce((n,r)=>n.concat(r),[]))),i}function WI(t,e,i){return kC(MC(t.state),e,t,i)}let os=null;const GI=4e3;function VI(t,e=PI){let i=Object.create(null),n=Object.create(null),r=(a,l)=>{let h=n[a];if(h==null)n[a]=l;else if(h!=l)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},s=(a,l,h,p,d)=>{var m,y;let v=i[a]||(i[a]=Object.create(null)),S=l.split(/ (?!$)/).map(w=>FI(w,e));for(let w=1;w<S.length;w++){let E=S.slice(0,w).join(" ");r(E,!0),v[E]||(v[E]={preventDefault:!0,stopPropagation:!1,run:[B=>{let L=os={view:B,prefix:E,scope:a};return setTimeout(()=>{os==L&&(os=null)},GI),!0}]})}let M=S.join(" ");r(M,!1);let b=v[M]||(v[M]={preventDefault:!1,stopPropagation:!1,run:((y=(m=v._any)===null||m===void 0?void 0:m.run)===null||y===void 0?void 0:y.slice())||[]});h&&b.run.push(h),p&&(b.preventDefault=!0),d&&(b.stopPropagation=!0)};for(let a of t){let l=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let p of l){let d=i[p]||(i[p]=Object.create(null));d._any||(d._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let m in d)d[m].run.push(a.any)}let h=a[e]||a.key;if(h)for(let p of l)s(p,h,a.run,a.preventDefault,a.stopPropagation),a.shift&&s(p,"Shift-"+h,a.shift,a.preventDefault,a.stopPropagation)}return i}function kC(t,e,i,n){let r=wO(e),s=ai(r,0),a=gn(s)==r.length&&r!=" ",l="",h=!1,p=!1,d=!1;os&&os.view==i&&os.scope==n&&(l=os.prefix+" ",fC.indexOf(e.keyCode)<0&&(p=!0,os=null));let m=new Set,y=b=>{if(b){for(let w of b.run)if(!m.has(w)&&(m.add(w),w(i,e)))return b.stopPropagation&&(d=!0),!0;b.preventDefault&&(b.stopPropagation&&(d=!0),p=!0)}return!1},v=t[n],S,M;return v&&(y(v[l+jh(r,e,!a)])?h=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ae.windows&&e.ctrlKey&&e.altKey)&&(S=bs[e.keyCode])&&S!=r?(y(v[l+jh(S,e,!0)])||e.shiftKey&&(M=fu[e.keyCode])!=r&&M!=S&&y(v[l+jh(M,e,!1)]))&&(h=!0):a&&e.shiftKey&&y(v[l+jh(r,e,!0)])&&(h=!0),!h&&y(v._any)&&(h=!0)),p&&(h=!0),h&&d&&e.stopPropagation(),h}class Nu{constructor(e,i,n,r,s){this.className=e,this.left=i,this.top=n,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,i){return i.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,i,n){if(n.empty){let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let s=TC(e);return[new Nu(i,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return KI(e,i,n)}}function TC(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Ft.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function L_(t,e,i){let n=de.cursor(e);return{from:Math.max(i.from,t.moveToLineBoundary(n,!1,!0).from),to:Math.min(i.to,t.moveToLineBoundary(n,!0,!0).from),type:Kt.Text}}function KI(t,e,i){if(i.to<=t.viewport.from||i.from>=t.viewport.to)return[];let n=Math.max(i.from,t.viewport.from),r=Math.min(i.to,t.viewport.to),s=t.textDirection==Ft.LTR,a=t.contentDOM,l=a.getBoundingClientRect(),h=TC(t),p=a.querySelector(".cm-line"),d=p&&window.getComputedStyle(p),m=l.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),y=l.right-(d?parseInt(d.paddingRight):0),v=rm(t,n),S=rm(t,r),M=v.type==Kt.Text?v:null,b=S.type==Kt.Text?S:null;if(M&&(t.lineWrapping||v.widgetLineBreaks)&&(M=L_(t,n,M)),b&&(t.lineWrapping||S.widgetLineBreaks)&&(b=L_(t,r,b)),M&&b&&M.from==b.from)return E(B(i.from,i.to,M));{let I=M?B(i.from,null,M):L(v,!1),O=b?B(null,i.to,b):L(S,!0),F=[];return(M||v).to<(b||S).from-(M&&b?1:0)||v.widgetLineBreaks>1&&I.bottom+t.defaultLineHeight/2<O.top?F.push(w(m,I.bottom,y,O.top)):I.bottom<O.top&&t.elementAtHeight((I.bottom+O.top)/2).type==Kt.Text&&(I.bottom=O.top=(I.bottom+O.top)/2),E(I).concat(F).concat(E(O))}function w(I,O,F,U){return new Nu(e,I-h.left,O-h.top-.01,F-I,U-O+.01)}function E({top:I,bottom:O,horizontal:F}){let U=[];for(let V=0;V<F.length;V+=2)U.push(w(F[V],I,F[V+1],O));return U}function B(I,O,F){let U=1e9,V=-1e9,A=[];function Q(le,q,Z,W,$){let ne=t.coordsAtPos(le,le==F.to?-2:2),we=t.coordsAtPos(Z,Z==F.from?2:-2);!ne||!we||(U=Math.min(ne.top,we.top,U),V=Math.max(ne.bottom,we.bottom,V),$==Ft.LTR?A.push(s&&q?m:ne.left,s&&W?y:we.right):A.push(!s&&W?m:we.left,!s&&q?y:ne.right))}let H=I??F.from,re=O??F.to;for(let le of t.visibleRanges)if(le.to>H&&le.from<re)for(let q=Math.max(le.from,H),Z=Math.min(le.to,re);;){let W=t.state.doc.lineAt(q);for(let $ of t.bidiSpans(W)){let ne=$.from+W.from,we=$.to+W.from;if(ne>=Z)break;we>q&&Q(Math.max(ne,q),I==null&&ne<=H,Math.min(we,Z),O==null&&we>=re,$.dir)}if(q=W.to+1,q>=Z)break}return A.length==0&&Q(H,I==null,re,O==null,t.textDirection),{top:U,bottom:V,horizontal:A}}function L(I,O){let F=l.top+(O?I.top:I.bottom);return{top:F,bottom:F,horizontal:[]}}}function zI(t,e){return t.constructor==e.constructor&&t.eq(e)}class HI{constructor(e,i){this.view=e,this.layer=i,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),i.above&&this.dom.classList.add("cm-layer-above"),i.class&&this.dom.classList.add(i.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),i.mount&&i.mount(this.dom,e)}update(e){e.startState.facet(kc)!=e.state.facet(kc)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let i=0,n=e.facet(kc);for(;i<n.length&&n[i]!=this.layer;)i++;this.dom.style.zIndex=String((this.layer.above?150:-1)-i)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((i,n)=>!zI(i,this.drawn[n]))){let i=this.dom.firstChild,n=0;for(let r of e)r.update&&i&&r.constructor&&this.drawn[n].constructor&&r.update(i,this.drawn[n])?(i=i.nextSibling,n++):this.dom.insertBefore(r.draw(),i);for(;i;){let r=i.nextSibling;i.remove(),i=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const kc=Oe.define();function EC(t){return[Si.define(e=>new HI(e,t)),kc.of(t)]}const AC=!Ae.ios,mu=Oe.define({combine(t){return Dr(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,i)=>Math.min(e,i),drawRangeCursor:(e,i)=>e||i})}});function RC(t={}){return[mu.of(t),QI,YI,$I,qS.of(!0)]}function LC(t){return t.startState.facet(mu)!=t.state.facet(mu)}const QI=EC({above:!0,markers(t){let{state:e}=t,i=e.facet(mu),n=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||AC:i.drawRangeCursor){let a=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:de.cursor(r.head,r.head>r.anchor?-1:1);for(let h of Nu.forRange(t,a,l))n.push(h)}}return n},update(t,e){t.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let i=LC(t);return i&&O_(t.state,e),t.docChanged||t.selectionSet||i},mount(t,e){O_(e.state,t)},class:"cm-cursorLayer"});function O_(t,e){e.style.animationDuration=t.facet(mu).cursorBlinkRate+"ms"}const YI=EC({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Nu.forRange(t,"cm-selectionBackground",e)).reduce((e,i)=>e.concat(i))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||LC(t)},class:"cm-selectionLayer"}),OC={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};AC&&(OC[".cm-line"].caretColor="transparent !important");const $I=Ra.highest(Te.theme(OC)),IC=ze.define({map(t,e){return t==null?null:e.mapPos(t)}}),$l=ci.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((i,n)=>n.is(IC)?n.value:i,t)}}),ZI=Si.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let i=t.state.field($l);i==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field($l)!=i||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field($l),e=t!=null&&this.view.coordsAtPos(t);if(!e)return null;let i=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-i.left+this.view.scrollDOM.scrollLeft,top:e.top-i.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field($l)!=t&&this.view.dispatch({effects:IC.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function qI(){return[$l,ZI]}function I_(t,e,i,n,r){e.lastIndex=0;for(let s=t.iterRange(i,n),a=i,l;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(a+l.index,l)}function XI(t,e){let i=t.visibleRanges;if(i.length==1&&i[0].from==t.viewport.from&&i[0].to==t.viewport.to)return i;let n=[];for(let{from:r,to:s}of i)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),n.length&&n[n.length-1].to>=r?n[n.length-1].to=s:n.push({from:r,to:s});return n}class eN{constructor(e){const{regexp:i,decoration:n,decorate:r,boundary:s,maxLength:a=1e3}=e;if(!i.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=i,r)this.addMatch=(l,h,p,d)=>r(d,p,p+l[0].length,l,h);else if(typeof n=="function")this.addMatch=(l,h,p,d)=>{let m=n(l,h,p);m&&d(p,p+l[0].length,m)};else if(n)this.addMatch=(l,h,p,d)=>d(p,p+l[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=a}createDeco(e){let i=new ho,n=i.add.bind(i);for(let{from:r,to:s}of XI(e,this.maxLength))I_(e.state.doc,this.regexp,r,s,(a,l)=>this.addMatch(l,e,a,n));return i.finish()}updateDeco(e,i){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,a,l,h)=>{h>e.view.viewport.from&&l<e.view.viewport.to&&(n=Math.min(l,n),r=Math.max(h,r))}),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,i.map(e.changes),n,r):i}updateRange(e,i,n,r){for(let s of e.visibleRanges){let a=Math.max(s.from,n),l=Math.min(s.to,r);if(l>a){let h=e.state.doc.lineAt(a),p=h.to<l?e.state.doc.lineAt(l):h,d=Math.max(s.from,h.from),m=Math.min(s.to,p.to);if(this.boundary){for(;a>h.from;a--)if(this.boundary.test(h.text[a-1-h.from])){d=a;break}for(;l<p.to;l++)if(this.boundary.test(p.text[l-p.from])){m=l;break}}let y=[],v,S=(M,b,w)=>y.push(w.range(M,b));if(h==p)for(this.regexp.lastIndex=d-h.from;(v=this.regexp.exec(h.text))&&v.index<m-h.from;)this.addMatch(v,e,v.index+h.from,S);else I_(e.state.doc,this.regexp,d,m,(M,b)=>this.addMatch(b,e,M,S));i=i.update({filterFrom:d,filterTo:m,filter:(M,b)=>M<d||b>m,add:y})}}return i}}const hm=/x/.unicode!=null?"gu":"g",tN=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,hm),iN={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let fd=null;function nN(){var t;if(fd==null&&typeof document<"u"&&document.body){let e=document.body.style;fd=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return fd||!1}const Tc=Oe.define({combine(t){let e=Dr(t,{render:null,specialChars:tN,addSpecialChars:null});return(e.replaceTabs=!nN())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,hm)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,hm)),e}});function NC(t={}){return[Tc.of(t),rN()]}let N_=null;function rN(){return N_||(N_=Si.fromClass(class{constructor(t){this.view=t,this.decorations=Ve.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Tc)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new eN({regexp:t.specialChars,decoration:(e,i,n)=>{let{doc:r}=i.state,s=ai(e[0],0);if(s==9){let a=r.lineAt(n),l=i.state.tabSize,h=La(a.text,l,n-a.from);return Ve.replace({widget:new lN((l-h%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Ve.replace({widget:new aN(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Tc);t.startState.facet(Tc)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const sN="•";function oN(t){return t>=32?sN:t==10?"␤":String.fromCharCode(9216+t)}class aN extends ks{constructor(e,i){super(),this.options=e,this.code=i}eq(e){return e.code==this.code}toDOM(e){let i=oN(this.code),n=e.state.phrase("Control character")+" "+(iN[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,i);if(r)return r;let s=document.createElement("span");return s.textContent=i,s.title=n,s.setAttribute("aria-label",n),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class lN extends ks{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const cm=2e3;function uN(t,e,i){let n=Math.min(e.line,i.line),r=Math.max(e.line,i.line),s=[];if(e.off>cm||i.off>cm||e.col<0||i.col<0){let a=Math.min(e.off,i.off),l=Math.max(e.off,i.off);for(let h=n;h<=r;h++){let p=t.doc.line(h);p.length<=l&&s.push(de.range(p.from+a,p.to+l))}}else{let a=Math.min(e.col,i.col),l=Math.max(e.col,i.col);for(let h=n;h<=r;h++){let p=t.doc.line(h),d=Gg(p.text,a,t.tabSize,!0);if(d<0)s.push(de.cursor(p.to));else{let m=Gg(p.text,l,t.tabSize);s.push(de.range(p.from+d,p.from+m))}}}return s}function hN(t,e){let i=t.coordsAtPos(t.viewport.from);return i?Math.round(Math.abs((i.left-e)/t.defaultCharacterWidth)):-1}function D_(t,e){let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),n=t.state.doc.lineAt(i),r=i-n.from,s=r>cm?-1:r==n.length?hN(t,e.clientX):La(n.text,t.state.tabSize,i-n.from);return{line:n.number,col:s,off:r}}function cN(t,e){let i=D_(t,e),n=t.state.selection;return i?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(i.line).from),a=r.state.doc.lineAt(s);i={line:a.number,col:i.col,off:Math.min(i.off,a.length)},n=n.map(r.changes)}},get(r,s,a){let l=D_(t,r);if(!l)return n;let h=uN(t.state,i,l);return h.length?a?de.create(h.concat(n.ranges)):de.create(h):n}}:null}function fN(t){let e=(t==null?void 0:t.eventFilter)||(i=>i.altKey&&i.button==0);return Te.mouseSelectionStyle.of((i,n)=>e(n)?cN(i,n):null)}const pN={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},dN={style:"cursor: crosshair"};function gN(t={}){let[e,i]=pN[t.key||"Alt"],n=Si.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventHandlers:{keydown(r){this.set(r.keyCode==e||i(r))},keyup(r){(r.keyCode==e||!i(r))&&this.set(!1)},mousemove(r){this.set(i(r))}}});return[n,Te.contentAttributes.of(r=>{var s;return!((s=r.plugin(n))===null||s===void 0)&&s.isDown?dN:null})]}const Wh="-10000px";class DC{constructor(e,i,n){this.facet=i,this.createTooltipView=n,this.input=e.state.facet(i),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(n)}update(e){var i;let n=e.state.facet(this.facet),r=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let s=[];for(let a=0;a<r.length;a++){let l=r[a],h=-1;if(l){for(let p=0;p<this.tooltips.length;p++){let d=this.tooltips[p];d&&d.create==l.create&&(h=p)}if(h<0)s[a]=this.createTooltipView(l);else{let p=s[a]=this.tooltipViews[h];p.update&&p.update(e)}}}for(let a of this.tooltipViews)s.indexOf(a)<0&&(a.dom.remove(),(i=a.destroy)===null||i===void 0||i.call(a));return this.input=n,this.tooltips=r,this.tooltipViews=s,!0}}function mN(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const pd=Oe.define({combine:t=>{var e,i,n;return{position:Ae.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((i=t.find(r=>r.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((n=t.find(r=>r.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||mN}}}),B_=new WeakMap,BC=Si.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(pd);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new DC(t,C0,i=>this.createTooltip(i)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let i=e||t.geometryChanged,n=t.state.facet(pd);if(n.position!=this.position){this.position=n.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;i=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",e.dom.appendChild(i)}return e.dom.style.position=this.position,e.dom.style.top=Wh,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((e,i)=>{let n=this.manager.tooltipViews[i];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(pd).tooltipSpace(this.view)}}writeMeasure(t){var e;let{editor:i,space:n}=t,r=[];for(let s=0;s<this.manager.tooltips.length;s++){let a=this.manager.tooltips[s],l=this.manager.tooltipViews[s],{dom:h}=l,p=t.pos[s],d=t.size[s];if(!p||p.bottom<=Math.max(i.top,n.top)||p.top>=Math.min(i.bottom,n.bottom)||p.right<Math.max(i.left,n.left)-.1||p.left>Math.min(i.right,n.right)+.1){h.style.top=Wh;continue}let m=a.arrow?l.dom.querySelector(".cm-tooltip-arrow"):null,y=m?7:0,v=d.right-d.left,S=(e=B_.get(l))!==null&&e!==void 0?e:d.bottom-d.top,M=l.offset||vN,b=this.view.textDirection==Ft.LTR,w=d.width>n.right-n.left?b?n.left:n.right-d.width:b?Math.min(p.left-(m?14:0)+M.x,n.right-v):Math.max(n.left,p.left-v+(m?14:0)-M.x),E=!!a.above;!a.strictSide&&(E?p.top-(d.bottom-d.top)-M.y<n.top:p.bottom+(d.bottom-d.top)+M.y>n.bottom)&&E==n.bottom-p.bottom>p.top-n.top&&(E=!E);let B=(E?p.top-n.top:n.bottom-p.bottom)-y;if(B<S&&l.resize!==!1){if(B<this.view.defaultLineHeight){h.style.top=Wh;continue}B_.set(l,S),h.style.height=(S=B)+"px"}else h.style.height&&(h.style.height="");let L=E?p.top-S-y-M.y:p.bottom+y+M.y,I=w+v;if(l.overlap!==!0)for(let O of r)O.left<I&&O.right>w&&O.top<L+S&&O.bottom>L&&(L=E?O.top-S-2-y:O.bottom+y+2);this.position=="absolute"?(h.style.top=L-t.parent.top+"px",h.style.left=w-t.parent.left+"px"):(h.style.top=L+"px",h.style.left=w+"px"),m&&(m.style.left=`${p.left+(b?M.x:-M.x)-(w+14-7)}px`),l.overlap!==!0&&r.push({left:w,top:L,right:I,bottom:L+S}),h.classList.toggle("cm-tooltip-above",E),h.classList.toggle("cm-tooltip-below",!E),l.positioned&&l.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Wh}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),yN=Te.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),vN={x:0,y:0},C0=Oe.define({enables:[BC,yN]}),Vc=Oe.define();class M0{static create(e){return new M0(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new DC(e,Vc,i=>this.createHostedView(i))}createHostedView(e){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(i.dom),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let i of this.manager.tooltipViews)i.mount&&i.mount(e);this.mounted=!0}positioned(e){for(let i of this.manager.tooltipViews)i.positioned&&i.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let i of this.manager.tooltipViews)(e=i.destroy)===null||e===void 0||e.call(i)}}const wN=C0.compute([Vc],t=>{let e=t.facet(Vc).filter(i=>i);return e.length===0?null:{pos:Math.min(...e.map(i=>i.pos)),end:Math.max(...e.filter(i=>i.end!=null).map(i=>i.end)),create:M0.create,above:e[0].above,arrow:e.some(i=>i.arrow)}});class _N{constructor(e,i,n,r,s){this.view=e,this.source=i,this.field=n,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:i}=this,n=e.docView.nearest(i.target);if(!n)return;let r,s=1;if(n instanceof us)r=n.posAtStart;else{if(r=e.posAtCoords(i),r==null)return;let l=e.coordsAtPos(r);if(!l||i.y<l.top||i.y>l.bottom||i.x<l.left-e.defaultCharacterWidth||i.x>l.right+e.defaultCharacterWidth)return;let h=e.bidiSpans(e.state.doc.lineAt(r)).find(d=>d.from<=r&&d.to>=r),p=h&&h.dir==Ft.RTL?-1:1;s=i.x<l.left?-p:p}let a=this.source(e,r,s);if(a!=null&&a.then){let l=this.pending={pos:r};a.then(h=>{this.pending==l&&(this.pending=null,h&&e.dispatch({effects:this.setHover.of(h)}))},h=>vn(e.state,h,"hover tooltip"))}else a&&e.dispatch({effects:this.setHover.of(a)})}mousemove(e){var i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!U_(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,s=(i=n==null?void 0:n.end)!==null&&i!==void 0?i:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!bN(this.view,r,s,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!U_(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function U_(t){for(let e=t;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function bN(t,e,i,n,r,s){let a=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(a.left>n||a.right<n||a.top>r||Math.min(a.bottom,l)<r)return!1;let h=t.posAtCoords({x:n,y:r},!1);return h>=e&&h<=i}function xN(t,e={}){let i=ze.define(),n=ci.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let a=s.changes.mapPos(r.pos,-1,Ni.TrackDel);if(a==null)return null;let l=Object.assign(Object.create(null),r);l.pos=a,r.end!=null&&(l.end=s.changes.mapPos(r.end)),r=l}for(let a of s.effects)a.is(i)&&(r=a.value),a.is(SN)&&(r=null);return r},provide:r=>Vc.from(r)});return[n,Si.define(r=>new _N(r,t,n,i,e.hoverTime||300)),wN]}function UC(t,e){let i=t.plugin(BC);if(!i)return null;let n=i.manager.tooltips.indexOf(e);return n<0?null:i.manager.tooltipViews[n]}const SN=ze.define(),J_=Oe.define({combine(t){let e,i;for(let n of t)e=e||n.topContainer,i=i||n.bottomContainer;return{topContainer:e,bottomContainer:i}}});function yu(t,e){let i=t.plugin(JC),n=i?i.specs.indexOf(e):-1;return n>-1?i.panels[n]:null}const JC=Si.fromClass(class{constructor(t){this.input=t.state.facet(vu),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(t));let e=t.state.facet(J_);this.top=new Gh(t,!0,e.topContainer),this.bottom=new Gh(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(t){let e=t.state.facet(J_);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Gh(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Gh(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=t.state.facet(vu);if(i!=this.input){let n=i.filter(h=>h),r=[],s=[],a=[],l=[];for(let h of n){let p=this.specs.indexOf(h),d;p<0?(d=h(t.view),l.push(d)):(d=this.panels[p],d.update&&d.update(t)),r.push(d),(d.top?s:a).push(d)}this.specs=n,this.panels=r,this.top.sync(s),this.bottom.sync(a);for(let h of l)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let n of this.panels)n.update&&n.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Te.scrollMargins.of(e=>{let i=e.plugin(t);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class Gh{constructor(e,i,n){this.view=e,this.top=i,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let i of this.panels)i.destroy&&e.indexOf(i)<0&&i.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let i=this.container||this.view.dom;i.insertBefore(this.dom,this.top?i.firstChild:null)}let e=this.dom.firstChild;for(let i of this.panels)if(i.dom.parentNode==this.dom){for(;e!=i.dom;)e=P_(e);e=e.nextSibling}else this.dom.insertBefore(i.dom,e);for(;e;)e=P_(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function P_(t){let e=t.nextSibling;return t.remove(),e}const vu=Oe.define({enables:JC});class fo extends uo{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}fo.prototype.elementClass="";fo.prototype.toDOM=void 0;fo.prototype.mapMode=Ni.TrackBefore;fo.prototype.startSide=fo.prototype.endSide=-1;fo.prototype.point=!0;const CN=Oe.define(),MN=new class extends fo{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},kN=CN.compute(["selection"],t=>{let e=[],i=-1;for(let n of t.selection.ranges){let r=t.doc.lineAt(n.head).from;r>i&&(i=r,e.push(MN.range(r)))}return It.of(e)});function TN(){return kN}const EN=1024;let AN=0;class dd{constructor(e,i){this.from=e,this.to=i}}class et{constructor(e={}){this.id=AN++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=bn.match(e)),i=>{let n=e(i);return n===void 0?null:[this,n]}}}et.closedBy=new et({deserialize:t=>t.split(" ")});et.openedBy=new et({deserialize:t=>t.split(" ")});et.group=new et({deserialize:t=>t.split(" ")});et.contextHash=new et({perNode:!0});et.lookAhead=new et({perNode:!0});et.mounted=new et({perNode:!0});const RN=Object.create(null);class bn{constructor(e,i,n,r=0){this.name=e,this.props=i,this.id=n,this.flags=r}static define(e){let i=e.props&&e.props.length?Object.create(null):RN,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new bn(e.name||"",i,e.id,n);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let i=this.prop(et.group);return i?i.indexOf(e)>-1:!1}return this.id==e}static match(e){let i=Object.create(null);for(let n in e)for(let r of n.split(" "))i[r]=e[n];return n=>{for(let r=n.prop(et.group),s=-1;s<(r?r.length:0);s++){let a=i[s<0?n.name:r[s]];if(a)return a}}}}bn.none=new bn("",Object.create(null),0,8);const Vh=new WeakMap,F_=new WeakMap;var ui;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(ui||(ui={}));class xi{constructor(e,i,n,r,s){if(this.type=e,this.children=i,this.positions=n,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,l]of s)this.props[typeof a=="number"?a:a.id]=l}}toString(){let e=this.prop(et.mounted);if(e&&!e.overlay)return e.tree.toString();let i="";for(let n of this.children){let r=n.toString();r&&(i&&(i+=","),i+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(e=0){return new Hc(this.topNode,e)}cursorAt(e,i=0,n=0){let r=Vh.get(this)||this.topNode,s=new Hc(r);return s.moveTo(e,i),Vh.set(this,s._tree),s}get topNode(){return new Er(this,0,0,null)}resolve(e,i=0){let n=wa(Vh.get(this)||this.topNode,e,i,!1);return Vh.set(this,n),n}resolveInner(e,i=0){let n=wa(F_.get(this)||this.topNode,e,i,!0);return F_.set(this,n),n}iterate(e){let{enter:i,leave:n,from:r=0,to:s=this.length}=e,a=e.mode||0,l=(a&ui.IncludeAnonymous)>0;for(let h=this.cursor(a|ui.IncludeAnonymous);;){let p=!1;if(h.from<=s&&h.to>=r&&(!l&&h.type.isAnonymous||i(h)!==!1)){if(h.firstChild())continue;p=!0}for(;p&&n&&(l||!h.type.isAnonymous)&&n(h),!h.nextSibling();){if(!h.parent())return;p=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let i in this.props)e.push([+i,this.props[i]]);return e}balance(e={}){return this.children.length<=8?this:E0(bn.none,this.children,this.positions,0,this.children.length,0,this.length,(i,n,r)=>new xi(this.type,i,n,r,this.propValues),e.makeTree||((i,n,r)=>new xi(bn.none,i,n,r)))}static build(e){return ON(e)}}xi.empty=new xi(bn.none,[],[],0);class k0{constructor(e,i){this.buffer=e,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new k0(this.buffer,this.index)}}class go{constructor(e,i,n){this.buffer=e,this.length=i,this.set=n}get type(){return bn.none}toString(){let e=[];for(let i=0;i<this.buffer.length;)e.push(this.childString(i)),i=this.buffer[i+3];return e.join(",")}childString(e){let i=this.buffer[e],n=this.buffer[e+3],r=this.set.types[i],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,n==e)return s;let a=[];for(;e<n;)a.push(this.childString(e)),e=this.buffer[e+3];return s+"("+a.join(",")+")"}findChild(e,i,n,r,s){let{buffer:a}=this,l=-1;for(let h=e;h!=i&&!(PC(s,r,a[h+1],a[h+2])&&(l=h,n>0));h=a[h+3]);return l}slice(e,i,n){let r=this.buffer,s=new Uint16Array(i-e),a=0;for(let l=e,h=0;l<i;){s[h++]=r[l++],s[h++]=r[l++]-n;let p=s[h++]=r[l++]-n;s[h++]=r[l++]-e,a=Math.max(a,p)}return new go(s,a,this.set)}}function PC(t,e,i,n){switch(t){case-2:return i<e;case-1:return n>=e&&i<e;case 0:return i<e&&n>e;case 1:return i<=e&&n>e;case 2:return n>e;case 4:return!0}}function FC(t,e){let i=t.childBefore(e);for(;i;){let n=i.lastChild;if(!n||n.to!=i.to)break;n.type.isError&&n.from==n.to?(t=i,i=n.prevSibling):i=n}return t}function wa(t,e,i,n){for(var r;t.from==t.to||(i<1?t.from>=e:t.from>e)||(i>-1?t.to<=e:t.to<e);){let a=!n&&t instanceof Er&&t.index<0?null:t.parent;if(!a)return t;t=a}let s=n?0:ui.IgnoreOverlays;if(n)for(let a=t,l=a.parent;l;a=l,l=a.parent)a instanceof Er&&a.index<0&&((r=l.enter(e,i,s))===null||r===void 0?void 0:r.from)!=a.from&&(t=l);for(;;){let a=t.enter(e,i,s);if(!a)return t;t=a}}class Er{constructor(e,i,n,r){this._tree=e,this.from=i,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,i,n,r,s=0){for(let a=this;;){for(let{children:l,positions:h}=a._tree,p=i>0?l.length:-1;e!=p;e+=i){let d=l[e],m=h[e]+a.from;if(PC(r,n,m,m+d.length)){if(d instanceof go){if(s&ui.ExcludeBuffers)continue;let y=d.findChild(0,d.buffer.length,i,n-m,r);if(y>-1)return new cs(new LN(a,d,e,m),null,y)}else if(s&ui.IncludeAnonymous||!d.type.isAnonymous||T0(d)){let y;if(!(s&ui.IgnoreMounts)&&d.props&&(y=d.prop(et.mounted))&&!y.overlay)return new Er(y.tree,m,e,a);let v=new Er(d,m,e,a);return s&ui.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(i<0?d.children.length-1:0,i,n,r)}}}if(s&ui.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+i:e=i<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,i,n=0){let r;if(!(n&ui.IgnoreOverlays)&&(r=this._tree.prop(et.mounted))&&r.overlay){let s=e-this.from;for(let{from:a,to:l}of r.overlay)if((i>0?a<=s:a<s)&&(i<0?l>=s:l>s))return new Er(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,i,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Hc(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,i=0){return wa(this,e,i,!1)}resolveInner(e,i=0){return wa(this,e,i,!0)}enterUnfinishedNodesBefore(e){return FC(this,e)}getChild(e,i=null,n=null){let r=Kc(this,e,i,n);return r.length?r[0]:null}getChildren(e,i=null,n=null){return Kc(this,e,i,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return zc(this,e)}}function Kc(t,e,i,n){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(i!=null){for(;!r.type.is(i);)if(!r.nextSibling())return s}for(;;){if(n!=null&&r.type.is(n))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return n==null?s:[]}}function zc(t,e,i=e.length-1){for(let n=t.parent;i>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[i]&&e[i]!=n.name)return!1;i--}}return!0}class LN{constructor(e,i,n,r){this.parent=e,this.buffer=i,this.index=n,this.start=r}}class cs{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,i,n){this.context=e,this._parent=i,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,i,n){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,i-this.context.start,n);return s<0?null:new cs(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,i,n=0){if(n&ui.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],i>0?1:-1,e-this.context.start,i);return s<0?null:new cs(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,i=e.buffer[this.index+3];return i<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new cs(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new cs(this.context,this._parent,e.findChild(i,this.index,-1,0,4))}cursor(e=0){return new Hc(this,e)}get tree(){return null}toTree(){let e=[],i=[],{buffer:n}=this.context,r=this.index+4,s=n.buffer[this.index+3];if(s>r){let a=n.buffer[this.index+1];e.push(n.slice(r,s,a)),i.push(0)}return new xi(this.type,e,i,this.to-this.from)}resolve(e,i=0){return wa(this,e,i,!1)}resolveInner(e,i=0){return wa(this,e,i,!0)}enterUnfinishedNodesBefore(e){return FC(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,i=null,n=null){let r=Kc(this,e,i,n);return r.length?r[0]:null}getChildren(e,i=null,n=null){return Kc(this,e,i,n)}get node(){return this}matchContext(e){return zc(this,e)}}class Hc{get name(){return this.type.name}constructor(e,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Er)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,i){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=i||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return e?e instanceof Er?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,i,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,i,n,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,i-this.buffer.start,n);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,i,n=this.mode){return this.buffer?n&ui.ExcludeBuffers?!1:this.enterChild(1,e,i):this.yield(this._tree.enter(e,i,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ui.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ui.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:i}=this.buffer,n=this.stack.length-1;if(e<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(i.findChild(r,this.index,-1,0,4))}else{let r=i.buffer[this.index+3];if(r<(n<0?i.buffer.length:i.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let i,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:i,parent:n}=r)}else({index:i,_parent:n}=this._tree);for(;n;{index:i,_parent:n}=n)if(i>-1)for(let s=i+e,a=e<0?-1:n._tree.children.length;s!=a;s+=e){let l=n._tree.children[s];if(this.mode&ui.IncludeAnonymous||l instanceof go||!l.type.isAnonymous||T0(l))return!1}return!0}move(e,i){if(i&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,i=0){for(;(this.from==this.to||(i<1?this.from>=e:this.from>e)||(i>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,i););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,i=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let a=e;a;a=a._parent)if(a.index==r){if(r==this.index)return a;i=a,n=s+1;break e}r=this.stack[--s]}for(let r=n;r<this.stack.length;r++)i=new cs(this.buffer,i,this.stack[r]);return this.bufferNode=new cs(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,i){for(let n=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&i&&i(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return zc(this.node,e);let{buffer:i}=this.buffer,{types:n}=i.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return zc(this.node,e,r);let a=n[i.buffer[this.stack[s]]];if(!a.isAnonymous){if(e[r]&&e[r]!=a.name)return!1;r--}}return!0}}function T0(t){return t.children.some(e=>e instanceof go||!e.type.isAnonymous||T0(e))}function ON(t){var e;let{buffer:i,nodeSet:n,maxBufferLength:r=EN,reused:s=[],minRepeatType:a=n.types.length}=t,l=Array.isArray(i)?new k0(i,i.length):i,h=n.types,p=0,d=0;function m(L,I,O,F,U){let{id:V,start:A,end:Q,size:H}=l,re=d;for(;H<0;)if(l.next(),H==-1){let $=s[V];O.push($),F.push(A-L);return}else if(H==-3){p=V;return}else if(H==-4){d=V;return}else throw new RangeError(`Unrecognized record size: ${H}`);let le=h[V],q,Z,W=A-L;if(Q-A<=r&&(Z=M(l.pos-I,U))){let $=new Uint16Array(Z.size-Z.skip),ne=l.pos-Z.size,we=$.length;for(;l.pos>ne;)we=b(Z.start,$,we);q=new go($,Q-Z.start,n),W=Z.start-L}else{let $=l.pos-H;l.next();let ne=[],we=[],ye=V>=a?V:-1,xe=0,Se=Q;for(;l.pos>$;)ye>=0&&l.id==ye&&l.size>=0?(l.end<=Se-r&&(v(ne,we,A,xe,l.end,Se,ye,re),xe=ne.length,Se=l.end),l.next()):m(A,$,ne,we,ye);if(ye>=0&&xe>0&&xe<ne.length&&v(ne,we,A,xe,A,Se,ye,re),ne.reverse(),we.reverse(),ye>-1&&xe>0){let Re=y(le);q=E0(le,ne,we,0,ne.length,0,Q-A,Re,Re)}else q=S(le,ne,we,Q-A,re-Q)}O.push(q),F.push(W)}function y(L){return(I,O,F)=>{let U=0,V=I.length-1,A,Q;if(V>=0&&(A=I[V])instanceof xi){if(!V&&A.type==L&&A.length==F)return A;(Q=A.prop(et.lookAhead))&&(U=O[V]+A.length+Q)}return S(L,I,O,F,U)}}function v(L,I,O,F,U,V,A,Q){let H=[],re=[];for(;L.length>F;)H.push(L.pop()),re.push(I.pop()+O-U);L.push(S(n.types[A],H,re,V-U,Q-V)),I.push(U-O)}function S(L,I,O,F,U=0,V){if(p){let A=[et.contextHash,p];V=V?[A].concat(V):[A]}if(U>25){let A=[et.lookAhead,U];V=V?[A].concat(V):[A]}return new xi(L,I,O,F,V)}function M(L,I){let O=l.fork(),F=0,U=0,V=0,A=O.end-r,Q={size:0,start:0,skip:0};e:for(let H=O.pos-L;O.pos>H;){let re=O.size;if(O.id==I&&re>=0){Q.size=F,Q.start=U,Q.skip=V,V+=4,F+=4,O.next();continue}let le=O.pos-re;if(re<0||le<H||O.start<A)break;let q=O.id>=a?4:0,Z=O.start;for(O.next();O.pos>le;){if(O.size<0)if(O.size==-3)q+=4;else break e;else O.id>=a&&(q+=4);O.next()}U=Z,F+=re,V+=q}return(I<0||F==L)&&(Q.size=F,Q.start=U,Q.skip=V),Q.size>4?Q:void 0}function b(L,I,O){let{id:F,start:U,end:V,size:A}=l;if(l.next(),A>=0&&F<a){let Q=O;if(A>4){let H=l.pos-(A-4);for(;l.pos>H;)O=b(L,I,O)}I[--O]=Q,I[--O]=V-L,I[--O]=U-L,I[--O]=F}else A==-3?p=F:A==-4&&(d=F);return O}let w=[],E=[];for(;l.pos>0;)m(t.start||0,t.bufferStart||0,w,E,-1);let B=(e=t.length)!==null&&e!==void 0?e:w.length?E[0]+w[0].length:0;return new xi(h[t.topID],w.reverse(),E.reverse(),B)}const j_=new WeakMap;function Ec(t,e){if(!t.isAnonymous||e instanceof go||e.type!=t)return 1;let i=j_.get(e);if(i==null){i=1;for(let n of e.children){if(n.type!=t||!(n instanceof xi)){i=1;break}i+=Ec(t,n)}j_.set(e,i)}return i}function E0(t,e,i,n,r,s,a,l,h){let p=0;for(let S=n;S<r;S++)p+=Ec(t,e[S]);let d=Math.ceil(p*1.5/8),m=[],y=[];function v(S,M,b,w,E){for(let B=b;B<w;){let L=B,I=M[B],O=Ec(t,S[B]);for(B++;B<w;B++){let F=Ec(t,S[B]);if(O+F>=d)break;O+=F}if(B==L+1){if(O>d){let F=S[L];v(F.children,F.positions,0,F.children.length,M[L]+E);continue}m.push(S[L])}else{let F=M[B-1]+S[B-1].length-I;m.push(E0(t,S,M,L,B,I,F,null,h))}y.push(I+E-s)}}return v(e,i,n,r,0),(l||h)(m,y,a)}class ro{constructor(e,i,n,r,s=!1,a=!1){this.from=e,this.to=i,this.tree=n,this.offset=r,this.open=(s?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,i=[],n=!1){let r=[new ro(0,e.length,e,0,!1,n)];for(let s of i)s.to>e.length&&r.push(s);return r}static applyChanges(e,i,n=128){if(!i.length)return e;let r=[],s=1,a=e.length?e[0]:null;for(let l=0,h=0,p=0;;l++){let d=l<i.length?i[l]:null,m=d?d.fromA:1e9;if(m-h>=n)for(;a&&a.from<m;){let y=a;if(h>=y.from||m<=y.to||p){let v=Math.max(y.from,h)-p,S=Math.min(y.to,m)-p;y=v>=S?null:new ro(v,S,y.tree,y.offset+p,l>0,!!d)}if(y&&r.push(y),a.to>m)break;a=s<e.length?e[s++]:null}if(!d)break;h=d.toA,p=d.toA-d.toB}return r}}let IN=class{startParse(e,i,n){return typeof e=="string"&&(e=new NN(e)),n=n?n.length?n.map(r=>new dd(r.from,r.to)):[new dd(0,0)]:[new dd(0,e.length)],this.createParse(e,i||[],n)}parse(e,i,n){let r=this.startParse(e,i,n);for(;;){let s=r.advance();if(s)return s}}};class NN{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,i){return this.string.slice(e,i)}}new et({perNode:!0});let DN=0;class nr{constructor(e,i,n){this.set=e,this.base=i,this.modified=n,this.id=DN++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let i=new nr([],null,[]);if(i.set.push(i),e)for(let n of e.set)i.set.push(n);return i}static defineModifier(){let e=new Qc;return i=>i.modified.indexOf(e)>-1?i:Qc.get(i.base||i,i.modified.concat(e).sort((n,r)=>n.id-r.id))}}let BN=0;class Qc{constructor(){this.instances=[],this.id=BN++}static get(e,i){if(!i.length)return e;let n=i[0].instances.find(l=>l.base==e&&UN(i,l.modified));if(n)return n;let r=[],s=new nr(r,e,i);for(let l of i)l.instances.push(s);let a=JN(i);for(let l of e.set)if(!l.modified.length)for(let h of a)r.push(Qc.get(l,h));return s}}function UN(t,e){return t.length==e.length&&t.every((i,n)=>i==e[n])}function JN(t){let e=[[]];for(let i=0;i<t.length;i++)for(let n=0,r=e.length;n<r;n++)e.push(e[n].concat(t[i]));return e.sort((i,n)=>n.length-i.length)}function PN(t){let e=Object.create(null);for(let i in t){let n=t[i];Array.isArray(n)||(n=[n]);for(let r of i.split(" "))if(r){let s=[],a=2,l=r;for(let m=0;;){if(l=="..."&&m>0&&m+3==r.length){a=1;break}let y=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!y)throw new RangeError("Invalid path: "+r);if(s.push(y[0]=="*"?"":y[0][0]=='"'?JSON.parse(y[0]):y[0]),m+=y[0].length,m==r.length)break;let v=r[m++];if(m==r.length&&v=="!"){a=0;break}if(v!="/")throw new RangeError("Invalid path: "+r);l=r.slice(m)}let h=s.length-1,p=s[h];if(!p)throw new RangeError("Invalid path: "+r);let d=new Yc(n,a,h>0?s.slice(0,h):null);e[p]=d.sort(e[p])}}return jC.add(e)}const jC=new et;class Yc{constructor(e,i,n,r){this.tags=e,this.mode=i,this.context=n,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Yc.empty=new Yc([],2,null);function WC(t,e){let i=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))i[s.tag.id]=s.class;else for(let a of s.tag)i[a.id]=s.class;let{scope:n,all:r=null}=e||{};return{style:s=>{let a=r;for(let l of s)for(let h of l.set){let p=i[h.id];if(p){a=a?a+" "+p:p;break}}return a},scope:n}}function FN(t,e){let i=null;for(let n of t){let r=n.style(e);r&&(i=i?i+" "+r:r)}return i}function jN(t,e,i,n=0,r=t.length){let s=new WN(n,Array.isArray(e)?e:[e],i);s.highlightRange(t.cursor(),n,r,"",s.highlighters),s.flush(r)}class WN{constructor(e,i,n){this.at=e,this.highlighters=i,this.span=n,this.class=""}startSpan(e,i){i!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=i)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,i,n,r,s){let{type:a,from:l,to:h}=e;if(l>=n||h<=i)return;a.isTop&&(s=this.highlighters.filter(v=>!v.scope||v.scope(a)));let p=r,d=GN(e)||Yc.empty,m=FN(s,d.tags);if(m&&(p&&(p+=" "),p+=m,d.mode==1&&(r+=(r?" ":"")+m)),this.startSpan(Math.max(i,l),p),d.opaque)return;let y=e.tree&&e.tree.prop(et.mounted);if(y&&y.overlay){let v=e.node.enter(y.overlay[0].from+l,1),S=this.highlighters.filter(b=>!b.scope||b.scope(y.tree.type)),M=e.firstChild();for(let b=0,w=l;;b++){let E=b<y.overlay.length?y.overlay[b]:null,B=E?E.from+l:h,L=Math.max(i,w),I=Math.min(n,B);if(L<I&&M)for(;e.from<I&&(this.highlightRange(e,L,I,r,s),this.startSpan(Math.min(I,e.to),p),!(e.to>=B||!e.nextSibling())););if(!E||B>n)break;w=E.to+l,w>i&&(this.highlightRange(v.cursor(),Math.max(i,E.from+l),Math.min(n,w),"",S),this.startSpan(Math.min(n,w),p))}M&&e.parent()}else if(e.firstChild()){y&&(r="");do if(!(e.to<=i)){if(e.from>=n)break;this.highlightRange(e,i,n,r,s),this.startSpan(Math.min(n,e.to),p)}while(e.nextSibling());e.parent()}}}function GN(t){let e=t.type.prop(jC);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Me=nr.define,Kh=Me(),is=Me(),W_=Me(is),G_=Me(is),ns=Me(),zh=Me(ns),gd=Me(ns),ir=Me(),Ys=Me(ir),qn=Me(),Xn=Me(),fm=Me(),Il=Me(fm),Hh=Me(),he={comment:Kh,lineComment:Me(Kh),blockComment:Me(Kh),docComment:Me(Kh),name:is,variableName:Me(is),typeName:W_,tagName:Me(W_),propertyName:G_,attributeName:Me(G_),className:Me(is),labelName:Me(is),namespace:Me(is),macroName:Me(is),literal:ns,string:zh,docString:Me(zh),character:Me(zh),attributeValue:Me(zh),number:gd,integer:Me(gd),float:Me(gd),bool:Me(ns),regexp:Me(ns),escape:Me(ns),color:Me(ns),url:Me(ns),keyword:qn,self:Me(qn),null:Me(qn),atom:Me(qn),unit:Me(qn),modifier:Me(qn),operatorKeyword:Me(qn),controlKeyword:Me(qn),definitionKeyword:Me(qn),moduleKeyword:Me(qn),operator:Xn,derefOperator:Me(Xn),arithmeticOperator:Me(Xn),logicOperator:Me(Xn),bitwiseOperator:Me(Xn),compareOperator:Me(Xn),updateOperator:Me(Xn),definitionOperator:Me(Xn),typeOperator:Me(Xn),controlOperator:Me(Xn),punctuation:fm,separator:Me(fm),bracket:Il,angleBracket:Me(Il),squareBracket:Me(Il),paren:Me(Il),brace:Me(Il),content:ir,heading:Ys,heading1:Me(Ys),heading2:Me(Ys),heading3:Me(Ys),heading4:Me(Ys),heading5:Me(Ys),heading6:Me(Ys),contentSeparator:Me(ir),list:Me(ir),quote:Me(ir),emphasis:Me(ir),strong:Me(ir),link:Me(ir),monospace:Me(ir),strikethrough:Me(ir),inserted:Me(),deleted:Me(),changed:Me(),invalid:Me(),meta:Hh,documentMeta:Me(Hh),annotation:Me(Hh),processingInstruction:Me(Hh),definition:nr.defineModifier(),constant:nr.defineModifier(),function:nr.defineModifier(),standard:nr.defineModifier(),local:nr.defineModifier(),special:nr.defineModifier()};WC([{tag:he.link,class:"tok-link"},{tag:he.heading,class:"tok-heading"},{tag:he.emphasis,class:"tok-emphasis"},{tag:he.strong,class:"tok-strong"},{tag:he.keyword,class:"tok-keyword"},{tag:he.atom,class:"tok-atom"},{tag:he.bool,class:"tok-bool"},{tag:he.url,class:"tok-url"},{tag:he.labelName,class:"tok-labelName"},{tag:he.inserted,class:"tok-inserted"},{tag:he.deleted,class:"tok-deleted"},{tag:he.literal,class:"tok-literal"},{tag:he.string,class:"tok-string"},{tag:he.number,class:"tok-number"},{tag:[he.regexp,he.escape,he.special(he.string)],class:"tok-string2"},{tag:he.variableName,class:"tok-variableName"},{tag:he.local(he.variableName),class:"tok-variableName tok-local"},{tag:he.definition(he.variableName),class:"tok-variableName tok-definition"},{tag:he.special(he.variableName),class:"tok-variableName2"},{tag:he.definition(he.propertyName),class:"tok-propertyName tok-definition"},{tag:he.typeName,class:"tok-typeName"},{tag:he.namespace,class:"tok-namespace"},{tag:he.className,class:"tok-className"},{tag:he.macroName,class:"tok-macroName"},{tag:he.propertyName,class:"tok-propertyName"},{tag:he.operator,class:"tok-operator"},{tag:he.comment,class:"tok-comment"},{tag:he.meta,class:"tok-meta"},{tag:he.invalid,class:"tok-invalid"},{tag:he.punctuation,class:"tok-punctuation"}]);var md;const Zl=new et,VN=new et;class lr{constructor(e,i,n=[],r=""){this.data=e,this.name=r,lt.prototype.hasOwnProperty("tree")||Object.defineProperty(lt.prototype,"tree",{get(){return Yi(this)}}),this.parser=i,this.extension=[ba.of(this),lt.languageData.of((s,a,l)=>{let h=V_(s,a,l),p=h.type.prop(Zl);if(!p)return[];let d=s.facet(p),m=h.type.prop(VN);if(m){let y=h.resolve(a-h.from,l);for(let v of m)if(v.test(y,s)){let S=s.facet(v.facet);return v.type=="replace"?S:S.concat(d)}}return d})].concat(n)}isActiveAt(e,i,n=-1){return V_(e,i,n).type.prop(Zl)==this.data}findRegions(e){let i=e.facet(ba);if((i==null?void 0:i.data)==this.data)return[{from:0,to:e.doc.length}];if(!i||!i.allowsNesting)return[];let n=[],r=(s,a)=>{if(s.prop(Zl)==this.data){n.push({from:a,to:a+s.length});return}let l=s.prop(et.mounted);if(l){if(l.tree.prop(Zl)==this.data){if(l.overlay)for(let h of l.overlay)n.push({from:h.from+a,to:h.to+a});else n.push({from:a,to:a+s.length});return}else if(l.overlay){let h=n.length;if(r(l.tree,l.overlay[0].from+a),n.length>h)return}}for(let h=0;h<s.children.length;h++){let p=s.children[h];p instanceof xi&&r(p,s.positions[h]+a)}};return r(Yi(e),0),n}get allowsNesting(){return!0}}lr.setState=ze.define();function V_(t,e,i){let n=t.facet(ba),r=Yi(t).topNode;if(!n||n.allowsNesting)for(let s=r;s;s=s.enter(e,i,ui.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Yi(t){let e=t.field(lr.state,!1);return e?e.tree:xi.empty}class KN{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,i){let n=this.cursorPos-this.string.length;return e<n||i>=this.cursorPos?this.doc.sliceString(e,i):this.string.slice(e-n,i-n)}}let Nl=null;class $c{constructor(e,i,n=[],r,s,a,l,h){this.parser=e,this.state=i,this.fragments=n,this.tree=r,this.treeLen=s,this.viewport=a,this.skipped=l,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,i,n){return new $c(e,i,[],xi.empty,0,n,[],null)}startParse(){return this.parser.startParse(new KN(this.state.doc),this.fragments)}work(e,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=xi.empty&&this.isDone(i??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(ro.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(i??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,i;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=e,this.tree=i,this.fragments=this.withoutTempSkipped(ro.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let i=Nl;Nl=this;try{return e()}finally{Nl=i}}withoutTempSkipped(e){for(let i;i=this.tempSkipped.pop();)e=K_(e,i.from,i.to);return e}changes(e,i){let{fragments:n,tree:r,treeLen:s,viewport:a,skipped:l}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((p,d,m,y)=>h.push({fromA:p,toA:d,fromB:m,toB:y})),n=ro.applyChanges(n,h),r=xi.empty,s=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){l=[];for(let p of this.skipped){let d=e.mapPos(p.from,1),m=e.mapPos(p.to,-1);d<m&&l.push({from:d,to:m})}}}return new $c(this.parser,i,n,r,s,a,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let i=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:s}=this.skipped[n];r<e.to&&s>e.from&&(this.fragments=K_(this.fragments,r,s),this.skipped.splice(n--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,i){this.skipped.push({from:e,to:i})}static getSkippingParser(e){return new class extends IN{createParse(i,n,r){let s=r[0].from,a=r[r.length-1].to;return{parsedPos:s,advance(){let h=Nl;if(h){for(let p of r)h.tempSkipped.push(p);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new xi(bn.none,[],[],a-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let i=this.fragments;return this.treeLen>=e&&i.length&&i[0].from==0&&i[0].to>=e}static get(){return Nl}}function K_(t,e,i){return ro.applyChanges(t,[{fromA:e,toA:i,fromB:e,toB:i}])}class _a{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,n)||i.takeTree(),new _a(i)}static init(e){let i=Math.min(3e3,e.doc.length),n=$c.create(e.facet(ba).parser,e,{from:0,to:i});return n.work(20,i)||n.takeTree(),new _a(n)}}lr.state=ci.define({create:_a.init,update(t,e){for(let i of e.effects)if(i.is(lr.setState))return i.value;return e.startState.facet(ba)!=e.state.facet(ba)?_a.init(e.state):t.apply(e)}});let GC=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(GC=t=>{let e=-1,i=setTimeout(()=>{e=requestIdleCallback(t,{timeout:500-100})},100);return()=>e<0?clearTimeout(i):cancelIdleCallback(e)});const yd=typeof navigator<"u"&&(!((md=navigator.scheduling)===null||md===void 0)&&md.isInputPending)?()=>navigator.scheduling.isInputPending():null,zN=Si.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let i=this.view.state.field(lr.state).context;(i.updateViewport(e.view.viewport)||this.view.viewport.to>i.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(i)}scheduleWork(){if(this.working)return;let{state:e}=this.view,i=e.field(lr.state);(i.tree!=i.context.tree||!i.context.isDone(e.doc.length))&&(this.working=GC(this.work))}work(e){this.working=null;let i=Date.now();if(this.chunkEnd<i&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=i+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,s=n.field(lr.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!yd?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&n.doc.length>r+1e3,h=s.context.work(()=>yd&&yd()||Date.now()>a,r+(l?0:1e5));this.chunkBudget-=Date.now()-i,(h||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:lr.setState.of(new _a(s.context))})),this.chunkBudget>0&&!(h&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(i=>vn(this.view.state,i)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ba=Oe.define({combine(t){return t.length?t[0]:null},enables:t=>[lr.state,zN,Te.contentAttributes.compute([t],e=>{let i=e.facet(t);return i&&i.name?{"data-language":i.name}:{}})]}),HN=Oe.define(),A0=Oe.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(i=>i!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Zc(t){let e=t.facet(A0);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function wu(t,e){let i="",n=t.tabSize,r=t.facet(A0)[0];if(r=="	"){for(;e>=n;)i+="	",e-=n;r=" "}for(let s=0;s<e;s++)i+=r;return i}function R0(t,e){t instanceof lt&&(t=new If(t));for(let n of t.state.facet(HN)){let r=n(t,e);if(r!==void 0)return r}let i=Yi(t.state);return i.length>=e?YN(t,i,e):null}class If{constructor(e,i={}){this.state=e,this.options=i,this.unit=Zc(e)}lineAt(e,i=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=n.from&&r<=n.to?s&&r==e?{text:"",from:e}:(i<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,i=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,i);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,i=1){let{text:n,from:r}=this.lineAt(e,i),s=this.countColumn(n,e-r),a=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return a>-1&&(s+=a-this.countColumn(n,n.search(/\S|$/))),s}countColumn(e,i=e.length){return La(e,this.state.tabSize,i)}lineIndent(e,i=1){let{text:n,from:r}=this.lineAt(e,i),s=this.options.overrideIndentation;if(s){let a=s(r);if(a>-1)return a}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const QN=new et;function YN(t,e,i){return VC(e.resolveInner(i).enterUnfinishedNodesBefore(i),i,t)}function $N(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function ZN(t){let e=t.type.prop(QN);if(e)return e;let i=t.firstChild,n;if(i&&(n=i.type.prop(et.closedBy))){let r=t.lastChild,s=r&&n.indexOf(r.name)>-1;return a=>tD(a,!0,1,void 0,s&&!$N(a)?r.from:void 0)}return t.parent==null?qN:null}function VC(t,e,i){for(;t;t=t.parent){let n=ZN(t);if(n)return n(L0.create(i,e,t))}return null}function qN(){return 0}class L0 extends If{constructor(e,i,n){super(e.state,e.options),this.base=e,this.pos=i,this.node=n}static create(e,i,n){return new L0(e,i,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let i=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(i.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(XN(n,e))break;i=this.state.doc.lineAt(n.from)}return this.lineIndent(i.from)}continue(){let e=this.node.parent;return e?VC(e,this.pos,this.base):0}}function XN(t,e){for(let i=e;i;i=i.parent)if(t==i)return!0;return!1}function eD(t){let e=t.node,i=e.childAfter(e.from),n=e.lastChild;if(!i)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(i.from),a=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=i.to;;){let h=e.childAfter(l);if(!h||h==n)return null;if(!h.type.isSkipped)return h.from<a?i:null;l=h.to}}function tD(t,e,i,n,r){let s=t.textAfter,a=s.match(/^\s*/)[0].length,l=n&&s.slice(a,a+n.length)==n||r==t.pos+a,h=e?eD(t):null;return h?l?t.column(h.from):t.column(h.to):t.baseIndent+(l?0:t.unit*i)}const iD=200;function nD(){return lt.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let i=t.newDoc,{head:n}=t.newSelection.main,r=i.lineAt(n);if(n>r.from+iD)return t;let s=i.sliceString(r.from,n);if(!e.some(p=>p.test(s)))return t;let{state:a}=t,l=-1,h=[];for(let{head:p}of a.selection.ranges){let d=a.doc.lineAt(p);if(d.from==l)continue;l=d.from;let m=R0(a,d.from);if(m==null)continue;let y=/^\s*/.exec(d.text)[0],v=wu(a,m);y!=v&&h.push({from:d.from,to:d.from+y.length,insert:v})}return h.length?[t,{changes:h,sequential:!0}]:t})}const rD=Oe.define(),sD=new et;function oD(t,e,i){let n=Yi(t);if(n.length<i)return null;let r=n.resolveInner(i,1),s=null;for(let a=r;a;a=a.parent){if(a.to<=i||a.from>i)continue;if(s&&a.from<e)break;let l=a.type.prop(sD);if(l&&(a.to<n.length-50||n.length==t.doc.length||!aD(a))){let h=l(a,t);h&&h.from<=i&&h.from>=e&&h.to>i&&(s=h)}}return s}function aD(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function KC(t,e,i){for(let n of t.facet(rD)){let r=n(t,e,i);if(r)return r}return oD(t,e,i)}function zC(t,e){let i=e.mapPos(t.from,1),n=e.mapPos(t.to,-1);return i>=n?void 0:{from:i,to:n}}const O0=ze.define({map:zC}),Nf=ze.define({map:zC});function HC(t){let e=[];for(let{head:i}of t.state.selection.ranges)e.some(n=>n.from<=i&&n.to>=i)||e.push(t.lineBlockAt(i));return e}const Du=ci.define({create(){return Ve.none},update(t,e){t=t.map(e.changes);for(let i of e.effects)if(i.is(O0)&&!lD(t,i.value.from,i.value.to)){let{preparePlaceholder:n}=e.state.facet(I0),r=n?Ve.replace({widget:new mD(n(e.state,i.value))}):z_;t=t.update({add:[r.range(i.value.from,i.value.to)]})}else i.is(Nf)&&(t=t.update({filter:(n,r)=>i.value.from!=n||i.value.to!=r,filterFrom:i.value.from,filterTo:i.value.to}));if(e.selection){let i=!1,{head:n}=e.selection.main;t.between(n,n,(r,s)=>{r<n&&s>n&&(i=!0)}),i&&(t=t.update({filterFrom:n,filterTo:n,filter:(r,s)=>s<=n||r>=n}))}return t},provide:t=>Te.decorations.from(t),toJSON(t,e){let i=[];return t.between(0,e.doc.length,(n,r)=>{i.push(n,r)}),i},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let i=0;i<t.length;){let n=t[i++],r=t[i++];if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(z_.range(n,r))}return Ve.set(e,!0)}});function QC(t,e,i){var n;let r=null;return(n=t.field(Du,!1))===null||n===void 0||n.between(e,i,(s,a)=>{(!r||r.from>s)&&(r={from:s,to:a})}),r}function lD(t,e,i){let n=!1;return t.between(e,e,(r,s)=>{r==e&&s==i&&(n=!0)}),n}function YC(t,e){return t.field(Du,!1)?e:e.concat(ze.appendConfig.of(gD()))}const uD=t=>{for(let e of HC(t)){let i=KC(t.state,e.from,e.to);if(i)return t.dispatch({effects:YC(t.state,[O0.of(i),$C(t,i)])}),!0}return!1},hD=t=>{if(!t.state.field(Du,!1))return!1;let e=[];for(let i of HC(t)){let n=QC(t.state,i.from,i.to);n&&e.push(Nf.of(n),$C(t,n,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function $C(t,e,i=!0){let n=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Te.announce.of(`${t.state.phrase(i?"Folded lines":"Unfolded lines")} ${n} ${t.state.phrase("to")} ${r}.`)}const cD=t=>{let{state:e}=t,i=[];for(let n=0;n<e.doc.length;){let r=t.lineBlockAt(n),s=KC(e,r.from,r.to);s&&i.push(O0.of(s)),n=(s?t.lineBlockAt(s.to):r).to+1}return i.length&&t.dispatch({effects:YC(t.state,i)}),!!i.length},fD=t=>{let e=t.state.field(Du,!1);if(!e||!e.size)return!1;let i=[];return e.between(0,t.state.doc.length,(n,r)=>{i.push(Nf.of({from:n,to:r}))}),t.dispatch({effects:i}),!0},pD=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:uD},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:hD},{key:"Ctrl-Alt-[",run:cD},{key:"Ctrl-Alt-]",run:fD}],dD={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},I0=Oe.define({combine(t){return Dr(t,dD)}});function gD(t){let e=[Du,yD];return t&&e.push(I0.of(t)),e}function ZC(t,e){let{state:i}=t,n=i.facet(I0),r=a=>{let l=t.lineBlockAt(t.posAtDOM(a.target)),h=QC(t.state,l.from,l.to);h&&t.dispatch({effects:Nf.of(h)}),a.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=n.placeholderText,s.setAttribute("aria-label",i.phrase("folded code")),s.title=i.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const z_=Ve.replace({widget:new class extends ks{toDOM(t){return ZC(t,null)}}});class mD extends ks{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return ZC(e,this.value)}}const yD=Te.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Oa{constructor(e,i){this.specs=e;let n;function r(l){let h=_s.newName();return(n||(n=Object.create(null)))["."+h]=l,h}const s=typeof i.all=="string"?i.all:i.all?r(i.all):void 0,a=i.scope;this.scope=a instanceof lr?l=>l.prop(Zl)==a.data:a?l=>l==a:void 0,this.style=WC(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=n?new _s(n):null,this.themeType=i.themeType}static define(e,i){return new Oa(e,i||{})}}const pm=Oe.define(),qC=Oe.define({combine(t){return t.length?[t[0]]:null}});function vd(t){let e=t.facet(pm);return e.length?e:t.facet(qC)}function qc(t,e){let i=[wD],n;return t instanceof Oa&&(t.module&&i.push(Te.styleModule.of(t.module)),n=t.themeType),e!=null&&e.fallback?i.push(qC.of(t)):n?i.push(pm.computeN([Te.darkTheme],r=>r.facet(Te.darkTheme)==(n=="dark")?[t]:[])):i.push(pm.of(t)),i}class vD{constructor(e){this.markCache=Object.create(null),this.tree=Yi(e.state),this.decorations=this.buildDeco(e,vd(e.state))}update(e){let i=Yi(e.state),n=vd(e.state),r=n!=vd(e.startState);i.length<e.view.viewport.to&&!r&&i.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(i!=this.tree||e.viewportChanged||r)&&(this.tree=i,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,i){if(!i||!this.tree.length)return Ve.none;let n=new ho;for(let{from:r,to:s}of e.visibleRanges)jN(this.tree,i,(a,l,h)=>{n.add(a,l,this.markCache[h]||(this.markCache[h]=Ve.mark({class:h})))},r,s);return n.finish()}}const wD=Ra.high(Si.fromClass(vD,{decorations:t=>t.decorations})),_D=Oa.define([{tag:he.meta,color:"#404740"},{tag:he.link,textDecoration:"underline"},{tag:he.heading,textDecoration:"underline",fontWeight:"bold"},{tag:he.emphasis,fontStyle:"italic"},{tag:he.strong,fontWeight:"bold"},{tag:he.strikethrough,textDecoration:"line-through"},{tag:he.keyword,color:"#708"},{tag:[he.atom,he.bool,he.url,he.contentSeparator,he.labelName],color:"#219"},{tag:[he.literal,he.inserted],color:"#164"},{tag:[he.string,he.deleted],color:"#a11"},{tag:[he.regexp,he.escape,he.special(he.string)],color:"#e40"},{tag:he.definition(he.variableName),color:"#00f"},{tag:he.local(he.variableName),color:"#30a"},{tag:[he.typeName,he.namespace],color:"#085"},{tag:he.className,color:"#167"},{tag:[he.special(he.variableName),he.macroName],color:"#256"},{tag:he.definition(he.propertyName),color:"#00c"},{tag:he.comment,color:"#940"},{tag:he.invalid,color:"#f00"}]),bD=Te.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),XC=1e4,eM="()[]{}",tM=Oe.define({combine(t){return Dr(t,{afterCursor:!0,brackets:eM,maxScanDistance:XC,renderMatch:CD})}}),xD=Ve.mark({class:"cm-matchingBracket"}),SD=Ve.mark({class:"cm-nonmatchingBracket"});function CD(t){let e=[],i=t.matched?xD:SD;return e.push(i.range(t.start.from,t.start.to)),t.end&&e.push(i.range(t.end.from,t.end.to)),e}const MD=ci.define({create(){return Ve.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let i=[],n=e.state.facet(tM);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=ur(e.state,r.head,-1,n)||r.head>0&&ur(e.state,r.head-1,1,n)||n.afterCursor&&(ur(e.state,r.head,1,n)||r.head<e.state.doc.length&&ur(e.state,r.head+1,-1,n));s&&(i=i.concat(n.renderMatch(s,e.state)))}return Ve.set(i,!0)},provide:t=>Te.decorations.from(t)}),kD=[MD,bD];function TD(t={}){return[tM.of(t),kD]}const ED=new et;function dm(t,e,i){let n=t.prop(e<0?et.openedBy:et.closedBy);if(n)return n;if(t.name.length==1){let r=i.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[i[r+e]]}return null}function gm(t){let e=t.type.prop(ED);return e?e(t.node):t}function ur(t,e,i,n={}){let r=n.maxScanDistance||XC,s=n.brackets||eM,a=Yi(t),l=a.resolveInner(e,i);for(let h=l;h;h=h.parent){let p=dm(h.type,i,s);if(p&&h.from<h.to){let d=gm(h);if(d&&(i>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return AD(t,e,i,h,d,p,s)}}return RD(t,e,i,a,l.type,r,s)}function AD(t,e,i,n,r,s,a){let l=n.parent,h={from:r.from,to:r.to},p=0,d=l==null?void 0:l.cursor();if(d&&(i<0?d.childBefore(n.from):d.childAfter(n.to)))do if(i<0?d.to<=n.from:d.from>=n.to){if(p==0&&s.indexOf(d.type.name)>-1&&d.from<d.to){let m=gm(d);return{start:h,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(dm(d.type,i,a))p++;else if(dm(d.type,-i,a)){if(p==0){let m=gm(d);return{start:h,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}p--}}while(i<0?d.prevSibling():d.nextSibling());return{start:h,matched:!1}}function RD(t,e,i,n,r,s,a){let l=i<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),h=a.indexOf(l);if(h<0||h%2==0!=i>0)return null;let p={from:i<0?e-1:e,to:i>0?e+1:e},d=t.doc.iterRange(e,i>0?t.doc.length:0),m=0;for(let y=0;!d.next().done&&y<=s;){let v=d.value;i<0&&(y+=v.length);let S=e+y*i;for(let M=i>0?0:v.length-1,b=i>0?v.length:-1;M!=b;M+=i){let w=a.indexOf(v[M]);if(!(w<0||n.resolveInner(S+M,1).type!=r))if(w%2==0==i>0)m++;else{if(m==1)return{start:p,end:{from:S+M,to:S+M+1},matched:w>>1==h>>1};m--}}i>0&&(y+=v.length)}return d.done?{start:p,matched:!1}:null}const LD=Object.create(null),H_=[bn.none],Q_=[],OD=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])OD[t]=ID(LD,e);function wd(t,e){Q_.indexOf(t)>-1||(Q_.push(t),console.warn(e))}function ID(t,e){let i=null;for(let s of e.split(".")){let a=t[s]||he[s];a?typeof a=="function"?i?i=a(i):wd(s,`Modifier ${s} used at start of tag`):i?wd(s,`Tag ${s} used as modifier`):i=a:wd(s,`Unknown highlighting tag ${s}`)}if(!i)return 0;let n=e.replace(/ /g,"_"),r=bn.define({id:H_.length,name:n,props:[PN({[n]:i})]});return H_.push(r),r.id}const ND=t=>{let{state:e}=t,i=e.doc.lineAt(e.selection.main.from),n=D0(t.state,i.from);return n.line?DD(t):n.block?UD(t):!1};function N0(t,e){return({state:i,dispatch:n})=>{if(i.readOnly)return!1;let r=t(e,i);return r?(n(i.update(r)),!0):!1}}const DD=N0(FD,0),BD=N0(iM,0),UD=N0((t,e)=>iM(t,e,PD(e)),0);function D0(t,e){let i=t.languageDataAt("commentTokens",e);return i.length?i[0]:{}}const Dl=50;function JD(t,{open:e,close:i},n,r){let s=t.sliceDoc(n-Dl,n),a=t.sliceDoc(r,r+Dl),l=/\s*$/.exec(s)[0].length,h=/^\s*/.exec(a)[0].length,p=s.length-l;if(s.slice(p-e.length,p)==e&&a.slice(h,h+i.length)==i)return{open:{pos:n-l,margin:l&&1},close:{pos:r+h,margin:h&&1}};let d,m;r-n<=2*Dl?d=m=t.sliceDoc(n,r):(d=t.sliceDoc(n,n+Dl),m=t.sliceDoc(r-Dl,r));let y=/^\s*/.exec(d)[0].length,v=/\s*$/.exec(m)[0].length,S=m.length-v-i.length;return d.slice(y,y+e.length)==e&&m.slice(S,S+i.length)==i?{open:{pos:n+y+e.length,margin:/\s/.test(d.charAt(y+e.length))?1:0},close:{pos:r-v-i.length,margin:/\s/.test(m.charAt(S-1))?1:0}}:null}function PD(t){let e=[];for(let i of t.selection.ranges){let n=t.doc.lineAt(i.from),r=i.to<=n.to?n:t.doc.lineAt(i.to),s=e.length-1;s>=0&&e[s].to>n.from?e[s].to=r.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:r.to})}return e}function iM(t,e,i=e.selection.ranges){let n=i.map(s=>D0(e,s.from).block);if(!n.every(s=>s))return null;let r=i.map((s,a)=>JD(e,n[a],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(i.map((s,a)=>r[a]?[]:[{from:s.from,insert:n[a].open+" "},{from:s.to,insert:" "+n[a].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let a=0,l;a<r.length;a++)if(l=r[a]){let h=n[a],{open:p,close:d}=l;s.push({from:p.pos-h.open.length,to:p.pos+p.margin},{from:d.pos-d.margin,to:d.pos+h.close.length})}return{changes:s}}return null}function FD(t,e,i=e.selection.ranges){let n=[],r=-1;for(let{from:s,to:a}of i){let l=n.length,h=1e9,p=D0(e,s).line;if(p){for(let d=s;d<=a;){let m=e.doc.lineAt(d);if(m.from>r&&(s==a||a>m.from)){r=m.from;let y=/^\s*/.exec(m.text)[0].length,v=y==m.length,S=m.text.slice(y,y+p.length)==p?y:-1;y<m.text.length&&y<h&&(h=y),n.push({line:m,comment:S,token:p,indent:y,empty:v,single:!1})}d=m.to+1}if(h<1e9)for(let d=l;d<n.length;d++)n[d].indent<n[d].line.text.length&&(n[d].indent=h);n.length==l+1&&(n[l].single=!0)}}if(t!=2&&n.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:h,indent:p,empty:d,single:m}of n)(m||!d)&&s.push({from:l.from+p,insert:h+" "});let a=e.changes(s);return{changes:a,selection:e.selection.map(a,1)}}else if(t!=1&&n.some(s=>s.comment>=0)){let s=[];for(let{line:a,comment:l,token:h}of n)if(l>=0){let p=a.from+l,d=p+h.length;a.text[d-a.from]==" "&&d++,s.push({from:p,to:d})}return{changes:s}}return null}const mm=Nr.define(),jD=Nr.define(),WD=Oe.define(),nM=Oe.define({combine(t){return Dr(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,i)=>i},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,i)=>(n,r)=>e(n,r)||i(n,r)})}});function GD(t){let e=0;return t.iterChangedRanges((i,n)=>e=n),e}const rM=ci.define({create(){return hr.empty},update(t,e){let i=e.state.facet(nM),n=e.annotation(mm);if(n){let h=e.docChanged?de.single(GD(e.changes)):void 0,p=Ki.fromTransaction(e,h),d=n.side,m=d==0?t.undone:t.done;return p?m=Xc(m,m.length,i.minDepth,p):m=lM(m,e.startState.selection),new hr(d==0?n.rest:m,d==0?m:n.rest)}let r=e.annotation(jD);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(Xt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Ki.fromTransaction(e),a=e.annotation(Xt.time),l=e.annotation(Xt.userEvent);return s?t=t.addChanges(s,a,l,i,e):e.selection&&(t=t.addSelection(e.startState.selection,a,l,i.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new hr(t.done.map(Ki.fromJSON),t.undone.map(Ki.fromJSON))}});function sM(t={}){return[rM,nM.of(t),Te.domEventHandlers({beforeinput(e,i){let n=e.inputType=="historyUndo"?oM:e.inputType=="historyRedo"?ym:null;return n?(e.preventDefault(),n(i)):!1}})]}function Df(t,e){return function({state:i,dispatch:n}){if(!e&&i.readOnly)return!1;let r=i.field(rM,!1);if(!r)return!1;let s=r.pop(t,i,e);return s?(n(s),!0):!1}}const oM=Df(0,!1),ym=Df(1,!1),VD=Df(0,!0),KD=Df(1,!0);class Ki{constructor(e,i,n,r,s){this.changes=e,this.effects=i,this.mapped=n,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Ki(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,i,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Ki(e.changes&&qt.fromJSON(e.changes),[],e.mapped&&dr.fromJSON(e.mapped),e.startSelection&&de.fromJSON(e.startSelection),e.selectionsAfter.map(de.fromJSON))}static fromTransaction(e,i){let n=yn;for(let r of e.startState.facet(WD)){let s=r(e);s.length&&(n=n.concat(s))}return!n.length&&e.changes.empty?null:new Ki(e.changes.invert(e.startState.doc),n,void 0,i||e.startState.selection,yn)}static selection(e){return new Ki(void 0,yn,void 0,void 0,e)}}function Xc(t,e,i,n){let r=e+1>i+20?e-i-1:0,s=t.slice(r,e);return s.push(n),s}function zD(t,e){let i=[],n=!1;return t.iterChangedRanges((r,s)=>i.push(r,s)),e.iterChangedRanges((r,s,a,l)=>{for(let h=0;h<i.length;){let p=i[h++],d=i[h++];l>=p&&a<=d&&(n=!0)}}),n}function HD(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((i,n)=>i.empty!=e.ranges[n].empty).length===0}function aM(t,e){return t.length?e.length?t.concat(e):t:e}const yn=[],QD=200;function lM(t,e){if(t.length){let i=t[t.length-1],n=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-QD));return n.length&&n[n.length-1].eq(e)?t:(n.push(e),Xc(t,t.length-1,1e9,i.setSelAfter(n)))}else return[Ki.selection([e])]}function YD(t){let e=t[t.length-1],i=t.slice();return i[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),i}function _d(t,e){if(!t.length)return t;let i=t.length,n=yn;for(;i;){let r=$D(t[i-1],e,n);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,i);return s[i-1]=r,s}else e=r.mapped,i--,n=r.selectionsAfter}return n.length?[Ki.selection(n)]:yn}function $D(t,e,i){let n=aM(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):yn,i);if(!t.changes)return Ki.selection(n);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),a=t.mapped?t.mapped.composeDesc(s):s;return new Ki(r,ze.mapEffects(t.effects,e),a,t.startSelection.map(s),n)}const ZD=/^(input\.type|delete)($|\.)/;class hr{constructor(e,i,n=0,r=void 0){this.done=e,this.undone=i,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new hr(this.done,this.undone):this}addChanges(e,i,n,r,s){let a=this.done,l=a[a.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!n||ZD.test(n))&&(!l.selectionsAfter.length&&i-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,zD(l.changes,e.changes))||n=="input.type.compose")?a=Xc(a,a.length-1,r.minDepth,new Ki(e.changes.compose(l.changes),aM(e.effects,l.effects),l.mapped,l.startSelection,yn)):a=Xc(a,a.length,r.minDepth,e),new hr(a,yn,i,n)}addSelection(e,i,n,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:yn;return s.length>0&&i-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&HD(s[s.length-1],e)?this:new hr(lM(this.done,e),this.undone,i,n)}addMapping(e){return new hr(_d(this.done,e),_d(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,i,n){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(n&&s.selectionsAfter.length)return i.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:mm.of({side:e,rest:YD(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?yn:r.slice(0,r.length-1);return s.mapped&&(a=_d(a,s.mapped)),i.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:mm.of({side:e,rest:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}hr.empty=new hr(yn,yn);const uM=[{key:"Mod-z",run:oM,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:ym,preventDefault:!0},{linux:"Ctrl-Shift-z",run:ym,preventDefault:!0},{key:"Mod-u",run:VD,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:KD,preventDefault:!0}];function Ia(t,e){return de.create(t.ranges.map(e),t.mainIndex)}function vr(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Wn({state:t,dispatch:e},i){let n=Ia(t.selection,i);return n.eq(t.selection)?!1:(e(vr(t,n)),!0)}function Bf(t,e){return de.cursor(e?t.to:t.from)}function hM(t,e){return Wn(t,i=>i.empty?t.moveByChar(i,e):Bf(i,e))}function Mi(t){return t.textDirectionAt(t.state.selection.main.head)==Ft.LTR}const cM=t=>hM(t,!Mi(t)),fM=t=>hM(t,Mi(t));function pM(t,e){return Wn(t,i=>i.empty?t.moveByGroup(i,e):Bf(i,e))}const qD=t=>pM(t,!Mi(t)),XD=t=>pM(t,Mi(t));function eB(t,e,i){if(e.type.prop(i))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Uf(t,e,i){let n=Yi(t).resolveInner(e.head),r=i?et.closedBy:et.openedBy;for(let h=e.head;;){let p=i?n.childAfter(h):n.childBefore(h);if(!p)break;eB(t,p,r)?n=p:h=i?p.to:p.from}let s=n.type.prop(r),a,l;return s&&(a=i?ur(t,n.from,1):ur(t,n.to,-1))&&a.matched?l=i?a.end.to:a.end.from:l=i?n.to:n.from,de.cursor(l,i?-1:1)}const tB=t=>Wn(t,e=>Uf(t.state,e,!Mi(t))),iB=t=>Wn(t,e=>Uf(t.state,e,Mi(t)));function dM(t,e){return Wn(t,i=>{if(!i.empty)return Bf(i,e);let n=t.moveVertically(i,e);return n.head!=i.head?n:t.moveToLineBoundary(i,e)})}const gM=t=>dM(t,!1),mM=t=>dM(t,!0);function yM(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,i=0,n=0,r;if(e){for(let s of t.state.facet(Te.scrollMargins)){let a=s(t);a!=null&&a.top&&(i=Math.max(a==null?void 0:a.top,i)),a!=null&&a.bottom&&(n=Math.max(a==null?void 0:a.bottom,n))}r=t.scrollDOM.clientHeight-i-n}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:n,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function vM(t,e){let i=yM(t),{state:n}=t,r=Ia(n.selection,a=>a.empty?t.moveVertically(a,e,i.height):Bf(a,e));if(r.eq(n.selection))return!1;let s;if(i.selfScroll){let a=t.coordsAtPos(n.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),h=l.top+i.marginTop,p=l.bottom-i.marginBottom;a&&a.top>h&&a.bottom<p&&(s=Te.scrollIntoView(r.main.head,{y:"start",yMargin:a.top-h}))}return t.dispatch(vr(n,r),{effects:s}),!0}const Y_=t=>vM(t,!1),vm=t=>vM(t,!0);function Ts(t,e,i){let n=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,i);if(r.head==e.head&&r.head!=(i?n.to:n.from)&&(r=t.moveToLineBoundary(e,i,!1)),!i&&r.head==n.from&&n.length){let s=/^\s*/.exec(t.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;s&&e.head!=n.from+s&&(r=de.cursor(n.from+s))}return r}const nB=t=>Wn(t,e=>Ts(t,e,!0)),rB=t=>Wn(t,e=>Ts(t,e,!1)),sB=t=>Wn(t,e=>Ts(t,e,!Mi(t))),oB=t=>Wn(t,e=>Ts(t,e,Mi(t))),aB=t=>Wn(t,e=>de.cursor(t.lineBlockAt(e.head).from,1)),lB=t=>Wn(t,e=>de.cursor(t.lineBlockAt(e.head).to,-1));function uB(t,e,i){let n=!1,r=Ia(t.selection,s=>{let a=ur(t,s.head,-1)||ur(t,s.head,1)||s.head>0&&ur(t,s.head-1,1)||s.head<t.doc.length&&ur(t,s.head+1,-1);if(!a||!a.end)return s;n=!0;let l=a.start.from==s.head?a.end.to:a.end.from;return i?de.range(s.anchor,l):de.cursor(l)});return n?(e(vr(t,r)),!0):!1}const hB=({state:t,dispatch:e})=>uB(t,e,!1);function Sn(t,e){let i=Ia(t.state.selection,n=>{let r=e(n);return de.range(n.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return i.eq(t.state.selection)?!1:(t.dispatch(vr(t.state,i)),!0)}function wM(t,e){return Sn(t,i=>t.moveByChar(i,e))}const _M=t=>wM(t,!Mi(t)),bM=t=>wM(t,Mi(t));function xM(t,e){return Sn(t,i=>t.moveByGroup(i,e))}const cB=t=>xM(t,!Mi(t)),fB=t=>xM(t,Mi(t)),pB=t=>Sn(t,e=>Uf(t.state,e,!Mi(t))),dB=t=>Sn(t,e=>Uf(t.state,e,Mi(t)));function SM(t,e){return Sn(t,i=>t.moveVertically(i,e))}const CM=t=>SM(t,!1),MM=t=>SM(t,!0);function kM(t,e){return Sn(t,i=>t.moveVertically(i,e,yM(t).height))}const $_=t=>kM(t,!1),Z_=t=>kM(t,!0),gB=t=>Sn(t,e=>Ts(t,e,!0)),mB=t=>Sn(t,e=>Ts(t,e,!1)),yB=t=>Sn(t,e=>Ts(t,e,!Mi(t))),vB=t=>Sn(t,e=>Ts(t,e,Mi(t))),wB=t=>Sn(t,e=>de.cursor(t.lineBlockAt(e.head).from)),_B=t=>Sn(t,e=>de.cursor(t.lineBlockAt(e.head).to)),q_=({state:t,dispatch:e})=>(e(vr(t,{anchor:0})),!0),X_=({state:t,dispatch:e})=>(e(vr(t,{anchor:t.doc.length})),!0),eb=({state:t,dispatch:e})=>(e(vr(t,{anchor:t.selection.main.anchor,head:0})),!0),tb=({state:t,dispatch:e})=>(e(vr(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),bB=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),xB=({state:t,dispatch:e})=>{let i=Pf(t).map(({from:n,to:r})=>de.range(n,Math.min(r+1,t.doc.length)));return e(t.update({selection:de.create(i),userEvent:"select"})),!0},SB=({state:t,dispatch:e})=>{let i=Ia(t.selection,n=>{var r;let s=Yi(t).resolveInner(n.head,1);for(;!(s.from<n.from&&s.to>=n.to||s.to>n.to&&s.from<=n.from||!(!((r=s.parent)===null||r===void 0)&&r.parent));)s=s.parent;return de.range(s.to,s.from)});return e(vr(t,i)),!0},CB=({state:t,dispatch:e})=>{let i=t.selection,n=null;return i.ranges.length>1?n=de.create([i.main]):i.main.empty||(n=de.create([de.cursor(i.main.head)])),n?(e(vr(t,n)),!0):!1};function Jf(t,e){if(t.state.readOnly)return!1;let i="delete.selection",{state:n}=t,r=n.changeByRange(s=>{let{from:a,to:l}=s;if(a==l){let h=e(a);h<a?(i="delete.backward",h=Qh(t,h,!1)):h>a&&(i="delete.forward",h=Qh(t,h,!0)),a=Math.min(a,h),l=Math.max(l,h)}else a=Qh(t,a,!1),l=Qh(t,l,!0);return a==l?{range:s}:{changes:{from:a,to:l},range:de.cursor(a)}});return r.changes.empty?!1:(t.dispatch(n.update(r,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?Te.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Qh(t,e,i){if(t instanceof Te)for(let n of t.state.facet(Te.atomicRanges).map(r=>r(t)))n.between(e,e,(r,s)=>{r<e&&s>e&&(e=i?s:r)});return e}const TM=(t,e)=>Jf(t,i=>{let{state:n}=t,r=n.doc.lineAt(i),s,a;if(!e&&i>r.from&&i<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,i-r.from))){if(s[s.length-1]=="	")return i-1;let l=La(s,n.tabSize),h=l%Zc(n)||Zc(n);for(let p=0;p<h&&s[s.length-1-p]==" ";p++)i--;a=i}else a=bi(r.text,i-r.from,e,e)+r.from,a==i&&r.number!=(e?n.doc.lines:1)&&(a+=e?1:-1);return a}),wm=t=>TM(t,!1),EM=t=>TM(t,!0),AM=(t,e)=>Jf(t,i=>{let n=i,{state:r}=t,s=r.doc.lineAt(n),a=r.charCategorizer(n);for(let l=null;;){if(n==(e?s.to:s.from)){n==i&&s.number!=(e?r.doc.lines:1)&&(n+=e?1:-1);break}let h=bi(s.text,n-s.from,e)+s.from,p=s.text.slice(Math.min(n,h)-s.from,Math.max(n,h)-s.from),d=a(p);if(l!=null&&d!=l)break;(p!=" "||n!=i)&&(l=d),n=h}return n}),RM=t=>AM(t,!1),MB=t=>AM(t,!0),LM=t=>Jf(t,e=>{let i=t.lineBlockAt(e).to;return e<i?i:Math.min(t.state.doc.length,e+1)}),kB=t=>Jf(t,e=>{let i=t.lineBlockAt(e).from;return e>i?i:Math.max(0,e-1)}),TB=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=t.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:dt.of(["",""])},range:de.cursor(n.from)}));return e(t.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},EB=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=t.changeByRange(n=>{if(!n.empty||n.from==0||n.from==t.doc.length)return{range:n};let r=n.from,s=t.doc.lineAt(r),a=r==s.from?r-1:bi(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:bi(s.text,r-s.from,!0)+s.from;return{changes:{from:a,to:l,insert:t.doc.slice(r,l).append(t.doc.slice(a,r))},range:de.cursor(l)}});return i.changes.empty?!1:(e(t.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Pf(t){let e=[],i=-1;for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),s=t.doc.lineAt(n.to);if(!n.empty&&n.to==s.from&&(s=t.doc.lineAt(n.to-1)),i>=r.number){let a=e[e.length-1];a.to=s.to,a.ranges.push(n)}else e.push({from:r.from,to:s.to,ranges:[n]});i=s.number+1}return e}function OM(t,e,i){if(t.readOnly)return!1;let n=[],r=[];for(let s of Pf(t)){if(i?s.to==t.doc.length:s.from==0)continue;let a=t.doc.lineAt(i?s.to+1:s.from-1),l=a.length+1;if(i){n.push({from:s.to,to:a.to},{from:s.from,insert:a.text+t.lineBreak});for(let h of s.ranges)r.push(de.range(Math.min(t.doc.length,h.anchor+l),Math.min(t.doc.length,h.head+l)))}else{n.push({from:a.from,to:s.from},{from:s.to,insert:t.lineBreak+a.text});for(let h of s.ranges)r.push(de.range(h.anchor-l,h.head-l))}}return n.length?(e(t.update({changes:n,scrollIntoView:!0,selection:de.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const AB=({state:t,dispatch:e})=>OM(t,e,!1),RB=({state:t,dispatch:e})=>OM(t,e,!0);function IM(t,e,i){if(t.readOnly)return!1;let n=[];for(let r of Pf(t))i?n.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):n.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const LB=({state:t,dispatch:e})=>IM(t,e,!1),OB=({state:t,dispatch:e})=>IM(t,e,!0),IB=t=>{if(t.state.readOnly)return!1;let{state:e}=t,i=e.changes(Pf(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),n=Ia(e.selection,r=>t.moveVertically(r,!0)).map(i);return t.dispatch({changes:i,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function NB(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let i=Yi(t).resolveInner(e),n=i.childBefore(e),r=i.childAfter(e),s;return n&&r&&n.to<=e&&r.from>=e&&(s=n.type.prop(et.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(n.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(n.to,r.from))?{from:n.to,to:r.from}:null}const DB=NM(!1),BB=NM(!0);function NM(t){return({state:e,dispatch:i})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>{let{from:s,to:a}=r,l=e.doc.lineAt(s),h=!t&&s==a&&NB(e,s);t&&(s=a=(a<=l.to?l:e.doc.lineAt(a)).to);let p=new If(e,{simulateBreak:s,simulateDoubleBreak:!!h}),d=R0(p,s);for(d==null&&(d=La(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));a<l.to&&/\s/.test(l.text[a-l.from]);)a++;h?{from:s,to:a}=h:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let m=["",wu(e,d)];return h&&m.push(wu(e,p.lineIndent(l.from,-1))),{changes:{from:s,to:a,insert:dt.of(m)},range:de.cursor(s+1+m[1].length)}});return i(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function B0(t,e){let i=-1;return t.changeByRange(n=>{let r=[];for(let a=n.from;a<=n.to;){let l=t.doc.lineAt(a);l.number>i&&(n.empty||n.to>l.from)&&(e(l,r,n),i=l.number),a=l.to+1}let s=t.changes(r);return{changes:r,range:de.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}})}const UB=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Object.create(null),n=new If(t,{overrideIndentation:s=>{let a=i[s];return a??-1}}),r=B0(t,(s,a,l)=>{let h=R0(n,s.from);if(h==null)return;/\S/.test(s.text)||(h=0);let p=/^\s*/.exec(s.text)[0],d=wu(t,h);(p!=d||l.from<s.from+p.length)&&(i[s.from]=h,a.push({from:s.from,to:s.from+p.length,insert:d}))});return r.changes.empty||e(t.update(r,{userEvent:"indent"})),!0},JB=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(B0(t,(i,n)=>{n.push({from:i.from,insert:t.facet(A0)})}),{userEvent:"input.indent"})),!0),PB=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(B0(t,(i,n)=>{let r=/^\s*/.exec(i.text)[0];if(!r)return;let s=La(r,t.tabSize),a=0,l=wu(t,Math.max(0,s-Zc(t)));for(;a<r.length&&a<l.length&&r.charCodeAt(a)==l.charCodeAt(a);)a++;n.push({from:i.from+a,to:i.from+r.length,insert:l.slice(a)})}),{userEvent:"delete.dedent"})),!0),FB=[{key:"Ctrl-b",run:cM,shift:_M,preventDefault:!0},{key:"Ctrl-f",run:fM,shift:bM},{key:"Ctrl-p",run:gM,shift:CM},{key:"Ctrl-n",run:mM,shift:MM},{key:"Ctrl-a",run:aB,shift:wB},{key:"Ctrl-e",run:lB,shift:_B},{key:"Ctrl-d",run:EM},{key:"Ctrl-h",run:wm},{key:"Ctrl-k",run:LM},{key:"Ctrl-Alt-h",run:RM},{key:"Ctrl-o",run:TB},{key:"Ctrl-t",run:EB},{key:"Ctrl-v",run:vm}],jB=[{key:"ArrowLeft",run:cM,shift:_M,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:qD,shift:cB,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:sB,shift:yB,preventDefault:!0},{key:"ArrowRight",run:fM,shift:bM,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:XD,shift:fB,preventDefault:!0},{mac:"Cmd-ArrowRight",run:oB,shift:vB,preventDefault:!0},{key:"ArrowUp",run:gM,shift:CM,preventDefault:!0},{mac:"Cmd-ArrowUp",run:q_,shift:eb},{mac:"Ctrl-ArrowUp",run:Y_,shift:$_},{key:"ArrowDown",run:mM,shift:MM,preventDefault:!0},{mac:"Cmd-ArrowDown",run:X_,shift:tb},{mac:"Ctrl-ArrowDown",run:vm,shift:Z_},{key:"PageUp",run:Y_,shift:$_},{key:"PageDown",run:vm,shift:Z_},{key:"Home",run:rB,shift:mB,preventDefault:!0},{key:"Mod-Home",run:q_,shift:eb},{key:"End",run:nB,shift:gB,preventDefault:!0},{key:"Mod-End",run:X_,shift:tb},{key:"Enter",run:DB},{key:"Mod-a",run:bB},{key:"Backspace",run:wm,shift:wm},{key:"Delete",run:EM},{key:"Mod-Backspace",mac:"Alt-Backspace",run:RM},{key:"Mod-Delete",mac:"Alt-Delete",run:MB},{mac:"Mod-Backspace",run:kB},{mac:"Mod-Delete",run:LM}].concat(FB.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),DM=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:tB,shift:pB},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:iB,shift:dB},{key:"Alt-ArrowUp",run:AB},{key:"Shift-Alt-ArrowUp",run:LB},{key:"Alt-ArrowDown",run:RB},{key:"Shift-Alt-ArrowDown",run:OB},{key:"Escape",run:CB},{key:"Mod-Enter",run:BB},{key:"Alt-l",mac:"Ctrl-l",run:xB},{key:"Mod-i",run:SB,preventDefault:!0},{key:"Mod-[",run:PB},{key:"Mod-]",run:JB},{key:"Mod-Alt-\\",run:UB},{key:"Shift-Mod-k",run:IB},{key:"Shift-Mod-\\",run:hB},{key:"Mod-/",run:ND},{key:"Alt-A",run:BD}].concat(jB);function Et(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var r=i[n];typeof r=="string"?t.setAttribute(n,r):r!=null&&(t[n]=r)}e++}for(;e<arguments.length;e++)BM(t,arguments[e]);return t}function BM(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var i=0;i<e.length;i++)BM(t,e[i]);else throw new RangeError("Unsupported child node: "+e)}const ib=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class xa{constructor(e,i,n=0,r=e.length,s,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=s?l=>s(ib(l)):ib,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ai(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let i=d0(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=gn(e);let r=this.normalize(i);for(let s=0,a=n;;s++){let l=r.charCodeAt(s),h=this.match(l,a);if(s==r.length-1){if(h)return this.value=h,this;break}a==n&&s<i.length&&i.charCodeAt(s)==l&&a++}}}match(e,i){let n=null;for(let r=0;r<this.matches.length;r+=2){let s=this.matches[r],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?n={from:this.matches[r+1],to:i+1}:(this.matches[r]++,a=!0)),a||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:i,to:i+1}:this.matches.push(1,i)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferPos)&&(n=null),n}}typeof Symbol<"u"&&(xa.prototype[Symbol.iterator]=function(){return this});const UM={from:-1,to:-1,match:/.*/.exec("")},U0="gm"+(/x/.unicode==null?"":"u");class JM{constructor(e,i,n,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=UM,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new PM(e,i,n,r,s);this.re=new RegExp(i,U0+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let a=e.lineAt(r);this.curLineStart=a.from,this.matchPos=ef(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let n=this.curLineStart+i.index,r=n+i[0].length;if(this.matchPos=ef(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,i)))return this.value={from:n,to:r,match:i},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const bd=new WeakMap;class ha{constructor(e,i){this.from=e,this.text=i}get to(){return this.from+this.text.length}static get(e,i,n){let r=bd.get(e);if(!r||r.from>=n||r.to<=i){let l=new ha(i,e.sliceString(i,n));return bd.set(e,l),l}if(r.from==i&&r.to==n)return r;let{text:s,from:a}=r;return a>i&&(s=e.sliceString(i,a)+s,a=i),r.to<n&&(s+=e.sliceString(r.to,n)),bd.set(e,new ha(a,s)),new ha(i,s.slice(i-a,n-a))}}class PM{constructor(e,i,n,r,s){this.text=e,this.to=s,this.done=!1,this.value=UM,this.matchPos=ef(e,r),this.re=new RegExp(i,U0+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=ha.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==e&&(this.re.lastIndex=e+1,i=this.re.exec(this.flat.text)),i){let n=this.flat.from+i.index,r=n+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,r,i)))return this.value={from:n,to:r,match:i},this.matchPos=ef(this.text,r+(n==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ha.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(JM.prototype[Symbol.iterator]=PM.prototype[Symbol.iterator]=function(){return this});function WB(t){try{return new RegExp(t,U0),!0}catch{return!1}}function ef(t,e){if(e>=t.length)return e;let i=t.lineAt(e),n;for(;e<i.to&&(n=i.text.charCodeAt(e-i.from))>=56320&&n<57344;)e++;return e}function _m(t){let e=Et("input",{class:"cm-textfield",name:"line"}),i=Et("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),t.dispatch({effects:tf.of(!1)}),t.focus()):r.keyCode==13&&(r.preventDefault(),n())},onsubmit:r=>{r.preventDefault(),n()}},Et("label",t.state.phrase("Go to line"),": ",e)," ",Et("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function n(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:s}=t,a=s.doc.lineAt(s.selection.main.head),[,l,h,p,d]=r,m=p?+p.slice(1):0,y=h?+h:a.number;if(h&&d){let M=y/100;l&&(M=M*(l=="-"?-1:1)+a.number/s.doc.lines),y=Math.round(s.doc.lines*M)}else h&&l&&(y=y*(l=="-"?-1:1)+a.number);let v=s.doc.line(Math.max(1,Math.min(s.doc.lines,y))),S=de.cursor(v.from+Math.max(0,Math.min(m,v.length)));t.dispatch({effects:[tf.of(!1),Te.scrollIntoView(S.from,{y:"center"})],selection:S}),t.focus()}return{dom:i}}const tf=ze.define(),nb=ci.define({create(){return!0},update(t,e){for(let i of e.effects)i.is(tf)&&(t=i.value);return t},provide:t=>vu.from(t,e=>e?_m:null)}),GB=t=>{let e=yu(t,_m);if(!e){let i=[tf.of(!0)];t.state.field(nb,!1)==null&&i.push(ze.appendConfig.of([nb,VB])),t.dispatch({effects:i}),e=yu(t,_m)}return e&&e.dom.querySelector("input").focus(),!0},VB=Te.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),KB={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},FM=Oe.define({combine(t){return Dr(t,KB,{highlightWordAroundCursor:(e,i)=>e||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function zB(t){let e=[ZB,$B];return t&&e.push(FM.of(t)),e}const HB=Ve.mark({class:"cm-selectionMatch"}),QB=Ve.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function rb(t,e,i,n){return(i==0||t(e.sliceDoc(i-1,i))!=Dt.Word)&&(n==e.doc.length||t(e.sliceDoc(n,n+1))!=Dt.Word)}function YB(t,e,i,n){return t(e.sliceDoc(i,i+1))==Dt.Word&&t(e.sliceDoc(n-1,n))==Dt.Word}const $B=Si.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(FM),{state:i}=t,n=i.selection;if(n.ranges.length>1)return Ve.none;let r=n.main,s,a=null;if(r.empty){if(!e.highlightWordAroundCursor)return Ve.none;let h=i.wordAt(r.head);if(!h)return Ve.none;a=i.charCategorizer(r.head),s=i.sliceDoc(h.from,h.to)}else{let h=r.to-r.from;if(h<e.minSelectionLength||h>200)return Ve.none;if(e.wholeWords){if(s=i.sliceDoc(r.from,r.to),a=i.charCategorizer(r.head),!(rb(a,i,r.from,r.to)&&YB(a,i,r.from,r.to)))return Ve.none}else if(s=i.sliceDoc(r.from,r.to).trim(),!s)return Ve.none}let l=[];for(let h of t.visibleRanges){let p=new xa(i.doc,s,h.from,h.to);for(;!p.next().done;){let{from:d,to:m}=p.value;if((!a||rb(a,i,d,m))&&(r.empty&&d<=r.from&&m>=r.to?l.push(QB.range(d,m)):(d>=r.to||m<=r.from)&&l.push(HB.range(d,m)),l.length>e.maxMatches))return Ve.none}}return Ve.set(l)}},{decorations:t=>t.decorations}),ZB=Te.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),qB=({state:t,dispatch:e})=>{let{selection:i}=t,n=de.create(i.ranges.map(r=>t.wordAt(r.head)||de.cursor(r.head)),i.mainIndex);return n.eq(i)?!1:(e(t.update({selection:n})),!0)};function XB(t,e){let{main:i,ranges:n}=t.selection,r=t.wordAt(i.head),s=r&&r.from==i.from&&r.to==i.to;for(let a=!1,l=new xa(t.doc,e,n[n.length-1].to);;)if(l.next(),l.done){if(a)return null;l=new xa(t.doc,e,0,Math.max(0,n[n.length-1].from-1)),a=!0}else{if(a&&n.some(h=>h.from==l.value.from))continue;if(s){let h=t.wordAt(l.value.from);if(!h||h.from!=l.value.from||h.to!=l.value.to)continue}return l.value}}const eU=({state:t,dispatch:e})=>{let{ranges:i}=t.selection;if(i.some(s=>s.from===s.to))return qB({state:t,dispatch:e});let n=t.sliceDoc(i[0].from,i[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=n))return!1;let r=XB(t,n);return r?(e(t.update({selection:t.selection.addRange(de.range(r.from,r.to),!1),effects:Te.scrollIntoView(r.to)})),!0):!1},Na=Oe.define({combine(t){return Dr(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new fU(e),scrollToMatch:e=>Te.scrollIntoView(e)})}});class jM{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||WB(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(i,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new rU(this):new iU(this)}getCursor(e,i=0,n){let r=e.doc?e:lt.create({doc:e});return n==null&&(n=r.doc.length),this.regexp?ta(this,r,i,n):ea(this,r,i,n)}}class WM{constructor(e){this.spec=e}}function ea(t,e,i,n){return new xa(e.doc,t.unquoted,i,n,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?tU(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function tU(t,e){return(i,n,r,s)=>((s>i||s+r.length<n)&&(s=Math.max(0,i-2),r=t.sliceString(s,Math.min(t.length,n+2))),(e(nf(r,i-s))!=Dt.Word||e(rf(r,i-s))!=Dt.Word)&&(e(rf(r,n-s))!=Dt.Word||e(nf(r,n-s))!=Dt.Word))}class iU extends WM{constructor(e){super(e)}nextMatch(e,i,n){let r=ea(this.spec,e,n,e.doc.length).nextOverlapping();return r.done&&(r=ea(this.spec,e,0,i).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,i,n){for(let r=n;;){let s=Math.max(i,r-1e4-this.spec.unquoted.length),a=ea(this.spec,e,s,r),l=null;for(;!a.nextOverlapping().done;)l=a.value;if(l)return l;if(s==i)return null;r-=1e4}}prevMatch(e,i,n){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,i){let n=ea(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=i)return null;r.push(n.value)}return r}highlight(e,i,n,r){let s=ea(this.spec,e,Math.max(0,i-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function ta(t,e,i,n){return new JM(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?nU(e.charCategorizer(e.selection.main.head)):void 0},i,n)}function nf(t,e){return t.slice(bi(t,e,!1),e)}function rf(t,e){return t.slice(e,bi(t,e))}function nU(t){return(e,i,n)=>!n[0].length||(t(nf(n.input,n.index))!=Dt.Word||t(rf(n.input,n.index))!=Dt.Word)&&(t(rf(n.input,n.index+n[0].length))!=Dt.Word||t(nf(n.input,n.index+n[0].length))!=Dt.Word)}class rU extends WM{nextMatch(e,i,n){let r=ta(this.spec,e,n,e.doc.length).next();return r.done&&(r=ta(this.spec,e,0,i).next()),r.done?null:r.value}prevMatchInRange(e,i,n){for(let r=1;;r++){let s=Math.max(i,n-r*1e4),a=ta(this.spec,e,s,n),l=null;for(;!a.next().done;)l=a.value;if(l&&(s==i||l.from>s+10))return l;if(s==i)return null}}prevMatch(e,i,n){return this.prevMatchInRange(e,0,i)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(i,n)=>n=="$"?"$":n=="&"?e.match[0]:n!="0"&&+n<e.match.length?e.match[n]:i))}matchAll(e,i){let n=ta(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=i)return null;r.push(n.value)}return r}highlight(e,i,n,r){let s=ta(this.spec,e,Math.max(0,i-250),Math.min(n+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const _u=ze.define(),J0=ze.define(),ys=ci.define({create(t){return new xd(bm(t).create(),null)},update(t,e){for(let i of e.effects)i.is(_u)?t=new xd(i.value.create(),t.panel):i.is(J0)&&(t=new xd(t.query,i.value?P0:null));return t},provide:t=>vu.from(t,e=>e.panel)});class xd{constructor(e,i){this.query=e,this.panel=i}}const sU=Ve.mark({class:"cm-searchMatch"}),oU=Ve.mark({class:"cm-searchMatch cm-searchMatch-selected"}),aU=Si.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ys))}update(t){let e=t.state.field(ys);(e!=t.startState.field(ys)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ve.none;let{view:i}=this,n=new ho;for(let r=0,s=i.visibleRanges,a=s.length;r<a;r++){let{from:l,to:h}=s[r];for(;r<a-1&&h>s[r+1].from-2*250;)h=s[++r].to;t.highlight(i.state,l,h,(p,d)=>{let m=i.state.selection.ranges.some(y=>y.from==p&&y.to==d);n.add(p,d,m?oU:sU)})}return n.finish()}},{decorations:t=>t.decorations});function Bu(t){return e=>{let i=e.state.field(ys,!1);return i&&i.query.spec.valid?t(e,i):KM(e)}}const sf=Bu((t,{query:e})=>{let{to:i}=t.state.selection.main,n=e.nextMatch(t.state,i,i);if(!n)return!1;let r=de.single(n.from,n.to),s=t.state.facet(Na);return t.dispatch({selection:r,effects:[F0(t,n),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),VM(t),!0}),of=Bu((t,{query:e})=>{let{state:i}=t,{from:n}=i.selection.main,r=e.prevMatch(i,n,n);if(!r)return!1;let s=de.single(r.from,r.to),a=t.state.facet(Na);return t.dispatch({selection:s,effects:[F0(t,r),a.scrollToMatch(s.main,t)],userEvent:"select.search"}),VM(t),!0}),lU=Bu((t,{query:e})=>{let i=e.matchAll(t.state,1e3);return!i||!i.length?!1:(t.dispatch({selection:de.create(i.map(n=>de.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),uU=({state:t,dispatch:e})=>{let i=t.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:n,to:r}=i.main,s=[],a=0;for(let l=new xa(t.doc,t.sliceDoc(n,r));!l.next().done;){if(s.length>1e3)return!1;l.value.from==n&&(a=s.length),s.push(de.range(l.value.from,l.value.to))}return e(t.update({selection:de.create(s,a),userEvent:"select.search.matches"})),!0},sb=Bu((t,{query:e})=>{let{state:i}=t,{from:n,to:r}=i.selection.main;if(i.readOnly)return!1;let s=e.nextMatch(i,n,n);if(!s)return!1;let a=[],l,h,p=[];if(s.from==n&&s.to==r&&(h=i.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:h}),s=e.nextMatch(i,s.from,s.to),p.push(Te.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(n).number)+"."))),s){let d=a.length==0||a[0].from>=s.to?0:s.to-s.from-h.length;l=de.single(s.from-d,s.to-d),p.push(F0(t,s)),p.push(i.facet(Na).scrollToMatch(l.main,t))}return t.dispatch({changes:a,selection:l,effects:p,userEvent:"input.replace"}),!0}),hU=Bu((t,{query:e})=>{if(t.state.readOnly)return!1;let i=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:a}=r;return{from:s,to:a,insert:e.getReplacement(r)}});if(!i.length)return!1;let n=t.state.phrase("replaced $ matches",i.length)+".";return t.dispatch({changes:i,effects:Te.announce.of(n),userEvent:"input.replace.all"}),!0});function P0(t){return t.state.facet(Na).createPanel(t)}function bm(t,e){var i,n,r,s,a;let l=t.selection.main,h=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!h)return e;let p=t.facet(Na);return new jM({search:((i=e==null?void 0:e.literal)!==null&&i!==void 0?i:p.literal)?h:h.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:p.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:p.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:p.regexp,wholeWord:(a=e==null?void 0:e.wholeWord)!==null&&a!==void 0?a:p.wholeWord})}function GM(t){let e=yu(t,P0);return e&&e.dom.querySelector("[main-field]")}function VM(t){let e=GM(t);e&&e==t.root.activeElement&&e.select()}const KM=t=>{let e=t.state.field(ys,!1);if(e&&e.panel){let i=GM(t);if(i&&i!=t.root.activeElement){let n=bm(t.state,e.query.spec);n.valid&&t.dispatch({effects:_u.of(n)}),i.focus(),i.select()}}else t.dispatch({effects:[J0.of(!0),e?_u.of(bm(t.state,e.query.spec)):ze.appendConfig.of(dU)]});return!0},zM=t=>{let e=t.state.field(ys,!1);if(!e||!e.panel)return!1;let i=yu(t,P0);return i&&i.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:J0.of(!1)}),!0},cU=[{key:"Mod-f",run:KM,scope:"editor search-panel"},{key:"F3",run:sf,shift:of,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:sf,shift:of,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:zM,scope:"editor search-panel"},{key:"Mod-Shift-l",run:uU},{key:"Alt-g",run:GB},{key:"Mod-d",run:eU,preventDefault:!0}];class fU{constructor(e){this.view=e;let i=this.query=e.state.field(ys).query.spec;this.commit=this.commit.bind(this),this.searchField=Et("input",{value:i.search,placeholder:tn(e,"Find"),"aria-label":tn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Et("input",{value:i.replace,placeholder:tn(e,"Replace"),"aria-label":tn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Et("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=Et("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=Et("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit});function n(r,s,a){return Et("button",{class:"cm-button",name:r,onclick:s,type:"button"},a)}this.dom=Et("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,n("next",()=>sf(e),[tn(e,"next")]),n("prev",()=>of(e),[tn(e,"previous")]),n("select",()=>lU(e),[tn(e,"all")]),Et("label",null,[this.caseField,tn(e,"match case")]),Et("label",null,[this.reField,tn(e,"regexp")]),Et("label",null,[this.wordField,tn(e,"by word")]),...e.state.readOnly?[]:[Et("br"),this.replaceField,n("replace",()=>sb(e),[tn(e,"replace")]),n("replaceAll",()=>hU(e),[tn(e,"replace all")])],Et("button",{name:"close",onclick:()=>zM(e),"aria-label":tn(e,"close"),type:"button"},["×"])])}commit(){let e=new jM({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:_u.of(e)}))}keydown(e){WI(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?of:sf)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),sb(this.view))}update(e){for(let i of e.transactions)for(let n of i.effects)n.is(_u)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Na).top}}function tn(t,e){return t.state.phrase(e)}const Yh=30,$h=/[\s\.,:;?!]/;function F0(t,{from:e,to:i}){let n=t.state.doc.lineAt(e),r=t.state.doc.lineAt(i).to,s=Math.max(n.from,e-Yh),a=Math.min(r,i+Yh),l=t.state.sliceDoc(s,a);if(s!=n.from){for(let h=0;h<Yh;h++)if(!$h.test(l[h+1])&&$h.test(l[h])){l=l.slice(h);break}}if(a!=r){for(let h=l.length-1;h>l.length-Yh;h--)if(!$h.test(l[h-1])&&$h.test(l[h])){l=l.slice(0,h);break}}return Te.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${n.number}.`)}const pU=Te.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),dU=[ys,Ra.low(aU),pU];class HM{constructor(e,i,n){this.state=e,this.pos=i,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let i=Yi(this.state).resolveInner(this.pos,-1);for(;i&&e.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(e){let i=this.state.doc.lineAt(this.pos),n=Math.max(i.from,this.pos-250),r=i.text.slice(n-i.from,this.pos-i.from),s=r.search(QM(e,!1));return s<0?null:{from:n+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,i){e=="abort"&&this.abortListeners&&this.abortListeners.push(i)}}function ob(t){let e=Object.keys(t).join(""),i=/\w/.test(e);return i&&(e=e.replace(/\w/g,"")),`[${i?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function gU(t){let e=Object.create(null),i=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)i[r[s]]=!0}let n=ob(e)+ob(i)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function mU(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[i,n]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:gU(e);return r=>{let s=r.matchBefore(n);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:i}:null}}class ab{constructor(e,i,n,r){this.completion=e,this.source=i,this.match=n,this.score=r}}function vs(t){return t.selection.main.from}function QM(t,e){var i;let{source:n}=t,r=e&&n[0]!="^",s=n[n.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${n})${s?"$":""}`,(i=t.flags)!==null&&i!==void 0?i:t.ignoreCase?"i":"")}const yU=Nr.define();function vU(t,e,i,n){let{main:r}=t.selection,s=i-r.from,a=n-r.from;return Object.assign(Object.assign({},t.changeByRange(l=>l!=r&&i!=n&&t.sliceDoc(l.from+s,l.from+a)!=t.sliceDoc(i,n)?{range:l}:{changes:{from:l.from+s,to:n==r.from?l.to:l.from+a,insert:e},range:de.cursor(l.from+s+e.length)})),{userEvent:"input.complete"})}const lb=new WeakMap;function wU(t){if(!Array.isArray(t))return t;let e=lb.get(t);return e||lb.set(t,e=mU(t)),e}const j0=ze.define(),bu=ze.define();class _U{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let i=0;i<e.length;){let n=ai(e,i),r=gn(n);this.chars.push(n);let s=e.slice(i,i+r),a=s.toUpperCase();this.folded.push(ai(a==s?s.toLowerCase():a,0)),i+=r}this.astral=e.length!=this.chars.length}ret(e,i){return this.score=e,this.matched=i,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:i,folded:n,any:r,precise:s,byWord:a}=this;if(i.length==1){let E=ai(e,0),B=gn(E),L=B==e.length?0:-100;if(E!=i[0])if(E==n[0])L+=-200;else return!1;return this.ret(L,[0,B])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let h=i.length,p=0;if(l<0){for(let E=0,B=Math.min(e.length,200);E<B&&p<h;){let L=ai(e,E);(L==i[p]||L==n[p])&&(r[p++]=E),E+=gn(L)}if(p<h)return!1}let d=0,m=0,y=!1,v=0,S=-1,M=-1,b=/[a-z]/.test(e),w=!0;for(let E=0,B=Math.min(e.length,200),L=0;E<B&&m<h;){let I=ai(e,E);l<0&&(d<h&&I==i[d]&&(s[d++]=E),v<h&&(I==i[v]||I==n[v]?(v==0&&(S=E),M=E+1,v++):v=0));let O,F=I<255?I>=48&&I<=57||I>=97&&I<=122?2:I>=65&&I<=90?1:0:(O=d0(I))!=O.toLowerCase()?1:O!=O.toUpperCase()?2:0;(!E||F==1&&b||L==0&&F!=0)&&(i[m]==I||n[m]==I&&(y=!0)?a[m++]=E:a.length&&(w=!1)),L=F,E+=gn(I)}return m==h&&a[0]==0&&w?this.result(-100+(y?-200:0),a,e):v==h&&S==0?this.ret(-200-e.length+(M==e.length?0:-100),[0,M]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):v==h?this.ret(-200+-700-e.length,[S,M]):m==h?this.result(-100+(y?-200:0)+-700+(w?0:-1100),a,e):i.length==2?!1:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,i,n){let r=[],s=0;for(let a of i){let l=a+(this.astral?gn(ai(n,a)):1);s&&r[s-1]==a?r[s-1]=l:(r[s++]=a,r[s++]=l)}return this.ret(e-n.length,r)}}const zi=Oe.define({combine(t){return Dr(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:bU,compareCompletions:(e,i)=>e.label.localeCompare(i.label),interactionDelay:75},{defaultKeymap:(e,i)=>e&&i,closeOnBlur:(e,i)=>e&&i,icons:(e,i)=>e&&i,tooltipClass:(e,i)=>n=>ub(e(n),i(n)),optionClass:(e,i)=>n=>ub(e(n),i(n)),addToOptions:(e,i)=>e.concat(i)})}});function ub(t,e){return t?e?t+" "+e:t:e}function bU(t,e,i,n,r){let s=t.textDirection==Ft.RTL,a=s,l=!1,h="top",p,d,m=e.left-r.left,y=r.right-e.right,v=n.right-n.left,S=n.bottom-n.top;if(a&&m<Math.min(v,y)?a=!1:!a&&y<Math.min(v,m)&&(a=!0),v<=(a?m:y))p=Math.max(r.top,Math.min(i.top,r.bottom-S))-e.top,d=Math.min(400,a?m:y);else{l=!0,d=Math.min(400,(s?e.right:r.right-e.left)-30);let M=r.bottom-e.bottom;M>=S||M>e.top?p=i.bottom-e.top:(h="bottom",p=e.bottom-i.top)}return{style:`${h}: ${p}px; max-width: ${d}px`,class:"cm-completionInfo-"+(l?s?"left-narrow":"right-narrow":a?"left":"right")}}function xU(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(i){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),i.type&&n.classList.add(...i.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(i,n,r){let s=document.createElement("span");s.className="cm-completionLabel";let a=i.displayLabel||i.label,l=0;for(let h=0;h<r.length;){let p=r[h++],d=r[h++];p>l&&s.appendChild(document.createTextNode(a.slice(l,p)));let m=s.appendChild(document.createElement("span"));m.appendChild(document.createTextNode(a.slice(p,d))),m.className="cm-completionMatchedText",l=d}return l<a.length&&s.appendChild(document.createTextNode(a.slice(l))),s},position:50},{render(i){if(!i.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=i.detail,n},position:80}),e.sort((i,n)=>i.position-n.position).map(i=>i.render)}function hb(t,e,i){if(t<=i)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/i);return{from:r*i,to:(r+1)*i}}let n=Math.floor((t-e)/i);return{from:t-(n+1)*i,to:t-n*i}}class SU{constructor(e,i,n){this.view=e,this.stateField=i,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let r=e.state.field(i),{options:s,selected:a}=r.open,l=e.state.facet(zi);this.optionContent=xU(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=hb(s.length,a,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",h=>{for(let p=h.target,d;p&&p!=this.dom;p=p.parentNode)if(p.nodeName=="LI"&&(d=/-(\d+)$/.exec(p.id))&&+d[1]<s.length){this.applyCompletion(e,s[+d[1]]),h.preventDefault();return}}),this.dom.addEventListener("focusout",h=>{let p=e.state.field(this.stateField,!1);p&&p.tooltip&&e.state.facet(zi).closeOnBlur&&h.relatedTarget!=e.contentDOM&&e.dispatch({effects:bu.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var i,n,r;let s=e.state.field(this.stateField),a=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=a&&(this.updateSel(),((i=s.open)===null||i===void 0?void 0:i.disabled)!=((n=a.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((r=s.open)===null||r===void 0)&&r.disabled)))}updateTooltipClass(e){let i=this.tooltipClass(e);if(i!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of i.split(" "))n&&this.dom.classList.add(n);this.currentClass=i}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),i=e.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=hb(i.options.length,i.selected,this.view.state.facet(zi).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(i.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(i.selected)){this.destroyInfo();let{completion:n}=i.options[i.selected],{info:r}=n;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(n);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,n)}).catch(a=>vn(this.view.state,a,"completion info")):this.addInfoPane(s,n)}}addInfoPane(e,i){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;n.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let i=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)n.nodeName!="LI"||!n.id?r--:r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),i=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return i&&MU(this.list,i),i}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let i=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let a=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:a.innerWidth,bottom:a.innerHeight}}return r.top>Math.min(s.bottom,i.bottom)-10||r.bottom<Math.max(s.top,i.top)+10?null:this.view.state.facet(zi).positionInfo(this.view,i,r,n,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,i,n){const r=document.createElement("ul");r.id=i,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let a=n.from;a<n.to;a++){let{completion:l,match:h}=e[a],{section:p}=l;if(p){let y=typeof p=="string"?p:p.name;if(y!=s&&(a>n.from||n.from==0))if(s=y,typeof p!="string"&&p.header)r.appendChild(p.header(p));else{let v=r.appendChild(document.createElement("completion-section"));v.textContent=y}}const d=r.appendChild(document.createElement("li"));d.id=i+"-"+a,d.setAttribute("role","option");let m=this.optionClass(l);m&&(d.className=m);for(let y of this.optionContent){let v=y(l,this.view.state,h);v&&d.appendChild(v)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function CU(t,e){return i=>new SU(i,t,e)}function MU(t,e){let i=t.getBoundingClientRect(),n=e.getBoundingClientRect();n.top<i.top?t.scrollTop-=i.top-n.top:n.bottom>i.bottom&&(t.scrollTop+=n.bottom-i.bottom)}function cb(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function kU(t,e){let i=[],n=null,r=h=>{i.push(h);let{section:p}=h.completion;if(p){n||(n=[]);let d=typeof p=="string"?p:p.name;n.some(m=>m.name==d)||n.push(typeof p=="string"?{name:d}:p)}};for(let h of t)if(h.hasResult()){let p=h.result.getMatch;if(h.result.filter===!1)for(let d of h.result.options)r(new ab(d,h.source,p?p(d):[],1e9-i.length));else{let d=new _U(e.sliceDoc(h.from,h.to));for(let m of h.result.options)if(d.match(m.label)){let y=m.displayLabel?p?p(m,d.matched):[]:d.matched;r(new ab(m,h.source,y,d.score+(m.boost||0)))}}}if(n){let h=Object.create(null),p=0,d=(m,y)=>{var v,S;return((v=m.rank)!==null&&v!==void 0?v:1e9)-((S=y.rank)!==null&&S!==void 0?S:1e9)||(m.name<y.name?-1:1)};for(let m of n.sort(d))p-=1e5,h[m.name]=p;for(let m of i){let{section:y}=m.completion;y&&(m.score+=h[typeof y=="string"?y:y.name])}}let s=[],a=null,l=e.facet(zi).compareCompletions;for(let h of i.sort((p,d)=>d.score-p.score||l(p.completion,d.completion))){let p=h.completion;!a||a.label!=p.label||a.detail!=p.detail||a.type!=null&&p.type!=null&&a.type!=p.type||a.apply!=p.apply||a.boost!=p.boost?s.push(h):cb(h.completion)>cb(a)&&(s[s.length-1]=h),a=h.completion}return s}class ra{constructor(e,i,n,r,s,a){this.options=e,this.attrs=i,this.tooltip=n,this.timestamp=r,this.selected=s,this.disabled=a}setSelected(e,i){return e==this.selected||e>=this.options.length?this:new ra(this.options,fb(i,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,i,n,r,s){let a=kU(e,i);if(!a.length)return r&&e.some(h=>h.state==1)?new ra(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let l=i.facet(zi).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let h=r.options[r.selected].completion;for(let p=0;p<a.length;p++)if(a[p].completion==h){l=p;break}}return new ra(a,fb(n,l),{pos:e.reduce((h,p)=>p.hasResult()?Math.min(h,p.from):h,1e8),create:CU(rn,ZM),above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new ra(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class af{constructor(e,i,n){this.active=e,this.id=i,this.open=n}static start(){return new af(AU,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:i}=e,n=i.facet(zi),s=(n.override||i.languageDataAt("autocomplete",vs(i)).map(wU)).map(l=>(this.active.find(p=>p.source==l)||new Vi(l,this.active.some(p=>p.state!=0)?1:0)).update(e,n));s.length==this.active.length&&s.every((l,h)=>l==this.active[h])&&(s=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!TU(s,this.active)?a=ra.build(s,i,this.id,a,n):a&&a.disabled&&!s.some(l=>l.state==1)&&(a=null),!a&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Vi(l.source,0):l));for(let l of e.effects)l.is($M)&&(a=a&&a.setSelected(l.value,this.id));return s==this.active&&a==this.open?this:new af(s,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:EU}}function TU(t,e){if(t==e)return!0;for(let i=0,n=0;;){for(;i<t.length&&!t[i].hasResult;)i++;for(;n<e.length&&!e[n].hasResult;)n++;let r=i==t.length,s=n==e.length;if(r||s)return r==s;if(t[i++].result!=e[n++].result)return!1}}const EU={"aria-autocomplete":"list"};function fb(t,e){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(i["aria-activedescendant"]=t+"-"+e),i}const AU=[];function xm(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Vi{constructor(e,i,n=-1){this.source=e,this.state=i,this.explicitPos=n}hasResult(){return!1}update(e,i){let n=xm(e),r=this;n?r=r.handleUserEvent(e,n,i):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new Vi(r.source,0));for(let s of e.effects)if(s.is(j0))r=new Vi(r.source,1,s.value?vs(e.state):-1);else if(s.is(bu))r=new Vi(r.source,0);else if(s.is(YM))for(let a of s.value)a.source==r.source&&(r=a);return r}handleUserEvent(e,i,n){return i=="delete"||!n.activateOnTyping?this.map(e.changes):new Vi(this.source,1)}handleChange(e){return e.changes.touchesRange(vs(e.startState))?new Vi(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Vi(this.source,this.state,e.mapPos(this.explicitPos))}}class ca extends Vi{constructor(e,i,n,r,s){super(e,2,i),this.result=n,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,i,n){var r;let s=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),l=vs(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>a||i=="delete"&&vs(e.startState)==this.from)return new Vi(this.source,i=="input"&&n.activateOnTyping?1:0);let h=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),p;return RU(this.result.validFor,e.state,s,a)?new ca(this.source,h,this.result,s,a):this.result.update&&(p=this.result.update(this.result,s,a,new HM(e.state,l,h>=0)))?new ca(this.source,h,p,p.from,(r=p.to)!==null&&r!==void 0?r:vs(e.state)):new Vi(this.source,1,h)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Vi(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new ca(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function RU(t,e,i,n){if(!t)return!1;let r=e.sliceDoc(i,n);return typeof t=="function"?t(r,i,n,e):QM(t,!0).test(r)}const YM=ze.define({map(t,e){return t.map(i=>i.map(e))}}),$M=ze.define(),rn=ci.define({create(){return af.start()},update(t,e){return t.update(e)},provide:t=>[C0.from(t,e=>e.tooltip),Te.contentAttributes.from(t,e=>e.attrs)]});function ZM(t,e){const i=e.completion.apply||e.completion.label;let n=t.state.field(rn).active.find(r=>r.source==e.source);return n instanceof ca?(typeof i=="string"?t.dispatch(Object.assign(Object.assign({},vU(t.state,i,n.from,n.to)),{annotations:yU.of(e.completion)})):i(t,e.completion,n.from,n.to),!0):!1}function Zh(t,e="option"){return i=>{let n=i.state.field(rn,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<i.state.facet(zi).interactionDelay)return!1;let r=1,s;e=="page"&&(s=UC(i,n.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:a}=n.open.options,l=n.open.selected>-1?n.open.selected+r*(t?1:-1):t?0:a-1;return l<0?l=e=="page"?0:a-1:l>=a&&(l=e=="page"?a-1:0),i.dispatch({effects:$M.of(l)}),!0}}const LU=t=>{let e=t.state.field(rn,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(zi).interactionDelay?!1:ZM(t,e.open.options[e.open.selected])},OU=t=>t.state.field(rn,!1)?(t.dispatch({effects:j0.of(!0)}),!0):!1,IU=t=>{let e=t.state.field(rn,!1);return!e||!e.active.some(i=>i.state!=0)?!1:(t.dispatch({effects:bu.of(null)}),!0)};class NU{constructor(e,i){this.active=e,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const pb=50,DU=50,BU=1e3,UU=Si.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of t.state.field(rn).active)e.state==1&&this.startQuery(e)}update(t){let e=t.state.field(rn);if(!t.selectionSet&&!t.docChanged&&t.startState.field(rn)==e)return;let i=t.transactions.some(n=>(n.selection||n.docChanged)&&!xm(n));for(let n=0;n<this.running.length;n++){let r=this.running[n];if(i||r.updates.length+t.transactions.length>DU&&Date.now()-r.time>BU){for(let s of r.context.abortListeners)try{s()}catch(a){vn(this.view.state,a)}r.context.abortListeners=null,this.running.splice(n--,1)}else r.updates.push(...t.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(n=>n.state==1&&!this.running.some(r=>r.active.source==n.source))?setTimeout(()=>this.startUpdate(),pb):-1,this.composing!=0)for(let n of t.transactions)xm(n)=="input"?this.composing=2:this.composing==2&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:t}=this.view,e=t.field(rn);for(let i of e.active)i.state==1&&!this.running.some(n=>n.active.source==i.source)&&this.startQuery(i)}startQuery(t){let{state:e}=this.view,i=vs(e),n=new HM(e,i,t.explicitPos==i),r=new NU(t,n);this.running.push(r),Promise.resolve(t.source(n)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:bu.of(null)}),vn(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),pb))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],i=this.view.state.facet(zi);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(r.done===void 0)continue;if(this.running.splice(n--,1),r.done){let a=new ca(r.active.source,r.active.explicitPos,r.done,r.done.from,(t=r.done.to)!==null&&t!==void 0?t:vs(r.updates.length?r.updates[0].startState:this.view.state));for(let l of r.updates)a=a.update(l,i);if(a.hasResult()){e.push(a);continue}}let s=this.view.state.field(rn).active.find(a=>a.source==r.active.source);if(s&&s.state==1)if(r.done==null){let a=new Vi(r.active.source,0);for(let l of r.updates)a=a.update(l,i);a.state!=1&&e.push(a)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:YM.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(rn,!1);if(e&&e.tooltip&&this.view.state.facet(zi).closeOnBlur){let i=e.open&&UC(this.view,e.open.tooltip);(!i||!i.dom.contains(t.relatedTarget))&&this.view.dispatch({effects:bu.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:j0.of(!1)}),20),this.composing=0}}}),JU=Te.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),xu={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},io=ze.define({map(t,e){let i=e.mapPos(t,-1,Ni.TrackAfter);return i??void 0}}),W0=new class extends uo{};W0.startSide=1;W0.endSide=-1;const qM=ci.define({create(){return It.empty},update(t,e){if(e.selection){let i=e.state.doc.lineAt(e.selection.main.head).from,n=e.startState.doc.lineAt(e.startState.selection.main.head).from;i!=e.changes.mapPos(n,-1)&&(t=It.empty)}t=t.map(e.changes);for(let i of e.effects)i.is(io)&&(t=t.update({add:[W0.range(i.value,i.value+1)]}));return t}});function PU(){return[jU,qM]}const Sd="()[]{}<>";function XM(t){for(let e=0;e<Sd.length;e+=2)if(Sd.charCodeAt(e)==t)return Sd.charAt(e+1);return d0(t<128?t:t+1)}function ek(t,e){return t.languageDataAt("closeBrackets",e)[0]||xu}const FU=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),jU=Te.inputHandler.of((t,e,i,n)=>{if((FU?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let r=t.state.selection.main;if(n.length>2||n.length==2&&gn(ai(n,0))==1||e!=r.from||i!=r.to)return!1;let s=VU(t.state,n);return s?(t.dispatch(s),!0):!1}),WU=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=ek(t,t.selection.main.head).brackets||xu.brackets,r=null,s=t.changeByRange(a=>{if(a.empty){let l=KU(t.doc,a.head);for(let h of n)if(h==l&&Ff(t.doc,a.head)==XM(ai(h,0)))return{changes:{from:a.head-h.length,to:a.head+h.length},range:de.cursor(a.head-h.length)}}return{range:r=a}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},GU=[{key:"Backspace",run:WU}];function VU(t,e){let i=ek(t,t.selection.main.head),n=i.brackets||xu.brackets;for(let r of n){let s=XM(ai(r,0));if(e==r)return s==r?QU(t,r,n.indexOf(r+r+r)>-1,i):zU(t,r,s,i.before||xu.before);if(e==s&&tk(t,t.selection.main.from))return HU(t,r,s)}return null}function tk(t,e){let i=!1;return t.field(qM).between(0,t.doc.length,n=>{n==e&&(i=!0)}),i}function Ff(t,e){let i=t.sliceString(e,e+2);return i.slice(0,gn(ai(i,0)))}function KU(t,e){let i=t.sliceString(e-2,e);return gn(ai(i,0))==i.length?i:i.slice(1)}function zU(t,e,i,n){let r=null,s=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:i,from:a.to}],effects:io.of(a.to+e.length),range:de.range(a.anchor+e.length,a.head+e.length)};let l=Ff(t.doc,a.head);return!l||/\s/.test(l)||n.indexOf(l)>-1?{changes:{insert:e+i,from:a.head},effects:io.of(a.head+e.length),range:de.cursor(a.head+e.length)}:{range:r=a}});return r?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function HU(t,e,i){let n=null,r=t.changeByRange(s=>s.empty&&Ff(t.doc,s.head)==i?{changes:{from:s.head,to:s.head+i.length,insert:i},range:de.cursor(s.head+i.length)}:n={range:s});return n?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function QU(t,e,i,n){let r=n.stringPrefixes||xu.stringPrefixes,s=null,a=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:io.of(l.to+e.length),range:de.range(l.anchor+e.length,l.head+e.length)};let h=l.head,p=Ff(t.doc,h),d;if(p==e){if(db(t,h))return{changes:{insert:e+e,from:h},effects:io.of(h+e.length),range:de.cursor(h+e.length)};if(tk(t,h)){let y=i&&t.sliceDoc(h,h+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:h,to:h+y.length,insert:y},range:de.cursor(h+y.length)}}}else{if(i&&t.sliceDoc(h-2*e.length,h)==e+e&&(d=gb(t,h-2*e.length,r))>-1&&db(t,d))return{changes:{insert:e+e+e+e,from:h},effects:io.of(h+e.length),range:de.cursor(h+e.length)};if(t.charCategorizer(h)(p)!=Dt.Word&&gb(t,h,r)>-1&&!YU(t,h,e,r))return{changes:{insert:e+e,from:h},effects:io.of(h+e.length),range:de.cursor(h+e.length)}}return{range:s=l}});return s?null:t.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function db(t,e){let i=Yi(t).resolveInner(e+1);return i.parent&&i.from==e}function YU(t,e,i,n){let r=Yi(t).resolveInner(e,-1),s=n.reduce((a,l)=>Math.max(a,l.length),0);for(let a=0;a<5;a++){let l=t.sliceDoc(r.from,Math.min(r.to,r.from+i.length+s)),h=l.indexOf(i);if(!h||h>-1&&n.indexOf(l.slice(0,h))>-1){let d=r.firstChild;for(;d&&d.from==r.from&&d.to-d.from>i.length+h;){if(t.sliceDoc(d.to-i.length,d.to)==i)return!1;d=d.firstChild}return!0}let p=r.to==e&&r.parent;if(!p)break;r=p}return!1}function gb(t,e,i){let n=t.charCategorizer(e);if(n(t.sliceDoc(e-1,e))!=Dt.Word)return e;for(let r of i){let s=e-r.length;if(t.sliceDoc(s,e)==r&&n(t.sliceDoc(s-1,s))!=Dt.Word)return s}return-1}function $U(t={}){return[rn,zi.of(t),UU,ZU,JU]}const ik=[{key:"Ctrl-Space",run:OU},{key:"Escape",run:IU},{key:"ArrowDown",run:Zh(!0)},{key:"ArrowUp",run:Zh(!1)},{key:"PageDown",run:Zh(!0,"page")},{key:"PageUp",run:Zh(!1,"page")},{key:"Enter",run:LU}],ZU=Ra.highest(Of.computeN([zi],t=>t.facet(zi).defaultKeymap?[ik]:[]));class qU{constructor(e,i,n){this.from=e,this.to=i,this.diagnostic=n}}class Zs{constructor(e,i,n){this.diagnostics=e,this.panel=i,this.selected=n}static init(e,i,n){let r=e,s=n.facet(sk).markerFilter;s&&(r=s(r));let a=Ve.set(r.map(l=>l.from==l.to||l.from==l.to-1&&n.doc.lineAt(l.from).to==l.from?Ve.widget({widget:new aJ(l),diagnostic:l}).range(l.from):Ve.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new Zs(a,i,Sa(a))}}function Sa(t,e=null,i=0){let n=null;return t.between(i,1e9,(r,s,{spec:a})=>{if(!(e&&a.diagnostic!=e))return n=new qU(r,s,a.diagnostic),!1}),n}function XU(t,e){let i=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(n=>n.is(nk))||t.changes.touchesRange(i.from,i.to))}function eJ(t,e){return t.field(on,!1)?e:e.concat(ze.appendConfig.of(hJ))}const nk=ze.define(),G0=ze.define(),rk=ze.define(),on=ci.define({create(){return new Zs(Ve.none,null,null)},update(t,e){if(e.docChanged){let i=t.diagnostics.map(e.changes),n=null;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);n=Sa(i,t.selected.diagnostic,r)||Sa(i,null,r)}t=new Zs(i,t.panel,n)}for(let i of e.effects)i.is(nk)?t=Zs.init(i.value,t.panel,e.state):i.is(G0)?t=new Zs(t.diagnostics,i.value?jf.open:null,t.selected):i.is(rk)&&(t=new Zs(t.diagnostics,t.panel,i.value));return t},provide:t=>[vu.from(t,e=>e.panel),Te.decorations.from(t,e=>e.diagnostics)]}),tJ=Ve.mark({class:"cm-lintRange cm-lintRange-active"});function iJ(t,e,i){let{diagnostics:n}=t.state.field(on),r=[],s=2e8,a=0;n.between(e-(i<0?1:0),e+(i>0?1:0),(h,p,{spec:d})=>{e>=h&&e<=p&&(h==p||(e>h||i>0)&&(e<p||i<0))&&(r.push(d.diagnostic),s=Math.min(h,s),a=Math.max(p,a))});let l=t.state.facet(sk).tooltipFilter;return l&&(r=l(r)),r.length?{pos:s,end:a,above:t.state.doc.lineAt(s).to<a,create(){return{dom:nJ(t,r)}}}:null}function nJ(t,e){return Et("ul",{class:"cm-tooltip-lint"},e.map(i=>ak(t,i,!1)))}const rJ=t=>{let e=t.state.field(on,!1);(!e||!e.panel)&&t.dispatch({effects:eJ(t.state,[G0.of(!0)])});let i=yu(t,jf.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},mb=t=>{let e=t.state.field(on,!1);return!e||!e.panel?!1:(t.dispatch({effects:G0.of(!1)}),!0)},sJ=t=>{let e=t.state.field(on,!1);if(!e)return!1;let i=t.state.selection.main,n=e.diagnostics.iter(i.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==i.from&&n.to==i.to)?!1:(t.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},oJ=[{key:"Mod-Shift-m",run:rJ,preventDefault:!0},{key:"F8",run:sJ}],sk=Oe.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Dr(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,i)=>e?i?n=>e(n)||i(n):e:i}))}});function ok(t){let e=[];if(t)e:for(let{name:i}of t){for(let n=0;n<i.length;n++){let r=i[n];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function ak(t,e,i){var n;let r=i?ok(e.actions):[];return Et("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Et("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(n=e.actions)===null||n===void 0?void 0:n.map((s,a)=>{let l=!1,h=y=>{if(y.preventDefault(),l)return;l=!0;let v=Sa(t.state.field(on).diagnostics,e);v&&s.apply(t,v.from,v.to)},{name:p}=s,d=r[a]?p.indexOf(r[a]):-1,m=d<0?p:[p.slice(0,d),Et("u",p.slice(d,d+1)),p.slice(d+1)];return Et("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${p}${d<0?"":` (access key "${r[a]})"`}.`},m)}),e.source&&Et("div",{class:"cm-diagnosticSource"},e.source))}class aJ extends ks{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Et("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class yb{constructor(e,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=ak(e,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class jf{constructor(e){this.view=e,this.items=[];let i=r=>{if(r.keyCode==27)mb(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],a=ok(s.actions);for(let l=0;l<a.length;l++)if(a[l].toUpperCase().charCodeAt(0)==r.keyCode){let h=Sa(this.view.state.field(on).diagnostics,s);h&&s.actions[l].apply(e,h.from,h.to)}}else return;r.preventDefault()},n=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Et("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:n}),this.dom=Et("div",{class:"cm-panel-lint"},this.list,Et("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>mb(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(on).selected;if(!e)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==e.diagnostic)return i;return-1}update(){let{diagnostics:e,selected:i}=this.view.state.field(on),n=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(a,l,{spec:h})=>{let p=-1,d;for(let m=n;m<this.items.length;m++)if(this.items[m].diagnostic==h.diagnostic){p=m;break}p<0?(d=new yb(this.view,h.diagnostic),this.items.splice(n,0,d),r=!0):(d=this.items[p],p>n&&(this.items.splice(n,p-n),r=!0)),i&&d.diagnostic==i.diagnostic?d.dom.hasAttribute("aria-selected")||(d.dom.setAttribute("aria-selected","true"),s=d):d.dom.hasAttribute("aria-selected")&&d.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new yb(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{a.top<l.top?this.list.scrollTop-=l.top-a.top:a.bottom>l.bottom&&(this.list.scrollTop+=a.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function i(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)i();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)i()}moveSelection(e){if(this.selectedIndex<0)return;let i=this.view.state.field(on),n=Sa(i.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:rk.of(n)})}static open(e){return new jf(e)}}function lJ(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function qh(t){return lJ(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const uJ=Te.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:qh("#d11")},".cm-lintRange-warning":{backgroundImage:qh("orange")},".cm-lintRange-info":{backgroundImage:qh("#999")},".cm-lintRange-hint":{backgroundImage:qh("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),hJ=[on,Te.decorations.compute([on],t=>{let{selected:e,panel:i}=t.field(on);return!e||!i||e.from==e.to?Ve.none:Ve.set([tJ.range(e.from,e.to)])}),xN(iJ,{hideOn:XU}),uJ],cJ="#e5c07b",vb="#e06c75",fJ="#56b6c2",pJ="#ffffff",Ac="#abb2bf",Sm="#7d8799",dJ="#61afef",gJ="#98c379",wb="#d19a66",mJ="#c678dd",yJ="#21252b",_b="#2c313a",bb="#282c34",Cd="#353a42",vJ="#3E4451",xb="#528bff",wJ=Te.theme({"&":{color:Ac,backgroundColor:bb},".cm-content":{caretColor:xb},".cm-cursor, .cm-dropCursor":{borderLeftColor:xb},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:vJ},".cm-panels":{backgroundColor:yJ,color:Ac},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:bb,color:Sm,border:"none"},".cm-activeLineGutter":{backgroundColor:_b},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Cd},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Cd,borderBottomColor:Cd},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:_b,color:Ac}}},{dark:!0}),lk=Oa.define([{tag:he.keyword,color:mJ},{tag:[he.name,he.deleted,he.character,he.propertyName,he.macroName],color:vb},{tag:[he.function(he.variableName),he.labelName],color:dJ},{tag:[he.color,he.constant(he.name),he.standard(he.name)],color:wb},{tag:[he.definition(he.name),he.separator],color:Ac},{tag:[he.typeName,he.className,he.number,he.changed,he.annotation,he.modifier,he.self,he.namespace],color:cJ},{tag:[he.operator,he.operatorKeyword,he.url,he.escape,he.regexp,he.link,he.special(he.string)],color:fJ},{tag:[he.meta,he.comment],color:Sm},{tag:he.strong,fontWeight:"bold"},{tag:he.emphasis,fontStyle:"italic"},{tag:he.strikethrough,textDecoration:"line-through"},{tag:he.link,color:Sm,textDecoration:"underline"},{tag:he.heading,fontWeight:"bold",color:vb},{tag:[he.atom,he.bool,he.special(he.variableName)],color:wb},{tag:[he.processingInstruction,he.string,he.inserted],color:gJ},{tag:he.invalid,color:pJ}]),_J=[wJ,qc(lk)],bJ=Oa.define([{tag:he.keyword,color:"white"},{tag:he.name,color:"pink"},{tag:[he.deleted,he.character,he.propertyName,he.macroName],color:"white"},{tag:[he.function(he.variableName),he.labelName],color:"white"},{tag:[he.color,he.constant(he.name),he.standard(he.name)],color:"#ff0"},{tag:[he.definition(he.name),he.separator],color:"white"}]),xJ=Te.theme({"&":{backgroundColor:"transparent !important",fontSize:"20px",width:"100%",height:"100%",fontFamily:"'Roboto Mono', monospace"},"& .cm-content":{width:"100%",whiteSpace:"break-spaces"},"& .cm-editor":{backgroundColor:"transparent"},"& .cm-scroller":{fontFamily:"'Roboto Mono', monospace"},"& .cm-focused":{background:"hsla(50,23%,5%,0.6)"},"& .cm-line":{maxWidth:"fit-content",background:"hsla(50,23%,5%,0.6)",padding:"0px"},".ͼo .cm-activeLine":{backgroundColor:"hsla(50,23%,5%,0.6)"},"& .ͼo":{color:"white"},"& .cm-tooltip.cm-tooltip-autocomplete > ul":{minWidth:"80px",fontFamily:"'Roboto Mono', monospace"},"&.cm-focused":{outline:"none"},"& .cm-gutters":{background:"none"},"& .cm-tooltip":{background:"rgba(0, 0, 0, 0.5)"},"& .cm-tooltip-autocomplete > ul > li[aria-selected]":{color:"white",backgroundColor:"rgba(255, 0, 0, 0.7)"},".cm-completionInfo":{fontFamily:"'Roboto Mono', monospace",fontStyle:"italic",padding:"1.5px 9px"},".cm-completionIcon":{width:"4px",height:"10px",opacity:1,paddingRight:"0px",marginRight:"6px"},".cm-completionIcon-src":{backgroundColor:"orange"},".cm-completionIcon-coord":{backgroundColor:"yellow"},".cm-completionIcon-color":{backgroundColor:"lightgreen"},".cm-completionIcon-combine":{backgroundColor:"lightblue"},".cm-completionIcon-combineCoord":{backgroundColor:"purple"},".cm-completionIcon-src:after":{content:"ƒ"},".cm-panels":{background:"none"},".cm-panels.cm-panels-bottom":{border:"none"},".cm-diagnostic-info":{border:"none"},".cm-diagnostic-error":{background:"none",color:"red"},".cm-panel.cm-panel-lint ul [aria-selected]":{backgroundColor:"rgba(0, 0, 0, 0)"},".cm-lint-marker-info":{content:"none"},".cm-cursor":{borderLeft:"4px solid white",borderRight:"4px solid black"}});[TN(),NC(),sM(),RC(),qI(),lt.allowMultipleSelections.of(!0),nD(),qc(bJ),qc(lk,{fallback:!0}),TD(),PU(),$U(),fN(),gN(),zB(),Of.of([...GU,...DM,...cU,...uM,...pD,...ik,...oJ]),_J,xJ];[NC(),sM(),RC(),qc(_D,{fallback:!0}),Of.of([...DM,...uM])];ze.define();Te.theme({"@keyframes cm-eval-flash":{from:{backgroundColor:"#FFFFFF"},to:{backgroundColor:"#FFFFFF00"}},"& .cm-evaluated":{animation:"cm-eval-flash 0.7s"}});var uk={exports:{}},Bl={},Xh={exports:{}},Md={},kd={},Sb;function V0(){if(Sb)return kd;Sb=1;function t(n){this.__parent=n,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}t.prototype.clone_empty=function(){var n=new t(this.__parent);return n.set_indent(this.__indent_count,this.__alignment_count),n},t.prototype.item=function(n){return n<0?this.__items[this.__items.length+n]:this.__items[n]},t.prototype.has_match=function(n){for(var r=this.__items.length-1;r>=0;r--)if(this.__items[r].match(n))return!0;return!1},t.prototype.set_indent=function(n,r){this.is_empty()&&(this.__indent_count=n||0,this.__alignment_count=r||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},t.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},t.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},t.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var n=this.__parent.current_line;return n.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),n.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),n.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,n.__items[0]===" "&&(n.__items.splice(0,1),n.__character_count-=1),!0}return!1},t.prototype.is_empty=function(){return this.__items.length===0},t.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},t.prototype.push=function(n){this.__items.push(n);var r=n.lastIndexOf(`
`);r!==-1?this.__character_count=n.length-r:this.__character_count+=n.length},t.prototype.pop=function(){var n=null;return this.is_empty()||(n=this.__items.pop(),this.__character_count-=n.length),n},t.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},t.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},t.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},t.prototype.toString=function(){var n="";return this.is_empty()?this.__parent.indent_empty_lines&&(n=this.__parent.get_indent_string(this.__indent_count)):(n=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),n+=this.__items.join("")),n};function e(n,r){this.__cache=[""],this.__indent_size=n.indent_size,this.__indent_string=n.indent_char,n.indent_with_tabs||(this.__indent_string=new Array(n.indent_size+1).join(n.indent_char)),r=r||"",n.indent_level>0&&(r=new Array(n.indent_level+1).join(this.__indent_string)),this.__base_string=r,this.__base_string_length=r.length}e.prototype.get_indent_size=function(n,r){var s=this.__base_string_length;return r=r||0,n<0&&(s=0),s+=n*this.__indent_size,s+=r,s},e.prototype.get_indent_string=function(n,r){var s=this.__base_string;return r=r||0,n<0&&(n=0,s=""),r+=n*this.__indent_size,this.__ensure_cache(r),s+=this.__cache[r],s},e.prototype.__ensure_cache=function(n){for(;n>=this.__cache.length;)this.__add_column()},e.prototype.__add_column=function(){var n=this.__cache.length,r=0,s="";this.__indent_size&&n>=this.__indent_size&&(r=Math.floor(n/this.__indent_size),n-=r*this.__indent_size,s=new Array(r+1).join(this.__indent_string)),n&&(s+=new Array(n+1).join(" ")),this.__cache.push(s)};function i(n,r){this.__indent_cache=new e(n,r),this.raw=!1,this._end_with_newline=n.end_with_newline,this.indent_size=n.indent_size,this.wrap_line_length=n.wrap_line_length,this.indent_empty_lines=n.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new t(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}return i.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},i.prototype.get_line_number=function(){return this.__lines.length},i.prototype.get_indent_string=function(n,r){return this.__indent_cache.get_indent_string(n,r)},i.prototype.get_indent_size=function(n,r){return this.__indent_cache.get_indent_size(n,r)},i.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},i.prototype.add_new_line=function(n){return this.is_empty()||!n&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)},i.prototype.get_code=function(n){this.trim(!0);var r=this.current_line.pop();r&&(r[r.length-1]===`
`&&(r=r.replace(/\n+$/g,"")),this.current_line.push(r)),this._end_with_newline&&this.__add_outputline();var s=this.__lines.join(`
`);return n!==`
`&&(s=s.replace(/[\n]/g,n)),s},i.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},i.prototype.set_indent=function(n,r){return n=n||0,r=r||0,this.next_line.set_indent(n,r),this.__lines.length>1?(this.current_line.set_indent(n,r),!0):(this.current_line.set_indent(),!1)},i.prototype.add_raw_token=function(n){for(var r=0;r<n.newlines;r++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(n.whitespace_before),this.current_line.push(n.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},i.prototype.add_token=function(n){this.__add_space_before_token(),this.current_line.push(n),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},i.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},i.prototype.remove_indent=function(n){for(var r=this.__lines.length;n<r;)this.__lines[n]._remove_indent(),n++;this.current_line._remove_wrap_indent()},i.prototype.trim=function(n){for(n=n===void 0?!1:n,this.current_line.trim();n&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},i.prototype.just_added_newline=function(){return this.current_line.is_empty()},i.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},i.prototype.ensure_empty_line_above=function(n,r){for(var s=this.__lines.length-2;s>=0;){var a=this.__lines[s];if(a.is_empty())break;if(a.item(0).indexOf(n)!==0&&a.item(-1)!==r){this.__lines.splice(s+1,0,new t(this)),this.previous_line=this.__lines[this.__lines.length-2];break}s--}},kd.Output=i,kd}var Td={},Cb;function hk(){if(Cb)return Td;Cb=1;function t(e,i,n,r){this.type=e,this.text=i,this.comments_before=null,this.newlines=n||0,this.whitespace_before=r||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}return Td.Token=t,Td}var Ed={},Mb;function ck(){return Mb||(Mb=1,function(t){var e="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",i="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",n="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",r="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",s="(?:\\\\u[0-9a-fA-F]{4}|["+e+n+"])",a="(?:\\\\u[0-9a-fA-F]{4}|["+i+n+r+"])*";t.identifier=new RegExp(s+a,"g"),t.identifierStart=new RegExp(s),t.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+i+n+r+"])+"),t.newline=/[\n\r\u2028\u2029]/,t.lineBreak=new RegExp(`\r
|`+t.newline.source),t.allLineBreaks=new RegExp(t.lineBreak.source,"g")}(Ed)),Ed}var Ad={},Ul={},kb;function K0(){if(kb)return Ul;kb=1;function t(n,r){this.raw_options=e(n,r),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}t.prototype._get_array=function(n,r){var s=this.raw_options[n],a=r||[];return typeof s=="object"?s!==null&&typeof s.concat=="function"&&(a=s.concat()):typeof s=="string"&&(a=s.split(/[^a-zA-Z0-9_\/\-]+/)),a},t.prototype._get_boolean=function(n,r){var s=this.raw_options[n],a=s===void 0?!!r:!!s;return a},t.prototype._get_characters=function(n,r){var s=this.raw_options[n],a=r||"";return typeof s=="string"&&(a=s.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),a},t.prototype._get_number=function(n,r){var s=this.raw_options[n];r=parseInt(r,10),isNaN(r)&&(r=0);var a=parseInt(s,10);return isNaN(a)&&(a=r),a},t.prototype._get_selection=function(n,r,s){var a=this._get_selection_list(n,r,s);if(a.length!==1)throw new Error("Invalid Option Value: The option '"+n+`' can only be one of the following values:
`+r+`
You passed in: '`+this.raw_options[n]+"'");return a[0]},t.prototype._get_selection_list=function(n,r,s){if(!r||r.length===0)throw new Error("Selection list cannot be empty.");if(s=s||[r[0]],!this._is_valid_selection(s,r))throw new Error("Invalid Default Value!");var a=this._get_array(n,s);if(!this._is_valid_selection(a,r))throw new Error("Invalid Option Value: The option '"+n+`' can contain only the following values:
`+r+`
You passed in: '`+this.raw_options[n]+"'");return a},t.prototype._is_valid_selection=function(n,r){return n.length&&r.length&&!n.some(function(s){return r.indexOf(s)===-1})};function e(n,r){var s={};n=i(n);var a;for(a in n)a!==r&&(s[a]=n[a]);if(r&&n[r])for(a in n[r])s[a]=n[r][a];return s}function i(n){var r={},s;for(s in n){var a=s.replace(/-/g,"_");r[a]=n[s]}return r}return Ul.Options=t,Ul.normalizeOpts=i,Ul.mergeOpts=e,Ul}var Tb;function fk(){if(Tb)return Ad;Tb=1;var t=K0().Options,e=["before-newline","after-newline","preserve-newline"];function i(n){t.call(this,n,"js");var r=this.raw_options.brace_style||null;r==="expand-strict"?this.raw_options.brace_style="expand":r==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var s=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var a=0;a<s.length;a++)s[a]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=s[a];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",e),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}return i.prototype=new t,Ad.Options=i,Ad}var Vo={},Rd={},Eb;function z0(){if(Eb)return Rd;Eb=1;var t=RegExp.prototype.hasOwnProperty("sticky");function e(i){this.__input=i||"",this.__input_length=this.__input.length,this.__position=0}return e.prototype.restart=function(){this.__position=0},e.prototype.back=function(){this.__position>0&&(this.__position-=1)},e.prototype.hasNext=function(){return this.__position<this.__input_length},e.prototype.next=function(){var i=null;return this.hasNext()&&(i=this.__input.charAt(this.__position),this.__position+=1),i},e.prototype.peek=function(i){var n=null;return i=i||0,i+=this.__position,i>=0&&i<this.__input_length&&(n=this.__input.charAt(i)),n},e.prototype.__match=function(i,n){i.lastIndex=n;var r=i.exec(this.__input);return r&&!(t&&i.sticky)&&r.index!==n&&(r=null),r},e.prototype.test=function(i,n){return n=n||0,n+=this.__position,n>=0&&n<this.__input_length?!!this.__match(i,n):!1},e.prototype.testChar=function(i,n){var r=this.peek(n);return i.lastIndex=0,r!==null&&i.test(r)},e.prototype.match=function(i){var n=this.__match(i,this.__position);return n?this.__position+=n[0].length:n=null,n},e.prototype.read=function(i,n,r){var s="",a;return i&&(a=this.match(i),a&&(s+=a[0])),n&&(a||!i)&&(s+=this.readUntil(n,r)),s},e.prototype.readUntil=function(i,n){var r="",s=this.__position;i.lastIndex=this.__position;var a=i.exec(this.__input);return a?(s=a.index,n&&(s+=a[0].length)):s=this.__input_length,r=this.__input.substring(this.__position,s),this.__position=s,r},e.prototype.readUntilAfter=function(i){return this.readUntil(i,!0)},e.prototype.get_regexp=function(i,n){var r=null,s="g";return n&&t&&(s="y"),typeof i=="string"&&i!==""?r=new RegExp(i,s):i&&(r=new RegExp(i.source,s)),r},e.prototype.get_literal_regexp=function(i){return RegExp(i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},e.prototype.peekUntilAfter=function(i){var n=this.__position,r=this.readUntilAfter(i);return this.__position=n,r},e.prototype.lookBack=function(i){var n=this.__position-1;return n>=i.length&&this.__input.substring(n-i.length,n).toLowerCase()===i},Rd.InputScanner=e,Rd}var ec={},Ld={},Ab;function SJ(){if(Ab)return Ld;Ab=1;function t(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}return t.prototype.restart=function(){this.__position=0},t.prototype.isEmpty=function(){return this.__tokens_length===0},t.prototype.hasNext=function(){return this.__position<this.__tokens_length},t.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},t.prototype.peek=function(e){var i=null;return e=e||0,e+=this.__position,e>=0&&e<this.__tokens_length&&(i=this.__tokens[e]),i},t.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},Ld.TokenStream=t,Ld}var Od={},Id={},Rb;function Wf(){if(Rb)return Id;Rb=1;function t(e,i){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,i&&(this._starting_pattern=this._input.get_regexp(i._starting_pattern,!0),this._match_pattern=this._input.get_regexp(i._match_pattern,!0),this._until_pattern=this._input.get_regexp(i._until_pattern),this._until_after=i._until_after)}return t.prototype.read=function(){var e=this._input.read(this._starting_pattern);return(!this._starting_pattern||e)&&(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},t.prototype.read_match=function(){return this._input.match(this._match_pattern)},t.prototype.until_after=function(e){var i=this._create();return i._until_after=!0,i._until_pattern=this._input.get_regexp(e),i._update(),i},t.prototype.until=function(e){var i=this._create();return i._until_after=!1,i._until_pattern=this._input.get_regexp(e),i._update(),i},t.prototype.starting_with=function(e){var i=this._create();return i._starting_pattern=this._input.get_regexp(e,!0),i._update(),i},t.prototype.matching=function(e){var i=this._create();return i._match_pattern=this._input.get_regexp(e,!0),i._update(),i},t.prototype._create=function(){return new t(this._input,this)},t.prototype._update=function(){},Id.Pattern=t,Id}var Lb;function CJ(){if(Lb)return Od;Lb=1;var t=Wf().Pattern;function e(i,n){t.call(this,i,n),n?this._line_regexp=this._input.get_regexp(n._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}return e.prototype=new t,e.prototype.__set_whitespace_patterns=function(i,n){i+="\\t ",n+="\\n\\r",this._match_pattern=this._input.get_regexp("["+i+n+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+n+"]")},e.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var i=this._input.read(this._match_pattern);if(i===" ")this.whitespace_before_token=" ";else if(i){var n=this.__split(this._newline_regexp,i);this.newline_count=n.length-1,this.whitespace_before_token=n[this.newline_count]}return i},e.prototype.matching=function(i,n){var r=this._create();return r.__set_whitespace_patterns(i,n),r._update(),r},e.prototype._create=function(){return new e(this._input,this)},e.prototype.__split=function(i,n){i.lastIndex=0;for(var r=0,s=[],a=i.exec(n);a;)s.push(n.substring(r,a.index)),r=a.index+a[0].length,a=i.exec(n);return r<n.length?s.push(n.substring(r,n.length)):s.push(""),s},Od.WhitespacePattern=e,Od}var Ob;function lf(){if(Ob)return ec;Ob=1;var t=z0().InputScanner,e=hk().Token,i=SJ().TokenStream,n=CJ().WhitespacePattern,r={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},s=function(a,l){this._input=new t(a),this._options=l||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new n(this._input)};return s.prototype.tokenize=function(){this._input.restart(),this.__tokens=new i,this._reset();for(var a,l=new e(r.START,""),h=null,p=[],d=new i;l.type!==r.EOF;){for(a=this._get_next_token(l,h);this._is_comment(a);)d.add(a),a=this._get_next_token(l,h);d.isEmpty()||(a.comments_before=d,d=new i),a.parent=h,this._is_opening(a)?(p.push(h),h=a):h&&this._is_closing(a,h)&&(a.opened=h,h.closed=a,h=p.pop(),a.parent=h),a.previous=l,l.next=a,this.__tokens.add(a),l=a}return this.__tokens},s.prototype._is_first_token=function(){return this.__tokens.isEmpty()},s.prototype._reset=function(){},s.prototype._get_next_token=function(a,l){this._readWhitespace();var h=this._input.read(/.+/g);return h?this._create_token(r.RAW,h):this._create_token(r.EOF,"")},s.prototype._is_comment=function(a){return!1},s.prototype._is_opening=function(a){return!1},s.prototype._is_closing=function(a,l){return!1},s.prototype._create_token=function(a,l){var h=new e(a,l,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return h},s.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},ec.Tokenizer=s,ec.TOKEN=r,ec}var Nd={},Ib;function H0(){if(Ib)return Nd;Ib=1;function t(e,i){e=typeof e=="string"?e:e.source,i=typeof i=="string"?i:i.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+i,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+i,"g")}return t.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var i={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(e);n;)i[n[1]]=n[2],n=this.__directive_pattern.exec(e);return i},t.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},Nd.Directives=t,Nd}var Dd={},Nb;function pk(){if(Nb)return Dd;Nb=1;var t=Wf().Pattern,e={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function i(n,r){t.call(this,n,r),this.__template_pattern=null,this._disabled=Object.assign({},e),this._excluded=Object.assign({},e),r&&(this.__template_pattern=this._input.get_regexp(r.__template_pattern),this._excluded=Object.assign(this._excluded,r._excluded),this._disabled=Object.assign(this._disabled,r._disabled));var s=new t(n);this.__patterns={handlebars_comment:s.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:s.starting_with(/{{{/).until_after(/}}}/),handlebars:s.starting_with(/{{/).until_after(/}}/),php:s.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:s.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:s.starting_with(/{%/).until_after(/%}/),django_value:s.starting_with(/{{/).until_after(/}}/),django_comment:s.starting_with(/{#/).until_after(/#}/),smarty:s.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:s.starting_with(/{\*/).until_after(/\*}/),smarty_literal:s.starting_with(/{literal}/).until_after(/{\/literal}/)}}return i.prototype=new t,i.prototype._create=function(){return new i(this._input,this)},i.prototype._update=function(){this.__set_templated_pattern()},i.prototype.disable=function(n){var r=this._create();return r._disabled[n]=!0,r._update(),r},i.prototype.read_options=function(n){var r=this._create();for(var s in e)r._disabled[s]=n.templating.indexOf(s)===-1;return r._update(),r},i.prototype.exclude=function(n){var r=this._create();return r._excluded[n]=!0,r._update(),r},i.prototype.read=function(){var n="";this._match_pattern?n=this._input.read(this._starting_pattern):n=this._input.read(this._starting_pattern,this.__template_pattern);for(var r=this._read_template();r;)this._match_pattern?r+=this._input.read(this._match_pattern):r+=this._input.readUntil(this.__template_pattern),n+=r,r=this._read_template();return this._until_after&&(n+=this._input.readUntilAfter(this._until_pattern)),n},i.prototype.__set_templated_pattern=function(){var n=[];this._disabled.php||n.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||n.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||n.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(n.push(this.__patterns.django._starting_pattern.source),n.push(this.__patterns.django_value._starting_pattern.source),n.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||n.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&n.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+n.join("|")+")")},i.prototype._read_template=function(){var n="",r=this._input.peek();if(r==="<"){var s=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&s==="?"&&(n=n||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&s==="%"&&(n=n||this.__patterns.erb.read())}else r==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(n=n||this.__patterns.handlebars_comment.read(),n=n||this.__patterns.handlebars_unescaped.read(),n=n||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(n=n||this.__patterns.django_value.read()),this._excluded.django||(n=n||this.__patterns.django_comment.read(),n=n||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(n=n||this.__patterns.smarty_comment.read(),n=n||this.__patterns.smarty_literal.read(),n=n||this.__patterns.smarty.read()));return n},Dd.TemplatablePattern=i,Dd}var Db;function tc(){if(Db)return Vo;Db=1;var t=z0().InputScanner,e=lf().Tokenizer,i=lf().TOKEN,n=H0().Directives,r=ck(),s=Wf().Pattern,a=pk().TemplatablePattern;function l(O,F){return F.indexOf(O)!==-1}var h={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:i.START,RAW:i.RAW,EOF:i.EOF},p=new n(/\/\*/,/\*\//),d=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,m=/[0-9]/,y=/[^\d\.]/,v=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),S=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";S=S.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),S="\\?\\.(?!\\d) "+S,S=S.replace(/ /g,"|");var M=new RegExp(S),b="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),w=b.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),E=new RegExp("^(?:"+w.join("|")+")$"),B,L=function(O,F){e.call(this,O,F),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var U=new s(this._input),V=new a(this._input).read_options(this._options);this.__patterns={template:V,identifier:V.starting_with(r.identifier).matching(r.identifierMatch),number:U.matching(d),punct:U.matching(M),comment:U.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:U.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:U.matching(/<!--/),html_comment_end:U.matching(/-->/),include:U.starting_with(/#include/).until_after(r.lineBreak),shebang:U.starting_with(/#!/).until_after(r.lineBreak),xml:U.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:V.until(/['\\\n\r\u2028\u2029]/),double_quote:V.until(/["\\\n\r\u2028\u2029]/),template_text:V.until(/[`\\$]/),template_expression:V.until(/[`}\\]/)}};L.prototype=new e,L.prototype._is_comment=function(O){return O.type===h.COMMENT||O.type===h.BLOCK_COMMENT||O.type===h.UNKNOWN},L.prototype._is_opening=function(O){return O.type===h.START_BLOCK||O.type===h.START_EXPR},L.prototype._is_closing=function(O,F){return(O.type===h.END_BLOCK||O.type===h.END_EXPR)&&F&&(O.text==="]"&&F.text==="["||O.text===")"&&F.text==="("||O.text==="}"&&F.text==="{")},L.prototype._reset=function(){B=!1},L.prototype._get_next_token=function(O,F){var U=null;this._readWhitespace();var V=this._input.peek();return V===null?this._create_token(h.EOF,""):(U=U||this._read_non_javascript(V),U=U||this._read_string(V),U=U||this._read_pair(V,this._input.peek(1)),U=U||this._read_word(O),U=U||this._read_singles(V),U=U||this._read_comment(V),U=U||this._read_regexp(V,O),U=U||this._read_xml(V,O),U=U||this._read_punctuation(),U=U||this._create_token(h.UNKNOWN,this._input.next()),U)},L.prototype._read_word=function(O){var F;if(F=this.__patterns.identifier.read(),F!=="")return F=F.replace(r.allLineBreaks,`
`),!(O.type===h.DOT||O.type===h.RESERVED&&(O.text==="set"||O.text==="get"))&&E.test(F)?(F==="in"||F==="of")&&(O.type===h.WORD||O.type===h.STRING)?this._create_token(h.OPERATOR,F):this._create_token(h.RESERVED,F):this._create_token(h.WORD,F);if(F=this.__patterns.number.read(),F!=="")return this._create_token(h.WORD,F)},L.prototype._read_singles=function(O){var F=null;return O==="("||O==="["?F=this._create_token(h.START_EXPR,O):O===")"||O==="]"?F=this._create_token(h.END_EXPR,O):O==="{"?F=this._create_token(h.START_BLOCK,O):O==="}"?F=this._create_token(h.END_BLOCK,O):O===";"?F=this._create_token(h.SEMICOLON,O):O==="."&&y.test(this._input.peek(1))?F=this._create_token(h.DOT,O):O===","&&(F=this._create_token(h.COMMA,O)),F&&this._input.next(),F},L.prototype._read_pair=function(O,F){var U=null;return O==="#"&&F==="{"&&(U=this._create_token(h.START_BLOCK,O+F)),U&&(this._input.next(),this._input.next()),U},L.prototype._read_punctuation=function(){var O=this.__patterns.punct.read();if(O!=="")return O==="="?this._create_token(h.EQUALS,O):O==="?."?this._create_token(h.DOT,O):this._create_token(h.OPERATOR,O)},L.prototype._read_non_javascript=function(O){var F="";if(O==="#"){if(this._is_first_token()&&(F=this.__patterns.shebang.read(),F))return this._create_token(h.UNKNOWN,F.trim()+`
`);if(F=this.__patterns.include.read(),F)return this._create_token(h.UNKNOWN,F.trim()+`
`);O=this._input.next();var U="#";if(this._input.hasNext()&&this._input.testChar(m)){do O=this._input.next(),U+=O;while(this._input.hasNext()&&O!=="#"&&O!=="=");return O==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(U+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(U+="{}",this._input.next(),this._input.next())),this._create_token(h.WORD,U)}this._input.back()}else if(O==="<"&&this._is_first_token()){if(F=this.__patterns.html_comment_start.read(),F){for(;this._input.hasNext()&&!this._input.testChar(r.newline);)F+=this._input.next();return B=!0,this._create_token(h.COMMENT,F)}}else if(B&&O==="-"&&(F=this.__patterns.html_comment_end.read(),F))return B=!1,this._create_token(h.COMMENT,F);return null},L.prototype._read_comment=function(O){var F=null;if(O==="/"){var U="";if(this._input.peek(1)==="*"){U=this.__patterns.block_comment.read();var V=p.get_directives(U);V&&V.ignore==="start"&&(U+=p.readIgnored(this._input)),U=U.replace(r.allLineBreaks,`
`),F=this._create_token(h.BLOCK_COMMENT,U),F.directives=V}else this._input.peek(1)==="/"&&(U=this.__patterns.comment.read(),F=this._create_token(h.COMMENT,U))}return F},L.prototype._read_string=function(O){if(O==="`"||O==="'"||O==='"'){var F=this._input.next();return this.has_char_escapes=!1,O==="`"?F+=this._read_string_recursive("`",!0,"${"):F+=this._read_string_recursive(O),this.has_char_escapes&&this._options.unescape_strings&&(F=I(F)),this._input.peek()===O&&(F+=this._input.next()),F=F.replace(r.allLineBreaks,`
`),this._create_token(h.STRING,F)}return null},L.prototype._allow_regexp_or_xml=function(O){return O.type===h.RESERVED&&l(O.text,["return","case","throw","else","do","typeof","yield"])||O.type===h.END_EXPR&&O.text===")"&&O.opened.previous.type===h.RESERVED&&l(O.opened.previous.text,["if","while","for"])||l(O.type,[h.COMMENT,h.START_EXPR,h.START_BLOCK,h.START,h.END_BLOCK,h.OPERATOR,h.EQUALS,h.EOF,h.SEMICOLON,h.COMMA])},L.prototype._read_regexp=function(O,F){if(O==="/"&&this._allow_regexp_or_xml(F)){for(var U=this._input.next(),V=!1,A=!1;this._input.hasNext()&&(V||A||this._input.peek()!==O)&&!this._input.testChar(r.newline);)U+=this._input.peek(),V?V=!1:(V=this._input.peek()==="\\",this._input.peek()==="["?A=!0:this._input.peek()==="]"&&(A=!1)),this._input.next();return this._input.peek()===O&&(U+=this._input.next(),U+=this._input.read(r.identifier)),this._create_token(h.STRING,U)}return null},L.prototype._read_xml=function(O,F){if(this._options.e4x&&O==="<"&&this._allow_regexp_or_xml(F)){var U="",V=this.__patterns.xml.read_match();if(V){for(var A=V[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),Q=A.indexOf("{")===0,H=0;V;){var re=!!V[1],le=V[2],q=!!V[V.length-1]||le.slice(0,8)==="![CDATA[";if(!q&&(le===A||Q&&le.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(re?--H:++H),U+=V[0],H<=0)break;V=this.__patterns.xml.read_match()}return V||(U+=this._input.match(/[\s\S]*/g)[0]),U=U.replace(r.allLineBreaks,`
`),this._create_token(h.STRING,U)}}return null};function I(O){for(var F="",U=0,V=new t(O),A=null;V.hasNext();)if(A=V.match(/([\s]|[^\\]|\\\\)+/g),A&&(F+=A[0]),V.peek()==="\\"){if(V.next(),V.peek()==="x")A=V.match(/x([0-9A-Fa-f]{2})/g);else if(V.peek()==="u")A=V.match(/u([0-9A-Fa-f]{4})/g);else{F+="\\",V.hasNext()&&(F+=V.next());continue}if(!A||(U=parseInt(A[1],16),U>126&&U<=255&&A[0].indexOf("x")===0))return O;if(U>=0&&U<32){F+="\\"+A[0];continue}else U===34||U===39||U===92?F+="\\"+String.fromCharCode(U):F+=String.fromCharCode(U)}return F}return L.prototype._read_string_recursive=function(O,F,U){var V,A;O==="'"?A=this.__patterns.single_quote:O==='"'?A=this.__patterns.double_quote:O==="`"?A=this.__patterns.template_text:O==="}"&&(A=this.__patterns.template_expression);for(var Q=A.read(),H="";this._input.hasNext();){if(H=this._input.next(),H===O||!F&&r.newline.test(H)){this._input.back();break}else H==="\\"&&this._input.hasNext()?(V=this._input.peek(),V==="x"||V==="u"?this.has_char_escapes=!0:V==="\r"&&this._input.peek(1)===`
`&&this._input.next(),H+=this._input.next()):U&&(U==="${"&&H==="$"&&this._input.peek()==="{"&&(H+=this._input.next()),U===H&&(O==="`"?H+=this._read_string_recursive("}",F,"`"):H+=this._read_string_recursive("`",F,"${"),this._input.hasNext()&&(H+=this._input.next())));H+=A.read(),Q+=H}return Q},Vo.Tokenizer=L,Vo.TOKEN=h,Vo.positionable_operators=v.slice(),Vo.line_starters=b.slice(),Vo}var Bb;function MJ(){if(Bb)return Md;Bb=1;var t=V0().Output,e=hk().Token,i=ck(),n=fk().Options,r=tc().Tokenizer,s=tc().line_starters,a=tc().positionable_operators,l=tc().TOKEN;function h(A,Q){return Q.indexOf(A)!==-1}function p(A){return A.replace(/^\s+/g,"")}function d(A){for(var Q={},H=0;H<A.length;H++)Q[A[H].replace(/-/g,"_")]=A[H];return Q}function m(A,Q){return A&&A.type===l.RESERVED&&A.text===Q}function y(A,Q){return A&&A.type===l.RESERVED&&h(A.text,Q)}var v=["case","return","do","if","throw","else","await","break","continue","async"],S=["before-newline","after-newline","preserve-newline"],M=d(S),b=[M.before_newline,M.preserve_newline],w={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function E(A,Q){Q.multiline_frame||Q.mode===w.ForInitializer||Q.mode===w.Conditional||A.remove_indent(Q.start_line_index)}function B(A){A=A.replace(i.allLineBreaks,`
`);for(var Q=[],H=A.indexOf(`
`);H!==-1;)Q.push(A.substring(0,H)),A=A.substring(H+1),H=A.indexOf(`
`);return A.length&&Q.push(A),Q}function L(A){return A===w.ArrayLiteral}function I(A){return h(A,[w.Expression,w.ForInitializer,w.Conditional])}function O(A,Q){for(var H=0;H<A.length;H++){var re=A[H].trim();if(re.charAt(0)!==Q)return!1}return!0}function F(A,Q){for(var H=0,re=A.length,le;H<re;H++)if(le=A[H],le&&le.indexOf(Q)!==0)return!1;return!0}function U(A,Q){Q=Q||{},this._source_text=A||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new n(Q)}U.prototype.create_flags=function(A,Q){var H=0;A&&(H=A.indentation_level,!this._output.just_added_newline()&&A.line_indent_level>H&&(H=A.line_indent_level));var re={mode:Q,parent:A,last_token:A?A.last_token:new e(l.START_BLOCK,""),last_word:A?A.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:H,alignment:0,line_indent_level:A?A.line_indent_level:H,start_line_index:this._output.get_line_number(),ternary_depth:0};return re},U.prototype._reset=function(A){var Q=A.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new t(this._options,Q),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(w.BlockStatement);var H=new r(A,this._options);return this._tokens=H.tokenize(),A},U.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var A,Q=this._reset(this._source_text),H=this._options.eol;this._options.eol==="auto"&&(H=`
`,Q&&i.lineBreak.test(Q||"")&&(H=Q.match(i.lineBreak)[0]));for(var re=this._tokens.next();re;)this.handle_token(re),this._last_last_text=this._flags.last_token.text,this._flags.last_token=re,re=this._tokens.next();return A=this._output.get_code(H),A},U.prototype.handle_token=function(A,Q){A.type===l.START_EXPR?this.handle_start_expr(A):A.type===l.END_EXPR?this.handle_end_expr(A):A.type===l.START_BLOCK?this.handle_start_block(A):A.type===l.END_BLOCK?this.handle_end_block(A):A.type===l.WORD?this.handle_word(A):A.type===l.RESERVED?this.handle_word(A):A.type===l.SEMICOLON?this.handle_semicolon(A):A.type===l.STRING?this.handle_string(A):A.type===l.EQUALS?this.handle_equals(A):A.type===l.OPERATOR?this.handle_operator(A):A.type===l.COMMA?this.handle_comma(A):A.type===l.BLOCK_COMMENT?this.handle_block_comment(A,Q):A.type===l.COMMENT?this.handle_comment(A,Q):A.type===l.DOT?this.handle_dot(A):A.type===l.EOF?this.handle_eof(A):A.type===l.UNKNOWN?this.handle_unknown(A,Q):this.handle_unknown(A,Q)},U.prototype.handle_whitespace_and_comments=function(A,Q){var H=A.newlines,re=this._options.keep_array_indentation&&L(this._flags.mode);if(A.comments_before)for(var le=A.comments_before.next();le;)this.handle_whitespace_and_comments(le,Q),this.handle_token(le,Q),le=A.comments_before.next();if(re)for(var q=0;q<H;q+=1)this.print_newline(q>0,Q);else if(this._options.max_preserve_newlines&&H>this._options.max_preserve_newlines&&(H=this._options.max_preserve_newlines),this._options.preserve_newlines&&H>1){this.print_newline(!1,Q);for(var Z=1;Z<H;Z+=1)this.print_newline(!0,Q)}};var V=["async","break","continue","return","throw","yield"];return U.prototype.allow_wrap_or_preserved_newline=function(A,Q){if(Q=Q===void 0?!1:Q,!this._output.just_added_newline()){var H=this._options.preserve_newlines&&A.newlines||Q,re=h(this._flags.last_token.text,a)||h(A.text,a);if(re){var le=h(this._flags.last_token.text,a)&&h(this._options.operator_position,b)||h(A.text,a);H=H&&le}if(H)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(y(this._flags.last_token,V))return;this._output.set_wrap_point()}}},U.prototype.print_newline=function(A,Q){if(!Q&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==l.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var H=this._tokens.peek();this._flags.mode===w.Statement&&!(this._flags.if_block&&m(H,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(A)&&(this._flags.multiline_frame=!0)},U.prototype.print_token_line_indentation=function(A){this._output.just_added_newline()&&(this._options.keep_array_indentation&&A.newlines&&(A.text==="["||L(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(A.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},U.prototype.print_token=function(A){if(this._output.raw){this._output.add_raw_token(A);return}if(this._options.comma_first&&A.previous&&A.previous.type===l.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var Q=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(Q),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(A),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(A),this._output.non_breaking_space=!0,this._output.add_token(A.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)},U.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},U.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},U.prototype.set_mode=function(A){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,A),this._flags=this.create_flags(this._previous_flags,A),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},U.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===w.Statement&&E(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},U.prototype.start_of_object_property=function(){return this._flags.parent.mode===w.ObjectLiteral&&this._flags.mode===w.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||y(this._flags.last_token,["get","set"]))},U.prototype.start_of_statement=function(A){var Q=!1;return Q=Q||y(this._flags.last_token,["var","let","const"])&&A.type===l.WORD,Q=Q||m(this._flags.last_token,"do"),Q=Q||!(this._flags.parent.mode===w.ObjectLiteral&&this._flags.mode===w.Statement)&&y(this._flags.last_token,V)&&!A.newlines,Q=Q||m(this._flags.last_token,"else")&&!(m(A,"if")&&!A.comments_before),Q=Q||this._flags.last_token.type===l.END_EXPR&&(this._previous_flags.mode===w.ForInitializer||this._previous_flags.mode===w.Conditional),Q=Q||this._flags.last_token.type===l.WORD&&this._flags.mode===w.BlockStatement&&!this._flags.in_case&&!(A.text==="--"||A.text==="++")&&this._last_last_text!=="function"&&A.type!==l.WORD&&A.type!==l.RESERVED,Q=Q||this._flags.mode===w.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||y(this._flags.last_token,["get","set"])),Q?(this.set_mode(w.Statement),this.indent(),this.handle_whitespace_and_comments(A,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(A,y(A,["do","for","if","while"])),!0):!1},U.prototype.handle_start_expr=function(A){this.start_of_statement(A)||this.handle_whitespace_and_comments(A);var Q=w.Expression;if(A.text==="["){if(this._flags.last_token.type===l.WORD||this._flags.last_token.text===")"){y(this._flags.last_token,s)&&(this._output.space_before_token=!0),this.print_token(A),this.set_mode(Q),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}Q=w.ArrayLiteral,L(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),h(this._flags.last_token.type,[l.START_EXPR,l.END_EXPR,l.WORD,l.OPERATOR,l.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===l.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,Q=w.ForInitializer):h(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,Q=w.Conditional):h(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&A.whitespace_before===""?this._output.space_before_token=!1:(h(this._flags.last_token.text,s)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===l.EQUALS||this._flags.last_token.type===l.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(A);else if(this._flags.last_token.type===l.WORD){this._output.space_before_token=!1;var H=this._tokens.peek(-3);if(this._options.space_after_named_function&&H){var re=this._tokens.peek(-4);y(H,["async","function"])||H.text==="*"&&y(re,["async","function"])?this._output.space_before_token=!0:this._flags.mode===w.ObjectLiteral?(H.text==="{"||H.text===","||H.text==="*"&&(re.text==="{"||re.text===","))&&(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(A);(this._flags.last_token.type===l.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(h(this._last_last_text,["function","yield"])||this._flags.mode===w.ObjectLiteral&&h(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===l.START_BLOCK?this.print_newline():(this._flags.last_token.type===l.END_EXPR||this._flags.last_token.type===l.START_EXPR||this._flags.last_token.type===l.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===l.COMMA)&&this.allow_wrap_or_preserved_newline(A,A.newlines),this.print_token(A),this.set_mode(Q),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},U.prototype.handle_end_expr=function(A){for(;this._flags.mode===w.Statement;)this.restore_mode();this.handle_whitespace_and_comments(A),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(A,A.text==="]"&&L(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===l.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(A),this.restore_mode(),E(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===w.Conditional&&(this._previous_flags.mode=w.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},U.prototype.handle_start_block=function(A){this.handle_whitespace_and_comments(A);var Q=this._tokens.peek(),H=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===l.END_EXPR?(this.set_mode(w.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(w.BlockStatement):H&&(h(H.text,[":",","])&&h(Q.type,[l.STRING,l.WORD,l.RESERVED])||h(Q.text,["get","set","..."])&&h(H.type,[l.WORD,l.RESERVED]))?h(this._last_last_text,["class","interface"])&&!h(H.text,[":",","])?this.set_mode(w.BlockStatement):this.set_mode(w.ObjectLiteral):this._flags.last_token.type===l.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(w.BlockStatement):h(this._flags.last_token.type,[l.EQUALS,l.START_EXPR,l.COMMA,l.OPERATOR])||y(this._flags.last_token,["return","throw","import","default"])?this.set_mode(w.ObjectLiteral):this.set_mode(w.BlockStatement),this._flags.last_token&&y(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var re=!Q.comments_before&&Q.text==="}",le=re&&this._flags.last_word==="function"&&this._flags.last_token.type===l.END_EXPR;if(this._options.brace_preserve_inline){var q=0,Z=null;this._flags.inline_frame=!0;do if(q+=1,Z=this._tokens.peek(q-1),Z.newlines){this._flags.inline_frame=!1;break}while(Z.type!==l.EOF&&!(Z.type===l.END_BLOCK&&Z.opened===A))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&A.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==l.OPERATOR&&(le||this._flags.last_token.type===l.EQUALS||y(this._flags.last_token,v)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(L(this._previous_flags.mode)&&(this._flags.last_token.type===l.START_EXPR||this._flags.last_token.type===l.COMMA)&&((this._flags.last_token.type===l.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(A),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==l.OPERATOR&&this._flags.last_token.type!==l.START_EXPR&&(h(this._flags.last_token.type,[l.START_BLOCK,l.SEMICOLON])&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(A),this.indent(),!re&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()},U.prototype.handle_end_block=function(A){for(this.handle_whitespace_and_comments(A);this._flags.mode===w.Statement;)this.restore_mode();var Q=this._flags.last_token.type===l.START_BLOCK;this._flags.inline_frame&&!Q?this._output.space_before_token=!0:this._options.brace_style==="expand"?Q||this.print_newline():Q||(L(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(A)},U.prototype.handle_word=function(A){if(A.type===l.RESERVED){if(h(A.text,["set","get"])&&this._flags.mode!==w.ObjectLiteral)A.type=l.WORD;else if(A.text==="import"&&h(this._tokens.peek().text,["(","."]))A.type=l.WORD;else if(h(A.text,["as","from"])&&!this._flags.import_block)A.type=l.WORD;else if(this._flags.mode===w.ObjectLiteral){var Q=this._tokens.peek();Q.text===":"&&(A.type=l.WORD)}}if(this.start_of_statement(A)?y(this._flags.last_token,["var","let","const"])&&A.type===l.WORD&&(this._flags.declaration_statement=!0):A.newlines&&!I(this._flags.mode)&&(this._flags.last_token.type!==l.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==l.EQUALS&&(this._options.preserve_newlines||!y(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(A),this.print_newline()):this.handle_whitespace_and_comments(A),this._flags.do_block&&!this._flags.do_while)if(m(A,"while")){this._output.space_before_token=!0,this.print_token(A),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&m(A,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===w.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&y(A,["case","default"])){this.print_newline(),!this._flags.case_block&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(A),this._flags.in_case=!0;return}if((this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR||this._flags.last_token.type===l.EQUALS||this._flags.last_token.type===l.OPERATOR)&&(this.start_of_object_property()||this.allow_wrap_or_preserved_newline(A)),m(A,"function")){(h(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(h(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===l.OPERATOR))&&!this._output.just_added_blankline()&&!A.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD?y(this._flags.last_token,["get","set","new","export"])||y(this._flags.last_token,V)?this._output.space_before_token=!0:m(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===l.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(I(this._flags.mode)||L(this._flags.mode))||this.print_newline(),this.print_token(A),this._flags.last_word=A.text;return}var H="NONE";if(this._flags.last_token.type===l.END_BLOCK?this._previous_flags.inline_frame?H="SPACE":y(A,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&A.newlines?H="NEWLINE":(H="SPACE",this._output.space_before_token=!0):H="NEWLINE":this._flags.last_token.type===l.SEMICOLON&&this._flags.mode===w.BlockStatement?H="NEWLINE":this._flags.last_token.type===l.SEMICOLON&&I(this._flags.mode)?H="SPACE":this._flags.last_token.type===l.STRING?H="NEWLINE":this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD||this._flags.last_token.text==="*"&&(h(this._last_last_text,["function","yield"])||this._flags.mode===w.ObjectLiteral&&h(this._last_last_text,["{",","]))?H="SPACE":this._flags.last_token.type===l.START_BLOCK?this._flags.inline_frame?H="SPACE":H="NEWLINE":this._flags.last_token.type===l.END_EXPR&&(this._output.space_before_token=!0,H="NEWLINE"),y(A,s)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?H="SPACE":H="NEWLINE"),y(A,["else","catch","finally"]))if((!(this._flags.last_token.type===l.END_BLOCK&&this._previous_flags.mode===w.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&A.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var re=this._output.current_line;re.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else H==="NEWLINE"?y(this._flags.last_token,v)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&y(A,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==l.END_EXPR?(this._flags.last_token.type!==l.START_EXPR||!y(A,["var","let","const"]))&&this._flags.last_token.text!==":"&&(m(A,"if")&&m(A.previous,"else")?this._output.space_before_token=!0:this.print_newline()):y(A,s)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&L(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():H==="SPACE"&&(this._output.space_before_token=!0);A.previous&&(A.previous.type===l.WORD||A.previous.type===l.RESERVED)&&(this._output.space_before_token=!0),this.print_token(A),this._flags.last_word=A.text,A.type===l.RESERVED&&(A.text==="do"?this._flags.do_block=!0:A.text==="if"?this._flags.if_block=!0:A.text==="import"?this._flags.import_block=!0:this._flags.import_block&&m(A,"from")&&(this._flags.import_block=!1))},U.prototype.handle_semicolon=function(A){this.start_of_statement(A)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(A);for(var Q=this._tokens.peek();this._flags.mode===w.Statement&&!(this._flags.if_block&&m(Q,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(A)},U.prototype.handle_string=function(A){A.text.startsWith("`")&&A.newlines===0&&A.whitespace_before===""&&(A.previous.text===")"||this._flags.last_token.type===l.WORD)||(this.start_of_statement(A)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(A),this._flags.last_token.type===l.RESERVED||this._flags.last_token.type===l.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR||this._flags.last_token.type===l.EQUALS||this._flags.last_token.type===l.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(A):A.text.startsWith("`")&&this._flags.last_token.type===l.END_EXPR&&(A.previous.text==="]"||A.previous.text===")")&&A.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(A)},U.prototype.handle_equals=function(A){this.start_of_statement(A)||this.handle_whitespace_and_comments(A),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(A),this._output.space_before_token=!0},U.prototype.handle_comma=function(A){this.handle_whitespace_and_comments(A,!0),this.print_token(A),this._output.space_before_token=!0,this._flags.declaration_statement?(I(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(A)):this._flags.mode===w.ObjectLiteral||this._flags.mode===w.Statement&&this._flags.parent.mode===w.ObjectLiteral?(this._flags.mode===w.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(A)},U.prototype.handle_operator=function(A){var Q=A.text==="*"&&(y(this._flags.last_token,["function","yield"])||h(this._flags.last_token.type,[l.START_BLOCK,l.COMMA,l.END_BLOCK,l.SEMICOLON])),H=h(A.text,["-","+"])&&(h(this._flags.last_token.type,[l.START_BLOCK,l.START_EXPR,l.EQUALS,l.OPERATOR])||h(this._flags.last_token.text,s)||this._flags.last_token.text===",");if(!this.start_of_statement(A)){var re=!Q;this.handle_whitespace_and_comments(A,re)}if(A.text==="*"&&this._flags.last_token.type===l.DOT){this.print_token(A);return}if(A.text==="::"){this.print_token(A);return}if(this._flags.last_token.type===l.OPERATOR&&h(this._options.operator_position,b)&&this.allow_wrap_or_preserved_newline(A),A.text===":"&&this._flags.in_case){this.print_token(A),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==l.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0);return}var le=!0,q=!0,Z=!1;if(A.text===":"?this._flags.ternary_depth===0?le=!1:(this._flags.ternary_depth-=1,Z=!0):A.text==="?"&&(this._flags.ternary_depth+=1),!H&&!Q&&this._options.preserve_newlines&&h(A.text,a)){var W=A.text===":",$=W&&Z,ne=W&&!Z;switch(this._options.operator_position){case M.before_newline:this._output.space_before_token=!ne,this.print_token(A),(!W||$)&&this.allow_wrap_or_preserved_newline(A),this._output.space_before_token=!0;return;case M.after_newline:this._output.space_before_token=!0,!W||$?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(A):this._output.space_before_token=!1,this.print_token(A),this._output.space_before_token=!0;return;case M.preserve_newline:ne||this.allow_wrap_or_preserved_newline(A),le=!(this._output.just_added_newline()||ne),this._output.space_before_token=le,this.print_token(A),this._output.space_before_token=!0;return}}if(Q){this.allow_wrap_or_preserved_newline(A),le=!1;var we=this._tokens.peek();q=we&&h(we.type,[l.WORD,l.RESERVED])}else if(A.text==="...")this.allow_wrap_or_preserved_newline(A),le=this._flags.last_token.type===l.START_BLOCK,q=!1;else if(h(A.text,["--","++","!","~"])||H){if((this._flags.last_token.type===l.COMMA||this._flags.last_token.type===l.START_EXPR)&&this.allow_wrap_or_preserved_newline(A),le=!1,q=!1,A.newlines&&(A.text==="--"||A.text==="++"||A.text==="~")){var ye=y(this._flags.last_token,v)&&A.newlines;ye&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(ye,!0)}this._flags.last_token.text===";"&&I(this._flags.mode)&&(le=!0),this._flags.last_token.type===l.RESERVED?le=!0:this._flags.last_token.type===l.END_EXPR?le=!(this._flags.last_token.text==="]"&&(A.text==="--"||A.text==="++")):this._flags.last_token.type===l.OPERATOR&&(le=h(A.text,["--","-","++","+"])&&h(this._flags.last_token.text,["--","-","++","+"]),h(A.text,["+","-"])&&h(this._flags.last_token.text,["--","++"])&&(q=!0)),(this._flags.mode===w.BlockStatement&&!this._flags.inline_frame||this._flags.mode===w.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline()}this._output.space_before_token=this._output.space_before_token||le,this.print_token(A),this._output.space_before_token=q},U.prototype.handle_block_comment=function(A,Q){if(this._output.raw){this._output.add_raw_token(A),A.directives&&A.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(A.directives){this.print_newline(!1,Q),this.print_token(A),A.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!i.newline.test(A.text)&&!A.newlines){this._output.space_before_token=!0,this.print_token(A),this._output.space_before_token=!0;return}else this.print_block_commment(A,Q)},U.prototype.print_block_commment=function(A,Q){var H=B(A.text),re,le=!1,q=!1,Z=A.whitespace_before,W=Z.length;if(this.print_newline(!1,Q),this.print_token_line_indentation(A),this._output.add_token(H[0]),this.print_newline(!1,Q),H.length>1){for(H=H.slice(1),le=O(H,"*"),q=F(H,Z),le&&(this._flags.alignment=1),re=0;re<H.length;re++)le?(this.print_token_line_indentation(A),this._output.add_token(p(H[re]))):q&&H[re]?(this.print_token_line_indentation(A),this._output.add_token(H[re].substring(W))):(this._output.current_line.set_indent(-1),this._output.add_token(H[re])),this.print_newline(!1,Q);this._flags.alignment=0}},U.prototype.handle_comment=function(A,Q){A.newlines?this.print_newline(!1,Q):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(A),this.print_newline(!1,Q)},U.prototype.handle_dot=function(A){this.start_of_statement(A)||this.handle_whitespace_and_comments(A,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),y(this._flags.last_token,v)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(A,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(A)},U.prototype.handle_unknown=function(A,Q){this.print_token(A),A.text[A.text.length-1]===`
`&&this.print_newline(!1,Q)},U.prototype.handle_eof=function(A){for(;this._flags.mode===w.Statement;)this.restore_mode();this.handle_whitespace_and_comments(A)},Md.Beautifier=U,Md}var Ub;function kJ(){if(Ub)return Xh.exports;Ub=1;var t=MJ().Beautifier,e=fk().Options;function i(n,r){var s=new t(n,r);return s.beautify()}return Xh.exports=i,Xh.exports.defaultOptions=function(){return new e},Xh.exports}var ic={exports:{}},Bd={},Ud={},Jb;function dk(){if(Jb)return Ud;Jb=1;var t=K0().Options;function e(i){t.call(this,i,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var n=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||n;var r=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var s=0;s<r.length;s++)r[s]!=="expand"?this.brace_style="collapse":this.brace_style=r[s]}return e.prototype=new t,Ud.Options=e,Ud}var Pb;function TJ(){if(Pb)return Bd;Pb=1;var t=dk().Options,e=V0().Output,i=z0().InputScanner,n=H0().Directives,r=new n(/\/\*/,/\*\//),s=/\r\n|[\r\n]/,a=/\r\n|[\r\n]/g,l=/\s/,h=/(?:\s|\n)+/g,p=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,d=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function m(y,v){this._source_text=y||"",this._options=new t(v),this._ch=null,this._input=null,this.NESTED_AT_RULE={page:!0,"font-face":!0,keyframes:!0,media:!0,supports:!0,document:!0},this.CONDITIONAL_GROUP_RULE={media:!0,supports:!0,document:!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}return m.prototype.eatString=function(y){var v="";for(this._ch=this._input.next();this._ch;){if(v+=this._ch,this._ch==="\\")v+=this._input.next();else if(y.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return v},m.prototype.eatWhitespace=function(y){for(var v=l.test(this._input.peek()),S=0;l.test(this._input.peek());)this._ch=this._input.next(),y&&this._ch===`
`&&(S===0||S<this._options.max_preserve_newlines)&&(S++,this._output.add_new_line(!0));return v},m.prototype.foundNestedPseudoClass=function(){for(var y=0,v=1,S=this._input.peek(v);S;){if(S==="{")return!0;if(S==="(")y+=1;else if(S===")"){if(y===0)return!1;y-=1}else if(S===";"||S==="}")return!1;v++,S=this._input.peek(v)}return!1},m.prototype.print_string=function(y){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(y)},m.prototype.preserveSingleSpace=function(y){y&&(this._output.space_before_token=!0)},m.prototype.indent=function(){this._indentLevel++},m.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},m.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var y=this._source_text,v=this._options.eol;v==="auto"&&(v=`
`,y&&s.test(y||"")&&(v=y.match(s)[0])),y=y.replace(a,`
`);var S=y.match(/^[\t ]*/)[0];this._output=new e(this._options,S),this._input=new i(y),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var M=0,b=!1,w=!1,E=!1,B=!1,L=!1,I=this._ch,O=!1,F,U,V;F=this._input.read(h),U=F!=="",V=I,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),I=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var A=this._input.read(p),Q=r.get_directives(A);Q&&Q.ignore==="start"&&(A+=r.readIgnored(this._input)),this.print_string(A),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(d)),this.eatWhitespace(!0);else if(this._ch==="$"){this.preserveSingleSpace(U),this.print_string(this._ch);var H=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);H.match(/[ :]$/)&&(H=this.eatString(": ").replace(/\s$/,""),this.print_string(H),this._output.space_before_token=!0),H=H.replace(/\s$/,""),M===0&&H.indexOf(":")!==-1&&(w=!0,this.indent())}else if(this._ch==="@")if(this.preserveSingleSpace(U),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var re=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);re.match(/[ :]$/)&&(re=this.eatString(": ").replace(/\s$/,""),this.print_string(re),this._output.space_before_token=!0),re=re.replace(/\s$/,""),M===0&&re.indexOf(":")!==-1?(w=!0,this.indent()):re in this.NESTED_AT_RULE?(this._nestedLevel+=1,re in this.CONDITIONAL_GROUP_RULE&&(E=!0)):M===0&&!w&&(B=!0)}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(U),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")w&&(w=!1,this.outdent()),B=!1,E?(E=!1,b=this._indentLevel>=this._nestedLevel):b=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&b&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(V==="("?this._output.space_before_token=!1:V!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),V==="{"&&this._output.trim(!0),w&&(this.outdent(),w=!1),this.print_string(this._ch),b=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var le=0;le<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;le++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[le])){O=!0;break}(b||E)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!B&&M===0?(this.print_string(":"),w||(w=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":"))}else if(this._ch==='"'||this._ch==="'"){var q=V==='"'||V==="'";this.preserveSingleSpace(q||U),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")O=!1,M===0?(w&&(this.outdent(),w=!1),B=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),M++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),M&&(M--,this.outdent()));else{var Z=!1;this._input.lookBack("with")&&(Z=!0),this.preserveSingleSpace(U||Z),this.print_string(this._ch),w&&V==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),L=!0):(this.eatWhitespace(),M++,this.indent())}else if(this._ch===")")M&&(M--,this.outdent()),L&&this._input.peek()===";"&&this._options.selector_separator_newline&&(L=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&(!w||L)&&M===0&&!B?this._output.add_new_line():this._output.space_before_token=!0;else if((this._ch===">"||this._ch==="+"||this._ch==="~")&&!w&&M===0)this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&l.test(this._ch)&&(this._ch=""));else if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(U),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),l.test(this._ch)&&(this._ch="");else if(this._ch==="!"&&!this._input.lookBack("\\"))this._output.space_before_token=!0,this.print_string(this._ch);else{var W=V==='"'||V==="'";this.preserveSingleSpace(W||U),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&O&&this._output.add_new_line()}var $=this._output.get_code(v);return $},Bd.Beautifier=m,Bd}var Fb;function EJ(){if(Fb)return ic.exports;Fb=1;var t=TJ().Beautifier,e=dk().Options;function i(n,r){var s=new t(n,r);return s.beautify()}return ic.exports=i,ic.exports.defaultOptions=function(){return new e},ic.exports}var nc={exports:{}},Jd={},Pd={},jb;function gk(){if(jb)return Pd;jb=1;var t=K0().Options;function e(i){t.call(this,i,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_min_attrs=this._get_number("wrap_attributes_min_attrs",2),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.inline_custom_elements=this._get_boolean("inline_custom_elements",!0),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}return e.prototype=new t,Pd.Options=e,Pd}var rc={},Wb;function Gb(){if(Wb)return rc;Wb=1;var t=lf().Tokenizer,e=lf().TOKEN,i=H0().Directives,n=pk().TemplatablePattern,r=Wf().Pattern,s={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:e.START,RAW:e.RAW,EOF:e.EOF},a=new i(/<\!--/,/-->/),l=function(h,p){t.call(this,h,p),this._current_tag_name="";var d=new n(this._input).read_options(this._options),m=new r(this._input);if(this.__patterns={word:d.until(/[\n\r\t <]/),single_quote:d.until_after(/'/),double_quote:d.until_after(/"/),attribute:d.until(/[\n\r\t =>]|\/>/),element_name:d.until(/[\n\r\t >\/]/),handlebars_comment:m.starting_with(/{{!--/).until_after(/--}}/),handlebars:m.starting_with(/{{/).until_after(/}}/),handlebars_open:m.until(/[\n\r\t }]/),handlebars_raw_close:m.until(/}}/),comment:m.starting_with(/<!--/).until_after(/-->/),cdata:m.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:m.starting_with(/<!\[/).until_after(/]>/),processing:m.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var y=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=m.matching(y).until_after(y)}};return l.prototype=new t,l.prototype._is_comment=function(h){return!1},l.prototype._is_opening=function(h){return h.type===s.TAG_OPEN},l.prototype._is_closing=function(h,p){return h.type===s.TAG_CLOSE&&p&&((h.text===">"||h.text==="/>")&&p.text[0]==="<"||h.text==="}}"&&p.text[0]==="{"&&p.text[1]==="{")},l.prototype._reset=function(){this._current_tag_name=""},l.prototype._get_next_token=function(h,p){var d=null;this._readWhitespace();var m=this._input.peek();return m===null?this._create_token(s.EOF,""):(d=d||this._read_open_handlebars(m,p),d=d||this._read_attribute(m,h,p),d=d||this._read_close(m,p),d=d||this._read_raw_content(m,h,p),d=d||this._read_content_word(m),d=d||this._read_comment_or_cdata(m),d=d||this._read_processing(m),d=d||this._read_open(m,p),d=d||this._create_token(s.UNKNOWN,this._input.next()),d)},l.prototype._read_comment_or_cdata=function(h){var p=null,d=null,m=null;if(h==="<"){var y=this._input.peek(1);y==="!"&&(d=this.__patterns.comment.read(),d?(m=a.get_directives(d),m&&m.ignore==="start"&&(d+=a.readIgnored(this._input))):d=this.__patterns.cdata.read()),d&&(p=this._create_token(s.COMMENT,d),p.directives=m)}return p},l.prototype._read_processing=function(h){var p=null,d=null,m=null;if(h==="<"){var y=this._input.peek(1);(y==="!"||y==="?")&&(d=this.__patterns.conditional_comment.read(),d=d||this.__patterns.processing.read()),d&&(p=this._create_token(s.COMMENT,d),p.directives=m)}return p},l.prototype._read_open=function(h,p){var d=null,m=null;return p||h==="<"&&(d=this._input.next(),this._input.peek()==="/"&&(d+=this._input.next()),d+=this.__patterns.element_name.read(),m=this._create_token(s.TAG_OPEN,d)),m},l.prototype._read_open_handlebars=function(h,p){var d=null,m=null;return p||this._options.indent_handlebars&&h==="{"&&this._input.peek(1)==="{"&&(this._input.peek(2)==="!"?(d=this.__patterns.handlebars_comment.read(),d=d||this.__patterns.handlebars.read(),m=this._create_token(s.COMMENT,d)):(d=this.__patterns.handlebars_open.read(),m=this._create_token(s.TAG_OPEN,d))),m},l.prototype._read_close=function(h,p){var d=null,m=null;return p&&(p.text[0]==="<"&&(h===">"||h==="/"&&this._input.peek(1)===">")?(d=this._input.next(),h==="/"&&(d+=this._input.next()),m=this._create_token(s.TAG_CLOSE,d)):p.text[0]==="{"&&h==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),m=this._create_token(s.TAG_CLOSE,"}}"))),m},l.prototype._read_attribute=function(h,p,d){var m=null,y="";if(d&&d.text[0]==="<")if(h==="=")m=this._create_token(s.EQUALS,this._input.next());else if(h==='"'||h==="'"){var v=this._input.next();h==='"'?v+=this.__patterns.double_quote.read():v+=this.__patterns.single_quote.read(),m=this._create_token(s.VALUE,v)}else y=this.__patterns.attribute.read(),y&&(p.type===s.EQUALS?m=this._create_token(s.VALUE,y):m=this._create_token(s.ATTRIBUTE,y));return m},l.prototype._is_content_unformatted=function(h){return this._options.void_elements.indexOf(h)===-1&&(this._options.content_unformatted.indexOf(h)!==-1||this._options.unformatted.indexOf(h)!==-1)},l.prototype._read_raw_content=function(h,p,d){var m="";if(d&&d.text[0]==="{")m=this.__patterns.handlebars_raw_close.read();else if(p.type===s.TAG_CLOSE&&p.opened.text[0]==="<"&&p.text[0]!=="/"){var y=p.opened.text.substr(1).toLowerCase();if(y==="script"||y==="style"){var v=this._read_comment_or_cdata(h);if(v)return v.type=s.TEXT,v;m=this._input.readUntil(new RegExp("</"+y+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(y)&&(m=this._input.readUntil(new RegExp("</"+y+"[\\n\\r\\t ]*?>","ig")))}return m?this._create_token(s.TEXT,m):null},l.prototype._read_content_word=function(h){var p="";if(this._options.unformatted_content_delimiter&&h===this._options.unformatted_content_delimiter[0]&&(p=this.__patterns.unformatted_content_delimiter.read()),p||(p=this.__patterns.word.read()),p)return this._create_token(s.TEXT,p)},rc.Tokenizer=l,rc.TOKEN=s,rc}var Vb;function AJ(){if(Vb)return Jd;Vb=1;var t=gk().Options,e=V0().Output,i=Gb().Tokenizer,n=Gb().TOKEN,r=/\r\n|[\r\n]/,s=/\r\n|[\r\n]/g,a=function(b,w){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=b.max_preserve_newlines,this.preserve_newlines=b.preserve_newlines,this._output=new e(b,w)};a.prototype.current_line_has_match=function(b){return this._output.current_line.has_match(b)},a.prototype.set_space_before_token=function(b,w){this._output.space_before_token=b,this._output.non_breaking_space=w},a.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},a.prototype.add_raw_token=function(b){this._output.add_raw_token(b)},a.prototype.print_preserved_newlines=function(b){var w=0;b.type!==n.TEXT&&b.previous.type!==n.TEXT&&(w=b.newlines?1:0),this.preserve_newlines&&(w=b.newlines<this.max_preserve_newlines+1?b.newlines:this.max_preserve_newlines+1);for(var E=0;E<w;E++)this.print_newline(E>0);return w!==0},a.prototype.traverse_whitespace=function(b){return b.whitespace_before||b.newlines?(this.print_preserved_newlines(b)||(this._output.space_before_token=!0),!0):!1},a.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},a.prototype.print_newline=function(b){this._output.add_new_line(b)},a.prototype.print_token=function(b){b.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(b.text))},a.prototype.indent=function(){this.indent_level++},a.prototype.get_full_indent=function(b){return b=this.indent_level+(b||0),b<1?"":this._output.get_indent_string(b)};var l=function(b){for(var w=null,E=b.next;E.type!==n.EOF&&b.closed!==E;){if(E.type===n.ATTRIBUTE&&E.text==="type"){E.next&&E.next.type===n.EQUALS&&E.next.next&&E.next.next.type===n.VALUE&&(w=E.next.next.text);break}E=E.next}return w},h=function(b,w){var E=null,B=null;return w.closed?(b==="script"?E="text/javascript":b==="style"&&(E="text/css"),E=l(w)||E,E.search("text/css")>-1?B="css":E.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?B="javascript":E.search(/(text|application|dojo)\/(x-)?(html)/)>-1?B="html":E.search(/test\/null/)>-1&&(B="null"),B):null};function p(b,w){return w.indexOf(b)!==-1}function d(b,w,E){this.parent=b||null,this.tag=w?w.tag_name:"",this.indent_level=E||0,this.parser_token=w||null}function m(b){this._printer=b,this._current_frame=null}m.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},m.prototype.record_tag=function(b){var w=new d(this._current_frame,b,this._printer.indent_level);this._current_frame=w},m.prototype._try_pop_frame=function(b){var w=null;return b&&(w=b.parser_token,this._printer.indent_level=b.indent_level,this._current_frame=b.parent),w},m.prototype._get_frame=function(b,w){for(var E=this._current_frame;E&&b.indexOf(E.tag)===-1;){if(w&&w.indexOf(E.tag)!==-1){E=null;break}E=E.parent}return E},m.prototype.try_pop=function(b,w){var E=this._get_frame([b],w);return this._try_pop_frame(E)},m.prototype.indent_to_tag=function(b){var w=this._get_frame(b);w&&(this._printer.indent_level=w.indent_level)};function y(b,w,E,B){this._source_text=b||"",w=w||{},this._js_beautify=E,this._css_beautify=B,this._tag_stack=null;var L=new t(w,"html");this._options=L,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}y.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var b=this._source_text,w=this._options.eol;this._options.eol==="auto"&&(w=`
`,b&&r.test(b)&&(w=b.match(r)[0])),b=b.replace(s,`
`);var E=b.match(/^[\t ]*/)[0],B={text:"",type:""},L=new v,I=new a(this._options,E),O=new i(b,this._options).tokenize();this._tag_stack=new m(I);for(var F=null,U=O.next();U.type!==n.EOF;)U.type===n.TAG_OPEN||U.type===n.COMMENT?(F=this._handle_tag_open(I,U,L,B,O),L=F):U.type===n.ATTRIBUTE||U.type===n.EQUALS||U.type===n.VALUE||U.type===n.TEXT&&!L.tag_complete?F=this._handle_inside_tag(I,U,L,B):U.type===n.TAG_CLOSE?F=this._handle_tag_close(I,U,L):U.type===n.TEXT?F=this._handle_text(I,U,L):I.add_raw_token(U),B=F,U=O.next();var V=I._output.get_code(w);return V},y.prototype._handle_tag_close=function(b,w,E){var B={text:w.text,type:w.type};return b.alignment_size=0,E.tag_complete=!0,b.set_space_before_token(w.newlines||w.whitespace_before!=="",!0),E.is_unformatted?b.add_raw_token(w):(E.tag_start_char==="<"&&(b.set_space_before_token(w.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&E.has_wrapped_attrs&&b.print_newline(!1)),b.print_token(w)),E.indent_content&&!(E.is_unformatted||E.is_content_unformatted)&&(b.indent(),E.indent_content=!1),!E.is_inline_element&&!(E.is_unformatted||E.is_content_unformatted)&&b.set_wrap_point(),B},y.prototype._handle_inside_tag=function(b,w,E,B){var L=E.has_wrapped_attrs,I={text:w.text,type:w.type};return b.set_space_before_token(w.newlines||w.whitespace_before!=="",!0),E.is_unformatted?b.add_raw_token(w):E.tag_start_char==="{"&&w.type===n.TEXT?b.print_preserved_newlines(w)?(w.newlines=0,b.add_raw_token(w)):b.print_token(w):(w.type===n.ATTRIBUTE?b.set_space_before_token(!0):(w.type===n.EQUALS||w.type===n.VALUE&&w.previous.type===n.EQUALS)&&b.set_space_before_token(!1),w.type===n.ATTRIBUTE&&E.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(b.traverse_whitespace(w),L=L||w.newlines!==0),this._is_wrap_attributes_force&&E.attr_count>=this._options.wrap_attributes_min_attrs&&(B.type!==n.TAG_OPEN||this._is_wrap_attributes_force_expand_multiline)&&(b.print_newline(!1),L=!0)),b.print_token(w),L=L||b.previous_token_wrapped(),E.has_wrapped_attrs=L),I},y.prototype._handle_text=function(b,w,E){var B={text:w.text,type:"TK_CONTENT"};return E.custom_beautifier_name?this._print_custom_beatifier_text(b,w,E):E.is_unformatted||E.is_content_unformatted?b.add_raw_token(w):(b.traverse_whitespace(w),b.print_token(w)),B},y.prototype._print_custom_beatifier_text=function(b,w,E){var B=this;if(w.text!==""){var L=w.text,I,O=1,F="",U="";E.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?I=this._js_beautify:E.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?I=this._css_beautify:E.custom_beautifier_name==="html"&&(I=function(le,q){var Z=new y(le,q,B._js_beautify,B._css_beautify);return Z.beautify()}),this._options.indent_scripts==="keep"?O=0:this._options.indent_scripts==="separate"&&(O=-b.indent_level);var V=b.get_full_indent(O);if(L=L.replace(/\n[ \t]*$/,""),E.custom_beautifier_name!=="html"&&L[0]==="<"&&L.match(/^(<!--|<!\[CDATA\[)/)){var A=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(L);if(!A){b.add_raw_token(w);return}F=V+A[1]+`
`,L=A[4],A[5]&&(U=V+A[5]),L=L.replace(/\n[ \t]*$/,""),(A[2]||A[3].indexOf(`
`)!==-1)&&(A=A[3].match(/[ \t]+$/),A&&(w.whitespace_before=A[0]))}if(L)if(I){var Q=function(){this.eol=`
`};Q.prototype=this._options.raw_options;var H=new Q;L=I(V+L,H)}else{var re=w.whitespace_before;re&&(L=L.replace(new RegExp(`
(`+re+")?","g"),`
`)),L=V+L.replace(/\n/g,`
`+V)}F&&(L?L=F+L+`
`+U:L=F+U),b.print_newline(!1),L&&(w.text=L,w.whitespace_before="",w.newlines=0,b.add_raw_token(w),b.print_newline(!0))}},y.prototype._handle_tag_open=function(b,w,E,B,L){var I=this._get_tag_open_token(w);if((E.is_unformatted||E.is_content_unformatted)&&!E.is_empty_element&&w.type===n.TAG_OPEN&&!I.is_start_tag?(b.add_raw_token(w),I.start_tag_token=this._tag_stack.try_pop(I.tag_name)):(b.traverse_whitespace(w),this._set_tag_position(b,w,I,E,B),I.is_inline_element||b.set_wrap_point(),b.print_token(w)),I.is_start_tag&&this._is_wrap_attributes_force){var O=0,F;do F=L.peek(O),F.type===n.ATTRIBUTE&&(I.attr_count+=1),O+=1;while(F.type!==n.EOF&&F.type!==n.TAG_CLOSE)}return(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(I.alignment_size=w.text.length+1),!I.tag_complete&&!I.is_unformatted&&(b.alignment_size=I.alignment_size),I};var v=function(b,w){if(this.parent=b||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!w)this.tag_complete=!0;else{var E;this.tag_start_char=w.text[0],this.text=w.text,this.tag_start_char==="<"?(E=w.text.match(/^<([^\s>]*)/),this.tag_check=E?E[1]:""):(E=w.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=E?E[1]:"",(w.text.startsWith("{{#>")||w.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&w.next!==null?this.tag_check=w.next.text.split(" ")[0]:this.tag_check=w.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),w.type===n.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||w.closed&&w.closed.text==="/>";var B=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(B=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(B)))}};y.prototype._get_tag_open_token=function(b){var w=new v(this._tag_stack.get_parser_token(),b);return w.alignment_size=this._options.wrap_attributes_indent_size,w.is_end_tag=w.is_end_tag||p(w.tag_check,this._options.void_elements),w.is_empty_element=w.tag_complete||w.is_start_tag&&w.is_end_tag,w.is_unformatted=!w.tag_complete&&p(w.tag_check,this._options.unformatted),w.is_content_unformatted=!w.is_empty_element&&p(w.tag_check,this._options.content_unformatted),w.is_inline_element=p(w.tag_name,this._options.inline)||this._options.inline_custom_elements&&w.tag_name.includes("-")||w.tag_start_char==="{",w},y.prototype._set_tag_position=function(b,w,E,B,L){if(E.is_empty_element||(E.is_end_tag?E.start_tag_token=this._tag_stack.try_pop(E.tag_name):(this._do_optional_end_element(E)&&(E.is_inline_element||b.print_newline(!1)),this._tag_stack.record_tag(E),(E.tag_name==="script"||E.tag_name==="style")&&!(E.is_unformatted||E.is_content_unformatted)&&(E.custom_beautifier_name=h(E.tag_check,w)))),p(E.tag_check,this._options.extra_liners)&&(b.print_newline(!1),b._output.just_added_blankline()||b.print_newline(!0)),E.is_empty_element){if(E.tag_start_char==="{"&&E.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),E.indent_content=!0;var I=b.current_line_has_match(/{{#if/);I||b.print_newline(!1)}E.tag_name==="!--"&&L.type===n.TAG_CLOSE&&B.is_end_tag&&E.text.indexOf(`
`)===-1||(E.is_inline_element||E.is_unformatted||b.print_newline(!1),this._calcluate_parent_multiline(b,E))}else if(E.is_end_tag){var O=!1;O=E.start_tag_token&&E.start_tag_token.multiline_content,O=O||!E.is_inline_element&&!(B.is_inline_element||B.is_unformatted)&&!(L.type===n.TAG_CLOSE&&E.start_tag_token===B)&&L.type!=="TK_CONTENT",(E.is_content_unformatted||E.is_unformatted)&&(O=!1),O&&b.print_newline(!1)}else E.indent_content=!E.custom_beautifier_name,E.tag_start_char==="<"&&(E.tag_name==="html"?E.indent_content=this._options.indent_inner_html:E.tag_name==="head"?E.indent_content=this._options.indent_head_inner_html:E.tag_name==="body"&&(E.indent_content=this._options.indent_body_inner_html)),!(E.is_inline_element||E.is_unformatted)&&(L.type!=="TK_CONTENT"||E.is_content_unformatted)&&b.print_newline(!1),this._calcluate_parent_multiline(b,E)},y.prototype._calcluate_parent_multiline=function(b,w){w.parent&&b._output.just_added_newline()&&!((w.is_inline_element||w.is_unformatted)&&w.parent.is_inline_element)&&(w.parent.multiline_content=!0)};var S=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","menu","nav","ol","p","pre","section","table","ul"],M=["a","audio","del","ins","map","noscript","video"];return y.prototype._do_optional_end_element=function(b){var w=null;if(!(b.is_empty_element||!b.is_start_tag||!b.parent)){if(b.tag_name==="body")w=w||this._tag_stack.try_pop("head");else if(b.tag_name==="li")w=w||this._tag_stack.try_pop("li",["ol","ul","menu"]);else if(b.tag_name==="dd"||b.tag_name==="dt")w=w||this._tag_stack.try_pop("dt",["dl"]),w=w||this._tag_stack.try_pop("dd",["dl"]);else if(b.parent.tag_name==="p"&&S.indexOf(b.tag_name)!==-1){var E=b.parent.parent;(!E||M.indexOf(E.tag_name)===-1)&&(w=w||this._tag_stack.try_pop("p"))}else b.tag_name==="rp"||b.tag_name==="rt"?(w=w||this._tag_stack.try_pop("rt",["ruby","rtc"]),w=w||this._tag_stack.try_pop("rp",["ruby","rtc"])):b.tag_name==="optgroup"?w=w||this._tag_stack.try_pop("optgroup",["select"]):b.tag_name==="option"?w=w||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):b.tag_name==="colgroup"?w=w||this._tag_stack.try_pop("caption",["table"]):b.tag_name==="thead"?(w=w||this._tag_stack.try_pop("caption",["table"]),w=w||this._tag_stack.try_pop("colgroup",["table"])):b.tag_name==="tbody"||b.tag_name==="tfoot"?(w=w||this._tag_stack.try_pop("caption",["table"]),w=w||this._tag_stack.try_pop("colgroup",["table"]),w=w||this._tag_stack.try_pop("thead",["table"]),w=w||this._tag_stack.try_pop("tbody",["table"])):b.tag_name==="tr"?(w=w||this._tag_stack.try_pop("caption",["table"]),w=w||this._tag_stack.try_pop("colgroup",["table"]),w=w||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(b.tag_name==="th"||b.tag_name==="td")&&(w=w||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),w=w||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return b.parent=this._tag_stack.get_parser_token(),w}},Jd.Beautifier=y,Jd}var Kb;function RJ(){if(Kb)return nc.exports;Kb=1;var t=AJ().Beautifier,e=gk().Options;function i(n,r,s,a){var l=new t(n,r,s,a);return l.beautify()}return nc.exports=i,nc.exports.defaultOptions=function(){return new e},nc.exports}var zb;function LJ(){if(zb)return Bl;zb=1;var t=kJ(),e=EJ(),i=RJ();function n(r,s,a,l){return a=a||t,l=l||e,i(r,s,a,l)}return n.defaultOptions=i.defaultOptions,Bl.js=t,Bl.css=e,Bl.html=n,Bl}(function(t){function e(i,n,r){var s=function(a,l){return i.js_beautify(a,l)};return s.js=i.js_beautify,s.css=n.css_beautify,s.html=r.html_beautify,s.js_beautify=i.js_beautify,s.css_beautify=n.css_beautify,s.html_beautify=r.html_beautify,s}(function(i){var n=LJ();n.js_beautify=n.js,n.css_beautify=n.css,n.html_beautify=n.html,i.exports=e(n,n,n)})(t)})(uk);var OJ=uk.exports;const IJ=ln(OJ);function NJ(t,e){t.showInfo=!1,t.showUI=!0,t.showExtensions=!1,t.ui_components=[];const i={}.VITE_SERVER_URL;t.serverURL=i!==void 0?i:null,e.on("load and eval code",(r,s=!0)=>{e.emit("editor: load code",r),e.emit("repl: eval",r),s&&e.emit("gallery: save to URL",r)}),e.on("repl: eval",(r="",s)=>{window.html=Yt,window.Component=p0,window.cm=t.editor.editor.cm,window.loadComponent=a=>{Aw(()=>import(a),[],import.meta.url).then(l=>{const h=l.default;t.ui_components.push(h),console.log("comp",h),e.emit("render")})},window.loadComponentFromString=a=>{const h="data:text/javascript;charset=utf-8,"+encodeURIComponent(a);Aw(()=>import(h),[],import.meta.url).then(p=>{const d=p.default;t.ui_components.push(d),console.log("comp",d),e.emit("render")})},Rg.eval(r,s)}),e.on("screencap",()=>{screencap();const s=t.editor.editor.getValue(),a=new Blob([s],{type:"text/plain"}),l=document.createElement("a");l.style.display="none";let h=new Date;l.download=`hydra-${h.getFullYear()}-${h.getMonth()+1}-${h.getDate()}-${h.getHours()}.${h.getMinutes()}.${h.getSeconds()}.js`,l.href=URL.createObjectURL(a),l.click(),setTimeout(()=>{window.URL.revokeObjectURL(l.href)},300)});function n(){const r=t.editor.editor;hush(),speed=1,e.emit("gallery: clear"),r.clear()}e.on("clear all",()=>{n()}),e.on("ui: hide all",function(){t.showUI=!t.showUI,e.emit("render")}),e.on("ui: toggle info",function(r){t.showInfo?e.emit("ui: hide info"):e.emit("ui: show info")}),e.on("ui: show info",()=>{t.showInfo=!0,e.emit("render")}),e.on("ui: hide info",()=>{t.showInfo=!1,t.showExtensions=!1,e.emit("render")}),e.on("ui: show extensions",()=>{t.showExtensions=!0,t.showInfo=!0,e.emit("extensions: select category"),e.emit("render")}),e.on("ui: hide extensions",()=>{t.showExtensions=!1,e.emit("render")})}function Pn(t){"@babel/helpers - typeof";return Pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(t)}function Gn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DJ(t,e){if(Pn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(Pn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mk(t){var e=DJ(t,"string");return Pn(e)==="symbol"?e:String(e)}function Hb(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mk(n.key),n)}}function Vn(t,e,i){return e&&Hb(t.prototype,e),i&&Hb(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function ws(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cm(t,e){return Cm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Cm(t,e)}function Gf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cm(t,e)}function Uu(t,e){if(e&&(Pn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ws(t)}function yr(t){return yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},yr(t)}function Es(t,e,i){return e=mk(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function BJ(t){if(Array.isArray(t))return t}function UJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qb(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function JJ(t,e){if(t){if(typeof t=="string")return Qb(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qb(t,e)}}function PJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FJ(t){return BJ(t)||UJ(t)||JJ(t)||PJ()}function Yb(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function $b(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Yb(Object(i),!0).forEach(function(n){Es(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Yb(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}var jJ={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,i){console&&console[e]&&console[e].apply(console,i)}},WJ=function(){function t(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gn(this,t),this.init(e,i)}return Vn(t,[{key:"init",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=i||jJ,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(i){this.debug=i}},{key:"log",value:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(i,n,r,s){return s&&!this.debug?null:(typeof i[0]=="string"&&(i[0]="".concat(r).concat(this.prefix," ").concat(i[0])),this.logger[n](i))}},{key:"create",value:function(i){return new t(this.logger,$b($b({},{prefix:"".concat(this.prefix,":").concat(i,":")}),this.options))}},{key:"clone",value:function(i){return i=i||this.options,i.prefix=i.prefix||this.prefix,new t(this.logger,i)}}]),t}(),cr=new WJ,Cs=function(){function t(){Gn(this,t),this.observers={}}return Vn(t,[{key:"on",value:function(i,n){var r=this;return i.split(" ").forEach(function(s){r.observers[s]=r.observers[s]||[],r.observers[s].push(n)}),this}},{key:"off",value:function(i,n){if(this.observers[i]){if(!n){delete this.observers[i];return}this.observers[i]=this.observers[i].filter(function(r){return r!==n})}}},{key:"emit",value:function(i){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(this.observers[i]){var a=[].concat(this.observers[i]);a.forEach(function(h){h.apply(void 0,r)})}if(this.observers["*"]){var l=[].concat(this.observers["*"]);l.forEach(function(h){h.apply(h,[i].concat(r))})}}}]),t}();function Jl(){var t,e,i=new Promise(function(n,r){t=n,e=r});return i.resolve=t,i.reject=e,i}function Zb(t){return t==null?"":""+t}function GJ(t,e,i){t.forEach(function(n){e[n]&&(i[n]=e[n])})}function Q0(t,e,i){function n(l){return l&&l.indexOf("###")>-1?l.replace(/###/g,"."):l}function r(){return!t||typeof t=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(r())return{};var a=n(s.shift());!t[a]&&i&&(t[a]=new i),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={}}return r()?{}:{obj:t,k:n(s.shift())}}function qb(t,e,i){var n=Q0(t,e,Object),r=n.obj,s=n.k;r[s]=i}function VJ(t,e,i,n){var r=Q0(t,e,Object),s=r.obj,a=r.k;s[a]=s[a]||[],n&&(s[a]=s[a].concat(i)),n||s[a].push(i)}function uf(t,e){var i=Q0(t,e),n=i.obj,r=i.k;if(n)return n[r]}function Xb(t,e,i){var n=uf(t,i);return n!==void 0?n:uf(e,i)}function yk(t,e,i){for(var n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?typeof t[n]=="string"||t[n]instanceof String||typeof e[n]=="string"||e[n]instanceof String?i&&(t[n]=e[n]):yk(t[n],e[n],i):t[n]=e[n]);return t}function Ko(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var KJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function zJ(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(e){return KJ[e]}):t}var Vf=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,HJ=[" ",",","?","!",";"];function QJ(t,e,i){e=e||"",i=i||"";var n=HJ.filter(function(l){return e.indexOf(l)<0&&i.indexOf(l)<0});if(n.length===0)return!0;var r=new RegExp("(".concat(n.map(function(l){return l==="?"?"\\?":l}).join("|"),")")),s=!r.test(t);if(!s){var a=t.indexOf(i);a>0&&!r.test(t.substring(0,a))&&(s=!0)}return s}function e1(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function sc(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?e1(Object(i),!0).forEach(function(n){Es(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e1(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function YJ(t){var e=$J();return function(){var n=yr(t),r;if(e){var s=yr(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return Uu(this,r)}}function $J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vk(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(t){if(t[e])return t[e];for(var n=e.split(i),r=t,s=0;s<n.length;++s){if(!r||typeof r[n[s]]=="string"&&s+1<n.length)return;if(r[n[s]]===void 0){for(var a=2,l=n.slice(s,s+a).join(i),h=r[l];h===void 0&&n.length>s+a;)a++,l=n.slice(s,s+a).join(i),h=r[l];if(h===void 0)return;if(h===null)return null;if(e.endsWith(l)){if(typeof h=="string")return h;if(l&&typeof h[l]=="string")return h[l]}var p=n.slice(s+a).join(i);return p?vk(h,p,i):void 0}r=r[n[s]]}return r}}var ZJ=function(t){Gf(i,t);var e=YJ(i);function i(n){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Gn(this,i),r=e.call(this),Vf&&Cs.call(ws(r)),r.data=n||{},r.options=s,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.options.ignoreJSONStructure===void 0&&(r.options.ignoreJSONStructure=!0),r}return Vn(i,[{key:"addNamespaces",value:function(r){this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}},{key:"removeNamespaces",value:function(r){var s=this.options.ns.indexOf(r);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(r,s,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},h=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,p=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure,d=[r,s];a&&typeof a!="string"&&(d=d.concat(a)),a&&typeof a=="string"&&(d=d.concat(h?a.split(h):a)),r.indexOf(".")>-1&&(d=r.split("."));var m=uf(this.data,d);return m||!p||typeof a!="string"?m:vk(this.data&&this.data[r]&&this.data[r][s],a,h)}},{key:"addResource",value:function(r,s,a,l){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},p=this.options.keySeparator;p===void 0&&(p=".");var d=[r,s];a&&(d=d.concat(p?a.split(p):a)),r.indexOf(".")>-1&&(d=r.split("."),l=s,s=d[1]),this.addNamespaces(s),qb(this.data,d,l),h.silent||this.emit("added",r,s,a,l)}},{key:"addResources",value:function(r,s,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var h in a)(typeof a[h]=="string"||Object.prototype.toString.apply(a[h])==="[object Array]")&&this.addResource(r,s,h,a[h],{silent:!0});l.silent||this.emit("added",r,s,a)}},{key:"addResourceBundle",value:function(r,s,a,l,h){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},d=[r,s];r.indexOf(".")>-1&&(d=r.split("."),l=a,a=s,s=d[1]),this.addNamespaces(s);var m=uf(this.data,d)||{};l?yk(m,a,h):m=sc(sc({},m),a),qb(this.data,d,m),p.silent||this.emit("added",r,s,a)}},{key:"removeResourceBundle",value:function(r,s){this.hasResourceBundle(r,s)&&delete this.data[r][s],this.removeNamespaces(s),this.emit("removed",r,s)}},{key:"hasResourceBundle",value:function(r,s){return this.getResource(r,s)!==void 0}},{key:"getResourceBundle",value:function(r,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?sc(sc({},{}),this.getResource(r,s)):this.getResource(r,s)}},{key:"getDataByLanguage",value:function(r){return this.data[r]}},{key:"hasLanguageSomeTranslations",value:function(r){var s=this.getDataByLanguage(r),a=s&&Object.keys(s)||[];return!!a.find(function(l){return s[l]&&Object.keys(s[l]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),i}(Cs),wk={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,i,n,r,s){var a=this;return e.forEach(function(l){a.processors[l]&&(i=a.processors[l].process(i,n,r,s))}),i}};function t1(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function Li(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?t1(Object(i),!0).forEach(function(n){Es(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):t1(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function qJ(t){var e=XJ();return function(){var n=yr(t),r;if(e){var s=yr(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return Uu(this,r)}}function XJ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var i1={},n1=function(t){Gf(i,t);var e=qJ(i);function i(n){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Gn(this,i),r=e.call(this),Vf&&Cs.call(ws(r)),GJ(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,ws(r)),r.options=s,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.logger=cr.create("translator"),r}return Vn(i,[{key:"changeLanguage",value:function(r){r&&(this.language=r)}},{key:"exists",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(r==null)return!1;var a=this.resolve(r,s);return a&&a.res!==void 0}},{key:"extractFromKey",value:function(r,s){var a=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");var l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,h=s.ns||this.options.defaultNS||[],p=a&&r.indexOf(a)>-1,d=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!QJ(r,a,l);if(p&&!d){var m=r.match(this.interpolator.nestingRegexp);if(m&&m.length>0)return{key:r,namespaces:h};var y=r.split(a);(a!==l||a===l&&this.options.ns.indexOf(y[0])>-1)&&(h=y.shift()),r=y.join(l)}return typeof h=="string"&&(h=[h]),{key:r,namespaces:h}}},{key:"translate",value:function(r,s,a){var l=this;if(Pn(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),s||(s={}),r==null)return"";Array.isArray(r)||(r=[String(r)]);var h=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,p=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,d=this.extractFromKey(r[r.length-1],s),m=d.key,y=d.namespaces,v=y[y.length-1],S=s.lng||this.language,M=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(S&&S.toLowerCase()==="cimode"){if(M){var b=s.nsSeparator||this.options.nsSeparator;return h?(w.res="".concat(v).concat(b).concat(m),w):"".concat(v).concat(b).concat(m)}return h?(w.res=m,w):m}var w=this.resolve(r,s),E=w&&w.res,B=w&&w.usedKey||m,L=w&&w.exactUsedKey||m,I=Object.prototype.toString.apply(E),O=["[object Number]","[object Function]","[object RegExp]"],F=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,U=!this.i18nFormat||this.i18nFormat.handleAsObject,V=typeof E!="string"&&typeof E!="boolean"&&typeof E!="number";if(U&&E&&V&&O.indexOf(I)<0&&!(typeof F=="string"&&I==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var A=this.options.returnedObjectHandler?this.options.returnedObjectHandler(B,E,Li(Li({},s),{},{ns:y})):"key '".concat(m," (").concat(this.language,")' returned an object instead of string.");return h?(w.res=A,w):A}if(p){var Q=I==="[object Array]",H=Q?[]:{},re=Q?L:B;for(var le in E)if(Object.prototype.hasOwnProperty.call(E,le)){var q="".concat(re).concat(p).concat(le);H[le]=this.translate(q,Li(Li({},s),{joinArrays:!1,ns:y})),H[le]===q&&(H[le]=E[le])}E=H}}else if(U&&typeof F=="string"&&I==="[object Array]")E=E.join(F),E&&(E=this.extendTranslation(E,r,s,a));else{var Z=!1,W=!1,$=s.count!==void 0&&typeof s.count!="string",ne=i.hasDefaultValue(s),we=$?this.pluralResolver.getSuffix(S,s.count,s):"",ye=s["defaultValue".concat(we)]||s.defaultValue;!this.isValidLookup(E)&&ne&&(Z=!0,E=ye),this.isValidLookup(E)||(W=!0,E=m);var xe=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,Se=xe&&W?void 0:E,Re=ne&&ye!==E&&this.options.updateMissing;if(W||Z||Re){if(this.logger.log(Re?"updateKey":"missingKey",S,v,m,Re?ye:E),p){var Ze=this.resolve(m,Li(Li({},s),{},{keySeparator:!1}));Ze&&Ze.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var se=[],oe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&oe&&oe[0])for(var ve=0;ve<oe.length;ve++)se.push(oe[ve]);else this.options.saveMissingTo==="all"?se=this.languageUtils.toResolveHierarchy(s.lng||this.language):se.push(s.lng||this.language);var ke=function(z,K,ge){var be=ne&&ge!==E?ge:Se;l.options.missingKeyHandler?l.options.missingKeyHandler(z,v,K,be,Re,s):l.backendConnector&&l.backendConnector.saveMissing&&l.backendConnector.saveMissing(z,v,K,be,Re,s),l.emit("missingKey",z,v,K,E)};this.options.saveMissing&&(this.options.saveMissingPlurals&&$?se.forEach(function(Fe){l.pluralResolver.getSuffixes(Fe,s).forEach(function(z){ke([Fe],m+z,s["defaultValue".concat(z)]||ye)})}):ke(se,m,ye))}E=this.extendTranslation(E,r,s,w,a),W&&E===m&&this.options.appendNamespaceToMissingKey&&(E="".concat(v,":").concat(m)),(W||Z)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?E=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(v,":").concat(m):m,Z?E:void 0):E=this.options.parseMissingKeyHandler(E))}return h?(w.res=E,w):E}},{key:"extendTranslation",value:function(r,s,a,l,h){var p=this;if(this.i18nFormat&&this.i18nFormat.parse)r=this.i18nFormat.parse(r,Li(Li({},this.options.interpolation.defaultVariables),a),l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init(Li(Li({},a),{interpolation:Li(Li({},this.options.interpolation),a.interpolation)}));var d=typeof r=="string"&&(a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),m;if(d){var y=r.match(this.interpolator.nestingRegexp);m=y&&y.length}var v=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(v=Li(Li({},this.options.interpolation.defaultVariables),v)),r=this.interpolator.interpolate(r,v,a.lng||this.language,a),d){var S=r.match(this.interpolator.nestingRegexp),M=S&&S.length;m<M&&(a.nest=!1)}a.nest!==!1&&(r=this.interpolator.nest(r,function(){for(var E=arguments.length,B=new Array(E),L=0;L<E;L++)B[L]=arguments[L];return h&&h[0]===B[0]&&!a.context?(p.logger.warn("It seems you are nesting recursively key: ".concat(B[0]," in key: ").concat(s[0])),null):p.translate.apply(p,B.concat([s]))},a)),a.interpolation&&this.interpolator.reset()}var b=a.postProcess||this.options.postProcess,w=typeof b=="string"?[b]:b;return r!=null&&w&&w.length&&a.applyPostProcessor!==!1&&(r=wk.handle(w,r,s,this.options&&this.options.postProcessPassResolved?Li({i18nResolved:l},a):a,this)),r}},{key:"resolve",value:function(r){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l,h,p,d,m;return typeof r=="string"&&(r=[r]),r.forEach(function(y){if(!s.isValidLookup(l)){var v=s.extractFromKey(y,a),S=v.key;h=S;var M=v.namespaces;s.options.fallbackNS&&(M=M.concat(s.options.fallbackNS));var b=a.count!==void 0&&typeof a.count!="string",w=b&&!a.ordinal&&a.count===0&&s.pluralResolver.shouldUseIntlApi(),E=a.context!==void 0&&(typeof a.context=="string"||typeof a.context=="number")&&a.context!=="",B=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);M.forEach(function(L){s.isValidLookup(l)||(m=L,!i1["".concat(B[0],"-").concat(L)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(m)&&(i1["".concat(B[0],"-").concat(L)]=!0,s.logger.warn('key "'.concat(h,'" for languages "').concat(B.join(", "),`" won't get resolved as namespace "`).concat(m,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),B.forEach(function(I){if(!s.isValidLookup(l)){d=I;var O=[S];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(O,S,I,L,a);else{var F;b&&(F=s.pluralResolver.getSuffix(I,a.count,a));var U="".concat(s.options.pluralSeparator,"zero");if(b&&(O.push(S+F),w&&O.push(S+U)),E){var V="".concat(S).concat(s.options.contextSeparator).concat(a.context);O.push(V),b&&(O.push(V+F),w&&O.push(V+U))}}for(var A;A=O.pop();)s.isValidLookup(l)||(p=A,l=s.getResource(I,L,A,a))}}))})}}),{res:l,usedKey:h,exactUsedKey:p,usedLng:d,usedNS:m}}},{key:"isValidLookup",value:function(r){return r!==void 0&&!(!this.options.returnNull&&r===null)&&!(!this.options.returnEmptyString&&r==="")}},{key:"getResource",value:function(r,s,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(r,s,a,l):this.resourceStore.getResource(r,s,a,l)}}],[{key:"hasDefaultValue",value:function(r){var s="defaultValue";for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)&&s===a.substring(0,s.length)&&r[a]!==void 0)return!0;return!1}}]),i}(Cs);function Fd(t){return t.charAt(0).toUpperCase()+t.slice(1)}var e3=function(){function t(e){Gn(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=cr.create("languageUtils")}return Vn(t,[{key:"getScriptPartFromCode",value:function(i){if(!i||i.indexOf("-")<0)return null;var n=i.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(i){if(!i||i.indexOf("-")<0)return i;var n=i.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(i){if(typeof i=="string"&&i.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],r=i.split("-");return this.options.lowerCaseLng?r=r.map(function(s){return s.toLowerCase()}):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Fd(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Fd(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Fd(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?i.toLowerCase():i}},{key:"isSupportedCode",value:function(i){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(i=this.getLanguagePartFromCode(i)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(i)>-1}},{key:"getBestMatchFromCodes",value:function(i){var n=this;if(!i)return null;var r;return i.forEach(function(s){if(!r){var a=n.formatLanguageCode(s);(!n.options.supportedLngs||n.isSupportedCode(a))&&(r=a)}}),!r&&this.options.supportedLngs&&i.forEach(function(s){if(!r){var a=n.getLanguagePartFromCode(s);if(n.isSupportedCode(a))return r=a;r=n.options.supportedLngs.find(function(l){if(l.indexOf(a)===0)return l})}}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}},{key:"getFallbackCodes",value:function(i,n){if(!i)return[];if(typeof i=="function"&&(i=i(n)),typeof i=="string"&&(i=[i]),Object.prototype.toString.apply(i)==="[object Array]")return i;if(!n)return i.default||[];var r=i[n];return r||(r=i[this.getScriptPartFromCode(n)]),r||(r=i[this.formatLanguageCode(n)]),r||(r=i[this.getLanguagePartFromCode(n)]),r||(r=i.default),r||[]}},{key:"toResolveHierarchy",value:function(i,n){var r=this,s=this.getFallbackCodes(n||this.options.fallbackLng||[],i),a=[],l=function(p){p&&(r.isSupportedCode(p)?a.push(p):r.logger.warn("rejecting language code not found in supportedLngs: ".concat(p)))};return typeof i=="string"&&i.indexOf("-")>-1?(this.options.load!=="languageOnly"&&l(this.formatLanguageCode(i)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&l(this.getScriptPartFromCode(i)),this.options.load!=="currentOnly"&&l(this.getLanguagePartFromCode(i))):typeof i=="string"&&l(this.formatLanguageCode(i)),s.forEach(function(h){a.indexOf(h)<0&&l(r.formatLanguageCode(h))}),a}}]),t}(),t3=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],i3={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},n3=["v1","v2","v3"],r1={zero:0,one:1,two:2,few:3,many:4,other:5};function r3(){var t={};return t3.forEach(function(e){e.lngs.forEach(function(i){t[i]={numbers:e.nr,plurals:i3[e.fc]}})}),t}var s3=function(){function t(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gn(this,t),this.languageUtils=e,this.options=i,this.logger=cr.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=r3()}return Vn(t,[{key:"addRule",value:function(i,n){this.rules[i]=n}},{key:"getRule",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(i,{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[i]||this.rules[this.languageUtils.getLanguagePartFromCode(i)]}},{key:"needsPlural",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(i,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(i,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(i,r).map(function(s){return"".concat(n).concat(s)})}},{key:"getSuffixes",value:function(i){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(i,r);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(a,l){return r1[a]-r1[l]}).map(function(a){return"".concat(n.options.prepend).concat(a)}):s.numbers.map(function(a){return n.getSuffix(i,a,r)}):[]}},{key:"getSuffix",value:function(i,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(i,r);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(n)):this.getSuffixRetroCompatible(s,n):(this.logger.warn("no plural rule found for: ".concat(i)),"")}},{key:"getSuffixRetroCompatible",value:function(i,n){var r=this,s=i.noAbs?i.plurals(n):i.plurals(Math.abs(n)),a=i.numbers[s];this.options.simplifyPluralSuffix&&i.numbers.length===2&&i.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));var l=function(){return r.options.prepend&&a.toString()?r.options.prepend+a.toString():a.toString()};return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?"_plural_".concat(a.toString()):l():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&i.numbers.length===2&&i.numbers[0]===1?l():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!n3.includes(this.options.compatibilityJSON)}}]),t}();function s1(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function In(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?s1(Object(i),!0).forEach(function(n){Es(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s1(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}var o3=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Gn(this,t),this.logger=cr.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(i){return i},this.init(e)}return Vn(t,[{key:"init",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i.interpolation||(i.interpolation={escapeValue:!0});var n=i.interpolation;this.escape=n.escape!==void 0?n.escape:zJ,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Ko(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Ko(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Ko(n.nestingPrefix):n.nestingPrefixEscaped||Ko("$t("),this.nestingSuffix=n.nestingSuffix?Ko(n.nestingSuffix):n.nestingSuffixEscaped||Ko(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var i="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(i,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var r="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(r,"g")}},{key:"interpolate",value:function(i,n,r,s){var a=this,l,h,p,d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function m(b){return b.replace(/\$/g,"$$$$")}var y=function(w){if(w.indexOf(a.formatSeparator)<0){var E=Xb(n,d,w);return a.alwaysFormat?a.format(E,void 0,r,In(In(In({},s),n),{},{interpolationkey:w})):E}var B=w.split(a.formatSeparator),L=B.shift().trim(),I=B.join(a.formatSeparator).trim();return a.format(Xb(n,d,L),I,r,In(In(In({},s),n),{},{interpolationkey:L}))};this.resetRegExp();var v=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,S=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,M=[{regex:this.regexpUnescape,safeValue:function(w){return m(w)}},{regex:this.regexp,safeValue:function(w){return a.escapeValue?m(a.escape(w)):m(w)}}];return M.forEach(function(b){for(p=0;l=b.regex.exec(i);){var w=l[1].trim();if(h=y(w),h===void 0)if(typeof v=="function"){var E=v(i,l,s);h=typeof E=="string"?E:""}else if(s&&s.hasOwnProperty(w))h="";else if(S){h=l[0];continue}else a.logger.warn("missed to pass in variable ".concat(w," for interpolating ").concat(i)),h="";else typeof h!="string"&&!a.useRawValueToEscape&&(h=Zb(h));var B=b.safeValue(h);if(i=i.replace(l[0],B),S?(b.regex.lastIndex+=h.length,b.regex.lastIndex-=l[0].length):b.regex.lastIndex=0,p++,p>=a.maxReplaces)break}}),i}},{key:"nest",value:function(i,n){var r=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,l,h=In({},s);h.applyPostProcessor=!1,delete h.defaultValue;function p(v,S){var M=this.nestingOptionsSeparator;if(v.indexOf(M)<0)return v;var b=v.split(new RegExp("".concat(M,"[ ]*{"))),w="{".concat(b[1]);v=b[0],w=this.interpolate(w,h);var E=w.match(/'/g),B=w.match(/"/g);(E&&E.length%2===0&&!B||B.length%2!==0)&&(w=w.replace(/'/g,'"'));try{h=JSON.parse(w),S&&(h=In(In({},S),h))}catch(L){return this.logger.warn("failed parsing options string in nesting for key ".concat(v),L),"".concat(v).concat(M).concat(w)}return delete h.defaultValue,v}for(;a=this.nestingRegexp.exec(i);){var d=[],m=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){var y=a[1].split(this.formatSeparator).map(function(v){return v.trim()});a[1]=y.shift(),d=y,m=!0}if(l=n(p.call(this,a[1].trim(),h),h),l&&a[0]===i&&typeof l!="string")return l;typeof l!="string"&&(l=Zb(l)),l||(this.logger.warn("missed to resolve ".concat(a[1]," for nesting ").concat(i)),l=""),m&&(l=d.reduce(function(v,S){return r.format(v,S,s.lng,In(In({},s),{},{interpolationkey:a[1].trim()}))},l.trim())),i=i.replace(a[0],l),this.regexp.lastIndex=0}return i}}]),t}();function o1(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function Xr(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?o1(Object(i),!0).forEach(function(n){Es(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o1(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function a3(t){var e=t.toLowerCase().trim(),i={};if(t.indexOf("(")>-1){var n=t.split("(");e=n[0].toLowerCase().trim();var r=n[1].substring(0,n[1].length-1);if(e==="currency"&&r.indexOf(":")<0)i.currency||(i.currency=r.trim());else if(e==="relativetime"&&r.indexOf(":")<0)i.range||(i.range=r.trim());else{var s=r.split(";");s.forEach(function(a){if(a){var l=a.split(":"),h=FJ(l),p=h[0],d=h.slice(1),m=d.join(":").trim().replace(/^'+|'+$/g,"");i[p.trim()]||(i[p.trim()]=m),m==="false"&&(i[p.trim()]=!1),m==="true"&&(i[p.trim()]=!0),isNaN(m)||(i[p.trim()]=parseInt(m,10))}})}}return{formatName:e,formatOptions:i}}function zo(t){var e={};return function(n,r,s){var a=r+JSON.stringify(s),l=e[a];return l||(l=t(r,s),e[a]=l),l(n)}}var l3=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Gn(this,t),this.logger=cr.create("formatter"),this.options=e,this.formats={number:zo(function(i,n){var r=new Intl.NumberFormat(i,n);return function(s){return r.format(s)}}),currency:zo(function(i,n){var r=new Intl.NumberFormat(i,Xr(Xr({},n),{},{style:"currency"}));return function(s){return r.format(s)}}),datetime:zo(function(i,n){var r=new Intl.DateTimeFormat(i,Xr({},n));return function(s){return r.format(s)}}),relativetime:zo(function(i,n){var r=new Intl.RelativeTimeFormat(i,Xr({},n));return function(s){return r.format(s,n.range||"day")}}),list:zo(function(i,n){var r=new Intl.ListFormat(i,Xr({},n));return function(s){return r.format(s)}})},this.init(e)}return Vn(t,[{key:"init",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},r=n.interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}},{key:"add",value:function(i,n){this.formats[i.toLowerCase().trim()]=n}},{key:"addCached",value:function(i,n){this.formats[i.toLowerCase().trim()]=zo(n)}},{key:"format",value:function(i,n,r,s){var a=this,l=n.split(this.formatSeparator),h=l.reduce(function(p,d){var m=a3(d),y=m.formatName,v=m.formatOptions;if(a.formats[y]){var S=p;try{var M=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},b=M.locale||M.lng||s.locale||s.lng||r;S=a.formats[y](p,b,Xr(Xr(Xr({},v),s),M))}catch(w){a.logger.warn(w)}return S}else a.logger.warn("there was no format function for ".concat(y));return p},i);return h}}]),t}();function a1(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function l1(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?a1(Object(i),!0).forEach(function(n){Es(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a1(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function u3(t){var e=h3();return function(){var n=yr(t),r;if(e){var s=yr(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return Uu(this,r)}}function h3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function c3(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}var f3=function(t){Gf(i,t);var e=u3(i);function i(n,r,s){var a,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Gn(this,i),a=e.call(this),Vf&&Cs.call(ws(a)),a.backend=n,a.store=r,a.services=s,a.languageUtils=s.languageUtils,a.options=l,a.logger=cr.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=l.maxParallelReads||10,a.readingCalls=0,a.maxRetries=l.maxRetries>=0?l.maxRetries:5,a.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(s,l.backend,l),a}return Vn(i,[{key:"queueLoad",value:function(r,s,a,l){var h=this,p={},d={},m={},y={};return r.forEach(function(v){var S=!0;s.forEach(function(M){var b="".concat(v,"|").concat(M);!a.reload&&h.store.hasResourceBundle(v,M)?h.state[b]=2:h.state[b]<0||(h.state[b]===1?d[b]===void 0&&(d[b]=!0):(h.state[b]=1,S=!1,d[b]===void 0&&(d[b]=!0),p[b]===void 0&&(p[b]=!0),y[M]===void 0&&(y[M]=!0)))}),S||(m[v]=!0)}),(Object.keys(p).length||Object.keys(d).length)&&this.queue.push({pending:d,pendingCount:Object.keys(d).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(p),pending:Object.keys(d),toLoadLanguages:Object.keys(m),toLoadNamespaces:Object.keys(y)}}},{key:"loaded",value:function(r,s,a){var l=r.split("|"),h=l[0],p=l[1];s&&this.emit("failedLoading",h,p,s),a&&this.store.addResourceBundle(h,p,a),this.state[r]=s?-1:2;var d={};this.queue.forEach(function(m){VJ(m.loaded,[h],p),c3(m,r),s&&m.errors.push(s),m.pendingCount===0&&!m.done&&(Object.keys(m.loaded).forEach(function(y){d[y]||(d[y]={});var v=m.loaded[y];v.length&&v.forEach(function(S){d[y][S]===void 0&&(d[y][S]=!0)})}),m.done=!0,m.errors.length?m.callback(m.errors):m.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(function(m){return!m.done})}},{key:"read",value:function(r,s,a){var l=this,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,d=arguments.length>5?arguments[5]:void 0;if(!r.length)return d(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:r,ns:s,fcName:a,tried:h,wait:p,callback:d});return}return this.readingCalls++,this.backend[a](r,s,function(m,y){if(l.readingCalls--,l.waitingReads.length>0){var v=l.waitingReads.shift();l.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(m&&y&&h<l.maxRetries){setTimeout(function(){l.read.call(l,r,s,a,h+1,p*2,d)},p);return}d(m,y)})}},{key:"prepareLoading",value:function(r,s){var a=this,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),h&&h();typeof r=="string"&&(r=this.languageUtils.toResolveHierarchy(r)),typeof s=="string"&&(s=[s]);var p=this.queueLoad(r,s,l,h);if(!p.toLoad.length)return p.pending.length||h(),null;p.toLoad.forEach(function(d){a.loadOne(d)})}},{key:"load",value:function(r,s,a){this.prepareLoading(r,s,{},a)}},{key:"reload",value:function(r,s,a){this.prepareLoading(r,s,{reload:!0},a)}},{key:"loadOne",value:function(r){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=r.split("|"),h=l[0],p=l[1];this.read(h,p,"read",void 0,void 0,function(d,m){d&&s.logger.warn("".concat(a,"loading namespace ").concat(p," for language ").concat(h," failed"),d),!d&&m&&s.logger.log("".concat(a,"loaded namespace ").concat(p," for language ").concat(h),m),s.loaded(r,d,m)})}},{key:"saveMissing",value:function(r,s,a,l,h){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}a==null||a===""||(this.backend&&this.backend.create&&this.backend.create(r,s,a,l,null,l1(l1({},p),{},{isUpdate:h})),!(!r||!r[0])&&this.store.addResource(r[0],s,a,l))}}]),i}(Cs);function p3(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var i={};if(Pn(e[1])==="object"&&(i=e[1]),typeof e[1]=="string"&&(i.defaultValue=e[1]),typeof e[2]=="string"&&(i.tDescription=e[2]),Pn(e[2])==="object"||Pn(e[3])==="object"){var n=e[3]||e[2];Object.keys(n).forEach(function(r){i[r]=n[r]})}return i},interpolation:{escapeValue:!0,format:function(e,i,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function u1(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function h1(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function er(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?h1(Object(i),!0).forEach(function(n){Es(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h1(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function d3(t){var e=g3();return function(){var n=yr(t),r;if(e){var s=yr(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return Uu(this,r)}}function g3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oc(){}function m3(t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));e.forEach(function(i){typeof t[i]=="function"&&(t[i]=t[i].bind(t))})}var hf=function(t){Gf(i,t);var e=d3(i);function i(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(Gn(this,i),n=e.call(this),Vf&&Cs.call(ws(n)),n.options=u1(r),n.services={},n.logger=cr,n.modules={external:[]},m3(ws(n)),s&&!n.isInitialized&&!r.isClone){if(!n.options.initImmediate)return n.init(r,s),Uu(n,ws(n));setTimeout(function(){n.init(r,s)},0)}return n}return Vn(i,[{key:"init",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(a=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var l=p3();this.options=er(er(er({},l),this.options),u1(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=er(er({},l.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function h(w){return w?typeof w=="function"?new w:w:null}if(!this.options.isClone){this.modules.logger?cr.init(h(this.modules.logger),this.options):cr.init(null,this.options);var p;this.modules.formatter?p=this.modules.formatter:typeof Intl<"u"&&(p=l3);var d=new e3(this.options);this.store=new ZJ(this.options.resources,this.options);var m=this.services;m.logger=cr,m.resourceStore=this.store,m.languageUtils=d,m.pluralResolver=new s3(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),p&&(!this.options.interpolation.format||this.options.interpolation.format===l.interpolation.format)&&(m.formatter=h(p),m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new o3(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new f3(h(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",function(w){for(var E=arguments.length,B=new Array(E>1?E-1:0),L=1;L<E;L++)B[L-1]=arguments[L];r.emit.apply(r,[w].concat(B))}),this.modules.languageDetector&&(m.languageDetector=h(this.modules.languageDetector),m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=h(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new n1(this.services,this.options),this.translator.on("*",function(w){for(var E=arguments.length,B=new Array(E>1?E-1:0),L=1;L<E;L++)B[L-1]=arguments[L];r.emit.apply(r,[w].concat(B))}),this.modules.external.forEach(function(w){w.init&&w.init(r)})}if(this.format=this.options.interpolation.format,a||(a=oc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var y=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);y.length>0&&y[0]!=="dev"&&(this.options.lng=y[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var v=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];v.forEach(function(w){r[w]=function(){var E;return(E=r.store)[w].apply(E,arguments)}});var S=["addResource","addResources","addResourceBundle","removeResourceBundle"];S.forEach(function(w){r[w]=function(){var E;return(E=r.store)[w].apply(E,arguments),r}});var M=Jl(),b=function(){var E=function(L,I){r.isInitialized&&!r.initializedStoreOnce&&r.logger.warn("init: i18next is already initialized. You should call init just once!"),r.isInitialized=!0,r.options.isClone||r.logger.log("initialized",r.options),r.emit("initialized",r.options),M.resolve(I),a(L,I)};if(r.languages&&r.options.compatibilityAPI!=="v1"&&!r.isInitialized)return E(null,r.t.bind(r));r.changeLanguage(r.options.lng,E)};return this.options.resources||!this.options.initImmediate?b():setTimeout(b,0),M}},{key:"loadResources",value:function(r){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oc,l=a,h=typeof r=="string"?r:this.language;if(typeof r=="function"&&(l=r),!this.options.resources||this.options.partialBundledLanguages){if(h&&h.toLowerCase()==="cimode")return l();var p=[],d=function(v){if(v){var S=s.services.languageUtils.toResolveHierarchy(v);S.forEach(function(M){p.indexOf(M)<0&&p.push(M)})}};if(h)d(h);else{var m=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);m.forEach(function(y){return d(y)})}this.options.preload&&this.options.preload.forEach(function(y){return d(y)}),this.services.backendConnector.load(p,this.options.ns,function(y){!y&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),l(y)})}else l(null)}},{key:"reloadResources",value:function(r,s,a){var l=Jl();return r||(r=this.languages),s||(s=this.options.ns),a||(a=oc),this.services.backendConnector.reload(r,s,function(h){l.resolve(),a(h)}),l}},{key:"use",value:function(r){if(!r)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!r.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return r.type==="backend"&&(this.modules.backend=r),(r.type==="logger"||r.log&&r.warn&&r.error)&&(this.modules.logger=r),r.type==="languageDetector"&&(this.modules.languageDetector=r),r.type==="i18nFormat"&&(this.modules.i18nFormat=r),r.type==="postProcessor"&&wk.addPostProcessor(r),r.type==="formatter"&&(this.modules.formatter=r),r.type==="3rdParty"&&this.modules.external.push(r),this}},{key:"setResolvedLanguage",value:function(r){if(!(!r||!this.languages)&&!(["cimode","dev"].indexOf(r)>-1))for(var s=0;s<this.languages.length;s++){var a=this.languages[s];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}},{key:"changeLanguage",value:function(r,s){var a=this;this.isLanguageChangingTo=r;var l=Jl();this.emit("languageChanging",r);var h=function(y){a.language=y,a.languages=a.services.languageUtils.toResolveHierarchy(y),a.resolvedLanguage=void 0,a.setResolvedLanguage(y)},p=function(y,v){v?(h(v),a.translator.changeLanguage(v),a.isLanguageChangingTo=void 0,a.emit("languageChanged",v),a.logger.log("languageChanged",v)):a.isLanguageChangingTo=void 0,l.resolve(function(){return a.t.apply(a,arguments)}),s&&s(y,function(){return a.t.apply(a,arguments)})},d=function(y){!r&&!y&&a.services.languageDetector&&(y=[]);var v=typeof y=="string"?y:a.services.languageUtils.getBestMatchFromCodes(y);v&&(a.language||h(v),a.translator.language||a.translator.changeLanguage(v),a.services.languageDetector&&a.services.languageDetector.cacheUserLanguage(v)),a.loadResources(v,function(S){p(S,v)})};return!r&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!r&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(d):d(r),l}},{key:"getFixedT",value:function(r,s,a){var l=this,h=function p(d,m){var y;if(Pn(m)!=="object"){for(var v=arguments.length,S=new Array(v>2?v-2:0),M=2;M<v;M++)S[M-2]=arguments[M];y=l.options.overloadTranslationOptionHandler([d,m].concat(S))}else y=er({},m);y.lng=y.lng||p.lng,y.lngs=y.lngs||p.lngs,y.ns=y.ns||p.ns,y.keyPrefix=y.keyPrefix||a||p.keyPrefix;var b=l.options.keySeparator||".",w=y.keyPrefix?"".concat(y.keyPrefix).concat(b).concat(d):d;return l.t(w,y)};return typeof r=="string"?h.lng=r:h.lngs=r,h.ns=s,h.keyPrefix=a,h}},{key:"t",value:function(){var r;return this.translator&&(r=this.translator).translate.apply(r,arguments)}},{key:"exists",value:function(){var r;return this.translator&&(r=this.translator).exists.apply(r,arguments)}},{key:"setDefaultNamespace",value:function(r){this.options.defaultNS=r}},{key:"hasLoadedNamespace",value:function(r){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var l=this.resolvedLanguage||this.languages[0],h=this.options?this.options.fallbackLng:!1,p=this.languages[this.languages.length-1];if(l.toLowerCase()==="cimode")return!0;var d=function(v,S){var M=s.services.backendConnector.state["".concat(v,"|").concat(S)];return M===-1||M===2};if(a.precheck){var m=a.precheck(this,d);if(m!==void 0)return m}return!!(this.hasResourceBundle(l,r)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||d(l,r)&&(!h||d(p,r)))}},{key:"loadNamespaces",value:function(r,s){var a=this,l=Jl();return this.options.ns?(typeof r=="string"&&(r=[r]),r.forEach(function(h){a.options.ns.indexOf(h)<0&&a.options.ns.push(h)}),this.loadResources(function(h){l.resolve(),s&&s(h)}),l):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(r,s){var a=Jl();typeof r=="string"&&(r=[r]);var l=this.options.preload||[],h=r.filter(function(p){return l.indexOf(p)<0});return h.length?(this.options.preload=l.concat(h),this.loadResources(function(p){a.resolve(),s&&s(p)}),a):(s&&s(),Promise.resolve())}},{key:"dir",value:function(r){if(r||(r=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!r)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"];return s.indexOf(this.services.languageUtils.getLanguagePartFromCode(r))>-1||r.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var r=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oc,l=er(er(er({},this.options),s),{isClone:!0}),h=new i(l);(s.debug!==void 0||s.prefix!==void 0)&&(h.logger=h.logger.clone(s));var p=["store","services","language"];return p.forEach(function(d){h[d]=r[d]}),h.services=er({},this.services),h.services.utils={hasLoadedNamespace:h.hasLoadedNamespace.bind(h)},h.translator=new n1(h.services,h.options),h.translator.on("*",function(d){for(var m=arguments.length,y=new Array(m>1?m-1:0),v=1;v<m;v++)y[v-1]=arguments[v];h.emit.apply(h,[d].concat(y))}),h.init(l,a),h.translator.options=h.options,h.translator.backendConnector.services.utils={hasLoadedNamespace:h.hasLoadedNamespace.bind(h)},h}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),i}(Cs);Es(hf,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new hf(t,e)});var Pt=hf.createInstance();Pt.createInstance=hf.createInstance;Pt.createInstance;Pt.init;Pt.loadResources;Pt.reloadResources;Pt.use;Pt.changeLanguage;Pt.getFixedT;Pt.t;Pt.exists;Pt.setDefaultNamespace;Pt.hasLoadedNamespace;Pt.loadNamespaces;Pt.loadLanguages;var _k=[],y3=_k.forEach,v3=_k.slice;function w3(t){return y3.call(v3.call(arguments,1),function(e){if(e)for(var i in e)t[i]===void 0&&(t[i]=e[i])}),t}var c1=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,_3=function(e,i,n){var r=n||{};r.path=r.path||"/";var s=encodeURIComponent(i),a="".concat(e,"=").concat(s);if(r.maxAge>0){var l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");a+="; Max-Age=".concat(Math.floor(l))}if(r.domain){if(!c1.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain=".concat(r.domain)}if(r.path){if(!c1.test(r.path))throw new TypeError("option path is invalid");a+="; Path=".concat(r.path)}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires=".concat(r.expires.toUTCString())}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite){var h=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(h){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},f1={create:function(e,i,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),r&&(s.domain=r),document.cookie=_3(e,encodeURIComponent(i),s)},read:function(e){for(var i="".concat(e,"="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var s=n[r];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(i)===0)return s.substring(i.length,s.length)}return null},remove:function(e){this.create(e,"",-1)}},b3={name:"cookie",lookup:function(e){var i;if(e.lookupCookie&&typeof document<"u"){var n=f1.read(e.lookupCookie);n&&(i=n)}return i},cacheUserLanguage:function(e,i){i.lookupCookie&&typeof document<"u"&&f1.create(i.lookupCookie,e,i.cookieMinutes,i.cookieDomain,i.cookieOptions)}},x3={name:"querystring",lookup:function(e){var i;if(typeof window<"u"){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=n.substring(1),s=r.split("&"),a=0;a<s.length;a++){var l=s[a].indexOf("=");if(l>0){var h=s[a].substring(0,l);h===e.lookupQuerystring&&(i=s[a].substring(l+1))}}}return i}},Pl=null,p1=function(){if(Pl!==null)return Pl;try{Pl=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Pl=!1}return Pl},S3={name:"localStorage",lookup:function(e){var i;if(e.lookupLocalStorage&&p1()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(i=n)}return i},cacheUserLanguage:function(e,i){i.lookupLocalStorage&&p1()&&window.localStorage.setItem(i.lookupLocalStorage,e)}},Fl=null,d1=function(){if(Fl!==null)return Fl;try{Fl=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Fl=!1}return Fl},C3={name:"sessionStorage",lookup:function(e){var i;if(e.lookupSessionStorage&&d1()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(i=n)}return i},cacheUserLanguage:function(e,i){i.lookupSessionStorage&&d1()&&window.sessionStorage.setItem(i.lookupSessionStorage,e)}},M3={name:"navigator",lookup:function(e){var i=[];if(typeof navigator<"u"){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)i.push(navigator.languages[n]);navigator.userLanguage&&i.push(navigator.userLanguage),navigator.language&&i.push(navigator.language)}return i.length>0?i:void 0}},k3={name:"htmlTag",lookup:function(e){var i,n=e.htmlTag||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(i=n.getAttribute("lang")),i}},T3={name:"path",lookup:function(e){var i;if(typeof window<"u"){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof n[e.lookupFromPathIndex]!="string")return;i=n[e.lookupFromPathIndex].replace("/","")}else i=n[0].replace("/","")}return i}},E3={name:"subdomain",lookup:function(e){var i=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,n=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[i]}};function A3(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var bk=function(){function t(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gn(this,t),this.type="languageDetector",this.detectors={},this.init(e,i)}return Vn(t,[{key:"init",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=i,this.options=w3(n,this.options||{},A3()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(b3),this.addDetector(x3),this.addDetector(S3),this.addDetector(C3),this.addDetector(M3),this.addDetector(k3),this.addDetector(T3),this.addDetector(E3)}},{key:"addDetector",value:function(i){this.detectors[i.name]=i}},{key:"detect",value:function(i){var n=this;i||(i=this.options.order);var r=[];return i.forEach(function(s){if(n.detectors[s]){var a=n.detectors[s].lookup(n.options);a&&typeof a=="string"&&(a=[a]),a&&(r=r.concat(a))}}),this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}},{key:"cacheUserLanguage",value:function(i,n){var r=this;n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(i)>-1||n.forEach(function(s){r.detectors[s]&&r.detectors[s].cacheUserLanguage(i,r.options)}))}}]),t}();bk.type="languageDetector";const xk={en:{translation:{"language-name":"english",toolbar:{run:"Run all code (ctrl+shift+enter)",upload:"upload to gallery",clear:"clear all",shuffle:"show random sketch",random:"make random change","load-extension":"load library or extension","show-info":"show info window","hide-info":"hide info window"},info:{title:"hydra",subtitle:"live coding video synth",description:"Hydra is live code-able video synth and coding environment that runs directly in the browser. It is free and open-source and made for beginners and experts alike.","get-started-title":"To get started:","get-started-list":["Close this window","Change some numbers","Type Ctrl + Shift + Enter"],"description-detailed":"Hydra is written in JavaScript and compiles to WebGL under the hood. The syntax is inspired by analog modular synthesis, in which chaining or patching a set of transformations together generates a visual result.",uses:"Hydra can be used:","uses-list":["to mix and add effects to camera feeds, screenshares, live streams, and videos","to create generative and audio-reactive visuals, and share them online with others","in combination with other javascript libraries such as P5.js, Tone.js, THREE.js, or gibber","to add interactive video effects to a website","to experiment with and learn about video feedback, fractals, and pixel operations","to stream video between browsers and live-jam with others online"],author:"Created by <a {{author}}>olivia.</a>","more-info":"For more information and instructions, see: <a {{docs}}>the interactive documentation</a>, <a {{functions}}>a list of hydra functions</a>, <a {{garden}}>the community database of projects and tutorials</a>, <a {{gallery}}>a gallery of user-generated sketches</a>, and <a {{repo}}>the source code on github</a>,","more-info-forums":"There is also an active <a {{discord}}>Discord server</a> and <a {{facebook}}>facebook group</a> for hydra users+contributors.",support:"If you enjoy using Hydra, please consider  <a {{open-collective}} >supporting continued development <3 </a>."},extensions:{"about-extensions":"Show community extensions for hydra-synth.","show-example":"Load and run {{extension-name}} example.","show-library":"Add code for loading {{extension-name}} to the top of the current sketch.","show-docs":"Documentation of usage for {{extension-name}}"}}}},R3=["ja","es","ar","id","pt-br","ch"],L3=t=>`https://raw.githubusercontent.com/hydra-synth/l10n/main/${t}/editor.json`;Pt.use(bk).init({debug:!0,fallbackLng:"en",partialBundledLanguages:!0,resources:xk});function O3(t,e){const i={};let n=new URLSearchParams(window.location.search),r=n.get("l10n-lang"),s=n.get("l10n-url");R3.forEach(h=>{l(h,L3(h))}),r!==null&&s!==null&&l(r,s),a(),e.on("set language",h=>{Pt.changeLanguage(h,(p,d)=>{t.translation.selectedLanguage=h,e.emit("render")})});function a(){Object.keys(xk).forEach(h=>{const p=h.split("-")[0];i[p]=Pt.getFixedT(p)("language-name")}),t.translation={t:Pt.t,languages:i,selectedLanguage:Pt.language,textDirection:Pt.language==="ar"?"rtl":"ltr"}}function l(h="es",p){const d="color: purple; background: orange; font-size: 14px;padding:10px";console.log(`%cloading translation for ${h} from ${p}`,d),fetch(p).then(m=>m.ok?m.json():m.text().then(y=>{throw new Error(y)})).then(m=>{window.i18n=Pt,console.log("adding language",h,m);const y=h.split("-")[0];Pt.addResourceBundle(y,"translation",m),a(),e.emit("render")})}}const I3="https://raw.githubusercontent.com/hydra-synth/hydra-extensions/main/";async function N3(t,e){t.extensions={baseURL:I3,selectedCategoryIndex:0,categories:[{name:"extensions",slug:"extensions",entries:[],hasLoaded:!1},{name:"external libraries",slug:"external-libraries",entries:[],hasLoaded:!1},{name:"examples",slug:"examples",entries:[],hasLoaded:!1}]},e.on("extensions: select category",(i=t.extensions.selectedCategoryIndex)=>{t.extensions.selectedCategoryIndex=i,e.emit("render");const n=t.extensions.categories[i];if(!n.hasLoaded){const r=t.extensions.baseURL+n.slug+".json?laskd";fetch(r).then(s=>s.json()).then(s=>{console.log("loaded d",s),s.forEach(a=>{a.thumbnail=t.extensions.baseURL+"thumbnails/"+a.thumbnail}),n.entries=s,e.emit("render")})}}),e.on("extensions: add to editor",i=>{const{categories:n,selectedCategoryIndex:r}=t.extensions,s=n[r].entries[i].load;e.emit("editor: add code to top",s)}),e.on("extensions: load example",(i,n)=>{const{categories:r,selectedCategoryIndex:s}=t.extensions,a=r[s].entries[i].examples[n],l=new URL(a);console.log(l,t.gallery),t.gallery.setSketchFromURL(l.search,h=>{e.emit("load and eval code",h)})})}function D3(t,e){e.on("editor: randomize",function(i){const n=t.editor.editor;i.shiftKey?n.mutator.doUndo():(n.mutator.mutate({reroll:!1,changeTransform:i.metaKey}),n.formatCode(),e.emit("gallery: save to URL",n.getValue()))}),e.on("editor: add code to top",i=>{t.editor.editor.addCodeToTop(i)}),e.on("editor: format code",()=>{t.editor.editor.formatCode()}),e.on("editor: load code",i=>{t.editor.editor.setValue(i)}),e.on("editor: eval all",function(){const i=t.editor.editor,n=i.getValue();e.emit("repl: eval",n,(r,s)=>{i.flashCode(),s||e.emit("gallery: save to URL",n)})})}var Mm={exports:{}},Sk={exports:{}};(function(t){t.exports=e;function e(n){if(n)return i(n)}function i(n){for(var r in e.prototype)n[r]=e.prototype[r];return n}e.prototype.on=e.prototype.addEventListener=function(n,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(r),this},e.prototype.once=function(n,r){function s(){this.off(n,s),r.apply(this,arguments)}return s.fn=r,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var a,l=0;l<s.length;l++)if(a=s[l],a===r||a.fn===r){s.splice(l,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),s=this._callbacks["$"+n],a=1;a<arguments.length;a++)r[a-1]=arguments[a];if(s){s=s.slice(0);for(var a=0,l=s.length;a<l;++a)s[a].apply(this,r)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(Sk);var mo=Sk.exports,B3=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},i=Symbol("test"),n=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var r=42;e[i]=r;for(i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==i||!Object.prototype.propertyIsEnumerable.call(e,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,i);if(a.value!==r||a.enumerable!==!0)return!1}return!0},g1=typeof Symbol<"u"&&Symbol,U3=B3,J3=function(){return typeof g1!="function"||typeof Symbol!="function"||typeof g1("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:U3()},m1={foo:{}},P3=Object,F3=function(){return{__proto__:m1}.foo===m1.foo&&!({__proto__:null}instanceof P3)},j3="Function.prototype.bind called on incompatible ",jd=Array.prototype.slice,W3=Object.prototype.toString,G3="[object Function]",V3=function(e){var i=this;if(typeof i!="function"||W3.call(i)!==G3)throw new TypeError(j3+i);for(var n=jd.call(arguments,1),r,s=function(){if(this instanceof r){var d=i.apply(this,n.concat(jd.call(arguments)));return Object(d)===d?d:this}else return i.apply(e,n.concat(jd.call(arguments)))},a=Math.max(0,i.length-n.length),l=[],h=0;h<a;h++)l.push("$"+h);if(r=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(s),i.prototype){var p=function(){};p.prototype=i.prototype,r.prototype=new p,p.prototype=null}return r},K3=V3,Y0=Function.prototype.bind||K3,z3=Y0,H3=z3.call(Function.call,Object.prototype.hasOwnProperty),Ye,Ca=SyntaxError,Ck=Function,fa=TypeError,Wd=function(t){try{return Ck('"use strict"; return ('+t+").constructor;")()}catch{}},so=Object.getOwnPropertyDescriptor;if(so)try{so({},"")}catch{so=null}var Gd=function(){throw new fa},Q3=so?function(){try{return arguments.callee,Gd}catch{try{return so(arguments,"callee").get}catch{return Gd}}}():Gd,Ho=J3(),Y3=F3(),si=Object.getPrototypeOf||(Y3?function(t){return t.__proto__}:null),ia={},$3=typeof Uint8Array>"u"||!si?Ye:si(Uint8Array),oo={"%AggregateError%":typeof AggregateError>"u"?Ye:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ye:ArrayBuffer,"%ArrayIteratorPrototype%":Ho&&si?si([][Symbol.iterator]()):Ye,"%AsyncFromSyncIteratorPrototype%":Ye,"%AsyncFunction%":ia,"%AsyncGenerator%":ia,"%AsyncGeneratorFunction%":ia,"%AsyncIteratorPrototype%":ia,"%Atomics%":typeof Atomics>"u"?Ye:Atomics,"%BigInt%":typeof BigInt>"u"?Ye:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ye:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ye:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ye:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ye:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ye:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ye:FinalizationRegistry,"%Function%":Ck,"%GeneratorFunction%":ia,"%Int8Array%":typeof Int8Array>"u"?Ye:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ye:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ye:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ho&&si?si(si([][Symbol.iterator]())):Ye,"%JSON%":typeof JSON=="object"?JSON:Ye,"%Map%":typeof Map>"u"?Ye:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ho||!si?Ye:si(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ye:Promise,"%Proxy%":typeof Proxy>"u"?Ye:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ye:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ye:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ho||!si?Ye:si(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ye:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ho&&si?si(""[Symbol.iterator]()):Ye,"%Symbol%":Ho?Symbol:Ye,"%SyntaxError%":Ca,"%ThrowTypeError%":Q3,"%TypedArray%":$3,"%TypeError%":fa,"%Uint8Array%":typeof Uint8Array>"u"?Ye:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ye:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ye:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ye:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ye:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ye:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ye:WeakSet};if(si)try{null.error}catch(t){var Z3=si(si(t));oo["%Error.prototype%"]=Z3}var q3=function t(e){var i;if(e==="%AsyncFunction%")i=Wd("async function () {}");else if(e==="%GeneratorFunction%")i=Wd("function* () {}");else if(e==="%AsyncGeneratorFunction%")i=Wd("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(i=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=t("%AsyncGenerator%");r&&si&&(i=si(r.prototype))}return oo[e]=i,i},y1={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ju=Y0,cf=H3,X3=Ju.call(Function.call,Array.prototype.concat),eP=Ju.call(Function.apply,Array.prototype.splice),v1=Ju.call(Function.call,String.prototype.replace),ff=Ju.call(Function.call,String.prototype.slice),tP=Ju.call(Function.call,RegExp.prototype.exec),iP=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,nP=/\\(\\)?/g,rP=function(e){var i=ff(e,0,1),n=ff(e,-1);if(i==="%"&&n!=="%")throw new Ca("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&i!=="%")throw new Ca("invalid intrinsic syntax, expected opening `%`");var r=[];return v1(e,iP,function(s,a,l,h){r[r.length]=l?v1(h,nP,"$1"):a||s}),r},sP=function(e,i){var n=e,r;if(cf(y1,n)&&(r=y1[n],n="%"+r[0]+"%"),cf(oo,n)){var s=oo[n];if(s===ia&&(s=q3(n)),typeof s>"u"&&!i)throw new fa("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:s}}throw new Ca("intrinsic "+e+" does not exist!")},$0=function(e,i){if(typeof e!="string"||e.length===0)throw new fa("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof i!="boolean")throw new fa('"allowMissing" argument must be a boolean');if(tP(/^%?[^%]*%?$/,e)===null)throw new Ca("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=rP(e),r=n.length>0?n[0]:"",s=sP("%"+r+"%",i),a=s.name,l=s.value,h=!1,p=s.alias;p&&(r=p[0],eP(n,X3([0,1],p)));for(var d=1,m=!0;d<n.length;d+=1){var y=n[d],v=ff(y,0,1),S=ff(y,-1);if((v==='"'||v==="'"||v==="`"||S==='"'||S==="'"||S==="`")&&v!==S)throw new Ca("property names with quotes must have matching quotes");if((y==="constructor"||!m)&&(h=!0),r+="."+y,a="%"+r+"%",cf(oo,a))l=oo[a];else if(l!=null){if(!(y in l)){if(!i)throw new fa("base intrinsic for "+e+" exists, but the property is not available.");return}if(so&&d+1>=n.length){var M=so(l,y);m=!!M,m&&"get"in M&&!("originalValue"in M.get)?l=M.get:l=l[y]}else m=cf(l,y),l=l[y];m&&!h&&(oo[a]=l)}}return l},Mk={exports:{}};(function(t){var e=Y0,i=$0,n=i("%Function.prototype.apply%"),r=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||e.call(r,n),a=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),h=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(m){var y=s(e,r,arguments);if(a&&l){var v=a(y,"length");v.configurable&&l(y,"length",{value:1+h(0,m.length-(arguments.length-1))})}return y};var p=function(){return s(e,n,arguments)};l?l(t.exports,"apply",{value:p}):t.exports.apply=p})(Mk);var oP=Mk.exports,kk=$0,Tk=oP,aP=Tk(kk("String.prototype.indexOf")),lP=function(e,i){var n=kk(e,!!i);return typeof n=="function"&&aP(e,".prototype.")>-1?Tk(n):n},Z0=typeof Map=="function"&&Map.prototype,Vd=Object.getOwnPropertyDescriptor&&Z0?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,pf=Z0&&Vd&&typeof Vd.get=="function"?Vd.get:null,w1=Z0&&Map.prototype.forEach,q0=typeof Set=="function"&&Set.prototype,Kd=Object.getOwnPropertyDescriptor&&q0?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,df=q0&&Kd&&typeof Kd.get=="function"?Kd.get:null,_1=q0&&Set.prototype.forEach,uP=typeof WeakMap=="function"&&WeakMap.prototype,ru=uP?WeakMap.prototype.has:null,hP=typeof WeakSet=="function"&&WeakSet.prototype,su=hP?WeakSet.prototype.has:null,cP=typeof WeakRef=="function"&&WeakRef.prototype,b1=cP?WeakRef.prototype.deref:null,fP=Boolean.prototype.valueOf,pP=Object.prototype.toString,dP=Function.prototype.toString,gP=String.prototype.match,X0=String.prototype.slice,fs=String.prototype.replace,mP=String.prototype.toUpperCase,x1=String.prototype.toLowerCase,Ek=RegExp.prototype.test,S1=Array.prototype.concat,rr=Array.prototype.join,yP=Array.prototype.slice,C1=Math.floor,km=typeof BigInt=="function"?BigInt.prototype.valueOf:null,zd=Object.getOwnPropertySymbols,Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ma=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ci=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ma||"symbol")?Symbol.toStringTag:null,Ak=Object.prototype.propertyIsEnumerable,M1=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function k1(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Ek.call(/e/,e))return e;var i=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-C1(-t):C1(t);if(n!==t){var r=String(n),s=X0.call(e,r.length+1);return fs.call(r,i,"$&_")+"."+fs.call(fs.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return fs.call(e,i,"$&_")}var Em=Aa,T1=Em.custom,E1=Lk(T1)?T1:null,vP=function t(e,i,n,r){var s=i||{};if(rs(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(rs(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=rs(s,"customInspect")?s.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(rs(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(rs(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return Ik(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var h=String(e);return l?k1(e,h):h}if(typeof e=="bigint"){var p=String(e)+"n";return l?k1(e,p):p}var d=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=d&&d>0&&typeof e=="object")return Am(e)?"[Array]":"[Object]";var m=BP(s,n);if(typeof r>"u")r=[];else if(Ok(r,e)>=0)return"[Circular]";function y(re,le,q){if(le&&(r=yP.call(r),r.push(le)),q){var Z={depth:s.depth};return rs(s,"quoteStyle")&&(Z.quoteStyle=s.quoteStyle),t(re,Z,n+1,r)}return t(re,s,n+1,r)}if(typeof e=="function"&&!A1(e)){var v=TP(e),S=ac(e,y);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(S.length>0?" { "+rr.call(S,", ")+" }":"")}if(Lk(e)){var M=Ma?fs.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Tm.call(e);return typeof e=="object"&&!Ma?jl(M):M}if(IP(e)){for(var b="<"+x1.call(String(e.nodeName)),w=e.attributes||[],E=0;E<w.length;E++)b+=" "+w[E].name+"="+Rk(wP(w[E].value),"double",s);return b+=">",e.childNodes&&e.childNodes.length&&(b+="..."),b+="</"+x1.call(String(e.nodeName))+">",b}if(Am(e)){if(e.length===0)return"[]";var B=ac(e,y);return m&&!DP(B)?"["+Rm(B,m)+"]":"[ "+rr.call(B,", ")+" ]"}if(bP(e)){var L=ac(e,y);return!("cause"in Error.prototype)&&"cause"in e&&!Ak.call(e,"cause")?"{ ["+String(e)+"] "+rr.call(S1.call("[cause]: "+y(e.cause),L),", ")+" }":L.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+rr.call(L,", ")+" }"}if(typeof e=="object"&&a){if(E1&&typeof e[E1]=="function"&&Em)return Em(e,{depth:d-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(EP(e)){var I=[];return w1&&w1.call(e,function(re,le){I.push(y(le,e,!0)+" => "+y(re,e))}),R1("Map",pf.call(e),I,m)}if(LP(e)){var O=[];return _1&&_1.call(e,function(re){O.push(y(re,e))}),R1("Set",df.call(e),O,m)}if(AP(e))return Hd("WeakMap");if(OP(e))return Hd("WeakSet");if(RP(e))return Hd("WeakRef");if(SP(e))return jl(y(Number(e)));if(MP(e))return jl(y(km.call(e)));if(CP(e))return jl(fP.call(e));if(xP(e))return jl(y(String(e)));if(!_P(e)&&!A1(e)){var F=ac(e,y),U=M1?M1(e)===Object.prototype:e instanceof Object||e.constructor===Object,V=e instanceof Object?"":"null prototype",A=!U&&Ci&&Object(e)===e&&Ci in e?X0.call(As(e),8,-1):V?"Object":"",Q=U||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",H=Q+(A||V?"["+rr.call(S1.call([],A||[],V||[]),": ")+"] ":"");return F.length===0?H+"{}":m?H+"{"+Rm(F,m)+"}":H+"{ "+rr.call(F,", ")+" }"}return String(e)};function Rk(t,e,i){var n=(i.quoteStyle||e)==="double"?'"':"'";return n+t+n}function wP(t){return fs.call(String(t),/"/g,"&quot;")}function Am(t){return As(t)==="[object Array]"&&(!Ci||!(typeof t=="object"&&Ci in t))}function _P(t){return As(t)==="[object Date]"&&(!Ci||!(typeof t=="object"&&Ci in t))}function A1(t){return As(t)==="[object RegExp]"&&(!Ci||!(typeof t=="object"&&Ci in t))}function bP(t){return As(t)==="[object Error]"&&(!Ci||!(typeof t=="object"&&Ci in t))}function xP(t){return As(t)==="[object String]"&&(!Ci||!(typeof t=="object"&&Ci in t))}function SP(t){return As(t)==="[object Number]"&&(!Ci||!(typeof t=="object"&&Ci in t))}function CP(t){return As(t)==="[object Boolean]"&&(!Ci||!(typeof t=="object"&&Ci in t))}function Lk(t){if(Ma)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Tm)return!1;try{return Tm.call(t),!0}catch{}return!1}function MP(t){if(!t||typeof t!="object"||!km)return!1;try{return km.call(t),!0}catch{}return!1}var kP=Object.prototype.hasOwnProperty||function(t){return t in this};function rs(t,e){return kP.call(t,e)}function As(t){return pP.call(t)}function TP(t){if(t.name)return t.name;var e=gP.call(dP.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Ok(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function EP(t){if(!pf||!t||typeof t!="object")return!1;try{pf.call(t);try{df.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function AP(t){if(!ru||!t||typeof t!="object")return!1;try{ru.call(t,ru);try{su.call(t,su)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function RP(t){if(!b1||!t||typeof t!="object")return!1;try{return b1.call(t),!0}catch{}return!1}function LP(t){if(!df||!t||typeof t!="object")return!1;try{df.call(t);try{pf.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function OP(t){if(!su||!t||typeof t!="object")return!1;try{su.call(t,su);try{ru.call(t,ru)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function IP(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function Ik(t,e){if(t.length>e.maxStringLength){var i=t.length-e.maxStringLength,n="... "+i+" more character"+(i>1?"s":"");return Ik(X0.call(t,0,e.maxStringLength),e)+n}var r=fs.call(fs.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,NP);return Rk(r,"single",e)}function NP(t){var e=t.charCodeAt(0),i={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return i?"\\"+i:"\\x"+(e<16?"0":"")+mP.call(e.toString(16))}function jl(t){return"Object("+t+")"}function Hd(t){return t+" { ? }"}function R1(t,e,i,n){var r=n?Rm(i,n):rr.call(i,", ");return t+" ("+e+") {"+r+"}"}function DP(t){for(var e=0;e<t.length;e++)if(Ok(t[e],`
`)>=0)return!1;return!0}function BP(t,e){var i;if(t.indent==="	")i="	";else if(typeof t.indent=="number"&&t.indent>0)i=rr.call(Array(t.indent+1)," ");else return null;return{base:i,prev:rr.call(Array(e+1),i)}}function Rm(t,e){if(t.length===0)return"";var i=`
`+e.prev+e.base;return i+rr.call(t,","+i)+`
`+e.prev}function ac(t,e){var i=Am(t),n=[];if(i){n.length=t.length;for(var r=0;r<t.length;r++)n[r]=rs(t,r)?e(t[r],t):""}var s=typeof zd=="function"?zd(t):[],a;if(Ma){a={};for(var l=0;l<s.length;l++)a["$"+s[l]]=s[l]}for(var h in t)rs(t,h)&&(i&&String(Number(h))===h&&h<t.length||Ma&&a["$"+h]instanceof Symbol||(Ek.call(/[^\w$]/,h)?n.push(e(h,t)+": "+e(t[h],t)):n.push(h+": "+e(t[h],t))));if(typeof zd=="function")for(var p=0;p<s.length;p++)Ak.call(t,s[p])&&n.push("["+e(s[p])+"]: "+e(t[s[p]],t));return n}var ey=$0,Da=lP,UP=vP,JP=ey("%TypeError%"),lc=ey("%WeakMap%",!0),uc=ey("%Map%",!0),PP=Da("WeakMap.prototype.get",!0),FP=Da("WeakMap.prototype.set",!0),jP=Da("WeakMap.prototype.has",!0),WP=Da("Map.prototype.get",!0),GP=Da("Map.prototype.set",!0),VP=Da("Map.prototype.has",!0),ty=function(t,e){for(var i=t,n;(n=i.next)!==null;i=n)if(n.key===e)return i.next=n.next,n.next=t.next,t.next=n,n},KP=function(t,e){var i=ty(t,e);return i&&i.value},zP=function(t,e,i){var n=ty(t,e);n?n.value=i:t.next={key:e,next:t.next,value:i}},HP=function(t,e){return!!ty(t,e)},QP=function(){var e,i,n,r={assert:function(s){if(!r.has(s))throw new JP("Side channel does not contain "+UP(s))},get:function(s){if(lc&&s&&(typeof s=="object"||typeof s=="function")){if(e)return PP(e,s)}else if(uc){if(i)return WP(i,s)}else if(n)return KP(n,s)},has:function(s){if(lc&&s&&(typeof s=="object"||typeof s=="function")){if(e)return jP(e,s)}else if(uc){if(i)return VP(i,s)}else if(n)return HP(n,s);return!1},set:function(s,a){lc&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new lc),FP(e,s,a)):uc?(i||(i=new uc),GP(i,s,a)):(n||(n={key:{},next:null}),zP(n,s,a))}};return r},YP=String.prototype.replace,$P=/%20/g,Qd={RFC1738:"RFC1738",RFC3986:"RFC3986"},iy={default:Qd.RFC3986,formatters:{RFC1738:function(t){return YP.call(t,$P,"+")},RFC3986:function(t){return String(t)}},RFC1738:Qd.RFC1738,RFC3986:Qd.RFC3986},ZP=iy,Yd=Object.prototype.hasOwnProperty,qs=Array.isArray,tr=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),qP=function(e){for(;e.length>1;){var i=e.pop(),n=i.obj[i.prop];if(qs(n)){for(var r=[],s=0;s<n.length;++s)typeof n[s]<"u"&&r.push(n[s]);i.obj[i.prop]=r}}},Nk=function(e,i){for(var n=i&&i.plainObjects?Object.create(null):{},r=0;r<e.length;++r)typeof e[r]<"u"&&(n[r]=e[r]);return n},XP=function t(e,i,n){if(!i)return e;if(typeof i!="object"){if(qs(e))e.push(i);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Yd.call(Object.prototype,i))&&(e[i]=!0);else return[e,i];return e}if(!e||typeof e!="object")return[e].concat(i);var r=e;return qs(e)&&!qs(i)&&(r=Nk(e,n)),qs(e)&&qs(i)?(i.forEach(function(s,a){if(Yd.call(e,a)){var l=e[a];l&&typeof l=="object"&&s&&typeof s=="object"?e[a]=t(l,s,n):e.push(s)}else e[a]=s}),e):Object.keys(i).reduce(function(s,a){var l=i[a];return Yd.call(s,a)?s[a]=t(s[a],l,n):s[a]=l,s},r)},eF=function(e,i){return Object.keys(i).reduce(function(n,r){return n[r]=i[r],n},e)},tF=function(t,e,i){var n=t.replace(/\+/g," ");if(i==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},iF=function(e,i,n,r,s){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var l="",h=0;h<a.length;++h){var p=a.charCodeAt(h);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===ZP.RFC1738&&(p===40||p===41)){l+=a.charAt(h);continue}if(p<128){l=l+tr[p];continue}if(p<2048){l=l+(tr[192|p>>6]+tr[128|p&63]);continue}if(p<55296||p>=57344){l=l+(tr[224|p>>12]+tr[128|p>>6&63]+tr[128|p&63]);continue}h+=1,p=65536+((p&1023)<<10|a.charCodeAt(h)&1023),l+=tr[240|p>>18]+tr[128|p>>12&63]+tr[128|p>>6&63]+tr[128|p&63]}return l},nF=function(e){for(var i=[{obj:{o:e},prop:"o"}],n=[],r=0;r<i.length;++r)for(var s=i[r],a=s.obj[s.prop],l=Object.keys(a),h=0;h<l.length;++h){var p=l[h],d=a[p];typeof d=="object"&&d!==null&&n.indexOf(d)===-1&&(i.push({obj:a,prop:p}),n.push(d))}return qP(i),e},rF=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},sF=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},oF=function(e,i){return[].concat(e,i)},aF=function(e,i){if(qs(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(i(e[r]));return n}return i(e)},Dk={arrayToObject:Nk,assign:eF,combine:oF,compact:nF,decode:tF,encode:iF,isBuffer:sF,isRegExp:rF,maybeMap:aF,merge:XP},Bk=QP,Rc=Dk,ou=iy,lF=Object.prototype.hasOwnProperty,L1={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,i){return e+"["+i+"]"},repeat:function(e){return e}},Tr=Array.isArray,uF=Array.prototype.push,Uk=function(t,e){uF.apply(t,Tr(e)?e:[e])},hF=Date.prototype.toISOString,O1=ou.default,vi={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Rc.encode,encodeValuesOnly:!1,format:O1,formatter:ou.formatters[O1],indices:!1,serializeDate:function(e){return hF.call(e)},skipNulls:!1,strictNullHandling:!1},cF=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},$d={},fF=function t(e,i,n,r,s,a,l,h,p,d,m,y,v,S,M,b){for(var w=e,E=b,B=0,L=!1;(E=E.get($d))!==void 0&&!L;){var I=E.get(e);if(B+=1,typeof I<"u"){if(I===B)throw new RangeError("Cyclic object value");L=!0}typeof E.get($d)>"u"&&(B=0)}if(typeof h=="function"?w=h(i,w):w instanceof Date?w=m(w):n==="comma"&&Tr(w)&&(w=Rc.maybeMap(w,function(Z){return Z instanceof Date?m(Z):Z})),w===null){if(s)return l&&!S?l(i,vi.encoder,M,"key",y):i;w=""}if(cF(w)||Rc.isBuffer(w)){if(l){var O=S?i:l(i,vi.encoder,M,"key",y);return[v(O)+"="+v(l(w,vi.encoder,M,"value",y))]}return[v(i)+"="+v(String(w))]}var F=[];if(typeof w>"u")return F;var U;if(n==="comma"&&Tr(w))S&&l&&(w=Rc.maybeMap(w,l)),U=[{value:w.length>0?w.join(",")||null:void 0}];else if(Tr(h))U=h;else{var V=Object.keys(w);U=p?V.sort(p):V}for(var A=r&&Tr(w)&&w.length===1?i+"[]":i,Q=0;Q<U.length;++Q){var H=U[Q],re=typeof H=="object"&&typeof H.value<"u"?H.value:w[H];if(!(a&&re===null)){var le=Tr(w)?typeof n=="function"?n(A,H):A:A+(d?"."+H:"["+H+"]");b.set(e,B);var q=Bk();q.set($d,b),Uk(F,t(re,le,n,r,s,a,n==="comma"&&S&&Tr(w)?null:l,h,p,d,m,y,v,S,M,q))}}return F},pF=function(e){if(!e)return vi;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var i=e.charset||vi.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=ou.default;if(typeof e.format<"u"){if(!lF.call(ou.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=ou.formatters[n],s=vi.filter;return(typeof e.filter=="function"||Tr(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:vi.addQueryPrefix,allowDots:typeof e.allowDots>"u"?vi.allowDots:!!e.allowDots,charset:i,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:vi.charsetSentinel,delimiter:typeof e.delimiter>"u"?vi.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:vi.encode,encoder:typeof e.encoder=="function"?e.encoder:vi.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:vi.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:vi.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:vi.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:vi.strictNullHandling}},dF=function(t,e){var i=t,n=pF(e),r,s;typeof n.filter=="function"?(s=n.filter,i=s("",i)):Tr(n.filter)&&(s=n.filter,r=s);var a=[];if(typeof i!="object"||i===null)return"";var l;e&&e.arrayFormat in L1?l=e.arrayFormat:e&&"indices"in e?l=e.indices?"indices":"repeat":l="indices";var h=L1[l];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var p=h==="comma"&&e&&e.commaRoundTrip;r||(r=Object.keys(i)),n.sort&&r.sort(n.sort);for(var d=Bk(),m=0;m<r.length;++m){var y=r[m];n.skipNulls&&i[y]===null||Uk(a,fF(i[y],y,h,p,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,d))}var v=a.join(n.delimiter),S=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?S+="utf8=%26%2310003%3B&":S+="utf8=%E2%9C%93&"),v.length>0?S+v:""},ka=Dk,Lm=Object.prototype.hasOwnProperty,gF=Array.isArray,ri={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ka.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},mF=function(t){return t.replace(/&#(\d+);/g,function(e,i){return String.fromCharCode(parseInt(i,10))})},Jk=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},yF="utf8=%26%2310003%3B",vF="utf8=%E2%9C%93",wF=function(e,i){var n={__proto__:null},r=i.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=i.parameterLimit===1/0?void 0:i.parameterLimit,a=r.split(i.delimiter,s),l=-1,h,p=i.charset;if(i.charsetSentinel)for(h=0;h<a.length;++h)a[h].indexOf("utf8=")===0&&(a[h]===vF?p="utf-8":a[h]===yF&&(p="iso-8859-1"),l=h,h=a.length);for(h=0;h<a.length;++h)if(h!==l){var d=a[h],m=d.indexOf("]="),y=m===-1?d.indexOf("="):m+1,v,S;y===-1?(v=i.decoder(d,ri.decoder,p,"key"),S=i.strictNullHandling?null:""):(v=i.decoder(d.slice(0,y),ri.decoder,p,"key"),S=ka.maybeMap(Jk(d.slice(y+1),i),function(M){return i.decoder(M,ri.decoder,p,"value")})),S&&i.interpretNumericEntities&&p==="iso-8859-1"&&(S=mF(S)),d.indexOf("[]=")>-1&&(S=gF(S)?[S]:S),Lm.call(n,v)?n[v]=ka.combine(n[v],S):n[v]=S}return n},_F=function(t,e,i,n){for(var r=n?e:Jk(e,i),s=t.length-1;s>=0;--s){var a,l=t[s];if(l==="[]"&&i.parseArrays)a=[].concat(r);else{a=i.plainObjects?Object.create(null):{};var h=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,p=parseInt(h,10);!i.parseArrays&&h===""?a={0:r}:!isNaN(p)&&l!==h&&String(p)===h&&p>=0&&i.parseArrays&&p<=i.arrayLimit?(a=[],a[p]=r):h!=="__proto__"&&(a[h]=r)}r=a}return r},bF=function(e,i,n,r){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,h=n.depth>0&&a.exec(s),p=h?s.slice(0,h.index):s,d=[];if(p){if(!n.plainObjects&&Lm.call(Object.prototype,p)&&!n.allowPrototypes)return;d.push(p)}for(var m=0;n.depth>0&&(h=l.exec(s))!==null&&m<n.depth;){if(m+=1,!n.plainObjects&&Lm.call(Object.prototype,h[1].slice(1,-1))&&!n.allowPrototypes)return;d.push(h[1])}return h&&d.push("["+s.slice(h.index)+"]"),_F(d,i,n,r)}},xF=function(e){if(!e)return ri;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=typeof e.charset>"u"?ri.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?ri.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:ri.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:ri.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:ri.arrayLimit,charset:i,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:ri.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:ri.comma,decoder:typeof e.decoder=="function"?e.decoder:ri.decoder,delimiter:typeof e.delimiter=="string"||ka.isRegExp(e.delimiter)?e.delimiter:ri.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:ri.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:ri.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:ri.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:ri.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:ri.strictNullHandling}},SF=function(t,e){var i=xF(e);if(t===""||t===null||typeof t>"u")return i.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?wF(t,i):t,r=i.plainObjects?Object.create(null):{},s=Object.keys(n),a=0;a<s.length;++a){var l=s[a],h=bF(l,n[l],i,typeof t=="string");r=ka.merge(r,h,i)}return i.allowSparse===!0?r:ka.compact(r)},CF=dF,MF=SF,kF=iy,TF={formats:kF,parse:MF,stringify:CF},Kf={};(function(t){function e(s){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e(s)}function i(s,a){var l=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!l){if(Array.isArray(s)||(l=n(s))||a&&s&&typeof s.length=="number"){l&&(s=l);var h=0,p=function(){};return{s:p,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(S){throw S},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,m=!1,y;return{s:function(){l=l.call(s)},n:function(){var S=l.next();return d=S.done,S},e:function(S){m=!0,y=S},f:function(){try{!d&&l.return!=null&&l.return()}finally{if(m)throw y}}}}function n(s,a){if(s){if(typeof s=="string")return r(s,a);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return r(s,a)}}function r(s,a){(a==null||a>s.length)&&(a=s.length);for(var l=0,h=new Array(a);l<a;l++)h[l]=s[l];return h}t.type=function(s){return s.split(/ *; */).shift()},t.params=function(s){var a={},l=i(s.split(/ *; */)),h;try{for(l.s();!(h=l.n()).done;){var p=h.value,d=p.split(/ *= */),m=d.shift(),y=d.shift();m&&y&&(a[m]=y)}}catch(v){l.e(v)}finally{l.f()}return a},t.parseLinks=function(s){var a={},l=i(s.split(/ *, */)),h;try{for(l.s();!(h=l.n()).done;){var p=h.value,d=p.split(/ *; */),m=d[0].slice(1,-1),y=d[1].split(/ *= */)[1].slice(1,-1);a[y]=m}}catch(v){l.e(v)}finally{l.f()}return a},t.cleanHeader=function(s,a){return delete s["content-type"],delete s["content-length"],delete s["transfer-encoding"],delete s.host,a&&(delete s.authorization,delete s.cookie),s},t.isObject=function(s){return s!==null&&e(s)==="object"},t.hasOwn=Object.hasOwn||function(s,a){if(s==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(new Object(s),a)},t.mixin=function(s,a){for(var l in a)t.hasOwn(a,l)&&(s[l]=a[l])}})(Kf);function Om(t){"@babel/helpers - typeof";return Om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Om(t)}var Zd=Aa,Pk=Kf,gf=Pk.isObject,Su=Pk.hasOwn,EF=ht;function ht(){}ht.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this};ht.prototype.parse=function(t){return this._parser=t,this};ht.prototype.responseType=function(t){return this._responseType=t,this};ht.prototype.serialize=function(t){return this._serializer=t,this};ht.prototype.timeout=function(t){if(!t||Om(t)!=="object")return this._timeout=t,this._responseTimeout=0,this._uploadTimeout=0,this;for(var e in t)if(Su(t,e))switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;case"upload":this._uploadTimeout=t.upload;break;default:console.warn("Unknown timeout option",e)}return this};ht.prototype.retry=function(t,e){return(arguments.length===0||t===!0)&&(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var AF=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),RF=new Set([408,413,429,500,502,503,504,521,522,524]);ht.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var i=this._retryCallback(t,e);if(i===!0)return!0;if(i===!1)return!1}catch(n){console.error(n)}return!!(e&&e.status&&RF.has(e.status)||t&&(t.code&&AF.has(t.code)||t.timeout&&t.code==="ECONNABORTED"||t.crossDomain))};ht.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()};ht.prototype.then=function(t,e){var i=this;if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(r,s){n.on("abort",function(){if(!(i._maxRetries&&i._maxRetries>i._retries)){if(i.timedout&&i.timedoutError){s(i.timedoutError);return}var a=new Error("Aborted");a.code="ABORTED",a.status=i.status,a.method=i.method,a.url=i.url,s(a)}}),n.end(function(a,l){a?s(a):r(l)})})}return this._fullfilledPromise.then(t,e)};ht.prototype.catch=function(t){return this.then(void 0,t)};ht.prototype.use=function(t){return t(this),this};ht.prototype.ok=function(t){if(typeof t!="function")throw new Error("Callback required");return this._okCallback=t,this};ht.prototype._isResponseOK=function(t){return t?this._okCallback?this._okCallback(t):t.status>=200&&t.status<300:!1};ht.prototype.get=function(t){return this._header[t.toLowerCase()]};ht.prototype.getHeader=ht.prototype.get;ht.prototype.set=function(t,e){if(gf(t)){for(var i in t)Su(t,i)&&this.set(i,t[i]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this};ht.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this};ht.prototype.field=function(t,e,i){if(t==null)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(gf(t)){for(var n in t)Su(t,n)&&this.field(n,t[n]);return this}if(Array.isArray(e)){for(var r in e)Su(e,r)&&this.field(t,e[r]);return this}if(e==null)throw new Error(".field(name, val) val can not be empty");return typeof e=="boolean"&&(e=String(e)),i?this._getFormData().append(t,e,i):this._getFormData().append(t,e),this};ht.prototype.abort=function(){if(this._aborted)return this;if(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req){if(Zd.gte(process.version,"v13.0.0")&&Zd.lt(process.version,"v14.0.0"))throw new Error("Superagent does not work in v13 properly with abort() due to Node.js core changes");Zd.gte(process.version,"v14.0.0")&&(this.req.destroyed=!0),this.req.abort()}return this.clearTimeout(),this.emit("abort"),this};ht.prototype._auth=function(t,e,i,n){switch(i.type){case"basic":this.set("Authorization","Basic ".concat(n("".concat(t,":").concat(e))));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer ".concat(t));break}return this};ht.prototype.withCredentials=function(t){return t===void 0&&(t=!0),this._withCredentials=t,this};ht.prototype.redirects=function(t){return this._maxRedirects=t,this};ht.prototype.maxResponseSize=function(t){if(typeof t!="number")throw new TypeError("Invalid argument");return this._maxResponseSize=t,this};ht.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}};ht.prototype.send=function(t){var e=gf(t),i=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(e&&gf(this._data))for(var n in t)Su(t,n)&&(this._data[n]=t[n]);else typeof t=="string"?(i||this.type("form"),i=this._header["content-type"],i&&(i=i.toLowerCase().trim()),i==="application/x-www-form-urlencoded"?this._data=this._data?"".concat(this._data,"&").concat(t):t:this._data=(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(i||this.type("json"),this)};ht.prototype.sortQuery=function(t){return this._sort=typeof t>"u"?!0:t,this};ht.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.includes("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var i=this.url.slice(e+1).split("&");typeof this._sort=="function"?i.sort(this._sort):i.sort(),this.url=this.url.slice(0,e)+"?"+i.join("&")}}};ht.prototype._appendQueryString=function(){console.warn("Unsupported")};ht.prototype._timeoutError=function(t,e,i){if(!this._aborted){var n=new Error("".concat(t+e,"ms exceeded"));n.timeout=e,n.code="ECONNABORTED",n.errno=i,this.timedout=!0,this.timedoutError=n,this.abort(),this.callback(n)}};ht.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))};var qd=Kf,LF=zf;function zf(){}zf.prototype.get=function(t){return this.header[t.toLowerCase()]};zf.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=qd.type(e);var i=qd.params(e);for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(this[n]=i[n]);this.links={};try{t.link&&(this.links=qd.parseLinks(t.link))}catch{}};zf.prototype._setStatusProperties=function(t){var e=Math.trunc(t/100);this.statusCode=t,this.status=this.statusCode,this.statusType=e,this.info=e===1,this.ok=e===2,this.redirect=e===3,this.clientError=e===4,this.serverError=e===5,this.error=e===4||e===5?this.toError():!1,this.created=t===201,this.accepted=t===202,this.noContent=t===204,this.badRequest=t===400,this.unauthorized=t===401,this.notAcceptable=t===406,this.forbidden=t===403,this.notFound=t===404,this.unprocessableEntity=t===422};function OF(t){return DF(t)||NF(t)||Fk(t)||IF()}function IF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NF(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function DF(t){if(Array.isArray(t))return Im(t)}function BF(t,e){var i=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=Fk(t))||e&&t&&typeof t.length=="number"){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(p){throw p},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){i=i.call(t)},n:function(){var p=i.next();return s=p.done,p},e:function(p){a=!0,l=p},f:function(){try{!s&&i.return!=null&&i.return()}finally{if(a)throw l}}}}function Fk(t,e){if(t){if(typeof t=="string")return Im(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Im(t,e)}}function Im(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function ny(){this._defaults=[]}var UF=function(){var e=jk[Nm];ny.prototype[e]=function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this._defaults.push({fn:e,args:n}),this}};for(var Nm=0,jk=["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"];Nm<jk.length;Nm++)UF();ny.prototype._setDefaults=function(t){var e=BF(this._defaults),i;try{for(e.s();!(i=e.n()).done;){var n=i.value;t[n.fn].apply(t,OF(n.args))}}catch(r){e.e(r)}finally{e.f()}};var JF=ny;(function(t,e){function i(q){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},i(q)}function n(q,Z){var W=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!W){if(Array.isArray(q)||(W=r(q))||Z&&q&&typeof q.length=="number"){W&&(q=W);var $=0,ne=function(){};return{s:ne,n:function(){return $>=q.length?{done:!0}:{done:!1,value:q[$++]}},e:function(Re){throw Re},f:ne}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var we=!0,ye=!1,xe;return{s:function(){W=W.call(q)},n:function(){var Re=W.next();return we=Re.done,Re},e:function(Re){ye=!0,xe=Re},f:function(){try{!we&&W.return!=null&&W.return()}finally{if(ye)throw xe}}}}function r(q,Z){if(q){if(typeof q=="string")return s(q,Z);var W=Object.prototype.toString.call(q).slice(8,-1);if(W==="Object"&&q.constructor&&(W=q.constructor.name),W==="Map"||W==="Set")return Array.from(q);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return s(q,Z)}}function s(q,Z){(Z==null||Z>q.length)&&(Z=q.length);for(var W=0,$=new Array(Z);W<Z;W++)$[W]=q[W];return $}var a;typeof window<"u"?a=window:typeof self>"u"?(console.warn("Using browser-only version of superagent in non-browser environment"),a=void 0):a=self;var l=mo,h=Hx,p=TF,d=EF,m=Kf,y=m.isObject,v=m.mixin,S=m.hasOwn,M=LF,b=JF;function w(){}t.exports=function(q,Z){return typeof Z=="function"?new e.Request("GET",q).end(Z):arguments.length===1?new e.Request("GET",q):new e.Request(q,Z)},e=t.exports;var E=e;e.Request=A,E.getXHR=function(){if(a.XMLHttpRequest&&(!a.location||a.location.protocol!=="file:"))return new XMLHttpRequest;throw new Error("Browser-only version of superagent could not find XHR")};var B="".trim?function(q){return q.trim()}:function(q){return q.replace(/(^\s*|\s*$)/g,"")};function L(q){if(!y(q))return q;var Z=[];for(var W in q)S(q,W)&&I(Z,W,q[W]);return Z.join("&")}function I(q,Z,W){if(W!==void 0){if(W===null){q.push(encodeURI(Z));return}if(Array.isArray(W)){var $=n(W),ne;try{for($.s();!(ne=$.n()).done;){var we=ne.value;I(q,Z,we)}}catch(xe){$.e(xe)}finally{$.f()}}else if(y(W))for(var ye in W)S(W,ye)&&I(q,"".concat(Z,"[").concat(ye,"]"),W[ye]);else q.push(encodeURI(Z)+"="+encodeURIComponent(W))}}E.serializeObject=L;function O(q){for(var Z={},W=q.split("&"),$,ne,we=0,ye=W.length;we<ye;++we)$=W[we],ne=$.indexOf("="),ne===-1?Z[decodeURIComponent($)]="":Z[decodeURIComponent($.slice(0,ne))]=decodeURIComponent($.slice(ne+1));return Z}E.parseString=O,E.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},E.serialize={"application/x-www-form-urlencoded":p.stringify,"application/json":h},E.parse={"application/x-www-form-urlencoded":O,"application/json":JSON.parse};function F(q){for(var Z=q.split(/\r?\n/),W={},$,ne,we,ye,xe=0,Se=Z.length;xe<Se;++xe)ne=Z[xe],$=ne.indexOf(":"),$!==-1&&(we=ne.slice(0,$).toLowerCase(),ye=B(ne.slice($+1)),W[we]=ye);return W}function U(q){return/[/+]json($|[^-\w])/i.test(q)}function V(q){this.req=q,this.xhr=this.req.xhr,this.text=this.req.method!=="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||typeof this.xhr.responseType>"u"?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var Z=this.xhr.status;Z===1223&&(Z=204),this._setStatusProperties(Z),this.headers=F(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.text===null&&q._responseType?this.body=this.xhr.response:this.body=this.req.method==="HEAD"?null:this._parseBody(this.text?this.text:this.xhr.response)}v(V.prototype,M.prototype),V.prototype._parseBody=function(q){var Z=E.parse[this.type];return this.req._parser?this.req._parser(this,q):(!Z&&U(this.type)&&(Z=E.parse["application/json"]),Z&&q&&(q.length>0||q instanceof Object)?Z(q):null)},V.prototype.toError=function(){var q=this.req,Z=q.method,W=q.url,$="cannot ".concat(Z," ").concat(W," (").concat(this.status,")"),ne=new Error($);return ne.status=this.status,ne.method=Z,ne.url=W,ne},E.Response=V;function A(q,Z){var W=this;this._query=this._query||[],this.method=q,this.url=Z,this.header={},this._header={},this.on("end",function(){var $=null,ne=null;try{ne=new V(W)}catch(ye){return $=new Error("Parser is unable to parse the response"),$.parse=!0,$.original=ye,W.xhr?($.rawResponse=typeof W.xhr.responseType>"u"?W.xhr.responseText:W.xhr.response,$.status=W.xhr.status?W.xhr.status:null,$.statusCode=$.status):($.rawResponse=null,$.status=null),W.callback($)}W.emit("response",ne);var we;try{W._isResponseOK(ne)||(we=new Error(ne.statusText||ne.text||"Unsuccessful HTTP response"))}catch(ye){we=ye}we?(we.original=$,we.response=ne,we.status=we.status||ne.status,W.callback(we,ne)):W.callback(null,ne)})}l(A.prototype),v(A.prototype,d.prototype),A.prototype.type=function(q){return this.set("Content-Type",E.types[q]||q),this},A.prototype.accept=function(q){return this.set("Accept",E.types[q]||q),this},A.prototype.auth=function(q,Z,W){arguments.length===1&&(Z=""),i(Z)==="object"&&Z!==null&&(W=Z,Z=""),W||(W={type:typeof btoa=="function"?"basic":"auto"});var $=W.encoder?W.encoder:function(ne){if(typeof btoa=="function")return btoa(ne);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(q,Z,W,$)},A.prototype.query=function(q){return typeof q!="string"&&(q=L(q)),q&&this._query.push(q),this},A.prototype.attach=function(q,Z,W){if(Z){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(q,Z,W||Z.name)}return this},A.prototype._getFormData=function(){return this._formData||(this._formData=new a.FormData),this._formData},A.prototype.callback=function(q,Z){if(this._shouldRetry(q,Z))return this._retry();var W=this._callback;this.clearTimeout(),q&&(this._maxRetries&&(q.retries=this._retries-1),this.emit("error",q)),W(q,Z)},A.prototype.crossDomainError=function(){var q=new Error(`Request has been terminated
Possible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.`);q.crossDomain=!0,q.status=this.status,q.method=this.method,q.url=this.url,this.callback(q)},A.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},A.prototype.ca=A.prototype.agent,A.prototype.buffer=A.prototype.ca,A.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},A.prototype.pipe=A.prototype.write,A.prototype._isHost=function(q){return q&&i(q)==="object"&&!Array.isArray(q)&&Object.prototype.toString.call(q)!=="[object Object]"},A.prototype.end=function(q){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=q||w,this._finalizeQueryString(),this._end()},A.prototype._setUploadTimeout=function(){var q=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(function(){q._timeoutError("Upload timeout of ",q._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},A.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var q=this;this.xhr=E.getXHR();var Z=this.xhr,W=this._formData||this._data;this._setTimeouts(),Z.addEventListener("readystatechange",function(){var xe=Z.readyState;if(xe>=2&&q._responseTimeoutTimer&&clearTimeout(q._responseTimeoutTimer),xe===4){var Se;try{Se=Z.status}catch{Se=0}if(!Se)return q.timedout||q._aborted?void 0:q.crossDomainError();q.emit("end")}});var $=function(Se,Re){Re.total>0&&(Re.percent=Re.loaded/Re.total*100,Re.percent===100&&clearTimeout(q._uploadTimeoutTimer)),Re.direction=Se,q.emit("progress",Re)};if(this.hasListeners("progress"))try{Z.addEventListener("progress",$.bind(null,"download")),Z.upload&&Z.upload.addEventListener("progress",$.bind(null,"upload"))}catch{}Z.upload&&this._setUploadTimeout();try{this.username&&this.password?Z.open(this.method,this.url,!0,this.username,this.password):Z.open(this.method,this.url,!0)}catch(xe){return this.callback(xe)}if(this._withCredentials&&(Z.withCredentials=!0),!this._formData&&this.method!=="GET"&&this.method!=="HEAD"&&typeof W!="string"&&!this._isHost(W)){var ne=this._header["content-type"],we=this._serializer||E.serialize[ne?ne.split(";")[0]:""];!we&&U(ne)&&(we=E.serialize["application/json"]),we&&(W=we(W))}for(var ye in this.header)this.header[ye]!==null&&S(this.header,ye)&&Z.setRequestHeader(ye,this.header[ye]);this._responseType&&(Z.responseType=this._responseType),this.emit("request",this),Z.send(typeof W>"u"?null:W)},E.agent=function(){return new b};for(var Q=function(){var Z=re[H];b.prototype[Z.toLowerCase()]=function(W,$){var ne=new E.Request(Z,W);return this._setDefaults(ne),$&&ne.end($),ne}},H=0,re=["GET","POST","OPTIONS","PATCH","PUT","DELETE"];H<re.length;H++)Q();b.prototype.del=b.prototype.delete,E.get=function(q,Z,W){var $=E("GET",q);return typeof Z=="function"&&(W=Z,Z=null),Z&&$.query(Z),W&&$.end(W),$},E.head=function(q,Z,W){var $=E("HEAD",q);return typeof Z=="function"&&(W=Z,Z=null),Z&&$.query(Z),W&&$.end(W),$},E.options=function(q,Z,W){var $=E("OPTIONS",q);return typeof Z=="function"&&(W=Z,Z=null),Z&&$.send(Z),W&&$.end(W),$};function le(q,Z,W){var $=E("DELETE",q);return typeof Z=="function"&&(W=Z,Z=null),Z&&$.send(Z),W&&$.end(W),$}E.del=le,E.delete=le,E.patch=function(q,Z,W){var $=E("PATCH",q);return typeof Z=="function"&&(W=Z,Z=null),Z&&$.send(Z),W&&$.end(W),$},E.post=function(q,Z,W){var $=E("POST",q);return typeof Z=="function"&&(W=Z,Z=null),Z&&$.send(Z),W&&$.end(W),$},E.put=function(q,Z,W){var $=E("PUT",q);return typeof Z=="function"&&(W=Z,Z=null),Z&&$.send(Z),W&&$.end(W),$}})(Mm,Mm.exports);var PF=Mm.exports;const Xd=ln(PF),FF=[{sketch_id:"example_0",code:"JTJGJTJGRmxvciUyMGRlJTIwRnVlZ28lMEElMEFzaGFwZSgyMDAlMkMwLjUlMkMxLjUpJTBBLnNjYWxlKDAuNSUyQzAuNSklMEEuY29sb3IoJTVCMC41JTJDMiU1RC5zbW9vdGgoMSklMkMwLjMlMkMwKSUwQS5yZXBlYXQoMiUyQzIpJTBBLm1vZHVsYXRlU2NhbGUob3NjKDMlMkMwLjUpJTJDLTAuNiklMEEuYWRkKG8wJTJDMC41KSUwQS5zY2FsZSgwLjkpJTBBLm91dCgp"},{sketch_id:"example_3",code:"JTJGJTJGJTIwYnklMjBPbGl2aWElMjBKYWNrJTBBJTBBb3NjKDIwJTJDJTIwMC4wMyUyQyUyMDEuNykua2FsZWlkKCkubXVsdChvc2MoMjAlMkMlMjAwLjAwMSUyQyUyMDApLnJvdGF0ZSgxLjU4KSkuYmxlbmQobzAlMkMlMjAwLjk0KS5tb2R1bGF0ZVNjYWxlKG9zYygxMCUyQyUyMDApJTJDLTAuMDMpLnNjYWxlKDAuOCUyQyUyMCgpJTIwJTNEJTNFJTIwKDEuMDUlMjAlMkIlMjAwLjElMjAqJTIwTWF0aC5zaW4oMC4wNSp0aW1lKSkpLm91dChvMCk="},{sketch_id:"example_4",code:"JTJGJTJGJTIwYnklMjBOZWxzb24lMjBWZXJhJTBBJTJGJTJGJTIwdHdpdHRlciUzQSUyMCU0MG5lbF9zb25vbG9naWElMEElMEFvc2MoOCUyQy0wLjUlMkMlMjAxKS5jb2xvcigtMS41JTJDJTIwLTEuNSUyQyUyMC0xLjUpLmJsZW5kKG8wKS5yb3RhdGUoLTAuNSUyQyUyMC0wLjUpLm1vZHVsYXRlKHNoYXBlKDQpLnJvdGF0ZSgwLjUlMkMlMjAwLjUpLnNjYWxlKDIpLnJlcGVhdFgoMiUyQyUyMDIpLm1vZHVsYXRlKG8wJTJDJTIwKCklMjAlM0QlM0UlMjBtb3VzZS54JTIwKiUyMDAuMDAwNSkucmVwZWF0WSgyJTJDJTIwMikpLm91dChvMCklMEElMEElMEElMEElMEElMEE="},{sketch_id:"example_6",code:"JTJGJTJGJTIwYnklMjBEJUMzJUE5Ym9yYSUyMEZhbGxlaXJvcyUyMEdvbnphbGVzJTBBJTJGJTJGJTIwaHR0cHMlM0ElMkYlMkZ3d3cuZ29uemFsZXNkZWJvcmEuY29tJTJGJTBBJTBBb3NjKDUpLmFkZChub2lzZSg1JTJDJTIwMikpLmNvbG9yKDAlMkMlMjAwJTJDJTIwMykuY29sb3JhbWEoMC40KS5vdXQoKSUwQSUwQSUwQSUwQQ=="},{sketch_id:"example_8",code:"JTJGJTJGJTIwYnklMjBSb2RyaWdvJTIwVmVsYXNjbyUwQSUyRiUyRiUyMGh0dHBzJTNBJTJGJTJGeWVjdG8uZ2l0aHViLmlvJTJGJTBBJTBBb3NjKDEwNyUyQyUyMDAlMkMlMjAwLjcpLmNvbG9yKDElMkMlMjAwJTJDJTIwMSkucm90YXRlKDAlMkMlMjAtMC4wOCkubW9kdWxhdGVSb3RhdGUobzElMkMlMjAwLjQpLm91dChvMCklMEFvc2MoMzMpLnJvdGF0ZSgyJTJDJTIwMC44KS5tb2R1bGF0ZVJvdGF0ZShvMCUyQyUyMCgpJTIwJTNEJTNFJTIwKGEuZmZ0JTVCMCU1RCoyKSkub3V0KG8xKSUwQQ=="},{sketch_id:"example_9",code:"JTJGJTJGJTIwYnklMjBSb2RyaWdvJTIwVmVsYXNjbyUwQSUyRiUyRiUyMGh0dHBzJTNBJTJGJTJGeWVjdG8uZ2l0aHViLmlvJTJGJTBBJTBBb3NjKDE4JTJDJTIwMC4xJTJDJTIwMCkuY29sb3IoMiUyQyUyMDAuMSUyQyUyMDIpJTBBLm11bHQob3NjKDIwJTJDJTIwMC4wMSUyQyUyMDApKS5yZXBlYXQoMiUyQyUyMDIwKS5yb3RhdGUoMC41KS5tb2R1bGF0ZShvMSklMEEuc2NhbGUoMSUyQyUyMCgpJTIwJTNEJTNFJTIwJTIwKGEuZmZ0JTVCMCU1RCowLjklMjAlMkIlMjAyKSkuZGlmZihvMSkub3V0KG8wKSUwQW9zYygyMCUyQyUyMDAuMiUyQyUyMDApLmNvbG9yKDIlMkMlMjAwLjclMkMlMjAwLjEpLm11bHQob3NjKDQwKSkubW9kdWxhdGVSb3RhdGUobzAlMkMlMjAwLjIpJTBBLnJvdGF0ZSgwLjIpLm91dChvMSk="},{sketch_id:"example_10",code:"JTJGJTJGJTIwYnklMjBaYWNoJTIwS3JhbGwlMEElMkYlMkYlMjBodHRwJTNBJTJGJTJGemFjaGtyYWxsLm9ubGluZSUyRiUwQSUwQW9zYyglMjAyMTUlMkMlMjAwLjElMkMlMjAyJTIwKSUwQS5tb2R1bGF0ZSglMEElMjAlMjBvc2MoJTIwMiUyQyUyMC0wLjMlMkMlMjAxMDAlMjApJTBBJTIwJTIwLnJvdGF0ZSgxNSklMEEpJTBBLm11bHQoJTBBJTIwJTIwb3NjKCUyMDIxNSUyQyUyMC0wLjElMkMlMjAyKSUwQSUyMCUyMC5waXhlbGF0ZSglMjA1MCUyQyUyMDUwJTIwKSUwQSklMEEuY29sb3IoJTIwMC45JTJDJTIwMC4wJTJDJTIwMC45JTIwKSUwQS5tb2R1bGF0ZSglMEElMjAlMjBvc2MoJTIwNiUyQyUyMC0wLjElMjApJTBBJTIwJTIwLnJvdGF0ZSglMjA5JTIwKSUwQSklMEEuYWRkKCUwQSUyMCUyMG9zYyglMjAxMCUyQyUyMC0wLjklMkMlMjA5MDAlMjApJTBBJTIwJTIwLmNvbG9yKDElMkMwJTJDMSklMEEpJTBBLm11bHQoJTBBJTIwJTIwc2hhcGUoOTAwJTJDJTIwMC4yJTJDJTIwMSklMEElMjAlMjAubHVtYSgpJTBBJTIwJTIwLnJlcGVhdFgoMiklMEElMjAlMjAucmVwZWF0WSgyKSUwQSUyMCUyMC5jb2xvcmFtYSgxMCklMEEpJTBBLm1vZHVsYXRlKCUwQSUyMCUyMG9zYyglMjA5JTJDJTIwLTAuMyUyQyUyMDkwMCUyMCklMEElMjAlMjAucm90YXRlKCUyMDYlMjApJTBBKSUwQS5hZGQoJTBBJTIwJTIwb3NjKDQlMkMlMjAxJTJDJTIwOTApJTBBJTIwJTIwLmNvbG9yKDAuMiUyQzAlMkMxKSUwQSklMEEub3V0KCklMEE="},{sketch_id:"example_11",code:"JTJGJTJGJTIwYnklMjBaYWNoJTIwS3JhbGwlMEElMkYlMkYlMjBodHRwJTNBJTJGJTJGemFjaGtyYWxsLm9ubGluZSUyRiUwQSUwQW9zYygxMCUyQyUyMDAuOSUyQyUyMDMwMCklMEEuY29sb3IoMC45JTJDJTIwMC43JTJDJTIwMC44KSUwQS5kaWZmKCUwQSUyMCUyMG9zYyg0NSUyQyUyMDAuMyUyQyUyMDEwMCklMEElMjAlMjAuY29sb3IoMC45JTJDJTIwMC45JTJDJTIwMC45KSUwQSUyMCUyMC5yb3RhdGUoMC4xOCklMEElMjAlMjAucGl4ZWxhdGUoMTIpJTBBJTIwJTIwLmthbGVpZCgpJTBBKSUwQS5zY3JvbGxYKDEwKSUwQS5jb2xvcmFtYSgpJTBBLmx1bWEoKSUwQS5yZXBlYXRYKDQpJTBBLnJlcGVhdFkoNCklMEEubW9kdWxhdGUoJTBBJTIwJTIwb3NjKDElMkMlMjAtMC45JTJDJTIwMzAwKSUwQSklMEEuc2NhbGUoMiklMEEub3V0KCklMEE="},{sketch_id:"example_13",code:"JTJGJTJGJTIwYWNpZCUyMGJ1cyUyMHNlYXQlMEElMkYlMkYlMjBieSUyMFdpbGwlMjBIdW1waHJleXMlMEElMkYlMkYlMjBodHRwcyUzQSUyRiUyRmdpdGh1Yi5jb20lMkZUaGVXaXNweSUwQSUwQW9zYygxMDUpLmNvbG9yKDAuNSUyQzAuMSUyQzAuOCkucm90YXRlKDAuMTElMkMlMjAwLjEpLm1vZHVsYXRlKG9zYygxMCkucm90YXRlKDAuMykuYWRkKG8wJTJDJTIwMC4xKSkuYWRkKG9zYygyMCUyQzAuMDElMkMxKS5jb2xvcigwJTJDMC44JTJDMSkpLm91dChvMCklMEFvc2MoNTAlMkMwLjA1JTJDJTIwMC43KS5jb2xvcigxJTJDMC43JTJDMC41KS5kaWZmKG8wKS5tb2R1bGF0ZShvMSUyQzAuMDUpLm91dChvMSklMEFyZW5kZXIobzEp"},{sketch_id:"example_14",code:"JTJGJTJGJTIwYnklMjBPbGl2aWElMjBKYWNrJTBBJTJGJTJGJTIwJTQwX29qYWNrXyUwQSUwQW9zYygyMCUyQyUyMDAuMDElMkMlMjAxLjEpJTBBJTA5LmthbGVpZCg1KSUwQSUwOS5jb2xvcigyLjgzJTJDMC45MSUyQzAuMzkpJTBBJTA5LnJvdGF0ZSgwJTJDJTIwMC4xKSUwQSUwOS5tb2R1bGF0ZShvMCUyQyUyMCgpJTIwJTNEJTNFJTIwbW91c2UueCUyMColMjAwLjAwMDMpJTBBJTA5LnNjYWxlKDEuMDEpJTBBJTIwJTIwJTA5Lm91dChvMCk="},{sketch_id:"example_15",code:"JTJGJTJGJTIwYnklMjBPbGl2aWElMjBKYWNrJTBBJTJGJTJGJTIwaHR0cHMlM0ElMkYlMkZvamFjay5naXRodWIuaW8lMEElMEFvc2MoMTAwJTJDJTIwMC4wMSUyQyUyMDEuNCklMEElMDkucm90YXRlKDAlMkMlMjAwLjEpJTBBJTA5Lm11bHQob3NjKDEwJTJDJTIwMC4xKS5tb2R1bGF0ZShvc2MoMTApLnJvdGF0ZSgwJTJDJTIwLTAuMSklMkMlMjAxKSklMEElMDkuY29sb3IoMi44MyUyQzAuOTElMkMwLjM5KSUwQSUyMCUyMC5vdXQobzAp"},{sketch_id:"example_16",code:"JTJGJTJGJTIwYnklMjBPbGl2aWElMjBKYWNrJTBBJTJGJTJGJTIwaHR0cHMlM0ElMkYlMkZvamFjay5naXRodWIuaW8lMEElMEFvc2MoNCUyQyUyMDAuMSUyQyUyMDAuOCkuY29sb3IoMS4wNCUyQzAlMkMlMjAtMS4xKS5yb3RhdGUoMC4zMCUyQyUyMDAuMSkucGl4ZWxhdGUoMiUyQyUyMDIwKS5tb2R1bGF0ZShub2lzZSgyLjUpJTJDJTIwKCklMjAlM0QlM0UlMjAxLjUlMjAqJTIwTWF0aC5zaW4oMC4wOCUyMColMjB0aW1lKSkub3V0KG8wKQ=="},{sketch_id:"example_17",code:"JTJGJTJGJTIwbW9pcmUlMEElMkYlMkYlMjBieSUyME9saXZpYSUyMEphY2slMEElMkYlMkYlMjB0d2l0dGVyJTNBJTIwJTQwX29qYWNrXyUwQSUwQXBhdHRlcm4lMjAlM0QlMjAoKSUyMCUzRCUzRSUyMG9zYygyMDAlMkMlMjAwKS5rYWxlaWQoMjAwKS5zY2FsZSgxJTJDJTIwMC40KSUwQSUyRiUyRiUwQXBhdHRlcm4oKSUwQSUyMCUyMC5zY3JvbGxYKDAuMSUyQyUyMDAuMDEpJTBBJTIwJTIwLm11bHQocGF0dGVybigpKSUwQSUyMCUyMC5vdXQoKQ=="},{sketch_id:"example_18",code:"JTJGJTJGJTIwYnklMjBPbGl2aWElMjBKYWNrJTBBJTJGJTJGJTIwaHR0cHMlM0ElMkYlMkZvamFjay5naXRodWIuaW8lMEElMEFvc2MoNiUyQyUyMDAlMkMlMjAwLjgpJTBBJTIwJTIwLmNvbG9yKDEuMTQlMkMlMjAwLjYlMkMuODApJTBBJTIwJTIwLnJvdGF0ZSgwLjkyJTJDJTIwMC4zKSUwQSUyMCUyMC5waXhlbGF0ZSgyMCUyQyUyMDEwKSUwQSUyMCUyMC5tdWx0KG9zYyg0MCUyQyUyMDAuMDMpLnRocmVzaCgwLjQpLnJvdGF0ZSgwJTJDJTIwLTAuMDIpKSUwQSUyMCUyMC5tb2R1bGF0ZVJvdGF0ZShvc2MoMjAlMkMlMjAwKS50aHJlc2goMC4zJTJDJTIwMC42KSUyQyUyMCgpJTIwJTNEJTNFJTIwMC4xJTIwJTJCJTIwbW91c2UueCUyMColMjAwLjAwMiklMEElMjAlMjAub3V0KG8wKQ=="},{sketch_id:"rangga_0",code:"JTJGJTJGJTIwRHJlYW15JTIwRGlhbW9uZCUwQSUyRiUyRiUyMGJ5JTIwUmFuZ2dhJTIwUHVybmFtYSUyMEFqaSUwQSUyRiUyRiUyMGh0dHBzJTNBJTJGJTJGcmFuZ2dhcHVybmFtYWFqaTEud2l4c2l0ZS5jb20lMkZwb3J0Zm9saW8lMEElMEFvc2MoNyUyQy0wLjEyNSkubW9kdWxhdGUodm9yb25vaSgxKSkuZGlmZih2b3Jvbm9pKDEpLm11bHQoZ3JhZGllbnQoLTEpLmx1bWEoMC4xMjUpKSklMEElMjAlMjAubHVtYSgwLjEyNSklMEElMjAlMjAuYWRkKHNoYXBlKDclMkMlMjAwLjUpJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwLm11bHQodm9yb25vaSgxMCUyQzIpLmJsZW5kKG8wKS5kaWZmKGdyYWRpZW50KDEpKS5tb2R1bGF0ZSh2b3Jvbm9pKCkpKSklMEElMjAlMjAuc2Nyb2xsWSgtMC4xKSUwQSUyMCUyMC5zY3JvbGxYKDAuMTI1KSUwQSUyMCUyMC5ibGVuZChvMCklMEElMjAlMjAuYmxlbmQobzApJTBBJTIwJTIwLm91dCgpJTBB"},{sketch_id:"rangga_1",code:"JTJGJTJGJTIwVGFnJTIwJTI2JTIwU3dlZXAlMEElMkYlMkYlMjBieSUyMFJhbmdnYSUyMFB1cm5hbWElMjBBamklMEElMkYlMkYlMjBodHRwcyUzQSUyRiUyRnJhbmdnYXB1cm5hbWFhamkxLndpeHNpdGUuY29tJTJGcG9ydGZvbGlvJTBBJTBBb3NjKDUlMkMwLjEyNSkuY29sb3JhbWEoMSklMEElMjAlMjAubHVtYSgwLjEyNSkuYWRkKHNoYXBlKDElMkMwLjUpLmx1bWEoMikuZGlmZihncmFkaWVudCgxKSkpJTBBJTIwJTIwLmRpZmYob3NjKC0xJTJDLTAuMjUpKS5ibGVuZChvMCkuY29sb3IoMCUyQzIuNSUyQzEuNzUpJTBBJTIwJTIwLm91dCgp"},{sketch_id:"rangga_2",code:"JTJGJTJGJTIwTW9ub2Nocm9tZSUyME1lbW9hciUwQSUyRiUyRiUyMGJ5JTIwUmFuZ2dhJTIwUHVybmFtYSUyMEFqaSUwQSUyRiUyRiUyMGh0dHBzJTNBJTJGJTJGcmFuZ2dhcHVybmFtYWFqaTEud2l4c2l0ZS5jb20lMkZwb3J0Zm9saW8lMEElMEF2b3Jvbm9pKDUwJTJDMSklMEElMjAlMjAubHVtYSgwLjUpLmFkZChzaGFwZSgxJTJDMSkubHVtYSgxKSklMEElMjAlMjAubW9kdWxhdGUob3NjKC0xMDAwJTJDLTEpJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLm1vZHVsYXRlKG9zYygpLmx1bWEoKSkpJTBBJTIwJTIwLmJsZW5kKG8wKSUwQSUyMCUyMC5ibGVuZChvMCklMEElMjAlMjAuYmxlbmQobzApJTBBJTIwJTIwLmJsZW5kKG8wKSUwQSUyMCUyMC5vdXQoKQ=="},{sketch_id:"rangga_3",code:"JTJGJTJGJTIwR2FsYXh5JTIwVHJpcCUwQSUyRiUyRiUyMGJ5JTIwUmFuZ2dhJTIwUHVybmFtYSUyMEFqaSUwQSUyRiUyRiUyMGh0dHBzJTNBJTJGJTJGcmFuZ2dhcHVybmFtYWFqaTEud2l4c2l0ZS5jb20lMkZwb3J0Zm9saW8lMEElMEFzaGFwZSgxJTJDMSklMEElMjAlMjAubXVsdCh2b3Jvbm9pKDEwMDAlMkMyKSUwQSUyMCUyMC5ibGVuZChvMCkubHVtYSgpKSUwQSUyMCUyMC5hZGQoc2hhcGUoMyUyQzAuMTI1KSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMC5yb3RhdGUoMSUyQzEpLm11bHQodm9yb25vaSgxMDAwJTJDMSkubHVtYSgpKSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMC5yb3RhdGUoMS41KSkuc2Nyb2xsWCglNUIwLjElMkMtMC4wNjI1JTJDMC4wMDUlMkMwLjAwMDAxJTVEJTJDMCklMEElMjAlMjAuc2Nyb2xsWSglNUIwLjElMkMtMC4wNjI1JTJDMC4wMDUlMkMwLjAwMDAxJTVEJTJDMCklMEElMjAlMjAub3V0KCk="},{sketch_id:"rangga_4",code:"JTJGJTJGJTIwU3VtZXQlMEElMkYlMkYlMjBieSUyMFJhbmdnYSUyMFB1cm5hbWElMjBBamklMEElMkYlMkYlMjBodHRwcyUzQSUyRiUyRnJhbmdnYXB1cm5hbWFhamkxLndpeHNpdGUuY29tJTJGcG9ydGZvbGlvJTBBJTBBb3NjKDAuNSUyQzEuMjUpLm11bHQoc2hhcGUoMSUyQzAuMDkpLnJvdGF0ZSgxLjUpKSUwQSUyMCUyMC5kaWZmKGdyYWRpZW50KCkpJTBBJTIwJTIwLmFkZChzaGFwZSgyJTJDMikuYmxlbmQoZ3JhZGllbnQoMSkpKSUwQSUyMCUyMC5tb2R1bGF0ZShub2lzZSgpJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLm1vZHVsYXRlKG5vaXNlKCkuc2Nyb2xsWSgxJTJDMC4wNjI1KSkpJTBBJTIwJTIwLmJsZW5kKG8wKSUwQSUyMCUyMC5jb2xvcigxJTJDLTAuNSUyQy0wLjc1KSUwQSUyMCUyMC5vdXQoKQ=="},{sketch_id:"marianne_0",code:"JTJGJTJGcG9ydCUwQSUyRiUyRmJ5JTIwTWFyaWFubmUlMjBUZWl4aWRvJTBBJTJGJTJGaHR0cHMlM0ElMkYlMkZtYXJpYW5uZXRlaXhpZG8uZ2l0aHViLmlvJTJGJTBBJTBBb3NjKDUlMkMlMjAwLjklMkMlMjAwLjAwMSklMEElMjAlMjAlMjAlMjAua2FsZWlkKCU1QjMlMkM0JTJDNSUyQzclMkM4JTJDOSUyQzEwJTVELmZhc3QoMC4xKSklMEElMjAlMjAlMjAlMjAuY29sb3IoMC41JTJDJTIwMC4zKSUwQSUyMCUyMCUyMCUyMC5jb2xvcmFtYSgwLjQpJTBBJTIwJTIwJTIwJTIwLnJvdGF0ZSgwLjAwOSUyQygpJTNEJTNFTWF0aC5zaW4odGltZSkqJTIwLTAuMDAxJTIwKSUwQSUyMCUyMCUyMCUyMC5tb2R1bGF0ZVJvdGF0ZShvMCUyQygpJTNEJTNFTWF0aC5zaW4odGltZSklMjAqJTIwMC4wMDMpJTBBJTIwJTIwJTIwJTIwLm1vZHVsYXRlKG8wJTJDJTIwMC45KSUwQSUyMCUyMCUyMCUyMC5zY2FsZSgwLjkpJTBBJTIwJTIwJTIwJTIwLm91dChvMCklMEElMEE="},{sketch_id:"marianne_1",code:"JTJGJTJGUGl4ZWxzY2FwZSUwQSUyRiUyRk1hcmlhbm5lJTIwVGVpeGlkbyUwQSUyRiUyRmh0dHBzJTNBJTJGJTJGZ2l0aHViLmNvbSUyRk1hcmlhbm5lVGVpeGlkbyUwQSUwQXNyYyhvMCklMEElMjAuc2F0dXJhdGUoMS4wMSklMEElMjAuc2NhbGUoLjk5OSklMEElMjAuY29sb3IoMS4wMSUyQzEuMDElMkMxLjAxKSUwQSUyMC5odWUoLjAxKSUwQSUyMC5tb2R1bGF0ZUh1ZShzcmMobzEpLmh1ZSguMykucG9zdGVyaXplKC0xKS5jb250cmFzdCguNyklMkMyKSUwQSUyMCUyMC5sYXllcihzcmMobzEpJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLmx1bWEoKSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC5tdWx0KGdyYWRpZW50KDEpJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLnNhdHVyYXRlKC45KSkpJTBBJTIwJTIwLm91dChvMCklMEElMEFub2lzZSgxJTJDJTIwLjIpJTBBJTIwJTIwLnJvdGF0ZSgyJTJDLjUpJTBBJTIwJTIwLmxheWVyKHNyYyhvMCklMEElMjAlMjAuc2Nyb2xsWCguMikpJTBBJTIwJTIwLm91dChvMSklMEElMEFyZW5kZXIobzAp"},{sketch_id:"naoto_0",code:"JTJGJTJGJTIwJTQwbmFvdG9faGllZGElMEFvc2MoMjAlMkMlMjAwLjElMkMlMjAwKS5jb2xvcigwJTJDJTIwMSUyQyUyMDIpLnJvdGF0ZSgxLjU3JTJGMikub3V0KG8xKSUwQW9zYygzMCUyQyUyMDAuMDElMkMlMjAwKS5jb2xvcigyJTJDJTIwMC43JTJDJTIwMSkubW9kdWxhdGUobzElMkMlMjAwKS5hZGQobzElMkMxKS5tb2R1bGF0ZVBpeGVsYXRlKG8xJTJDMSUyQzEwKS5vdXQobzAp"},{sketch_id:"naoto_1",code:"JTJGJTJGJTIwJTQwbmFvdG9faGllZGElMEFzb2xpZCgwLjIlMkMwLjYlMkMwLjkpLmxheWVyKG9zYygzMS40JTJDMCkudGhyZXNoKDAuNykubHVtYSgpLm1vZHVsYXRlKG9zYyg0JTJDMSkucm90YXRlKDEpJTJDMC4wNSkuY29sb3IoMCUyQzAlMkMwKSkubGF5ZXIob3NjKDMxLjQlMkMwKS50aHJlc2goMC43KS5sdW1hKCkubW9kdWxhdGUob3NjKDQlMkMxKS5yb3RhdGUoMSklMkMwLjEpKS5vdXQoKQ=="},{sketch_id:"ritchse_0",code:"JTJGJTJGcmFuZG9tJTIwdHJ5cG9waG9iaWElMjAtJTIwY2hhbmdlcyUyMGV2ZXJ5dGltZSUyMHlvdSUyMGxvYWQlMjBpdCElMEElMkYlMkZieSUyMFJpdGNoc2UlMEElMkYlMkZpbnN0YWdyYW0uY29tJTJGcml0Y2hzZSUwQSUyMCUwQWZ1bmN0aW9uJTIwcihtaW4lM0QwJTJDbWF4JTNEMSklMjAlN0IlMjByZXR1cm4lMjBNYXRoLnJhbmRvbSgpKihtYXgtbWluKSUyQm1pbiUzQiUyMCU3RCUwQSUyMCUwQXNvbGlkKDElMkMxJTJDMSklMEElMjAlMjAlMDkuZGlmZihzaGFwZSglNUI0JTJDNCUyQzQlMkMyNCU1RC5zbW9vdGgoKS5mYXN0KC41KSUyQ3IoMC42JTJDMC45MyklMkMuMDkpLnJlcGVhdCgyMCUyQzEwKSklMEElMDkubW9kdWxhdGVTY2FsZShvc2MoOCkucm90YXRlKHIoLS41JTJDLjUpKSUyQy41MiklMEElMDkuYWRkKCUwQSUyMCUyMCUwOSUwOXNyYyhvMCkuc2NhbGUoMC45NjUpLnJvdGF0ZSguMDEyKihNYXRoLnJvdW5kKHIoLTIlMkMxKSkpKSUwQSUyMCUyMCUwOSUwOS5jb2xvcihyKCklMkNyKCklMkNyKCkpJTBBJTIwJTIwJTIwJTIwJTA5Lm1vZHVsYXRlUm90YXRlKG8wJTJDcigwJTJDMC41KSklMEElMjAlMjAlMDklMDkuYnJpZ2h0bmVzcyguMTUpJTBBJTIwJTIwJTA5JTA5JTJDLjcpJTBBJTA5Lm91dCgp"},{sketch_id:"ritchse_1",code:"JTJGJTJGY29ycnVwdGVkJTIwc2NyZWVuc2F2ZXIlMEElMkYlMkZieSUyMFJpdGNoc2UlMEElMkYlMkZpbnN0YWdyYW0uY29tJTJGcml0Y2hzZSUwQSUyMCUwQXZvcm9ub2koMzUwJTJDMC4xNSklMEElMjAlMjAlMDkubW9kdWxhdGVTY2FsZShvc2MoOCkucm90YXRlKE1hdGguc2luKHRpbWUpKSUyQy41KSUwQSUyMCUyMCUwOS50aHJlc2goLjgpJTBBJTA5Lm1vZHVsYXRlUm90YXRlKG9zYyg3KSUyQy40KSUwQSUwOS50aHJlc2goLjcpJTBBJTIwJTIwJTA5LmRpZmYoc3JjKG8wKS5zY2FsZSgxLjgpKSUwQSUwOS5tb2R1bGF0ZVNjYWxlKG9zYygyKS5tb2R1bGF0ZVJvdGF0ZShvMCUyQy43NCkpJTBBJTA5LmRpZmYoc3JjKG8wKS5yb3RhdGUoJTVCLS4wMTIlMkMuMDElMkMtLjAwMiUyQzAlNUQpLnNjcm9sbFkoMCUyQyU1Qi0xJTJGMTk5ODAwJTJDMCU1RC5mYXN0KDAuNykpKSUwQSUwOS5icmlnaHRuZXNzKCU1Qi0uMDIlMkMtLjE3JTVELnNtb290aCgpLmZhc3QoLjUpKSUwQSUwOS5vdXQoKQ=="},{sketch_id:"ritchse_2",code:"JTJGJTJGdHJvcGljYWwlMjBqdWljZSUwQSUyRiUyRmJ5JTIwUml0Y2hzZSUwQSUyRiUyRmluc3RhZ3JhbS5jb20lMkZyaXRjaHNlJTBBJTIwJTBBdm9yb25vaSgyJTJDMC4zJTJDMC4yKS5zaGlmdCgwLjUpJTBBLm1vZHVsYXRlUGl4ZWxhdGUodm9yb25vaSg0JTJDMC4yKSUyQzMyJTJDMiklMEEuc2NhbGUoKCklM0QlM0UxJTJCKE1hdGguc2luKHRpbWUqMi41KSowLjA1KSklMEEuZGlmZih2b3Jvbm9pKDMpLnNoaWZ0KDAuNikpJTBBLmRpZmYob3NjKDIlMkMwLjE1JTJDMS4xKS5yb3RhdGUoKSklMEEuYnJpZ2h0bmVzcygwLjEpLmNvbnRyYXN0KDEuMikuc2F0dXJhdGUoMS4yKSUwQSUwOS5vdXQoKSUwQXNwZWVkJTIwJTNEJTIwMC44"},{sketch_id:"ritchse_3",code:"JTJGJTJGdHJ5aW5nJTIwdG8lMjBnZXQlMjBjbG9zZXIlMEElMkYlMkZieSUyMFJpdGNoc2UlMEElMkYlMkZpbnN0YWdyYW0uY29tJTJGcml0Y2hzZSUwQSUyMCUwQW9zYyg2MCUyQy0wLjAxNSUyQzAuMykuZGlmZihvc2MoNjAlMkMwLjA4KS5yb3RhdGUoTWF0aC5QSSUyRjIpKSUwQSUwOS5tb2R1bGF0ZVNjYWxlKG5vaXNlKDMuNSUyQzAuMjUpLm1vZHVsYXRlU2NhbGUob3NjKDE1KS5yb3RhdGUoKCklM0QlM0VNYXRoLnNpbih0aW1lJTJGMikpKSUyQzAuNiklMEElMDkuY29sb3IoMSUyQzAuNSUyQzAuNCkuY29udHJhc3QoMS40KSUwQSUwOS5hZGQoc3JjKG8wKS5tb2R1bGF0ZShvMCUyQy4wNCklMkMuNiklMEElMDkuaW52ZXJ0KCkuYnJpZ2h0bmVzcygwLjEpLmNvbnRyYXN0KDEuMiklMEElMDkubW9kdWxhdGVTY2FsZShvc2MoMiklMkMtMC4yKSUwQSUyMCUyMC5vdXQoKQ=="},{sketch_id:"ritchse_4",code:"JTJGJTJGJTIwZGlzaW50ZWdyYXRpb24lMEElMkYlMkYlMjBieSUyMFJpdGNoc2UlMEElMkYlMkYlMjBpbnN0YWdyYW0uY29tJTJGcml0Y2hzZSUwQSUyMCUwQW9zYyg1JTJDLjEpLm1vZHVsYXRlKG5vaXNlKDYpJTJDLjIyKS5kaWZmKG8wKSUwQSUyMCUyMCUwOS5tb2R1bGF0ZVNjcm9sbFkob3NjKDIpLm1vZHVsYXRlKG9zYygpLnJvdGF0ZSgpJTJDLjExKSklMEElMDkuc2NhbGUoLjcyKS5jb2xvcigwLjk5JTJDMS4wMTQlMkMxKSUwQSUyMCUyMCUwOS5vdXQoKQ==  "},{sketch_id:"flor_0",code:"JTJGJTJGRmxvciUyMGRlJTIwRnVlZ28lMEElMkYlMkZodHRwcyUzQSUyRiUyRmZsb3JkZWZ1ZWdvLmdpdGh1Yi5pbyUyRiUwQW9zYygzMCUyQzAuMDElMkMxKSUwQS5tdWx0KG9zYygyMCUyQy0wLjElMkMxKS5tb2R1bGF0ZShub2lzZSgzJTJDMSkpLnJvdGF0ZSgwLjcpKSUwQS5wb3N0ZXJpemUoJTVCMyUyQzEwJTJDMiU1RC5mYXN0KDAuNSkuc21vb3RoKDEpKSUwQS5tb2R1bGF0ZVJvdGF0ZShvMCUyQygpJTNEJTNFbW91c2UueCowLjAwMyklMEEub3V0KCk= "},{sketch_id:"mahalia_0",code:"JTJGJTJGJTIwTWFoYWxpYSUyMEgtUiUwQSUyRiUyRiUyMElHJTNBJTIwJTQwbW1faHJfJTBBJTBBc2hhcGUoMjAlMkMwLjElMkMwLjAxKSUwQSUyMCUyMC5zY2FsZSgoKSUyMCUzRCUzRSUyME1hdGguc2luKHRpbWUpKjMpJTBBJTIwJTIwLnJlcGVhdCgoKSUyMCUzRCUzRSUyME1hdGguc2luKHRpbWUpKjEwKSUwQSUyMCUyMC5tb2R1bGF0ZVJvdGF0ZShvMCklMEElMjAlMjAuc2NhbGUoKCklMjAlM0QlM0UlMjBNYXRoLnNpbih0aW1lKSoyKSUwQSUyMCUyMC5tb2R1bGF0ZShub2lzZSgyJTJDMCkpJTBBJTIwJTIwLnJvdGF0ZSgwLjElMkMlMjAwLjkpJTBBLm91dChvMCklMEElMEFzcmMobzApJTBBLm1vZHVsYXRlKG9zYyg1MDAlMkMwJTJDMCkpJTBBLm91dChvMSklMEElMEFzcmMobzEpJTBBLm1vZHVsYXRlS2FsZWlkKHZvcm9ub2koKCklMjAlM0QlM0UlMjBNYXRoLnNpbih0aW1lKSozJTJDMC4xJTJDMC4wMSklMkMoKSUyMCUzRCUzRSUyME1hdGguc2luKHRpbWUpKjMpJTBBLnNjYWxlKCgpJTIwJTNEJTNFJTIwTWF0aC5zaW4odGltZSkqMyklMEEub3V0KG8yKSUwQSUwQXJlbmRlcihvMik="},{sketch_id:"mahalia_1",code:"JTJGJTJGJTIwTWFoYWxpYSUyMEgtUiUwQSUyRiUyRiUyMElHJTNBJTIwJTQwbW1faHJfJTBBJTBBc2hhcGUoKCklMjAlM0QlM0UlMjBNYXRoLnNpbih0aW1lKSUyQjEqMiklMEEucm90YXRlKCgpJTIwJTNEJTNFJTIwTWF0aC5QSSUyMColMjBtb3VzZS54JTIwJTJGMTgwKSUwQS5yZXBlYXRYKDMpJTBBLnJlcGVhdFkoKCklM0QlM0VNYXRoLnNpbih0aW1lKSo1KSUwQS5zY2FsZSgoKSUyMCUzRCUzRSUyME1hdGguUEklMkY0KSUwQS5ibGVuZChzcmMobzApLmNvbG9yKDElMkMwJTJDMCkpJTBBLm1vZHVsYXRlKG9zYygyMCUyQyUyMDAlMkMuNCkpJTBBLmthbGVpZCgyKSUwQSUyMC5vdXQobzApJTBBJTBBcmVuZGVyKG8wKQ=="},{sketch_id:"mahalia_2",code:"JTJGJTJGJTIwVmVsdmV0JTIwUG9vbCUwQSUyRiUyRiUyMGJ5JTIwTWFoYWxpYSUyMEgtUiUwQSUyRiUyRiUyMElHJTNBJTIwbW1faHJfJTBBJTBBJTBBbm9pc2UoKSUwQS5jb2xvcigoKSUyMCUzRCUzRSUyMGEuZmZ0JTVCMiU1RCoyJTJDMCUyQy42KSUwQS5tb2R1bGF0ZShub2lzZSgoKSUyMCUzRCUzRSUyMGEuZmZ0JTVCMCU1RCoxMCkpJTBBLnNjYWxlKCgpJTNEJTNFJTIwYS5mZnQlNUIyJTVEKjUpJTBBLmxheWVyKCUwQSUyMCUyMHNyYyhvMCklMEElMjAlMjAubWFzayhvc2MoMTApLm1vZHVsYXRlUm90YXRlKG9zYygpJTJDOTAlMkMwKSklMEElMjAlMjAuc2NhbGUoKCklMjAlM0QlM0UlMjBhLmZmdCU1QjAlNUQqMiklMEElMjAlMjAubHVtYSgwLjIlMkMwLjMpJTBBKSUwQS5ibGVuZChvMCklMEEub3V0KG8wKSUwQSUwQW9zYygpJTBBLm1vZHVsYXRlKG5vaXNlKCgpJTIwJTNEJTNFJTIwYS5mZnQlNUIxJTVEJTJCNSkpJTBBLmNvbG9yKDElMkMwJTJDMCklMEEub3V0KG8xKSUwQSUwQXNyYyhvMCklMEEubW9kdWxhdGUobzEpJTBBLmxheWVyKCUwQSUyMCUyMHNyYyhvMSklMEElMjAlMjAubWFzayhvMSklMEElMjAlMjAuc2F0dXJhdGUoNyklMEEpJTBBLm1vZHVsYXRlUm90YXRlKG8xKSUwQS5yb3RhdGUoKCU3QnRpbWUlN0QpJTIwJTNEJTNFJTIwdGltZSUyNTM2MCowLjA1KSUwQS5vdXQobzIpJTBBJTBBcmVuZGVyKG8yKQ=="},{sketch_id:"mahalia_3",code:"JTJGJTJGJTIwYnklMjBNYWhhbGlhJTIwSC1SJTBBJTJGJTJGJTIwSUclM0ElMjBtbV9ocl8lMEElMEFzaGFwZSgoKSUzRCUzRU1hdGguc2luKHRpbWUpJTJCMSozJTJDJTIwLjUlMkMuMDEpJTBBLnJlcGVhdCg1JTJDMyUyQyUyMCgpJTNEJTNFYS5mZnQlNUIwJTVEKjIlMkMlMjAoKSUzRCUzRWEuZmZ0JTVCMSU1RCoyKSUwQS5zY3JvbGxZKC41JTJDMC4xKSUwQS5sYXllciglMEElMjAlMjBzcmMobzEpJTBBJTIwJTIwLm1hc2sobzApJTBBJTIwJTIwLmx1bWEoLjAxJTJDJTIwLjEpJTBBJTIwJTIwLmludmVydCguMiklMEEpJTBBLm1vZHVsYXRlKG8xJTJDLjAyKSUwQS5vdXQobzApJTBBJTBBb3NjKDQwJTJDJTIwMC4wOSUyQyUyMDAuOSklMEEuY29sb3IoLjklMkMwJTJDNSklMEEubW9kdWxhdGUob3NjKDEwKS5yb3RhdGUoMSUyQyUyMDAuNSkpJTBBLnJvdGF0ZSgxJTJDJTIwMC4yKSUwQS5vdXQobzEpJTBBJTBBcmVuZGVyKG8wKSUwQSUwQQ=="},{sketch_id:"mahalia_4",code:"JTJGJTJGJTIwQ2VsbHVsYXIlMjAlMjYlMjBCbG9idWxhciUwQSUyRiUyRiUyMGJ5JTIwTWFoYWxpYSUyMEgtUiUwQSUyRiUyRiUyMElHJTNBJTIwbW1faHJfJTBBJTBBc3BlZWQlMjAlM0QlMjAwLjMlMEElMEFzaGFwZSgyMCUyQzAuMiUyQzAuMyklMEEuY29sb3IoMC41JTJDMC44JTJDNTApJTBBJTIwJTIwLnNjYWxlKCgpJTIwJTNEJTNFJTIwTWF0aC5zaW4odGltZSklMkIxKjIpJTBBJTIwJTIwLnJlcGVhdCgoKSUyMCUzRCUzRSUyME1hdGguc2luKHRpbWUpKjEwKSUwQSUyMCUyMC5tb2R1bGF0ZVJvdGF0ZShvMCklMEElMjAlMjAuc2NhbGUoKCklMjAlM0QlM0UlMjBNYXRoLnNpbih0aW1lKSUyQjElMjAqMS41KSUwQSUyMCUyMC5tb2R1bGF0ZShub2lzZSgyJTJDMikpJTBBJTIwJTIwLnJvdGF0ZSgxJTJDJTIwLjIpJTBBJTIwJTIwJTJGJTJGJTIwLmludmVydCgyLjQpJTBBLm91dChvMCklMEE="},{sketch_id:"andromeda_0",code:"JTJGJTJGJTIwMy4wJTBBJTJGJTJGJTIwYnklMjAlQ0UlOTRORFIwTTNEJUNFJTk0JTBBJTJGJTJGJTIwaHR0cHMlM0ElMkYlMkZ3d3cuaW5zdGFncmFtLmNvbSUyRmFuZHJvbTNfZGElMkYlMEElMEElMEFub2lzZSgzJTJDMC4zJTJDMykudGhyZXNoKDAuMyUyQzAuMDMpLmRpZmYobzMlMkMwLjMpLm91dChvMSklMEFncmFkaWVudCglNUIwLjMlMkMwLjMlMkMzJTVEKS5kaWZmKG8wKS5ibGVuZChvMSkub3V0KG8zKSUwQXZvcm9ub2koMzMlMkMzJTJDMzApLnJvdGF0ZSgzJTJDMC4zJTJDMCkubW9kdWxhdGVTY2FsZShvMiUyQzAuMykuY29sb3IoLTMlMkMzJTJDMCkuYnJpZ2h0bmVzcygzKS5vdXQobzApJTBBc2hhcGUoMzAlMkMwLjMlMkMxKS5pbnZlcnQoKCU3QnRpbWUlN0QpJTNEJTNFTWF0aC5zaW4odGltZSkqMykub3V0KG8yKSUwQSUwQXJlbmRlcihvMyklMEE="},{sketch_id:"andromeda_1",code:"JTJGJTJGJTIwMy4zJTBBJTJGJTJGJTIwYnklMjAlQ0UlOTRORFIwTTNEJUNFJTk0JTBBJTJGJTJGJTIwaHR0cHMlM0ElMkYlMkZ3d3cuaW5zdGFncmFtLmNvbSUyRmFuZHJvbTNfZGElMkYlMEElMEFvc2MoKS5tb2R1bGF0ZVJvdGF0ZShvMCUyQzAuMykub3V0KCklMEFvc2MoMzMlMkMwLjMlMkMwLjMpLmRpZmYobzMlMkMzKS5vdXQobzEpJTBBb3NjKDMlMkMwLjMlMkMzMykubW9kdWxhdGVLYWxlaWQobzMlMkMzKS5kaWZmKG8wKS5vdXQobzIpJTBBc3JjKG8wJTJDMykubXVsdChvMSUyQzMpLmthbGVpZCgzKS5vdXQobzMpJTBBcmVuZGVyKG8yKQ=="},{sketch_id:"asdrubal_0",code:"JTJGJTJGQXNkciVDMyVCQWJhbCUyMEdvbWV6JTBBJTBBbm9pc2UoMyUyQzAuMSUyQzcpJTBBLnJvdGF0ZSgxJTJDLTElMkMtMikubWFzayhzaGFwZSgyMCkpJTBBLmNvbG9yYW1hKDAuNSklMEEubW9kdWxhdGVTY2FsZShvMCklMEEubW9kdWxhdGVTY2FsZShvMCUyQzElMkMpJTBBLmJsZW5kKG8wKSUwQS5ibGVuZChvMCklMEEuYmxlbmQobzApJTBBLmJsZW5kKG8wKSUwQS5vdXQobzApJTBB"},{sketch_id:"flor_1",code:"JTJGJTJGSHlkcmElMjBHbGl0Y2h5JTIwU2xpdCUyMFNjYW4lMEElMkYlMkZGbG9yJTIwZGUlMjBGdWVnbyUwQSUyRiUyRmh0dHBzJTNBJTJGJTJGZmxvcmRlZnVlZ28uZ2l0aHViLmlvJTJGJTIwJTBBczAuaW5pdENhbSgpJTBBc3JjKHMwKS5zYXR1cmF0ZSgyKS5jb250cmFzdCgxLjMpLmxheWVyKHNyYyhvMCkubWFzayhzaGFwZSg0JTJDMikuc2NhbGUoMC41JTJDMC43KS5zY3JvbGxYKDAuMjUpKS5zY3JvbGxYKDAuMDAxKSkubW9kdWxhdGUobzAlMkMwLjAwMSkub3V0KG8wKSUwQSUwQQ=="},{sketch_id:"flor_2",code:"JTJGJTJGR2xpdGNoJTIwUml2ZXIlMEElMkYlMkZGbG9yJTIwZGUlMjBGdWVnbyUwQSUyRiUyRmh0dHBzJTNBJTJGJTJGZmxvcmRlZnVlZ28uZ2l0aHViLmlvJTJGJTBBdm9yb25vaSg4JTJDMSklMEEubXVsdChvc2MoMTAlMkMwLjElMkMoKSUzRCUzRU1hdGguc2luKHRpbWUpKjMpLnNhdHVyYXRlKDMpLmthbGVpZCgyMDApKSUwQS5tb2R1bGF0ZShvMCUyQzAuNSklMEEuYWRkKG8wJTJDMC44KSUwQS5zY3JvbGxZKC0wLjAxKSUwQS5zY2FsZSgwLjk5KSUwQS5tb2R1bGF0ZSh2b3Jvbm9pKDglMkMxKSUyQzAuMDA4KSUwQS5sdW1hKDAuMyklMEEub3V0KCklMEElMEElMEFzcGVlZCUyMCUzRCUyMDAuMSUwQSUwQSUwQSUwQQ=="},{sketch_id:"nesso_0",code:"JTBBJTJGJTJGY2xvdWRzJTIwb2YlMjBwYXNzYWdlJTBBJTJGJTJGYnklMjBOZXNzbyUwQSUyRiUyRnd3dy5uZXNzby54eXolMEElMEFzaGFwZSglNUI0JTJDNSUyQzYlNUQuZmFzdCgwLjEpLnNtb290aCgxKSUyQzAuMDAwMDAxJTJDJTVCMC4yJTJDMC43JTVELnNtb290aCgxKSklMEEuY29sb3IoMC4yJTJDMC40JTJDMC4zKSUwQS5zY3JvbGxYKCgpJTNEJTNFTWF0aC5zaW4odGltZSowLjI3KSklMEEuYWRkKCUwQSUyMCUyMHNoYXBlKCU1QjQlMkM1JTJDNiU1RC5mYXN0KDAuMSkuc21vb3RoKDEpJTJDMC4wMDAwMDElMkMlNUIwLjIlMkMwLjclMkMwLjUlMkMwLjMlNUQuc21vb3RoKDEpKSUwQSUyMCUyMC5jb2xvcigwLjYlMkMwLjIlMkMwLjUpJTBBJTIwJTIwLnNjcm9sbFkoMC4zNSklMEElMjAlMjAuc2Nyb2xsWCgoKSUzRCUzRU1hdGguc2luKHRpbWUqMC4zMykpKSUwQS5hZGQoJTBBJTIwJTIwc2hhcGUoJTVCNCUyQzUlMkM2JTVELmZhc3QoMC4xKS5zbW9vdGgoMSklMkMwLjAwMDAwMSUyQyU1QjAuMiUyQzAuNyUyQzAuMyU1RC5zbW9vdGgoMSkpJTBBJTIwJTIwLmNvbG9yKDAuMiUyQzAuNCUyQzAuNiklMEElMjAlMjAuc2Nyb2xsWSgtMC4zNSklMEElMjAlMjAuc2Nyb2xsWCgoKSUzRCUzRU1hdGguc2luKHRpbWUqMC40MSkqLTEpKSUwQS5hZGQoJTBBJTIwJTIwJTIwJTIwJTIwJTIwc3JjKG8wKS5zaGlmdCgwLjAwMSUyQzAuMDElMkMwLjAwMSklMEElMjAlMjAlMjAlMjAlMjAlMjAuc2Nyb2xsWCglNUIwLjA1JTJDLTAuMDUlNUQuZmFzdCgwLjEpLnNtb290aCgxKSklMEElMjAlMjAlMjAlMjAlMjAlMjAuc2NhbGUoJTVCMS4wNSUyQzAuOSU1RC5mYXN0KDAuMykuc21vb3RoKDEpJTJDJTVCMS4wNSUyQzAuOSUyQzElNUQuZmFzdCgwLjI5KS5zbW9vdGgoMSkpJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTJDMC44NSklMEEubW9kdWxhdGUodm9yb25vaSgxMCUyQzIlMkMyKSklMEEub3V0KCk="},{sketch_id:"malitzin_0",code:"JTJGJTJGQ05EU0QlMEElMkYlMkZodHRwJTNBJTJGJTJGbWFsaXR6aW5jb3J0ZXMubmV0JTJGJTBBJTJGJTJGJTIwc2FuZCUyMHNwaXJhbHMlMEElMEFvc2MoMyUyQyUyMDAuMDElMkMlMjAwLjQpJTBBLmNvbG9yKDEuMiUyQzEuMiUyQzEuMyklMEEuc2F0dXJhdGUoMC40KSUwQS5tb2R1bGF0ZVJlcGVhdChvc2MoMiklMkMxJTJDJTIwMiUyQyUyMDQlMkMlMjAzKSUwQS5tb2R1bGF0ZUthbGVpZChvc2MoMTIlMkMwLjA1JTJDMCklMkMxKSUwQS5sdW1hJTIwKDAuNCklMEEucm90YXRlKDQlMkMlMjAwLjElMkMwKSUwQS5tb2R1bGF0ZShvMCUyQyUyMCgpJTIwJTNEJTNFJTIwbW91c2UueSUyMCowLjAwMDIlMjApJTBBLnNjYWxlKDEpLmRpZmYobzEpJTBBLm91dChvMCk="},{sketch_id:"malitzin_1",code:"JTJGJTJGQ05EU0QlMEElMkYlMkZodHRwJTNBJTJGJTJGbWFsaXR6aW5jb3J0ZXMubmV0JTJGJTBBJTJGJTJGYW1lYmElMEElMEFvc2MoMTUlMkMlMjAwLjAxJTJDJTIwMC4xKS5tdWx0KG9zYygxJTJDJTIwLTAuMSkubW9kdWxhdGUob3NjKDIpLnJvdGF0ZSg0JTJDMSklMkMlMjAyMCkpJTBBLmNvbG9yKDAlMkMyLjQlMkM1KSUwQS5zYXR1cmF0ZSgwLjQpJTBBLmx1bWEoMSUyQzAuMSUyQyUyMCg2JTJDJTIwKCklM0QlM0UlMjAxJTIwJTJCJTIwYS5mZnQlNUIzJTVEKSklMEEuc2NhbGUoMC43JTJDJTIwKCklM0QlM0UlMjAwLjclMjAlMkIlMjBhLmZmdCU1QjMlNUQpJTBBLmRpZmYobzApJTJGJTJGJTIwbzAlMEEub3V0KG8wKSUyRiUyRiUyMG8x"},{sketch_id:"malitzin_2",code:"JTJGJTJGQ05EU0QlMEElMkYlMkZodHRwJTNBJTJGJTJGbWFsaXR6aW5jb3J0ZXMubmV0JTJGJTBBJTJGJTJGY3JhenklMjBzcXVhcmVzJTBBJTBBc2hhcGUoNCUyQyUyMCgwLjAxJTJDJTIwKCklM0QlM0UlMjAwLjIlMjAlMkIlMjBhLmZmdCU1QjIlNUQpJTJDMSklMEEubXVsdChvc2MoMSUyQyUyMDEpLm1vZHVsYXRlKG9zYyg1KS5yb3RhdGUoMS40JTJDMSklMkMzKSklMEEuY29sb3IoMSUyQzIlMkM0KSUwQS5zYXR1cmF0ZSgwLjIpJTBBLmx1bWEoMS4yJTJDMC4wNSUyQyUyMCg1JTJDJTIwKCklM0QlM0UlMjAyJTIwJTJCJTIwYS5mZnQlNUIzJTVEKSklMEEuc2NhbGUoMC42JTJDJTIwKCklM0QlM0UlMjAwLjklMjAlMkIlMjBhLmZmdCU1QjMlNUQpJTBBLmRpZmYobzApJTJGJTJGJTIwbzAlMEEub3V0KG8wKSUyRiUyRiUyMG8x"},{sketch_id:"khoparzi_0",code:"JTJGJTJGJTIwSGFwcHklMjBNYW5kYWxhJTBBJTJGJTJGJTIwQnklMjBBYmhpbmF5JTIwS2hvcGFyemklMEElMkYlMkYlMjB0d2l0dGVyJTJGZ2l0aHViJTJGaW5zdGFncmFtJTNBJTIwJTQwa2hvcGFyemklMEF2b3Jvbm9pKDUlMkMtMC4xJTJDNSklMEEuYWRkKG9zYygxJTJDMCUyQzEpKS5rYWxlaWQoMjEpJTBBLnNjYWxlKDElMkMxJTJDMikuY29sb3JhbWEoKS5vdXQobzEpJTBBc3JjKG8xKS5tdWx0KHNyYyhzMCkubW9kdWxhdGVSb3RhdGUobzElMkMxMDApJTJDJTIwLTAuNSklMEElMjAlMjAub3V0KG8wKSUwQSUwQQ=="},{sketch_id:"khoparzi_1",code:"JTJGJTJGJTIwUGVycGV0dWFsJTIwZWxldmF0b3IlMjBidXR0b25zJTBBJTJGJTJGJTIwQnklMjBLaG9wYXJ6aSUwQSUyRiUyRiUyMGh0dHAlM0ElMkYlMkZraG9wYXJ6aS5jb20lMEElMEFzaGFwZSgzKS5hZGQob3NjKDElMkMwLjUlMkMxKSUyQyUyMDEpJTBBJTA5LmFkZChvMSUyQyUyMCgpJTIwJTNEJTNFJTIwKE1hdGguc2luKHRpbWUlMkY0KSUyMColMjAwLjclMjAlMkIlMjAwLjEpKSUwQSUwOSUyRiUyRi5yZXBlYXQoNSklMEElMjAlMjAlMDkuc2NhbGUoKCklM0QlM0VNYXRoLnNpbih0aW1lJTIwJTJGJTIwMTYpKS5yb3RhdGUoMCUyQyUyMC0wLjEpJTBBJTA5Lm91dChvMSklMEElMEFzcmMobzEpJTBBJTIwJTIwLnJvdGF0ZSgwJTJDMC4xKSUwQSUyMCUyMC5vdXQoKQ=="},{sketch_id:"khoparzi_2",code:"JTJGJTJGJTIwUmVhbGx5JTIwTG92ZSUwQSUyRiUyRiUyMGJ5JTIwQWJoaW5heSUyMEtob3BhcnppJTBBJTJGJTJGJTIwaHR0cCUzQSUyRiUyRmtob3BhcnppLmNvbSUwQW9zYygxMDAlMkMtMC4wMTI0NSUyQzEpLnBpeGVsYXRlKDUwKS5rYWxlaWQoKCklM0QlM0UoTWF0aC5zaW4odGltZSUyRjgpKjklMkIzKSkucm90YXRlKDAlMkMwLjEyNSklMEEubW9kdWxhdGVSb3RhdGUoc2hhcGUoMykuc2NhbGUoKCklM0QlM0UoTWF0aC5jb3ModGltZSkqMikpLnJvdGF0ZSgwJTJDLTAuMjUpKS5kaWZmKHNyYyhvMCkuYnJpZ2h0bmVzcygwLjMpKSUwQSUyMCUyMC5vdXQoKQ=="},{sketch_id:"khoparzi_3",code:"JTJGJTJGJTIwQXFhdXRpYyUyMGJsdWJzJTBBJTJGJTJGJTIwQnklMjBLaG9wYXJ6aSUwQSUyRiUyRiUyMGh0dHBzJTNBJTJGJTJGa2hvcGFyemkuY29tJTBBJTBBZ3JhZGllbnQoMC4yNSklMEEuYWRkKG5vaXNlKCklMkMlMjAoKSUzRCUzRU1hdGguY29zKHRpbWUpKSUwQS5tb2R1bGF0ZVJvdGF0ZShzcmMobzApLnJvdGF0ZSgwJTJDJTIwLTAuNTIpJTJDJTIwMC4yKS5tdWx0KHNoYXBlKDM2MCklMkMlMjAwLjgpJTBBLnJlcGVhdCgxMCUyQzUpLm11bHQoc2hhcGUoMzYwKS5zY2FsZSgoKSUzRCUzRU1hdGguc2luKHRpbWUpKSUyQyUyMDAuOCkucm90YXRlKDAlMkMlMjAwLjIpJTBBLmRpZmYoc3JjKG8wKS5yb3RhdGUoMCUyQyUyMC0wLjIpJTJDJTIwMC4yKSUwQS5vdXQoKQ=="},{sketch_id:"celeste_0",code:"JTBBJTIwJTJGJTJGJTIwUHVlcnRhcyUyMElJJTBBJTJGJTJGJTIwcG9yJTIwQ2VsZXN0ZSUyMEJldGFuY3VyJTBBJTJGJTJGJTIwaHR0cHMlM0ElMkYlMkZnaXRodWIuY29tJTJGZXNzdGViYW4lMEElMEFvc2MoMTMlMkMwJTJDMSklMEElMjAlMjAua2FsZWlkKCklMEElMjAlMjAubWFzayhzaGFwZSg0JTJDMC4zJTJDMSkpJTBBJTIwJTIwLm1vZHVsYXRlUm90YXRlKHNoYXBlKDQlMkMwLjElMkMxKSklMEElMjAlMjAubW9kdWxhdGVSb3RhdGUoc2hhcGUoNCUyQzAuMSUyQzAuOSkpJTBBJTIwJTIwLm1vZHVsYXRlUm90YXRlKHNoYXBlKDQlMkMwLjElMkMwLjgpKSUwQSUyMCUyMC5zY2FsZSgwLjMpJTBBJTIwJTIwLmFkZChzaGFwZSg0JTJDMC4yJTJDMSkuY29sb3IoMC4zJTJDMSUyQzElMkMwLjUpKSUwQSUyMCUyMC5yb3RhdGUoKCklM0QlM0V0aW1lKSUwQSUyMCUyMC5vdXQoKQ=="},{sketch_id:"celeste_1",code:"JTJGJTJGJTIwUHVlcnRhcyUyMElJSSUwQSUyRiUyRiUyMHBvciUyMENlbGVzdGUlMjBCZXRhbmN1ciUwQSUyRiUyRiUyMGh0dHBzJTNBJTJGJTJGZ2l0aHViLmNvbSUyRmVzc3RlYmFuJTBBJTIwJTBBb3NjKDQwJTJDMC4yJTJDMSklMEElMjAlMjAubW9kdWxhdGVTY2FsZShvc2MoNDAlMkMwJTJDMSkua2FsZWlkKDgpKSUwQSUyMCUyMC5yZXBlYXQoMiUyQzQpJTBBJTIwJTIwLm1vZHVsYXRlKG8wJTJDMC4wNSklMEElMjAlMjAubW9kdWxhdGVLYWxlaWQoc2hhcGUoNCUyQzAuMSUyQzEpKSUwQSUyMCUyMC5vdXQobzAp"},{sketch_id:"celeste_2",code:"JTBBJTIwJTJGJTJGJTIwUHVlcnRhcyUwQSUyRiUyRiUyMHBvciUyMENlbGVzdGUlMjBCZXRhbmN1ciUwQSUyRiUyRiUyMGh0dHBzJTNBJTJGJTJGZ2l0aHViLmNvbSUyRmVzc3RlYmFuJTBBJTBBb3NjKDEzJTJDMCUyQzEpJTBBJTIwJTIwLm1vZHVsYXRlKG9zYygyMSUyQzAuMjUlMkMwKSklMEElMjAlMjAubW9kdWxhdGVTY2FsZShvc2MoMzQpKSUwQSUyMCUyMC5tb2R1bGF0ZUthbGVpZChvc2MoNTUpJTJDMC4xJTJDMSklMEElMjAlMjAub3V0KCk="},{sketch_id:"alexandre_0",code:"JTJGJTJGJTIwJTIydGhlLXdhbGwlMjIlMEElMkYlMkYlMjBBbGV4YW5kcmUlMjBSYW5nZWwlMEElMkYlMkYlMjB3d3cuYWxleGFuZHJlcmFuZ2VsLmFydC5iciUyRmh5ZHJhLmh0bWwlMEElMEFzcGVlZCUzRC4wMjIyJTBBb3NjKDQ4JTJDLS4xJTJDMCkudGhyZXNoKCU1Qi4zJTJDLjclNUQuZmFzdCguNzUpJTJDMCkuY29sb3IoMCUyQzAlMkMxKSUwQSUwQS5hZGQoJTBBJTIwJTIwJTIwJTIwb3NjKDI4JTJDLjElMkMwKS50aHJlc2goJTVCLjMlMkMuNyU1RC5mYXN0KC43NSklMkMwKS5yb3RhdGUoMy4xNCUyRjQpJTBBJTIwJTIwJTIwJTIwLmNvbG9yKDElMkMwJTJDMCklMEElMjAlMjAlMjAlMjAubW9kdWxhdGVTY2FsZSglMjBvc2MoNjQlMkMtLjAxJTJDMCkudGhyZXNoKCU1Qi4zJTJDLjclNUQuZmFzdCguNzUpJTJDMCklMjApJTBBKSUwQS5kaWZmKCUwQSUyMCUyMCUyMCUyMG9zYygyOCUyQy4xJTJDMCkudGhyZXNoKCU1Qi4zJTJDLjclNUQuZmFzdCguNSklMkMwKS5yb3RhdGUoMy4xNCUyRjIpJTBBJTIwJTIwJTIwJTIwLmNvbG9yKDElMkMwJTJDMSklMEElMjAlMjAlMjAlMjAubW9kdWxhdGVTY2FsZSglMjBvc2MoNjQlMkMtLjAxNSUyQzApLnRocmVzaCglNUIuMyUyQy43JTVELmZhc3QoLjUpJTJDMCklMjApJTBBKSUwQS5tb2R1bGF0ZVJvdGF0ZSglMjBvc2MoNTQlMkMtLjAwNSUyQzApLnRocmVzaCglNUIuMyUyQy43JTVELmZhc3QoLjI1KSUyQzApJTIwKSUwQS5tb2R1bGF0ZVNjYWxlKCUyMG9zYyg0NCUyQy0uMDIwJTJDMCkudGhyZXNoKCU1Qi4zJTJDLjclNUQuZmFzdCguMjUpJTJDMCklMjApJTBBLmNvbG9yYW1hKCUyMCgpJTNEJTNFTWF0aC5zaW4odGltZSUyRjI3KSouMDEyMjIlMkI5Ljg5KSUwQS5zY2FsZSgyLjEyMiklMEElMEEub3V0KCk="},{sketch_id:"alexandre_1",code:"JTBBJTIwJTJGJTJGJTIwJTIyZXllJTIwb2YlMjB0aGUlMjBiZWhvbGRlciUyMiUwQSUyRiUyRiUyMEFsZXhhbmRyZSUyMFJhbmdlbCUwQSUyRiUyRiUyMHd3dy5hbGV4YW5kcmVyYW5nZWwuYXJ0LmJyJTJGaHlkcmEuaHRtbCUwQSUwQW5vaXNlKDYlMkMuMDUpJTBBLm11bHQoJTIwb3NjKDklMkMwJTJDJTIwKCklM0QlM0VNYXRoLnNpbih0aW1lJTJGMS41KSUyQjIlMjApJTIwKSUwQS5tdWx0KCUwQSUyMCUyMCUyMCUyMG5vaXNlKDklMkMuMDMpLmJyaWdodG5lc3MoMS4yKS5jb250cmFzdCgyKSUwQSUyMCUyMCUyMCUyMC5tdWx0KCUyMG9zYyg5JTJDMCUyQyUyMCgpJTNEJTNFTWF0aC5zaW4odGltZSUyRjMpJTJCMTMlMjApJTIwKSUwQSklMEEuZGlmZiglMEElMjAlMjAlMjAlMjBub2lzZSgxNSUyQy4wNCkuYnJpZ2h0bmVzcyguMikuY29udHJhc3QoMS4zKSUwQSUyMCUyMCUyMCUyMC5tdWx0KCUyMG9zYyg5JTJDMCUyQyUyMCgpJTNEJTNFTWF0aC5zaW4odGltZSUyRjUpJTJCMTMlMjApJTIwKSUwQSUyMCUyMCUyMCUyMC5yb3RhdGUoJTIwKCklM0QlM0V0aW1lJTJGMzMlMjApJTBBKSUwQS5zY2FsZSglMjAoKSUzRCUzRU1hdGguc2luKHRpbWUlMkY2LjIpKi4xMiUyQi4xNSUyMCklMEEubW9kdWxhdGVTY2FsZSglMEElMjAlMjAlMjAlMjBvc2MoMyUyQzAlMkMwKS5tdWx0KCUyMG9zYygzJTJDMCUyQzApLnJvdGF0ZSgzLjE0JTJGMiklMjApJTBBJTIwJTIwJTIwJTIwLnJvdGF0ZSglMjAoKSUzRCUzRXRpbWUlMkYyNSUyMCkuc2NhbGUoLjM5KS5zY2FsZSgxJTJDLjYlMkMxKS5pbnZlcnQoKSUwQSUyMCUyMCUyMCUyMCUyQyUyMCgpJTNEJTNFTWF0aC5zaW4odGltZSUyRjUuMykqMS41JTJCMyUyMCUyMCklMEEucm90YXRlKCUyMCgpJTNEJTNFdGltZSUyRjIyJTIwKSUwQS5tdWx0KCUyMHNoYXBlKDEwMCUyQy45JTJDLjAxKS5zY2FsZSgxJTJDLjYlMkMxKSUyMCklMEEub3V0KCk="},{sketch_id:"alexandre_2",code:"JTJGJTJGJTIwJTIyZWdnJTIwb2YlMjB0aGUlMjBwaG9lbml4JTIyJTBBJTJGJTJGJTIwQWxleGFuZHJlJTIwUmFuZ2VsJTBBJTJGJTJGJTIwd3d3LmFsZXhhbmRyZXJhbmdlbC5hcnQuYnIlMkZoeWRyYS5odG1sJTBBJTBBc3BlZWQlM0QxLjIlMEFzaGFwZSg5OSUyQy4xNSUyQy41KS5jb2xvcigwJTJDMSUyQzIpJTBBJTBBLmRpZmYoJTIwc2hhcGUoMjQwJTJDLjUlMkMwKS5zY3JvbGxYKC4wNSkucm90YXRlKCUyMCgpJTNEJTNFdGltZSUyRjEwJTIwKS5jb2xvcigxJTJDMCUyQy43NSklMjApJTBBLmRpZmYoJTIwc2hhcGUoOTklMkMuNCUyQy4wMDIpLnNjcm9sbFgoLjEwKS5yb3RhdGUoJTIwKCklM0QlM0V0aW1lJTJGMjAlMjApLmNvbG9yKDElMkMwJTJDLjc1KSUyMCklMEEuZGlmZiglMjBzaGFwZSg5OSUyQy4zJTJDLjAwMikuc2Nyb2xsWCguMTUpLnJvdGF0ZSglMjAoKSUzRCUzRXRpbWUlMkYzMCUyMCkuY29sb3IoMSUyQzAlMkMuNzUpJTIwKSUwQS5kaWZmKCUyMHNoYXBlKDk5JTJDLjIlMkMuMDAyKS5zY3JvbGxYKC4yMCkucm90YXRlKCUyMCgpJTNEJTNFdGltZSUyRjQwJTIwKS5jb2xvcigxJTJDMCUyQy43NSklMjApJTBBLmRpZmYoJTIwc2hhcGUoOTklMkMuMSUyQy4wMDIpLnNjcm9sbFgoLjI1KS5yb3RhdGUoJTIwKCklM0QlM0V0aW1lJTJGNTAlMjApLmNvbG9yKDElMkMwJTJDLjc1KSUyMCklMEElMEEubW9kdWxhdGVTY2FsZSglMEElMjAlMjBzaGFwZSgyNDAlMkMuNSUyQzApLnNjcm9sbFgoLjA1KS5yb3RhdGUoJTIwKCklM0QlM0V0aW1lJTJGMTAlMjApJTBBJTIwJTIwJTJDJTIwKCklM0QlM0UoTWF0aC5zaW4odGltZSUyRjMpKi4yKSUyQi4yJTIwKSUwQSUwQS5zY2FsZSgxLjYlMkMuNiUyQzEpJTBBLm91dCgp"},{sketch_id:"afalfl_0",code:"JTJGJTJGZmlsZXQlMjBtaWdub24lMEElMkYlMkYlMjBBRkFMRkwlMEElMkYlMkYlMjBpbnN0YWdyYW0lMkZhX2ZfYWxmbCUyMCUwQSUwQW9zYygxMDAlMkMtMC4wMDE4JTJDMC4xNykuZGlmZihvc2MoMjAlMkMwLjAwMDA4KS5yb3RhdGUoTWF0aC5QSSUyRjAuMDAwMDMpKSUwQS5tb2R1bGF0ZVNjYWxlKG5vaXNlKDEuNSUyQzAuMTgpLm1vZHVsYXRlU2NhbGUob3NjKDEzKS5yb3RhdGUoKCklM0QlM0VNYXRoLnNpbih0aW1lJTJGMjIpKSklMkMzKSUwQS5jb2xvcigxMSUyQzAuNSUyQzAuNCUyQyUyMDAuOSUyQyUyMDAuMiUyQyUyMDAuMDExJTJDJTIwNSUyQyUyMDIyJTJDJTIwJTIwMC41JTJDJTIwLTEpLmNvbnRyYXN0KDEuNCklMEEuYWRkKHNyYyhvMCkubW9kdWxhdGUobzAlMkMuMDQpJTJDLjYlMkMlMjAuOSklMEElMjAlMjAlMkYlMkYucGl4ZWxhdGUoMC40JTJDJTIwMC4yJTJDJTIwMC4xKSUwQS5pbnZlcnQoKS5icmlnaHRuZXNzKDAuMDAwMyUyQyUyMDIpLmNvbnRyYXN0KCUyMDAuNSUyQyUyMDIlMkMlMjAwLjElMkMlMjAyKS5jb2xvcig0JTJDJTIwLTIlMkMlMjAwLjEpJTBBLm1vZHVsYXRlU2NhbGUob3NjKDIpJTJDLTAuMiUyQyUyMDIlMkMlMjAxJTJDJTIwMC4zKSUwQSUyMC5wb3N0ZXJpemUoMjAwKSUyMC5yb3RhdGUoMSUyQyUyMDAuMiUyQyUyMDAuMDElMkMlMjAwLjAwMSklMEElMjAuY29sb3IoMjIlMkMlMjAtMiUyQyUyMDAuNSUyQyUyMDAuNSUyQyUyMDAuMDAwMSUyQyUyMCUyMDAuMSUyQyUyMDAuMiUyQyUyMDgpLmNvbnRyYXN0KDAuMTglMkMlMjAwLjMlMkMlMjAwLjElMkMlMjAwLjIlMkMlMjAwLjAzJTJDJTIwMSklMjAuJTIwYnJpZ2h0bmVzcygwLjAwMDElMkMlMjAtMSUyQyUyMDEwKSUwQSUwOS5vdXQoKQ=="},{sketch_id:"eerie_ear_0",code:"JTJGJTJGJTIwZWVfMiUyMC4lMjBNVUxUSVZFUlNFJTIwLiUyMHRpbWUlMjBhbmQlMjBmZWVkYmFjayUwQSUyRiUyRiUyMGVfZSUyMCUyRiUyRiUyMCU0MGVlcmllX2VhciUwQXBhdCUyMCUzRCUyMCgpJTNEJTNFJTBBc29saWQoKSUwQS5sYXllcihzb2xpZCgpLmRpZmYoJTBBJTIwJTIwb3NjKCh0aW1lJTJGMTYpJTIwKiUyMDElMkMlMjAodGltZSUyRjEwMDApJTIwKiUyMDAuMiUyMCUyMCklMEElMjAlMjAlMjAlMjAubXVsdChvc2MoKHRpbWUlMkY4KSUyMColMjAxJTJDJTIwKHRpbWUlMkYxMDA2KSUyMColMjAwLjIlMjAlMjApLnJvdGF0ZSgxLjU3KSklMEElMjAlMjAlMjAlMjAubW9kdWxhdGUoKHNoYXBlKDEwNiUyQzElMkMwLjA1KSkpJTBBJTIwJTIwJTIwJTIwLm11bHQoc2hhcGUoMTA2JTJDMSUyQzAuMDUpKSUwQSUyMCUyMCkpJTBBJTIwJTIwLm1vZHVsYXRlU2NhbGUob3NjKDIlMkMwLjEyNSklMkMwLjEyNSklMEElMkYlMkYlMEFzb2xpZCgpJTBBLmxheWVyKHNvbGlkKDElMkMxJTJDMSklMEElMjAlMjAubXVsdChwYXQoKSUwQSUyMCUyMC5kaWZmKHNyYyhvMCkuc2NhbGUoMC4yKS5tdWx0KHNvbGlkKCklMkMlNUIwLjclMkMwLjYlMkMwLjQlMkMwLjYlNUQpLmthbGVpZCgxLjAxKS5zYXR1cmF0ZSgwLjMpKSUwQSklMEEubGF5ZXIoc29saWQoMSUyQzElMkMxKSUwQSUyMCUyMCUyMCUyMC5tYXNrKCUwQSUyMCUyMCUyMCUyMCUyMCUyMG5vaXNlKDIlMkMwLjA1KSUwQSUyMCUyMCUyMCUyMCUyMCUyMC5pbnZlcnQoKS5jb2xvcmFtYSgyKS5wb3N0ZXJpemUoOCUyQzQpLmx1bWEoMC4yNSkudGhyZXNoKDAuNSklMEElMjAlMjAlMjAlMjAlMjAlMjAubW9kdWxhdGVSb3RhdGUob3NjKDElMkMwLjUpKSUwQSUyMCUyMCUyMCUyMCklMEElMjAlMjAlMjAlMjAubXVsdChncmFkaWVudCgwLjUpLmthbGVpZCgxKS5jb2xvcmFtYSgyKS5zYXR1cmF0ZSgxLjEpLmNvbnRyYXN0KDEuNikubXVsdChzb2xpZCgpJTJDMC40NSkpJTBBJTIwJTIwKSklMEElMjAlMjAub3V0KCklMEElMkYlMkYlMEFzcGVlZCUzRCUyMDAuNSUwQQ=="},{sketch_id:"eerie_ear_1",code:"JTJGJTJGJTIwZWVfMyUyMCUyRiUyRkxJTkVTJTBBJTJGJTJGJTIwZV9lJTIwJTJGJTJGJTIwJTQwZWVyaWVfZWFyJTBBJTJGJTJGJTBBJTJGJTJGYmFzZWQlMjBvbiUwQSUyRiUyRiU0MG5hb3RvX2hpZWRhJTBBJTJGJTJGaHR0cHMlM0ElMkYlMkZuYW90b2hpZWRhLmNvbSUyRmJsb2clMkZoeWRyYS1ib29rJTJGJTBBJTJGJTJGJTBBbiUyMCUzRCUyMDglMEFhJTIwJTNEJTIwKCklMjAlM0QlM0UlMjBzaGFwZSg0JTJDMC4yNSUyQzAuMDA5KS5yb3RhdGUoKCklM0QlM0V0aW1lJTJGLTQwKS5yZXBlYXQobiUyQ24pJTBBYSgpLmFkZChhKCkuc2Nyb2xsWCgwLjUlMkZuKS5zY3JvbGxZKDAuNSUyRm4pJTJDMSkubW9kdWxhdGUobzElMkMwLjEpLm1vZHVsYXRlKHNyYyhvMSkuY29sb3IoMTAlMkMxMCkuYWRkKHNvbGlkKC0xNCUyQy0xNCkpLnJvdGF0ZSgoKSUzRCUzRXRpbWUlMkY0MCklMkMwLjAwNSkuYWRkKHNyYyhvMSkuc2Nyb2xsWSgwLjAxMiUyQzAuMDIpJTJDMC41KS5vdXQobzEpJTBBc3JjKG8xKS5jb2xvcmFtYSgxLjIpLnBvc3Rlcml6ZSg0KS5zYXR1cmF0ZSgwLjcpLmNvbnRyYXN0KDYpLm11bHQoc29saWQoKSUyQzAuMTUpLm91dChvMCklMEElMEElMEE="},{sketch_id:"eerie_ear_2",code:"JTJGJTJGZWVfNSUyMC4lMjBGVUdJVElWRSUyMEdFT01FVFJZJTIwVkhTJTIwLiUyMGF1ZGlvcmVhY3RpdmUlMjBzaGFwZXMlMjBhbmQlMjBncmFkaWVudHMlMEElMkYlMkYlMjBlX2UlMjAlMkYlMkYlMjAlNDBlZXJpZV9lYXIlMEElMkYlMkYlMEFzJTNEJTIwKCklM0QlM0UlMEElMjAlMjBzaGFwZSg0KSUwQS5zY3JvbGxYKCU1Qi0wLjUlMkMtMC4yJTJDMC4zJTJDLTAuMSUyQy0wLjElNUQuc21vb3RoKDAuMSkuZmFzdCgwLjMpKSUwQS5zY3JvbGxZKCU1QjAuMjUlMkMtMC4yJTJDMC4zJTJDLTAuMSUyQzAuMiU1RC5zbW9vdGgoMC45KS5mYXN0KDAuMTUpKSUwQSUyRiUyRiUwQXNvbGlkKCklMEEuYWRkKGdyYWRpZW50KDMlMkMwLjA1KS5yb3RhdGUoMC4wNSUyQy0wLjIpLnBvc3Rlcml6ZSgyKS5jb250cmFzdCgwLjYpJTJDJTVCMSUyQzAlMkMxJTJDMC41JTJDMCUyQzAuNiU1RC5zbW9vdGgoMC45KSklMEEuYWRkKHMoKSklMEEubXVsdChzKCkuc2NhbGUoMC44KS5zY3JvbGxYKDAuMDEpLnNjcm9sbFkoLTAuMDEpLnJvdGF0ZSgwLjIlMkMwLjA2KS5hZGQoZ3JhZGllbnQoMykuY29udHJhc3QoMC42KSUyQyU1QjElMkMwJTJDMSUyQzAuNSU1RC5zbW9vdGgoMC45KSUyQzAuNSkubXVsdChzcmMobzApLnNjYWxlKDAuOTgpJTJDKCklM0QlM0VhLmZmdCU1QjAlNUQqOSklMEElMjAlMjAlMjAlMjAlMjApJTBBLmRpZmYocygpLm1vZHVsYXRlKHNoYXBlKDUwMCkpLnNjYWxlKCU1QjEuNyUyQzEuMiU1RC5zbW9vdGgoMC45KS5mYXN0KDAuMDUpKSklMEEuYWRkKGdyYWRpZW50KDIpLmludmVydCgpJTJDKCklM0QlM0VhLmZmdCU1QjIlNUQpJTBBLm11bHQoZ3JhZGllbnQoKCklM0QlM0VhLmZmdCU1QjMlNUQqOCkpJTBBLmJsZW5kKHNyYygobzApJTJDKCklM0QlM0VhLmZmdCU1QjElNUQqNDApKSUwQS5hZGQodm9yb25vaSgoKSUzRCUzRWEuZmZ0JTVCMSU1RCUyQygpJTNEJTNFYS5mZnQlNUIzJTVEJTJDKCklM0QlM0VhLmZmdCU1QjAlNUQpLnRocmVzaCgwLjcpLnBvc3Rlcml6ZSgyJTJDNCkubHVtYSgwLjkpLnNjcm9sbFkoMSUyQygpJTNEJTNFYS5mZnQlNUIwJTVEJTJGMzApLmNvbG9yYW1hKDMpLnRocmVzaCgoKSUzRCUzRWEuZmZ0JTVCMSU1RCkuc2NhbGUoKCklM0QlM0VhLmZmdCU1QjMlNUQqMiklMkMoKSUzRCUzRWEuZmZ0JTVCMCU1RCUyRjIpJTBBJTIwJTIwLm91dCgpJTBBJTJGJTJGJTBBc3BlZWQlM0QlMjAxJTBBJTBBYS5zZXRTbW9vdGgoMC45Nik="},{sketch_id:"eerie_ear_3",code:"JTJGJTJGJTIwZWVfMSUyMC4lMjBFWUUlMjBJTiUyMFRIRSUyMFNLWSUwQSUyRiUyRmV4YW1wbGUlMjBvZiUyMG1hc2slMjBhbmQlMjBmdW5jdGlvbiUyMG1vZHVsYXRpb24lMEElMkYlMkYlMjBlX2UlMjAlMkYlMkYlMjAlNDBlZXJpZV9lYXIlMEFub2lzZSgxOCklMEElMjAlMjAuY29sb3JhbWEoMSklMEElMjAlMjAucG9zdGVyaXplKDIpJTBBJTIwJTIwLmthbGVpZCg1MCklMEElMjAlMjAubWFzayglMEElMjAlMjAlMjAlMjBzaGFwZSgyNSUyQyUyMDAuMjUpLm1vZHVsYXRlU2NhbGUoJTBBJTIwJTIwJTIwJTIwJTIwJTIwbm9pc2UoNDAwLjUlMkMlMjAwLjUpJTBBJTIwJTIwJTIwJTIwKSUwQSUyMCUyMCklMEElMjAlMjAubWFzayhzaGFwZSg0MDAlMkMlMjAxJTJDJTIwMi4xMjUpKSUwQSUyMCUyMC5tb2R1bGF0ZVNjYWxlKG9zYyg2JTJDJTIwMC4xMjUlMkMlMjAwLjA1KS5rYWxlaWQoNTApKSUwQSUyMCUyMC5tdWx0KG9zYygyMCUyQyUyMDAuMDUlMkMlMjAyLjQpLmthbGVpZCg1MCklMkMlMjAwLjI1KSUwQSUyMCUyMC5zY2FsZSgxLjc1JTJDJTIwMC42NSUyQyUyMDAuNSklMEElMjAlMjAubW9kdWxhdGUobm9pc2UoMC41KSklMEElMjAlMjAuc2F0dXJhdGUoNiklMEElMjAlMjAucG9zdGVyaXplKDQlMkMlMjAwLjIpJTBBJTIwJTIwLnNjYWxlKDEuNSklMEElMjAlMjAub3V0KCklM0IlMEE="}],I1="// licensed with CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/";class jF{constructor(e,i,n){this.sketches=[],this.examples=[],this.current=null,this.code=null,this.exampleIndex=null,this.state=i,this.emitter=n,this.serverURL=this.state.serverURL===null?"":this.state.serverURL,this.examples=FF,this.setSketchFromURL(window.location.search,e),window.addEventListener("popstate",r=>{this.setSketchFromURL(window.location.search,e)}),this.setRandomSketch=this.setRandomSketch.bind(this)}clear(){this.current=null,this.code=null;let e=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.pushState({path:e},"",e),this.url=e}setSketchFromURL(e=window.location.search,i){hush(),render(o0);let n=new URLSearchParams(e);this.searchParams=n;let r=n.get("code"),s=n.get("sketch_id"),a=n.get("showCode");if(console.log("code is",r),this.foundSketch=!1,s){var l=this.getExampleById(s);l?(this.setSketch(l),i(this.code,!1)):Xd.get(`${this.state.serverURL}/sketchById`).query({sketch_id:s}).end((h,p)=>{h?(console.log("err getting sketches",h),this.setSketchFromCode(r,i)):(this.sketches=JSON.parse(p.text),this.sketches.length>0?(this.setSketch(this.sketches[0]),this.foundSketch=!0,i(this.code,this.foundSketch)):this.setSketchFromCode(r,i))})}else this.setSketchFromCode(r,i);a==="false"&&(this.emitter.emit("ui: hide all"),this.emitter.emit("hide info"))}setSketchFromCode(e,i){e?(this.code=this.decodeBase64(e),this.foundSketch=!0):this.setRandomSketch(),i(this.code,this.foundSketch)}saveImage(){}setToURL(e){this.searchParams.delete("sketch_id"),this.searchParams.delete("code"),e.sketch_id?(`${e.sketch_id}`,this.searchParams.append("sketch_id",e.sketch_id)):(`${e.sketch_id}${e.code}`,this.searchParams.append("sketch_id",e.sketch_id),this.searchParams.append("code",e.code));let i=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+this.searchParams.toString();window.history.replaceState({path:i},"",i),this.url=i}encodeBase64(e){return btoa(encodeURIComponent(e))}decodeBase64(e){return decodeURIComponent(atob(e))}setSketch(e){let i=this.decodeBase64(e.code);i.indexOf(I1)<0&&(i=`${I1}
${i}
`),this.code=i,this.current=e,this.setToURL(e)}setRandomSketch(){if(this.examples.length>0){let i;for(i=Math.floor(Math.random()*this.examples.length);i===this.exampleIndex;)i=Math.floor(Math.random()*this.examples.length);this.exampleIndex=i,this.setSketch(this.examples[i])}else{var e="osc(2"+Math.floor(Math.pow(10,Math.random()*2))+")";e+=".color("+Math.random().toFixed(2)+","+Math.random().toFixed(2)+","+Math.random().toFixed(2)+")",e+=".rotate("+Math.random().toFixed(2)+")",e+=".out(o0)",this.code=e}}shareSketch(e,i,n){this.saveSketch(e,()=>{console.log("URL is",this.url,"sketch is",this.current),i.getScreenImage(r=>{Xd.post(`${this.state.serverURL}/image`).attach("previewImage",r).query({url:this.url,sketch_id:this.current.sketch_id,name:n}).end((s,a)=>{s?console.log("error postingimage",s):console.log("image response",a.text)})})})}saveSketch(e,i){let n=this,r=this.encodeBase64(e),s={code:r,parent:this.current?this.current.sketch_id:null};console.log("saving in gallery",s),Xd.post(`${this.state.serverURL}/sketch`).query(s).end((a,l)=>{a?(console.log("error posting sketch",a),i&&i(a)):(console.log("response",l.text),n.setSketch({sketch_id:l.text,code:r}),i&&i(null))})}saveLocally(e){let i=this.encodeBase64(e);this.searchParams.delete("sketch_id"),this.searchParams.delete("code"),this.searchParams.append("code",i);var n=this.searchParams.toString();let r=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+n;window.history.pushState({path:r},"",r),this.url=r}getExampleById(e){var i=this.examples.filter(n=>n.sketch_id===e);return i.length<=0&&(i=this.sketches.filter(n=>n.sketch_id===e)),i[0]}}let es;function WF(t,e){e.on("DOMContentLoaded",function(){es=new jF((i,n)=>{e.emit("load and eval code",i,!1),n?e.emit("ui: hide info"):e.emit("ui: show info"),e.emit("render")},t,e),t.gallery=es}),e.on("gallery: save to URL",function(i){es.saveLocally(i)}),e.on("gallery: clear",()=>{es.clear()}),e.on("gallery:shareSketch",function(){const n=t.editor.editor.getValue();e.emit("repl: eval",n,(r,s)=>{s?console.warn(s):GF(a=>{es.shareSketch(n,t.hydra.hydra,a)},()=>{})})}),e.on("gallery:showExample",()=>{const i=t.editor.editor;e.emit("clear all"),es.setRandomSketch(),e.emit("repl: eval",es.code),i.setValue(es.code)})}function GF(t,e){var i=prompt(`Pressing OK will share this sketch to 
https://twitter.com/hydra_patterns.

Include your name or twitter handle (optional):`);i!==null?t(i):e()}function VF(t){var e=document.createElement("div");return e.innerHTML=t,KF(e.childNodes)}function KF(t){return Array.isArray(t)?t:[].slice.call(t)}var zF=VF,HF=zF;const ql=ln(HF);function QF(t,e){const i=t.showInfo?"hidden":"",{t:n}=t.translation,r=h=>p=>e(h,p),s=(h,p,d,m)=>Yt`
        <i id="${h}-icon" class="fas icon ${p}" title="${d}" onclick=${r(m)} aria-hidden="true"></i>`,a=t.showInfo?s("close","fa-times",n("toolbar.hide-info"),"ui: toggle info"):s("close","fa-question-circle",n("toolbar.show-info"),"ui: toggle info"),l=t.showExtensions?s("close","fa-question-circle",n("toolbar.show-info"),"ui: hide extensions"):s("add","fa-solid fa-puzzle-piece",n("toolbar.load-extension"),"ui: show extensions");return Yt`<div id="toolbar-container">
        ${s("run",`fa-play-circle ${i}`,n("toolbar.run"),"editor: eval all")}
        ${s("clear",`fa fa-trash ${i}`,n("toolbar.clear"),"clear all")}
        ${l}
        ${s("shuffle","fa-random",n("toolbar.shuffle"),"gallery:showExample")}
        ${s("mutator",`fa-dice ${i}`,n("toolbar.random"),"editor: randomize")}
        ${t.serverURL===null?"":s("share",`fa-upload ${i}`,n("toolbar.upload"),"gallery:shareSketch")}
        ${a}
    </div>`}const YF=({content:t,header:e},i,n)=>{i.translation;const r=i.translation.selectedLanguage==="ar"&&i.showInfo===!0?"rtl":"ltr";return Yt`
<div id="info-container" class="${i.showInfo?"":"hidden"}" style="direction:${r}">
  <div id="modal">
    <div id="modal-header" style="opacity:${i.showUI===!0?1:0}">
     ${e}
      ${QF(i,n)}
    </div>
    <div id="modal-body">
     ${t}
    </div>
  </div>
</div>
`},$F=(t,e,i)=>()=>i(t,e),N1=(t,e,i,n)=>Yt`
<i id="${t}-icon" class="fas ${e} extension-icon" title="${i}" onclick=${n} aria-hidden="true"></i>`,ZF=(t,e,i,n)=>Yt`<div 
     class="extension-list-item selected" style="display:flex;justify-content:space-between" >
     <img src="${t.thumbnail}" width="60px" height="60px"/>

     <div style="flex:1;padding-left:8px">
     <div title="${n("extensions.show-example",{"extension-name":t.name})}" onclick=${()=>{i("extensions: load example",e,0)}} style="cursor:pointer"><span style="font-weight:900">${t.name} - </span> <span style="text-overflow:ellipses;overflow:hidden"> ${t.author} </span></div>
     <div> <span style="">${t.description}</span></div>
     </div>
     <div class="extension-buttons">
     <div> 
      ${N1("add-extension","fa-solid fa-plus",n("extensions.show-library",{"extension-name":t.name}),$F("extensions: add to editor",e,i))}
      ${N1("show-documentation","fa-book-open",n("extensions.show-docs",{"extension-name":t.name}),()=>{window.open(t.documentation,"_blank")})}
      </div>
      <div style="font-size: 0.8rem;/*font-family: monospace*/">
        ${t.examples.map((r,s)=>Yt`<div class="extension-icon example-icon" title="${n("extensions.show-example",{"extension-name":t.name})}" onclick=${()=>{i("extensions: load example",e,s)}}>${s+1}</div>`)}
      </div>
     </div>`,qF=(t,e)=>{const{categories:i,selectedCategoryIndex:n}=t.extensions,r=i[n].entries,{t:s}=t.translation,a=Yt`<div class="modal-content extensions">
${ql(s("extensions.about-extensions"))}
<div class="extension-list">
${r.map((h,p)=>ZF(h,p,e,s))}
</div>
</div>
`,l=Yt`<div style="display:flex;flex-wrap:wrap">
  ${i.map((h,p)=>Yt`<div 
    class="language-select ${p===n?"selected":""}" 
    onclick=${()=>e("extensions: select category",p)}
    >${h.name}</div>`)}
  </div>`;return{content:a,header:l}},Nn=t=>`href=${t} target=_blank`,XF=t=>Yt`<div class="modal-content">
<h1>${t("info.title")}</h1>
<h3>${t("info.subtitle")}</h3>
  <br> ///////////////////////////////////////////////////////////<br>
  <h4>${t("info.description")}</h4>
<h4>${t("info.get-started-title")}<ol>
    <li>${t("info.get-started-list.0")}</li>
    <li>${t("info.get-started-list.1")}</li>
    <li>${t("info.get-started-list.2")}</li>
  </ol>
</h4>

<p> ///////////////////////////////////////////////////////////<br><br><br>
  ${t("info.description-detailed")}
</p>
<p>${t("info.uses")}<ul>
${t("info.uses-list",{returnObjects:!0}).map(e=>Yt`<li>${e}</li>`)}
</ul></p>

   <p class="align-right">${ql(t("info.author",{author:"href=https://ojack.xyz class=olivia target=_blank"}))}</p>
   <p>${ql(t("info.more-info",{docs:Nn("https://hydra.ojack.xyz/docs"),functions:Nn("https://hydra.ojack.xyz/api"),gallery:Nn("https://twitter.com/hydra_patterns"),repo:Nn("https://github.com/hydra-synth/hydra"),pixeljam:Nn("http://pixeljam.glitch.me/"),garden:Nn("https://hydra.ojack.xyz/garden"),"hydra-book":Nn("https://hydra-book.glitch.me/"),tutorials:Nn("https://github.com/ojack/hydra/blob/master/examples/README.md")}))}</p>
  <p>${ql(t("info.more-info-forums",{discord:Nn("https://discord.gg/ZQjfHkNHXC"),facebook:Nn("https://www.facebook.com/groups/1084288351771117/")}))}</p>

<p>${ql(t("info.support",{"open-collective":Nn("https://opencollective.com/hydra-synth")}))}</p>
</div>`;function ej(t,e){const{t:i,languages:n}=t.translation,r=Object.entries(n),s=t.showInfo&&r.length>1?Yt`<div style="display:flex;flex-wrap:wrap">${r.map(([l,h])=>Yt`
  <div class="language-select" onclick=${()=>e("set language",l)}>${h}</div>
`)}</div>`:Yt`<div></div>`,a=t.showExtensions?qF(t,e):{content:XF(i),header:s};return YF(a,t,e)}class tj extends p5{constructor({width:e=window.innerWidth,height:i=window.innerHeight,mode:n="P2D"}={}){super(r=>{r.setup=()=>{r.createCanvas(e,i,r[n])},r.draw=()=>{}},"hydra-ui"),this.width=e,this.height=i,this.mode=n,this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px",this.canvas.style.zIndex=-1}show(){this.canvas.style.visibility="visible"}hide(){this.canvas.style.visibility="hidden"}clear(){this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height)}}var Dm={exports:{}},ij=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,nj=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Wk=function(e){var i=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var s=ij.exec(e||""),a={},l=14;l--;)a[nj[l]]=s[l]||"";return n!=-1&&r!=-1&&(a.source=i,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=rj(a,a.path),a.queryKey=sj(a,a.query),a};function rj(t,e){var i=/\/{2,9}/g,n=e.replace(i,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&n.splice(0,1),e.substr(e.length-1,1)=="/"&&n.splice(n.length-1,1),n}function sj(t,e){var i={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,s){r&&(i[r]=s)}),i}var Bm={exports:{}},Um={exports:{}},Cu=1e3,Mu=Cu*60,ku=Mu*60,Tu=ku*24,oj=Tu*365.25,ry=function(t,e){e=e||{};var i=typeof t;if(i==="string"&&t.length>0)return aj(t);if(i==="number"&&isNaN(t)===!1)return e.long?uj(t):lj(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function aj(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var i=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return i*oj;case"days":case"day":case"d":return i*Tu;case"hours":case"hour":case"hrs":case"hr":case"h":return i*ku;case"minutes":case"minute":case"mins":case"min":case"m":return i*Mu;case"seconds":case"second":case"secs":case"sec":case"s":return i*Cu;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function lj(t){return t>=Tu?Math.round(t/Tu)+"d":t>=ku?Math.round(t/ku)+"h":t>=Mu?Math.round(t/Mu)+"m":t>=Cu?Math.round(t/Cu)+"s":t+"ms"}function uj(t){return hc(t,Tu,"day")||hc(t,ku,"hour")||hc(t,Mu,"minute")||hc(t,Cu,"second")||t+" ms"}function hc(t,e,i){if(!(t<e))return t<e*1.5?Math.floor(t/e)+" "+i:Math.ceil(t/e)+" "+i+"s"}(function(t,e){e=t.exports=n.debug=n.default=n,e.coerce=h,e.disable=a,e.enable=s,e.enabled=l,e.humanize=ry,e.instances=[],e.names=[],e.skips=[],e.formatters={};function i(p){var d=0,m;for(m in p)d=(d<<5)-d+p.charCodeAt(m),d|=0;return e.colors[Math.abs(d)%e.colors.length]}function n(p){var d;function m(){if(m.enabled){var y=m,v=+new Date,S=v-(d||v);y.diff=S,y.prev=d,y.curr=v,d=v;for(var M=new Array(arguments.length),b=0;b<M.length;b++)M[b]=arguments[b];M[0]=e.coerce(M[0]),typeof M[0]!="string"&&M.unshift("%O");var w=0;M[0]=M[0].replace(/%([a-zA-Z%])/g,function(B,L){if(B==="%%")return B;w++;var I=e.formatters[L];if(typeof I=="function"){var O=M[w];B=I.call(y,O),M.splice(w,1),w--}return B}),e.formatArgs.call(y,M);var E=m.log||e.log||console.log.bind(console);E.apply(y,M)}}return m.namespace=p,m.enabled=e.enabled(p),m.useColors=e.useColors(),m.color=i(p),m.destroy=r,typeof e.init=="function"&&e.init(m),e.instances.push(m),m}function r(){var p=e.instances.indexOf(this);return p!==-1?(e.instances.splice(p,1),!0):!1}function s(p){e.save(p),e.names=[],e.skips=[];var d,m=(typeof p=="string"?p:"").split(/[\s,]+/),y=m.length;for(d=0;d<y;d++)m[d]&&(p=m[d].replace(/\*/g,".*?"),p[0]==="-"?e.skips.push(new RegExp("^"+p.substr(1)+"$")):e.names.push(new RegExp("^"+p+"$")));for(d=0;d<e.instances.length;d++){var v=e.instances[d];v.enabled=e.enabled(v.namespace)}}function a(){e.enable("")}function l(p){if(p[p.length-1]==="*")return!0;var d,m;for(d=0,m=e.skips.length;d<m;d++)if(e.skips[d].test(p))return!1;for(d=0,m=e.names.length;d<m;d++)if(e.names[d].test(p))return!0;return!1}function h(p){return p instanceof Error?p.stack||p.message:p}})(Um,Um.exports);var hj=Um.exports;(function(t,e){e=t.exports=hj,e.log=r,e.formatArgs=n,e.save=s,e.load=a,e.useColors=i,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(h){try{return JSON.stringify(h)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}};function n(h){var p=this.useColors;if(h[0]=(p?"%c":"")+this.namespace+(p?" %c":" ")+h[0]+(p?"%c ":" ")+"+"+e.humanize(this.diff),!!p){var d="color: "+this.color;h.splice(1,0,d,"color: inherit");var m=0,y=0;h[0].replace(/%[a-zA-Z%]/g,function(v){v!=="%%"&&(m++,v==="%c"&&(y=m))}),h.splice(y,0,d)}}function r(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(h){try{h==null?e.storage.removeItem("debug"):e.storage.debug=h}catch{}}function a(){var h;try{h=e.storage.debug}catch{}return!h&&typeof process<"u"&&"env"in process&&(h={}.DEBUG),h}e.enable(a());function l(){try{return window.localStorage}catch{}}})(Bm,Bm.exports);var Hf=Bm.exports,cj=Wk,D1=Hf("socket.io-client:url"),fj=pj;function pj(t,e){var i=t;e=e||typeof location<"u"&&location,t==null&&(t=e.protocol+"//"+e.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=e.protocol+t:t=e.host+t),/^(https?|wss?):\/\//.test(t)||(D1("protocol-less url %s",t),typeof e<"u"?t=e.protocol+"//"+t:t="https://"+t),D1("parse %s",t),i=cj(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var n=i.host.indexOf(":")!==-1,r=n?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port,i.href=i.protocol+"://"+r+(e&&e.port===i.port?"":":"+i.port),i}var Qf={},Jm={exports:{}},Pm={exports:{}};(function(t,e){e=t.exports=n.debug=n.default=n,e.coerce=h,e.disable=a,e.enable=s,e.enabled=l,e.humanize=ry,e.instances=[],e.names=[],e.skips=[],e.formatters={};function i(p){var d=0,m;for(m in p)d=(d<<5)-d+p.charCodeAt(m),d|=0;return e.colors[Math.abs(d)%e.colors.length]}function n(p){var d;function m(){if(m.enabled){var y=m,v=+new Date,S=v-(d||v);y.diff=S,y.prev=d,y.curr=v,d=v;for(var M=new Array(arguments.length),b=0;b<M.length;b++)M[b]=arguments[b];M[0]=e.coerce(M[0]),typeof M[0]!="string"&&M.unshift("%O");var w=0;M[0]=M[0].replace(/%([a-zA-Z%])/g,function(B,L){if(B==="%%")return B;w++;var I=e.formatters[L];if(typeof I=="function"){var O=M[w];B=I.call(y,O),M.splice(w,1),w--}return B}),e.formatArgs.call(y,M);var E=m.log||e.log||console.log.bind(console);E.apply(y,M)}}return m.namespace=p,m.enabled=e.enabled(p),m.useColors=e.useColors(),m.color=i(p),m.destroy=r,typeof e.init=="function"&&e.init(m),e.instances.push(m),m}function r(){var p=e.instances.indexOf(this);return p!==-1?(e.instances.splice(p,1),!0):!1}function s(p){e.save(p),e.names=[],e.skips=[];var d,m=(typeof p=="string"?p:"").split(/[\s,]+/),y=m.length;for(d=0;d<y;d++)m[d]&&(p=m[d].replace(/\*/g,".*?"),p[0]==="-"?e.skips.push(new RegExp("^"+p.substr(1)+"$")):e.names.push(new RegExp("^"+p+"$")));for(d=0;d<e.instances.length;d++){var v=e.instances[d];v.enabled=e.enabled(v.namespace)}}function a(){e.enable("")}function l(p){if(p[p.length-1]==="*")return!0;var d,m;for(d=0,m=e.skips.length;d<m;d++)if(e.skips[d].test(p))return!1;for(d=0,m=e.names.length;d<m;d++)if(e.names[d].test(p))return!0;return!1}function h(p){return p instanceof Error?p.stack||p.message:p}})(Pm,Pm.exports);var dj=Pm.exports;(function(t,e){e=t.exports=dj,e.log=r,e.formatArgs=n,e.save=s,e.load=a,e.useColors=i,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(h){try{return JSON.stringify(h)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}};function n(h){var p=this.useColors;if(h[0]=(p?"%c":"")+this.namespace+(p?" %c":" ")+h[0]+(p?"%c ":" ")+"+"+e.humanize(this.diff),!!p){var d="color: "+this.color;h.splice(1,0,d,"color: inherit");var m=0,y=0;h[0].replace(/%[a-zA-Z%]/g,function(v){v!=="%%"&&(m++,v==="%c"&&(y=m))}),h.splice(y,0,d)}}function r(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(h){try{h==null?e.storage.removeItem("debug"):e.storage.debug=h}catch{}}function a(){var h;try{h=e.storage.debug}catch{}return!h&&typeof process<"u"&&"env"in process&&(h={}.DEBUG),h}e.enable(a());function l(){try{return window.localStorage}catch{}}})(Jm,Jm.exports);var gj=Jm.exports,Yf={},mj={}.toString,sy=Array.isArray||function(t){return mj.call(t)=="[object Array]"},Gk=_j,yj=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",vj=typeof ArrayBuffer=="function",wj=function(t){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer};function _j(t){return yj&&Buffer.isBuffer(t)||vj&&(t instanceof ArrayBuffer||wj(t))}var oy=sy,Vk=Gk,Kk=Object.prototype.toString,bj=typeof Blob=="function"||typeof Blob<"u"&&Kk.call(Blob)==="[object BlobConstructor]",xj=typeof File=="function"||typeof File<"u"&&Kk.call(File)==="[object FileConstructor]";Yf.deconstructPacket=function(t){var e=[],i=t.data,n=t;return n.data=Fm(i,e),n.attachments=e.length,{packet:n,buffers:e}};function Fm(t,e){if(!t)return t;if(Vk(t)){var i={_placeholder:!0,num:e.length};return e.push(t),i}else if(oy(t)){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=Fm(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){var n={};for(var s in t)n[s]=Fm(t[s],e);return n}return t}Yf.reconstructPacket=function(t,e){return t.data=jm(t.data,e),t.attachments=void 0,t};function jm(t,e){if(!t)return t;if(t&&t._placeholder===!0){var i=typeof t.num=="number"&&t.num>=0&&t.num<e.length;if(i)return e[t.num];throw new Error("illegal attachments")}else if(oy(t))for(var n=0;n<t.length;n++)t[n]=jm(t[n],e);else if(typeof t=="object")for(var r in t)t[r]=jm(t[r],e);return t}Yf.removeBlobs=function(t,e){function i(s,a,l){if(!s)return s;if(bj&&s instanceof Blob||xj&&s instanceof File){n++;var h=new FileReader;h.onload=function(){l?l[a]=this.result:r=this.result,--n||e(r)},h.readAsArrayBuffer(s)}else if(oy(s))for(var p=0;p<s.length;p++)i(s[p],p,s);else if(typeof s=="object"&&!Vk(s))for(var d in s)i(s[d],d,s)}var n=0,r=t;i(r),n||e(r)};(function(t){var e=gj("socket.io-parser"),i=mo,n=Yf,r=sy,s=Gk;t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=a,t.Decoder=m;function a(){}var l=t.ERROR+'"encode error"';a.prototype.encode=function(b,w){if(e("encoding packet %j",b),t.BINARY_EVENT===b.type||t.BINARY_ACK===b.type)d(b,w);else{var E=h(b);w([E])}};function h(b){var w=""+b.type;if((t.BINARY_EVENT===b.type||t.BINARY_ACK===b.type)&&(w+=b.attachments+"-"),b.nsp&&b.nsp!=="/"&&(w+=b.nsp+","),b.id!=null&&(w+=b.id),b.data!=null){var E=p(b.data);if(E!==!1)w+=E;else return l}return e("encoded %j as %s",b,w),w}function p(b){try{return JSON.stringify(b)}catch{return!1}}function d(b,w){function E(B){var L=n.deconstructPacket(B),I=h(L.packet),O=L.buffers;O.unshift(I),w(O)}n.removeBlobs(b,E)}function m(){this.reconstructor=null}i(m.prototype),m.prototype.add=function(b){var w;if(typeof b=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");w=y(b),t.BINARY_EVENT===w.type||t.BINARY_ACK===w.type?(this.reconstructor=new S(w),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",w)):this.emit("decoded",w)}else if(s(b)||b.base64)if(this.reconstructor)w=this.reconstructor.takeBinaryData(b),w&&(this.reconstructor=null,this.emit("decoded",w));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+b)};function y(b){var w=0,E={type:Number(b.charAt(0))};if(t.types[E.type]==null)return M("unknown packet type "+E.type);if(t.BINARY_EVENT===E.type||t.BINARY_ACK===E.type){for(var B=w+1;b.charAt(++w)!=="-"&&w!=b.length;);var L=b.substring(B,w);if(L!=Number(L)||b.charAt(w)!=="-")throw new Error("Illegal attachments");E.attachments=Number(L)}if(b.charAt(w+1)==="/"){for(var B=w+1;++w;){var I=b.charAt(w);if(I===","||w===b.length)break}E.nsp=b.substring(B,w)}else E.nsp="/";var O=b.charAt(w+1);if(O!==""&&Number(O)==O){for(var B=w+1;++w;){var I=b.charAt(w);if(I==null||Number(I)!=I){--w;break}if(w===b.length)break}E.id=Number(b.substring(B,w+1))}if(b.charAt(++w)){var F=v(b.substr(w)),U=F!==!1&&(E.type===t.ERROR||r(F));if(U)E.data=F;else return M("invalid payload")}return e("decoded %s as %j",b,E),E}function v(b){try{return JSON.parse(b)}catch{return!1}}m.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function S(b){this.reconPack=b,this.buffers=[]}S.prototype.takeBinaryData=function(b){if(this.buffers.push(b),this.buffers.length===this.reconPack.attachments){var w=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),w}return null},S.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function M(b){return{type:t.ERROR,data:"parser error: "+b}}})(Qf);var ay={exports:{}},$f={},Wm={exports:{}};try{Wm.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{Wm.exports=!1}var Sj=Wm.exports,ly=function(){return typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}(),Cj=Sj,Mj=ly,uy=function(t){var e=t.xdomain,i=t.xscheme,n=t.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!e||Cj))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!i&&n)return new XDomainRequest}catch{}if(!e)try{return new Mj[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},hy={exports:{}},yo={},kj=Object.keys||function(e){var i=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&i.push(r);return i},Tj=sy,zk=Object.prototype.toString,Ej=typeof Blob=="function"||typeof Blob<"u"&&zk.call(Blob)==="[object BlobConstructor]",Aj=typeof File=="function"||typeof File<"u"&&zk.call(File)==="[object FileConstructor]",Hk=Lc;function Lc(t){if(!t||typeof t!="object")return!1;if(Tj(t)){for(var e=0,i=t.length;e<i;e++)if(Lc(t[e]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(t)||typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Ej&&t instanceof Blob||Aj&&t instanceof File)return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Lc(t.toJSON(),!0);for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Lc(t[n]))return!0;return!1}var Rj=function(t,e,i){var n=t.byteLength;if(e=e||0,i=i||n,t.slice)return t.slice(e,i);if(e<0&&(e+=n),i<0&&(i+=n),i>n&&(i=n),e>=n||e>=i||n===0)return new ArrayBuffer(0);for(var r=new Uint8Array(t),s=new Uint8Array(i-e),a=e,l=0;a<i;a++,l++)s[l]=r[a];return s.buffer},Lj=Oj;function Oj(t,e,i){var n=!1;return i=i||Ij,r.count=t,t===0?e():r;function r(s,a){if(r.count<=0)throw new Error("after called too many times");--r.count,s?(n=!0,e(s),e=i):r.count===0&&!n&&e(null,a)}}function Ij(){}/*! https://mths.be/utf8js v2.1.2 by @mathias */var as=String.fromCharCode;function Qk(t){for(var e=[],i=0,n=t.length,r,s;i<n;)r=t.charCodeAt(i++),r>=55296&&r<=56319&&i<n?(s=t.charCodeAt(i++),(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),i--)):e.push(r);return e}function Nj(t){for(var e=t.length,i=-1,n,r="";++i<e;)n=t[i],n>65535&&(n-=65536,r+=as(n>>>10&1023|55296),n=56320|n&1023),r+=as(n);return r}function Yk(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function eg(t,e){return as(t>>e&63|128)}function Dj(t,e){if(!(t&4294967168))return as(t);var i="";return t&4294965248?t&4294901760?t&4292870144||(i=as(t>>18&7|240),i+=eg(t,12),i+=eg(t,6)):(Yk(t,e)||(t=65533),i=as(t>>12&15|224),i+=eg(t,6)):i=as(t>>6&31|192),i+=as(t&63|128),i}function Bj(t,e){e=e||{};for(var i=e.strict!==!1,n=Qk(t),r=n.length,s=-1,a,l="";++s<r;)a=n[s],l+=Dj(a,i);return l}function Qo(){if(ps>=yf)throw Error("Invalid byte index");var t=mf[ps]&255;if(ps++,(t&192)==128)return t&63;throw Error("Invalid continuation byte")}function Uj(t){var e,i,n,r,s;if(ps>yf)throw Error("Invalid byte index");if(ps==yf)return!1;if(e=mf[ps]&255,ps++,!(e&128))return e;if((e&224)==192){if(i=Qo(),s=(e&31)<<6|i,s>=128)return s;throw Error("Invalid continuation byte")}if((e&240)==224){if(i=Qo(),n=Qo(),s=(e&15)<<12|i<<6|n,s>=2048)return Yk(s,t)?s:65533;throw Error("Invalid continuation byte")}if((e&248)==240&&(i=Qo(),n=Qo(),r=Qo(),s=(e&7)<<18|i<<12|n<<6|r,s>=65536&&s<=1114111))return s;throw Error("Invalid UTF-8 detected")}var mf,yf,ps;function Jj(t,e){e=e||{};var i=e.strict!==!1;mf=Qk(t),yf=mf.length,ps=0;for(var n=[],r;(r=Uj(i))!==!1;)n.push(r);return Nj(n)}var Pj={version:"2.1.2",encode:Bj,decode:Jj},cc={},B1;function Fj(){return B1||(B1=1,function(t){cc.encode=function(e){var i=new Uint8Array(e),n,r=i.length,s="";for(n=0;n<r;n+=3)s+=t[i[n]>>2],s+=t[(i[n]&3)<<4|i[n+1]>>4],s+=t[(i[n+1]&15)<<2|i[n+2]>>6],s+=t[i[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s},cc.decode=function(e){var i=e.length*.75,n=e.length,r,s=0,a,l,h,p;e[e.length-1]==="="&&(i--,e[e.length-2]==="="&&i--);var d=new ArrayBuffer(i),m=new Uint8Array(d);for(r=0;r<n;r+=4)a=t.indexOf(e[r]),l=t.indexOf(e[r+1]),h=t.indexOf(e[r+2]),p=t.indexOf(e[r+3]),m[s++]=a<<2|l>>4,m[s++]=(l&15)<<4|h>>2,m[s++]=(h&3)<<6|p&63;return d}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")),cc}var tg,U1;function jj(){if(U1)return tg;U1=1;var t=typeof t<"u"?t:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,e=function(){try{var l=new Blob(["hi"]);return l.size===2}catch{return!1}}(),i=e&&function(){try{var l=new Blob([new Uint8Array([1,2])]);return l.size===2}catch{return!1}}(),n=t&&t.prototype.append&&t.prototype.getBlob;function r(l){return l.map(function(h){if(h.buffer instanceof ArrayBuffer){var p=h.buffer;if(h.byteLength!==p.byteLength){var d=new Uint8Array(h.byteLength);d.set(new Uint8Array(p,h.byteOffset,h.byteLength)),p=d.buffer}return p}return h})}function s(l,h){h=h||{};var p=new t;return r(l).forEach(function(d){p.append(d)}),h.type?p.getBlob(h.type):p.getBlob()}function a(l,h){return new Blob(r(l),h||{})}return typeof Blob<"u"&&(s.prototype=Blob.prototype,a.prototype=Blob.prototype),tg=function(){return e?i?Blob:a:n?s:void 0}(),tg}(function(t){var e=kj,i=Hk,n=Rj,r=Lj,s=Pj,a;typeof ArrayBuffer<"u"&&(a=Fj());var l=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),h=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),p=l||h;t.protocol=3;var d=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},m=e(d),y={type:"error",data:"parser error"},v=jj();t.encodePacket=function(L,I,O,F){typeof I=="function"&&(F=I,I=!1),typeof O=="function"&&(F=O,O=null);var U=L.data===void 0?void 0:L.data.buffer||L.data;if(typeof ArrayBuffer<"u"&&U instanceof ArrayBuffer)return M(L,I,F);if(typeof v<"u"&&U instanceof v)return w(L,I,F);if(U&&U.base64)return S(L,F);var V=d[L.type];return L.data!==void 0&&(V+=O?s.encode(String(L.data),{strict:!1}):String(L.data)),F(""+V)};function S(L,I){var O="b"+t.packets[L.type]+L.data.data;return I(O)}function M(L,I,O){if(!I)return t.encodeBase64Packet(L,O);var F=L.data,U=new Uint8Array(F),V=new Uint8Array(1+F.byteLength);V[0]=d[L.type];for(var A=0;A<U.length;A++)V[A+1]=U[A];return O(V.buffer)}function b(L,I,O){if(!I)return t.encodeBase64Packet(L,O);var F=new FileReader;return F.onload=function(){t.encodePacket({type:L.type,data:F.result},I,!0,O)},F.readAsArrayBuffer(L.data)}function w(L,I,O){if(!I)return t.encodeBase64Packet(L,O);if(p)return b(L,I,O);var F=new Uint8Array(1);F[0]=d[L.type];var U=new v([F.buffer,L.data]);return O(U)}t.encodeBase64Packet=function(L,I){var O="b"+t.packets[L.type];if(typeof v<"u"&&L.data instanceof v){var F=new FileReader;return F.onload=function(){var H=F.result.split(",")[1];I(O+H)},F.readAsDataURL(L.data)}var U;try{U=String.fromCharCode.apply(null,new Uint8Array(L.data))}catch{for(var V=new Uint8Array(L.data),A=new Array(V.length),Q=0;Q<V.length;Q++)A[Q]=V[Q];U=String.fromCharCode.apply(null,A)}return O+=btoa(U),I(O)},t.decodePacket=function(L,I,O){if(L===void 0)return y;if(typeof L=="string"){if(L.charAt(0)==="b")return t.decodeBase64Packet(L.substr(1),I);if(O&&(L=E(L),L===!1))return y;var U=L.charAt(0);return Number(U)!=U||!m[U]?y:L.length>1?{type:m[U],data:L.substring(1)}:{type:m[U]}}var F=new Uint8Array(L),U=F[0],V=n(L,1);return v&&I==="blob"&&(V=new v([V])),{type:m[U],data:V}};function E(L){try{L=s.decode(L,{strict:!1})}catch{return!1}return L}t.decodeBase64Packet=function(L,I){var O=m[L.charAt(0)];if(!a)return{type:O,data:{base64:!0,data:L.substr(1)}};var F=a.decode(L.substr(1));return I==="blob"&&v&&(F=new v([F])),{type:O,data:F}},t.encodePayload=function(L,I,O){typeof I=="function"&&(O=I,I=null);var F=i(L);if(I&&F)return v&&!p?t.encodePayloadAsBlob(L,O):t.encodePayloadAsArrayBuffer(L,O);if(!L.length)return O("0:");function U(A){return A.length+":"+A}function V(A,Q){t.encodePacket(A,F?I:!1,!1,function(H){Q(null,U(H))})}B(L,V,function(A,Q){return O(Q.join(""))})};function B(L,I,O){for(var F=new Array(L.length),U=r(L.length,O),V=function(Q,H,re){I(H,function(le,q){F[Q]=q,re(le,F)})},A=0;A<L.length;A++)V(A,L[A],U)}t.decodePayload=function(L,I,O){if(typeof L!="string")return t.decodePayloadAsBinary(L,I,O);typeof I=="function"&&(O=I,I=null);var F;if(L==="")return O(y,0,1);for(var U="",V,A,Q=0,H=L.length;Q<H;Q++){var re=L.charAt(Q);if(re!==":"){U+=re;continue}if(U===""||U!=(V=Number(U))||(A=L.substr(Q+1,V),U!=A.length))return O(y,0,1);if(A.length){if(F=t.decodePacket(A,I,!1),y.type===F.type&&y.data===F.data)return O(y,0,1);var le=O(F,Q+V,H);if(le===!1)return}Q+=V,U=""}if(U!=="")return O(y,0,1)},t.encodePayloadAsArrayBuffer=function(L,I){if(!L.length)return I(new ArrayBuffer(0));function O(F,U){t.encodePacket(F,!0,!0,function(V){return U(null,V)})}B(L,O,function(F,U){var V=U.reduce(function(H,re){var le;return typeof re=="string"?le=re.length:le=re.byteLength,H+le.toString().length+le+2},0),A=new Uint8Array(V),Q=0;return U.forEach(function(H){var re=typeof H=="string",le=H;if(re){for(var W=new Uint8Array(H.length),q=0;q<H.length;q++)W[q]=H.charCodeAt(q);le=W.buffer}re?A[Q++]=0:A[Q++]=1;for(var Z=le.byteLength.toString(),q=0;q<Z.length;q++)A[Q++]=parseInt(Z[q]);A[Q++]=255;for(var W=new Uint8Array(le),q=0;q<W.length;q++)A[Q++]=W[q]}),I(A.buffer)})},t.encodePayloadAsBlob=function(L,I){function O(F,U){t.encodePacket(F,!0,!0,function(V){var A=new Uint8Array(1);if(A[0]=1,typeof V=="string"){for(var Q=new Uint8Array(V.length),H=0;H<V.length;H++)Q[H]=V.charCodeAt(H);V=Q.buffer,A[0]=0}for(var re=V instanceof ArrayBuffer?V.byteLength:V.size,le=re.toString(),q=new Uint8Array(le.length+1),H=0;H<le.length;H++)q[H]=parseInt(le[H]);if(q[le.length]=255,v){var Z=new v([A.buffer,q.buffer,V]);U(null,Z)}})}B(L,O,function(F,U){return I(new v(U))})},t.decodePayloadAsBinary=function(L,I,O){typeof I=="function"&&(O=I,I=null);for(var F=L,U=[];F.byteLength>0;){for(var V=new Uint8Array(F),A=V[0]===0,Q="",H=1;V[H]!==255;H++){if(Q.length>310)return O(y,0,1);Q+=V[H]}F=n(F,2+Q.length),Q=parseInt(Q);var re=n(F,0,Q);if(A)try{re=String.fromCharCode.apply(null,new Uint8Array(re))}catch{var le=new Uint8Array(re);re="";for(var H=0;H<le.length;H++)re+=String.fromCharCode(le[H])}U.push(re),F=n(F,Q)}var q=U.length;U.forEach(function(Z,W){O(t.decodePacket(Z,I,!0),W,q)})}})(yo);var ig,J1;function cy(){if(J1)return ig;J1=1;var t=yo,e=mo;ig=i;function i(n){this.path=n.path,this.hostname=n.hostname,this.port=n.port,this.secure=n.secure,this.query=n.query,this.timestampParam=n.timestampParam,this.timestampRequests=n.timestampRequests,this.readyState="",this.agent=n.agent||!1,this.socket=n.socket,this.enablesXDR=n.enablesXDR,this.withCredentials=n.withCredentials,this.pfx=n.pfx,this.key=n.key,this.passphrase=n.passphrase,this.cert=n.cert,this.ca=n.ca,this.ciphers=n.ciphers,this.rejectUnauthorized=n.rejectUnauthorized,this.forceNode=n.forceNode,this.isReactNative=n.isReactNative,this.extraHeaders=n.extraHeaders,this.localAddress=n.localAddress}return e(i.prototype),i.prototype.onError=function(n,r){var s=new Error(n);return s.type="TransportError",s.description=r,this.emit("error",s),this},i.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},i.prototype.send=function(n){if(this.readyState==="open")this.write(n);else throw new Error("Transport not open")},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(n){var r=t.decodePacket(n,this.socket.binaryType);this.onPacket(r)},i.prototype.onPacket=function(n){this.emit("packet",n)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")},ig}var Ba={};Ba.encode=function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e};Ba.decode=function(t){for(var e={},i=t.split("&"),n=0,r=i.length;n<r;n++){var s=i[n].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e};var Zf=function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},$k="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),vf=64,Zk={},P1=0,ds=0,F1;function Gm(t){var e="";do e=$k[t%vf]+e,t=Math.floor(t/vf);while(t>0);return e}function Wj(t){var e=0;for(ds=0;ds<t.length;ds++)e=e*vf+Zk[t.charAt(ds)];return e}function fy(){var t=Gm(+new Date);return t!==F1?(P1=0,F1=t):t+"."+Gm(P1++)}for(;ds<vf;ds++)Zk[$k[ds]]=ds;fy.encode=Gm;fy.decode=Wj;var qk=fy,Vm={exports:{}},Km={exports:{}};(function(t,e){e=t.exports=n.debug=n.default=n,e.coerce=h,e.disable=a,e.enable=s,e.enabled=l,e.humanize=ry,e.instances=[],e.names=[],e.skips=[],e.formatters={};function i(p){var d=0,m;for(m in p)d=(d<<5)-d+p.charCodeAt(m),d|=0;return e.colors[Math.abs(d)%e.colors.length]}function n(p){var d;function m(){if(m.enabled){var y=m,v=+new Date,S=v-(d||v);y.diff=S,y.prev=d,y.curr=v,d=v;for(var M=new Array(arguments.length),b=0;b<M.length;b++)M[b]=arguments[b];M[0]=e.coerce(M[0]),typeof M[0]!="string"&&M.unshift("%O");var w=0;M[0]=M[0].replace(/%([a-zA-Z%])/g,function(B,L){if(B==="%%")return B;w++;var I=e.formatters[L];if(typeof I=="function"){var O=M[w];B=I.call(y,O),M.splice(w,1),w--}return B}),e.formatArgs.call(y,M);var E=m.log||e.log||console.log.bind(console);E.apply(y,M)}}return m.namespace=p,m.enabled=e.enabled(p),m.useColors=e.useColors(),m.color=i(p),m.destroy=r,typeof e.init=="function"&&e.init(m),e.instances.push(m),m}function r(){var p=e.instances.indexOf(this);return p!==-1?(e.instances.splice(p,1),!0):!1}function s(p){e.save(p),e.names=[],e.skips=[];var d,m=(typeof p=="string"?p:"").split(/[\s,]+/),y=m.length;for(d=0;d<y;d++)m[d]&&(p=m[d].replace(/\*/g,".*?"),p[0]==="-"?e.skips.push(new RegExp("^"+p.substr(1)+"$")):e.names.push(new RegExp("^"+p+"$")));for(d=0;d<e.instances.length;d++){var v=e.instances[d];v.enabled=e.enabled(v.namespace)}}function a(){e.enable("")}function l(p){if(p[p.length-1]==="*")return!0;var d,m;for(d=0,m=e.skips.length;d<m;d++)if(e.skips[d].test(p))return!1;for(d=0,m=e.names.length;d<m;d++)if(e.names[d].test(p))return!0;return!1}function h(p){return p instanceof Error?p.stack||p.message:p}})(Km,Km.exports);var Gj=Km.exports;(function(t,e){e=t.exports=Gj,e.log=r,e.formatArgs=n,e.save=s,e.load=a,e.useColors=i,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(h){try{return JSON.stringify(h)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}};function n(h){var p=this.useColors;if(h[0]=(p?"%c":"")+this.namespace+(p?" %c":" ")+h[0]+(p?"%c ":" ")+"+"+e.humanize(this.diff),!!p){var d="color: "+this.color;h.splice(1,0,d,"color: inherit");var m=0,y=0;h[0].replace(/%[a-zA-Z%]/g,function(v){v!=="%%"&&(m++,v==="%c"&&(y=m))}),h.splice(y,0,d)}}function r(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(h){try{h==null?e.storage.removeItem("debug"):e.storage.debug=h}catch{}}function a(){var h;try{h=e.storage.debug}catch{}return!h&&typeof process<"u"&&"env"in process&&(h={}.DEBUG),h}e.enable(a());function l(){try{return window.localStorage}catch{}}})(Vm,Vm.exports);var qf=Vm.exports,Xk=cy(),Vj=Ba,eT=yo,Kj=Zf,zj=qk,Un=qf("engine.io-client:polling"),tT=wr,Hj=function(){var t=uy,e=new t({xdomain:!1});return e.responseType!=null}();function wr(t){var e=t&&t.forceBase64;(!Hj||e)&&(this.supportsBinary=!1),Xk.call(this,t)}Kj(wr,Xk);wr.prototype.name="polling";wr.prototype.doOpen=function(){this.poll()};wr.prototype.pause=function(t){var e=this;this.readyState="pausing";function i(){Un("paused"),e.readyState="paused",t()}if(this.polling||!this.writable){var n=0;this.polling&&(Un("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){Un("pre-pause polling complete"),--n||i()})),this.writable||(Un("we are currently writing - waiting to pause"),n++,this.once("drain",function(){Un("pre-pause writing complete"),--n||i()}))}else i()};wr.prototype.poll=function(){Un("polling"),this.polling=!0,this.doPoll(),this.emit("poll")};wr.prototype.onData=function(t){var e=this;Un("polling got data %s",t);var i=function(n,r,s){if(e.readyState==="opening"&&n.type==="open"&&e.onOpen(),n.type==="close")return e.onClose(),!1;e.onPacket(n)};eT.decodePayload(t,this.socket.binaryType,i),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():Un('ignoring poll - transport state "%s"',this.readyState))};wr.prototype.doClose=function(){var t=this;function e(){Un("writing close packet"),t.write([{type:"close"}])}this.readyState==="open"?(Un("transport open - closing"),e()):(Un("transport not open - deferring close"),this.once("open",e))};wr.prototype.write=function(t){var e=this;this.writable=!1;var i=function(){e.writable=!0,e.emit("drain")};eT.encodePayload(t,this.supportsBinary,function(n){e.doWrite(n,i)})};wr.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",i="";this.timestampRequests!==!1&&(t[this.timestampParam]=zj()),!this.supportsBinary&&!t.sid&&(t.b64=1),t=Vj.encode(t),this.port&&(e==="https"&&Number(this.port)!==443||e==="http"&&Number(this.port)!==80)&&(i=":"+this.port),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.hostname+"]":this.hostname)+i+this.path+t};var Qj=uy,iT=tT,Yj=mo,$j=Zf,zm=qf("engine.io-client:polling-xhr"),Zj=ly;hy.exports=Ua;hy.exports.Request=ei;function j1(){}function Ua(t){if(iT.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,typeof location<"u"){var e=location.protocol==="https:",i=location.port;i||(i=e?443:80),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==e}}$j(Ua,iT);Ua.prototype.supportsBinary=!0;Ua.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new ei(t)};Ua.prototype.doWrite=function(t,e){var i=typeof t!="string"&&t!==void 0,n=this.request({method:"POST",data:t,isBinary:i}),r=this;n.on("success",e),n.on("error",function(s){r.onError("xhr post error",s)}),this.sendXhr=n};Ua.prototype.doPoll=function(){zm("xhr poll");var t=this.request(),e=this;t.on("data",function(i){e.onData(i)}),t.on("error",function(i){e.onError("xhr poll error",i)}),this.pollXhr=t};function ei(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}Yj(ei.prototype);ei.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new Qj(t),i=this;try{zm("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(var n in this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&e.setRequestHeader(n,this.extraHeaders[n])}}catch{}if(this.method==="POST")try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{e.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){i.onLoad()},e.onerror=function(){i.onError(e.responseText)}):e.onreadystatechange=function(){if(e.readyState===2)try{var r=e.getResponseHeader("Content-Type");(i.supportsBinary&&r==="application/octet-stream"||r==="application/octet-stream; charset=UTF-8")&&(e.responseType="arraybuffer")}catch{}e.readyState===4&&(e.status===200||e.status===1223?i.onLoad():setTimeout(function(){i.onError(typeof e.status=="number"?e.status:0)},0))},zm("xhr data %s",this.data),e.send(this.data)}catch(r){setTimeout(function(){i.onError(r)},0);return}typeof document<"u"&&(this.index=ei.requestsCount++,ei.requests[this.index]=this)};ei.prototype.onSuccess=function(){this.emit("success"),this.cleanup()};ei.prototype.onData=function(t){this.emit("data",t),this.onSuccess()};ei.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)};ei.prototype.cleanup=function(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=j1:this.xhr.onreadystatechange=j1,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete ei.requests[this.index],this.xhr=null}};ei.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch{}e==="application/octet-stream"||e==="application/octet-stream; charset=UTF-8"?t=this.xhr.response||this.xhr.responseText:t=this.xhr.responseText}catch(i){this.onError(i)}t!=null&&this.onData(t)};ei.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR};ei.prototype.abort=function(){this.cleanup()};ei.requestsCount=0;ei.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",W1);else if(typeof addEventListener=="function"){var qj="onpagehide"in Zj?"pagehide":"unload";addEventListener(qj,W1,!1)}}function W1(){for(var t in ei.requests)ei.requests.hasOwnProperty(t)&&ei.requests[t].abort()}var Xj=hy.exports,py=tT,e5=Zf,G1=ly,t5=Ja,i5=/\n/g,n5=/\\n/g,fc;function r5(){}function Ja(t){py.call(this,t),this.query=this.query||{},fc||(fc=G1.___eio=G1.___eio||[]),this.index=fc.length;var e=this;fc.push(function(i){e.onData(i)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){e.script&&(e.script.onerror=r5)},!1)}e5(Ja,py);Ja.prototype.supportsBinary=!1;Ja.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),py.prototype.doClose.call(this)};Ja.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(r){t.onError("jsonp poll error",r)};var i=document.getElementsByTagName("script")[0];i?i.parentNode.insertBefore(e,i):(document.head||document.body).appendChild(e),this.script=e;var n=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var r=document.createElement("iframe");document.body.appendChild(r),document.body.removeChild(r)},100)};Ja.prototype.doWrite=function(t,e){var i=this;if(!this.form){var n=document.createElement("form"),r=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index,a;n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=s,n.method="POST",n.setAttribute("accept-charset","utf-8"),r.name="d",n.appendChild(r),document.body.appendChild(n),this.form=n,this.area=r}this.form.action=this.uri();function l(){h(),e()}function h(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(d){i.onError("jsonp polling iframe removal error",d)}try{var p='<iframe src="javascript:0" name="'+i.iframeId+'">';a=document.createElement(p)}catch{a=document.createElement("iframe"),a.name=i.iframeId,a.src="javascript:0"}a.id=i.iframeId,i.form.appendChild(a),i.iframe=a}h(),t=t.replace(n5,`\\
`),this.area.value=t.replace(i5,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){i.iframe.readyState==="complete"&&l()}:this.iframe.onload=l};var dy=cy(),s5=yo,o5=Ba,a5=Zf,l5=qk,u5=qf("engine.io-client:websocket"),wf,gy;typeof WebSocket<"u"?wf=WebSocket:typeof self<"u"&&(wf=self.WebSocket||self.MozWebSocket);if(typeof window>"u")try{gy=Aa}catch{}var pa=wf||gy,h5=xn;function xn(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=wf&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(pa=gy),dy.call(this,t)}a5(xn,dy);xn.prototype.name="websocket";xn.prototype.supportsBinary=!0;xn.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,i={};this.isReactNative||(i.agent=this.agent,i.perMessageDeflate=this.perMessageDeflate,i.pfx=this.pfx,i.key=this.key,i.passphrase=this.passphrase,i.cert=this.cert,i.ca=this.ca,i.ciphers=this.ciphers,i.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(i.headers=this.extraHeaders),this.localAddress&&(i.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new pa(t,e):new pa(t):new pa(t,e,i)}catch(n){return this.emit("error",n)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}};xn.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}};xn.prototype.write=function(t){var e=this;this.writable=!1;for(var i=t.length,n=0,r=i;n<r;n++)(function(a){s5.encodePacket(a,e.supportsBinary,function(l){if(!e.usingBrowserWebSocket){var h={};if(a.options&&(h.compress=a.options.compress),e.perMessageDeflate){var p=typeof l=="string"?Buffer.byteLength(l):l.length;p<e.perMessageDeflate.threshold&&(h.compress=!1)}}try{e.usingBrowserWebSocket?e.ws.send(l):e.ws.send(l,h)}catch{u5("websocket closed before onclose event")}--i||s()})})(t[n]);function s(){e.emit("flush"),setTimeout(function(){e.writable=!0,e.emit("drain")},0)}};xn.prototype.onClose=function(){dy.prototype.onClose.call(this)};xn.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()};xn.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",i="";this.port&&(e==="wss"&&Number(this.port)!==443||e==="ws"&&Number(this.port)!==80)&&(i=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=l5()),this.supportsBinary||(t.b64=1),t=o5.encode(t),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.hostname+"]":this.hostname)+i+this.path+t};xn.prototype.check=function(){return!!pa&&!("__initialize"in pa&&this.name===xn.prototype.name)};var c5=uy,f5=Xj,d5=t5,g5=h5;$f.polling=m5;$f.websocket=g5;function m5(t){var e,i=!1,n=!1,r=t.jsonp!==!1;if(typeof location<"u"){var s=location.protocol==="https:",a=location.port;a||(a=s?443:80),i=t.hostname!==location.hostname||a!==t.port,n=t.secure!==s}if(t.xdomain=i,t.xscheme=n,e=new c5(t),"open"in e&&!t.forceJSONP)return new f5(t);if(!r)throw new Error("JSONP disabled");return new d5(t)}var y5=[].indexOf,nT=function(t,e){if(y5)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1},v5=$f,w5=mo,Ht=qf("engine.io-client:socket"),_5=nT,rT=yo,V1=Wk,b5=Ba,x5=tt;function tt(t,e){if(!(this instanceof tt))return new tt(t,e);e=e||{},t&&typeof t=="object"&&(e=t,t=null),t?(t=V1(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=V1(e.host).host),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=e.query||{},typeof this.query=="string"&&(this.query=b5.decode(this.query)),this.upgrade=e.upgrade!==!1,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=e.jsonp!==!1,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=e.withCredentials!==!1,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=e.perMessageDeflate!==!1?e.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||void 0,this.key=e.key||void 0,this.passphrase=e.passphrase||void 0,this.cert=e.cert||void 0,this.ca=e.ca||void 0,this.ciphers=e.ciphers||void 0,this.rejectUnauthorized=e.rejectUnauthorized===void 0?!0:e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}tt.priorWebsocketSuccess=!1;w5(tt.prototype);tt.protocol=rT.protocol;tt.Socket=tt;tt.Transport=cy();tt.transports=$f;tt.parser=yo;tt.prototype.createTransport=function(t){Ht('creating transport "%s"',t);var e=S5(this.query);e.EIO=rT.protocol,e.transport=t;var i=this.transportOptions[t]||{};this.id&&(e.sid=this.id);var n=new v5[t]({query:e,socket:this,agent:i.agent||this.agent,hostname:i.hostname||this.hostname,port:i.port||this.port,secure:i.secure||this.secure,path:i.path||this.path,forceJSONP:i.forceJSONP||this.forceJSONP,jsonp:i.jsonp||this.jsonp,forceBase64:i.forceBase64||this.forceBase64,enablesXDR:i.enablesXDR||this.enablesXDR,withCredentials:i.withCredentials||this.withCredentials,timestampRequests:i.timestampRequests||this.timestampRequests,timestampParam:i.timestampParam||this.timestampParam,policyPort:i.policyPort||this.policyPort,pfx:i.pfx||this.pfx,key:i.key||this.key,passphrase:i.passphrase||this.passphrase,cert:i.cert||this.cert,ca:i.ca||this.ca,ciphers:i.ciphers||this.ciphers,rejectUnauthorized:i.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:i.perMessageDeflate||this.perMessageDeflate,extraHeaders:i.extraHeaders||this.extraHeaders,forceNode:i.forceNode||this.forceNode,localAddress:i.localAddress||this.localAddress,requestTimeout:i.requestTimeout||this.requestTimeout,protocols:i.protocols||void 0,isReactNative:this.isReactNative});return n};function S5(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}tt.prototype.open=function(){var t;if(this.rememberUpgrade&&tt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){var e=this;setTimeout(function(){e.emit("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)};tt.prototype.setTransport=function(t){Ht("setting transport %s",t.name);var e=this;this.transport&&(Ht("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(i){e.onPacket(i)}).on("error",function(i){e.onError(i)}).on("close",function(){e.onClose("transport close")})};tt.prototype.probe=function(t){Ht('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),i=!1,n=this;tt.priorWebsocketSuccess=!1;function r(){if(n.onlyBinaryUpgrades){var m=!this.supportsBinary&&n.transport.supportsBinary;i=i||m}i||(Ht('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(y){if(!i)if(y.type==="pong"&&y.data==="probe"){if(Ht('probe transport "%s" pong',t),n.upgrading=!0,n.emit("upgrading",e),!e)return;tt.priorWebsocketSuccess=e.name==="websocket",Ht('pausing current transport "%s"',n.transport.name),n.transport.pause(function(){i||n.readyState!=="closed"&&(Ht("changing transport and sending upgrade packet"),d(),n.setTransport(e),e.send([{type:"upgrade"}]),n.emit("upgrade",e),e=null,n.upgrading=!1,n.flush())})}else{Ht('probe transport "%s" failed',t);var v=new Error("probe error");v.transport=e.name,n.emit("upgradeError",v)}}))}function s(){i||(i=!0,d(),e.close(),e=null)}function a(m){var y=new Error("probe error: "+m);y.transport=e.name,s(),Ht('probe transport "%s" failed because of error: %s',t,m),n.emit("upgradeError",y)}function l(){a("transport closed")}function h(){a("socket closed")}function p(m){e&&m.name!==e.name&&(Ht('"%s" works - aborting "%s"',m.name,e.name),s())}function d(){e.removeListener("open",r),e.removeListener("error",a),e.removeListener("close",l),n.removeListener("close",h),n.removeListener("upgrading",p)}e.once("open",r),e.once("error",a),e.once("close",l),this.once("close",h),this.once("upgrading",p),e.open()};tt.prototype.onOpen=function(){if(Ht("socket open"),this.readyState="open",tt.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){Ht("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}};tt.prototype.onPacket=function(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(Ht('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data);break}else Ht('packet received with socket readyState "%s"',this.readyState)};tt.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};tt.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){e.readyState!=="closed"&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)};tt.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){Ht("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)};tt.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})};tt.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()};tt.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(Ht("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};tt.prototype.write=tt.prototype.send=function(t,e,i){return this.sendPacket("message",t,e,i),this};tt.prototype.sendPacket=function(t,e,i,n){if(typeof e=="function"&&(n=e,e=void 0),typeof i=="function"&&(n=i,i=null),!(this.readyState==="closing"||this.readyState==="closed")){i=i||{},i.compress=i.compress!==!1;var r={type:t,data:e,options:i};this.emit("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}};tt.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}function e(){t.onClose("forced close"),Ht("socket closing - telling transport to close"),t.transport.close()}function i(){t.removeListener("upgrade",i),t.removeListener("upgradeError",i),e()}function n(){t.once("upgrade",i),t.once("upgradeError",i)}return this};tt.prototype.onError=function(t){Ht("socket error %j",t),tt.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)};tt.prototype.onClose=function(t,e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){Ht('socket close with reason: "%s"',t);var i=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),i.writeBuffer=[],i.prevBufferLen=0}};tt.prototype.filterUpgrades=function(t){for(var e=[],i=0,n=t.length;i<n;i++)~_5(this.transports,t[i])&&e.push(t[i]);return e};ay.exports=x5;ay.exports.parser=yo;var C5=ay.exports,sT={exports:{}},M5=k5;function k5(t,e){var i=[];e=e||0;for(var n=e||0;n<t.length;n++)i[n-e]=t[n];return i}var oT=T5;function T5(t,e,i){return t.on(e,i),{destroy:function(){t.removeListener(e,i)}}}var K1=[].slice,aT=function(t,e){if(typeof e=="string"&&(e=t[e]),typeof e!="function")throw new Error("bind() requires a function");var i=K1.call(arguments,2);return function(){return e.apply(t,i.concat(K1.call(arguments)))}};(function(t,e){var i=Qf,n=mo,r=M5,s=oT,a=aT,l=Hf("socket.io-client:socket"),h=Ba,p=Hk;t.exports=y;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},m=n.prototype.emit;function y(v,S,M){this.io=v,this.nsp=S,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},M&&M.query&&(this.query=M.query),this.io.autoConnect&&this.open()}n(y.prototype),y.prototype.subEvents=function(){if(!this.subs){var v=this.io;this.subs=[s(v,"open",a(this,"onopen")),s(v,"packet",a(this,"onpacket")),s(v,"close",a(this,"onclose"))]}},y.prototype.open=y.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},y.prototype.send=function(){var v=r(arguments);return v.unshift("message"),this.emit.apply(this,v),this},y.prototype.emit=function(v){if(d.hasOwnProperty(v))return m.apply(this,arguments),this;var S=r(arguments),M={type:(this.flags.binary!==void 0?this.flags.binary:p(S))?i.BINARY_EVENT:i.EVENT,data:S};return M.options={},M.options.compress=!this.flags||this.flags.compress!==!1,typeof S[S.length-1]=="function"&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=S.pop(),M.id=this.ids++),this.connected?this.packet(M):this.sendBuffer.push(M),this.flags={},this},y.prototype.packet=function(v){v.nsp=this.nsp,this.io.packet(v)},y.prototype.onopen=function(){if(l("transport is open - connecting"),this.nsp!=="/")if(this.query){var v=typeof this.query=="object"?h.encode(this.query):this.query;l("sending connect packet with query %s",v),this.packet({type:i.CONNECT,query:v})}else this.packet({type:i.CONNECT})},y.prototype.onclose=function(v){l("close (%s)",v),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",v)},y.prototype.onpacket=function(v){var S=v.nsp===this.nsp,M=v.type===i.ERROR&&v.nsp==="/";if(!(!S&&!M))switch(v.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(v);break;case i.BINARY_EVENT:this.onevent(v);break;case i.ACK:this.onack(v);break;case i.BINARY_ACK:this.onack(v);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",v.data);break}},y.prototype.onevent=function(v){var S=v.data||[];l("emitting event %j",S),v.id!=null&&(l("attaching ack callback to event"),S.push(this.ack(v.id))),this.connected?m.apply(this,S):this.receiveBuffer.push(S)},y.prototype.ack=function(v){var S=this,M=!1;return function(){if(!M){M=!0;var b=r(arguments);l("sending ack %j",b),S.packet({type:p(b)?i.BINARY_ACK:i.ACK,id:v,data:b})}}},y.prototype.onack=function(v){var S=this.acks[v.id];typeof S=="function"?(l("calling ack %s with %j",v.id,v.data),S.apply(this,v.data),delete this.acks[v.id]):l("bad ack %s",v.id)},y.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emit("connect")},y.prototype.emitBuffered=function(){var v;for(v=0;v<this.receiveBuffer.length;v++)m.apply(this,this.receiveBuffer[v]);for(this.receiveBuffer=[],v=0;v<this.sendBuffer.length;v++)this.packet(this.sendBuffer[v]);this.sendBuffer=[]},y.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},y.prototype.destroy=function(){if(this.subs){for(var v=0;v<this.subs.length;v++)this.subs[v].destroy();this.subs=null}this.io.destroy(this)},y.prototype.close=y.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},y.prototype.compress=function(v){return this.flags.compress=v,this},y.prototype.binary=function(v){return this.flags.binary=v,this}})(sT);var lT=sT.exports,E5=Pa;function Pa(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Pa.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+i:t-i}return Math.min(t,this.max)|0};Pa.prototype.reset=function(){this.attempts=0};Pa.prototype.setMin=function(t){this.ms=t};Pa.prototype.setMax=function(t){this.max=t};Pa.prototype.setJitter=function(t){this.jitter=t};var A5=C5,R5=lT,L5=mo,O5=Qf,ss=oT,Yo=aT,_i=Hf("socket.io-client:manager"),uT=nT,I5=E5,hT=Object.prototype.hasOwnProperty,z1=ct;function ct(t,e){if(!(this instanceof ct))return new ct(t,e);t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new I5({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var i=e.parser||O5;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this.autoConnect=e.autoConnect!==!1,this.autoConnect&&this.open()}ct.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)hT.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)};ct.prototype.updateSocketIds=function(){for(var t in this.nsps)hT.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))};ct.prototype.generateId=function(t){return(t==="/"?"":t+"#")+this.engine.id};L5(ct.prototype);ct.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection};ct.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts};ct.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay};ct.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor};ct.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax};ct.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout};ct.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()};ct.prototype.open=ct.prototype.connect=function(t,e){if(_i("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;_i("opening %s",this.uri),this.engine=A5(this.uri,this.opts);var i=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var r=ss(i,"open",function(){n.onopen(),t&&t()}),s=ss(i,"error",function(h){if(_i("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",h),t){var p=new Error("Connection error");p.data=h,t(p)}else n.maybeReconnectOnOpen()});if(this._timeout!==!1){var a=this._timeout;_i("connect attempt will timeout after %d",a),a===0&&r.destroy();var l=setTimeout(function(){_i("connect attempt timed out after %d",a),r.destroy(),i.close(),i.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(r),this.subs.push(s),this};ct.prototype.onopen=function(){_i("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(ss(t,"data",Yo(this,"ondata"))),this.subs.push(ss(t,"ping",Yo(this,"onping"))),this.subs.push(ss(t,"pong",Yo(this,"onpong"))),this.subs.push(ss(t,"error",Yo(this,"onerror"))),this.subs.push(ss(t,"close",Yo(this,"onclose"))),this.subs.push(ss(this.decoder,"decoded",Yo(this,"ondecoded")))};ct.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")};ct.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};ct.prototype.ondata=function(t){this.decoder.add(t)};ct.prototype.ondecoded=function(t){this.emit("packet",t)};ct.prototype.onerror=function(t){_i("error",t),this.emitAll("error",t)};ct.prototype.socket=function(t,e){var i=this.nsps[t];if(!i){i=new R5(this,t,e),this.nsps[t]=i;var n=this;i.on("connecting",r),i.on("connect",function(){i.id=n.generateId(t)}),this.autoConnect&&r()}function r(){~uT(n.connecting,i)||n.connecting.push(i)}return i};ct.prototype.destroy=function(t){var e=uT(this.connecting,t);~e&&this.connecting.splice(e,1),!this.connecting.length&&this.close()};ct.prototype.packet=function(t){_i("writing packet %j",t);var e=this;t.query&&t.type===0&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(i){for(var n=0;n<i.length;n++)e.engine.write(i[n],t.options);e.encoding=!1,e.processPacketQueue()}))};ct.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}};ct.prototype.cleanup=function(){_i("cleanup");for(var t=this.subs.length,e=0;e<t;e++){var i=this.subs.shift();i.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()};ct.prototype.close=ct.prototype.disconnect=function(){_i("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()};ct.prototype.onclose=function(t){_i("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()};ct.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)_i("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();_i("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var i=setTimeout(function(){t.skipReconnect||(_i("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),!t.skipReconnect&&t.open(function(n){n?(_i("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",n.data)):(_i("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(i)}})}};ct.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)};(function(t,e){var i=fj,n=Qf,r=z1,s=Hf("socket.io-client");t.exports=e=l;var a=e.managers={};function l(h,p){typeof h=="object"&&(p=h,h=void 0),p=p||{};var d=i(h),m=d.source,y=d.id,v=d.path,S=a[y]&&v in a[y].nsps,M=p.forceNew||p["force new connection"]||p.multiplex===!1||S,b;return M?(s("ignoring socket cache for %s",m),b=r(m,p)):(a[y]||(s("new io instance for %s",m),a[y]=r(m,p)),b=a[y]),d.query&&!p.query&&(p.query=d.query),b.socket(d.path,p)}e.protocol=n.protocol,e.connect=l,e.Manager=z1,e.Socket=lT})(Dm,Dm.exports);var N5=Dm.exports;const D5=ln(N5);var Hm={exports:{}},ng,H1;function B5(){if(H1)return ng;H1=1;var t=1e3,e=t*60,i=e*60,n=i*24,r=n*7,s=n*365.25;ng=function(d,m){m=m||{};var y=typeof d;if(y==="string"&&d.length>0)return a(d);if(y==="number"&&isFinite(d))return m.long?h(d):l(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function a(d){if(d=String(d),!(d.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(m){var y=parseFloat(m[1]),v=(m[2]||"ms").toLowerCase();switch(v){case"years":case"year":case"yrs":case"yr":case"y":return y*s;case"weeks":case"week":case"w":return y*r;case"days":case"day":case"d":return y*n;case"hours":case"hour":case"hrs":case"hr":case"h":return y*i;case"minutes":case"minute":case"mins":case"min":case"m":return y*e;case"seconds":case"second":case"secs":case"sec":case"s":return y*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function l(d){var m=Math.abs(d);return m>=n?Math.round(d/n)+"d":m>=i?Math.round(d/i)+"h":m>=e?Math.round(d/e)+"m":m>=t?Math.round(d/t)+"s":d+"ms"}function h(d){var m=Math.abs(d);return m>=n?p(d,m,n,"day"):m>=i?p(d,m,i,"hour"):m>=e?p(d,m,e,"minute"):m>=t?p(d,m,t,"second"):d+" ms"}function p(d,m,y,v){var S=m>=y*1.5;return Math.round(d/y)+" "+v+(S?"s":"")}return ng}function U5(t){i.debug=i,i.default=i,i.coerce=h,i.disable=s,i.enable=r,i.enabled=a,i.humanize=B5(),i.destroy=p,Object.keys(t).forEach(d=>{i[d]=t[d]}),i.names=[],i.skips=[],i.formatters={};function e(d){let m=0;for(let y=0;y<d.length;y++)m=(m<<5)-m+d.charCodeAt(y),m|=0;return i.colors[Math.abs(m)%i.colors.length]}i.selectColor=e;function i(d){let m,y=null,v,S;function M(...b){if(!M.enabled)return;const w=M,E=Number(new Date),B=E-(m||E);w.diff=B,w.prev=m,w.curr=E,m=E,b[0]=i.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let L=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(O,F)=>{if(O==="%%")return"%";L++;const U=i.formatters[F];if(typeof U=="function"){const V=b[L];O=U.call(w,V),b.splice(L,1),L--}return O}),i.formatArgs.call(w,b),(w.log||i.log).apply(w,b)}return M.namespace=d,M.useColors=i.useColors(),M.color=i.selectColor(d),M.extend=n,M.destroy=i.destroy,Object.defineProperty(M,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(v!==i.namespaces&&(v=i.namespaces,S=i.enabled(d)),S),set:b=>{y=b}}),typeof i.init=="function"&&i.init(M),M}function n(d,m){const y=i(this.namespace+(typeof m>"u"?":":m)+d);return y.log=this.log,y}function r(d){i.save(d),i.namespaces=d,i.names=[],i.skips=[];let m;const y=(typeof d=="string"?d:"").split(/[\s,]+/),v=y.length;for(m=0;m<v;m++)y[m]&&(d=y[m].replace(/\*/g,".*?"),d[0]==="-"?i.skips.push(new RegExp("^"+d.slice(1)+"$")):i.names.push(new RegExp("^"+d+"$")))}function s(){const d=[...i.names.map(l),...i.skips.map(l).map(m=>"-"+m)].join(",");return i.enable(""),d}function a(d){if(d[d.length-1]==="*")return!0;let m,y;for(m=0,y=i.skips.length;m<y;m++)if(i.skips[m].test(d))return!1;for(m=0,y=i.names.length;m<y;m++)if(i.names[m].test(d))return!0;return!1}function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function h(d){return d instanceof Error?d.stack||d.message:d}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var J5=U5;(function(t,e){e.formatArgs=n,e.save=r,e.load=s,e.useColors=i,e.storage=a(),e.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;h.splice(1,0,p,"color: inherit");let d=0,m=0;h[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(d++,y==="%c"&&(m=d))}),h.splice(m,0,p)}e.log=console.debug||console.log||(()=>{});function r(h){try{h?e.storage.setItem("debug",h):e.storage.removeItem("debug")}catch{}}function s(){let h;try{h=e.storage.getItem("debug")}catch{}return!h&&typeof process<"u"&&"env"in process&&(h={}.DEBUG),h}function a(){try{return localStorage}catch{}}t.exports=J5(e);const{formatters:l}=t.exports;l.j=function(h){try{return JSON.stringify(h)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}})(Hm,Hm.exports);var P5=Hm.exports,F5=function(){if(typeof globalThis>"u")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null},Qm={exports:{}},Ym={exports:{}},Fa={},Xf={};Xf.byteLength=G5;Xf.toByteArray=K5;Xf.fromByteArray=Q5;var ar=[],pn=[],j5=typeof Uint8Array<"u"?Uint8Array:Array,rg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var $o=0,W5=rg.length;$o<W5;++$o)ar[$o]=rg[$o],pn[rg.charCodeAt($o)]=$o;pn["-".charCodeAt(0)]=62;pn["_".charCodeAt(0)]=63;function cT(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");i===-1&&(i=e);var n=i===e?0:4-i%4;return[i,n]}function G5(t){var e=cT(t),i=e[0],n=e[1];return(i+n)*3/4-n}function V5(t,e,i){return(e+i)*3/4-i}function K5(t){var e,i=cT(t),n=i[0],r=i[1],s=new j5(V5(t,n,r)),a=0,l=r>0?n-4:n,h;for(h=0;h<l;h+=4)e=pn[t.charCodeAt(h)]<<18|pn[t.charCodeAt(h+1)]<<12|pn[t.charCodeAt(h+2)]<<6|pn[t.charCodeAt(h+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return r===2&&(e=pn[t.charCodeAt(h)]<<2|pn[t.charCodeAt(h+1)]>>4,s[a++]=e&255),r===1&&(e=pn[t.charCodeAt(h)]<<10|pn[t.charCodeAt(h+1)]<<4|pn[t.charCodeAt(h+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function z5(t){return ar[t>>18&63]+ar[t>>12&63]+ar[t>>6&63]+ar[t&63]}function H5(t,e,i){for(var n,r=[],s=e;s<i;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),r.push(z5(n));return r.join("")}function Q5(t){for(var e,i=t.length,n=i%3,r=[],s=16383,a=0,l=i-n;a<l;a+=s)r.push(H5(t,a,a+s>l?l:a+s));return n===1?(e=t[i-1],r.push(ar[e>>2]+ar[e<<4&63]+"==")):n===2&&(e=(t[i-2]<<8)+t[i-1],r.push(ar[e>>10]+ar[e>>4&63]+ar[e<<2&63]+"=")),r.join("")}var my={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */my.read=function(t,e,i,n,r){var s,a,l=r*8-n-1,h=(1<<l)-1,p=h>>1,d=-7,m=i?r-1:0,y=i?-1:1,v=t[e+m];for(m+=y,s=v&(1<<-d)-1,v>>=-d,d+=l;d>0;s=s*256+t[e+m],m+=y,d-=8);for(a=s&(1<<-d)-1,s>>=-d,d+=n;d>0;a=a*256+t[e+m],m+=y,d-=8);if(s===0)s=1-p;else{if(s===h)return a?NaN:(v?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-p}return(v?-1:1)*a*Math.pow(2,s-n)};my.write=function(t,e,i,n,r,s){var a,l,h,p=s*8-r-1,d=(1<<p)-1,m=d>>1,y=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:s-1,S=n?1:-1,M=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+m>=1?e+=y/h:e+=y*Math.pow(2,1-m),e*h>=2&&(a++,h/=2),a+m>=d?(l=0,a=d):a+m>=1?(l=(e*h-1)*Math.pow(2,r),a=a+m):(l=e*Math.pow(2,m-1)*Math.pow(2,r),a=0));r>=8;t[i+v]=l&255,v+=S,l/=256,r-=8);for(a=a<<r|l,p+=r;p>0;t[i+v]=a&255,v+=S,a/=256,p-=8);t[i+v-S]|=M*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Xf,i=my,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=E,t.INSPECT_MAX_BYTES=50;const r=2147483647;t.kMaxLength=r,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const J=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(J,k),J.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(J){if(J>r)throw new RangeError('The value "'+J+'" is invalid for option "size"');const k=new Uint8Array(J);return Object.setPrototypeOf(k,l.prototype),k}function l(J,k,T){if(typeof J=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(J)}return h(J,k,T)}l.poolSize=8192;function h(J,k,T){if(typeof J=="string")return y(J,k);if(ArrayBuffer.isView(J))return S(J);if(J==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof J);if(je(J,ArrayBuffer)||J&&je(J.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(je(J,SharedArrayBuffer)||J&&je(J.buffer,SharedArrayBuffer)))return M(J,k,T);if(typeof J=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const G=J.valueOf&&J.valueOf();if(G!=null&&G!==J)return l.from(G,k,T);const ie=b(J);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof J[Symbol.toPrimitive]=="function")return l.from(J[Symbol.toPrimitive]("string"),k,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof J)}l.from=function(J,k,T){return h(J,k,T)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function p(J){if(typeof J!="number")throw new TypeError('"size" argument must be of type number');if(J<0)throw new RangeError('The value "'+J+'" is invalid for option "size"')}function d(J,k,T){return p(J),J<=0?a(J):k!==void 0?typeof T=="string"?a(J).fill(k,T):a(J).fill(k):a(J)}l.alloc=function(J,k,T){return d(J,k,T)};function m(J){return p(J),a(J<0?0:w(J)|0)}l.allocUnsafe=function(J){return m(J)},l.allocUnsafeSlow=function(J){return m(J)};function y(J,k){if((typeof k!="string"||k==="")&&(k="utf8"),!l.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const T=B(J,k)|0;let G=a(T);const ie=G.write(J,k);return ie!==T&&(G=G.slice(0,ie)),G}function v(J){const k=J.length<0?0:w(J.length)|0,T=a(k);for(let G=0;G<k;G+=1)T[G]=J[G]&255;return T}function S(J){if(je(J,Uint8Array)){const k=new Uint8Array(J);return M(k.buffer,k.byteOffset,k.byteLength)}return v(J)}function M(J,k,T){if(k<0||J.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(J.byteLength<k+(T||0))throw new RangeError('"length" is outside of buffer bounds');let G;return k===void 0&&T===void 0?G=new Uint8Array(J):T===void 0?G=new Uint8Array(J,k):G=new Uint8Array(J,k,T),Object.setPrototypeOf(G,l.prototype),G}function b(J){if(l.isBuffer(J)){const k=w(J.length)|0,T=a(k);return T.length===0||J.copy(T,0,0,k),T}if(J.length!==void 0)return typeof J.length!="number"||pe(J.length)?a(0):v(J);if(J.type==="Buffer"&&Array.isArray(J.data))return v(J.data)}function w(J){if(J>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return J|0}function E(J){return+J!=J&&(J=0),l.alloc(+J)}l.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==l.prototype},l.compare=function(k,T){if(je(k,Uint8Array)&&(k=l.from(k,k.offset,k.byteLength)),je(T,Uint8Array)&&(T=l.from(T,T.offset,T.byteLength)),!l.isBuffer(k)||!l.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===T)return 0;let G=k.length,ie=T.length;for(let ae=0,fe=Math.min(G,ie);ae<fe;++ae)if(k[ae]!==T[ae]){G=k[ae],ie=T[ae];break}return G<ie?-1:ie<G?1:0},l.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(k,T){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return l.alloc(0);let G;if(T===void 0)for(T=0,G=0;G<k.length;++G)T+=k[G].length;const ie=l.allocUnsafe(T);let ae=0;for(G=0;G<k.length;++G){let fe=k[G];if(je(fe,Uint8Array))ae+fe.length>ie.length?(l.isBuffer(fe)||(fe=l.from(fe)),fe.copy(ie,ae)):Uint8Array.prototype.set.call(ie,fe,ae);else if(l.isBuffer(fe))fe.copy(ie,ae);else throw new TypeError('"list" argument must be an Array of Buffers');ae+=fe.length}return ie};function B(J,k){if(l.isBuffer(J))return J.length;if(ArrayBuffer.isView(J)||je(J,ArrayBuffer))return J.byteLength;if(typeof J!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof J);const T=J.length,G=arguments.length>2&&arguments[2]===!0;if(!G&&T===0)return 0;let ie=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":return He(J).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T*2;case"hex":return T>>>1;case"base64":return pi(J).length;default:if(ie)return G?-1:He(J).length;k=(""+k).toLowerCase(),ie=!0}}l.byteLength=B;function L(J,k,T){let G=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((T===void 0||T>this.length)&&(T=this.length),T<=0)||(T>>>=0,k>>>=0,T<=k))return"";for(J||(J="utf8");;)switch(J){case"hex":return ne(this,k,T);case"utf8":case"utf-8":return le(this,k,T);case"ascii":return W(this,k,T);case"latin1":case"binary":return $(this,k,T);case"base64":return re(this,k,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,k,T);default:if(G)throw new TypeError("Unknown encoding: "+J);J=(J+"").toLowerCase(),G=!0}}l.prototype._isBuffer=!0;function I(J,k,T){const G=J[k];J[k]=J[T],J[T]=G}l.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<k;T+=2)I(this,T,T+1);return this},l.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<k;T+=4)I(this,T,T+3),I(this,T+1,T+2);return this},l.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<k;T+=8)I(this,T,T+7),I(this,T+1,T+6),I(this,T+2,T+5),I(this,T+3,T+4);return this},l.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?le(this,0,k):L.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(k){if(!l.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:l.compare(this,k)===0},l.prototype.inspect=function(){let k="";const T=t.INSPECT_MAX_BYTES;return k=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(k+=" ... "),"<Buffer "+k+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(k,T,G,ie,ae){if(je(k,Uint8Array)&&(k=l.from(k,k.offset,k.byteLength)),!l.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(T===void 0&&(T=0),G===void 0&&(G=k?k.length:0),ie===void 0&&(ie=0),ae===void 0&&(ae=this.length),T<0||G>k.length||ie<0||ae>this.length)throw new RangeError("out of range index");if(ie>=ae&&T>=G)return 0;if(ie>=ae)return-1;if(T>=G)return 1;if(T>>>=0,G>>>=0,ie>>>=0,ae>>>=0,this===k)return 0;let fe=ae-ie,Be=G-T;const vt=Math.min(fe,Be),gt=this.slice(ie,ae),it=k.slice(T,G);for(let ot=0;ot<vt;++ot)if(gt[ot]!==it[ot]){fe=gt[ot],Be=it[ot];break}return fe<Be?-1:Be<fe?1:0};function O(J,k,T,G,ie){if(J.length===0)return-1;if(typeof T=="string"?(G=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),T=+T,pe(T)&&(T=ie?0:J.length-1),T<0&&(T=J.length+T),T>=J.length){if(ie)return-1;T=J.length-1}else if(T<0)if(ie)T=0;else return-1;if(typeof k=="string"&&(k=l.from(k,G)),l.isBuffer(k))return k.length===0?-1:F(J,k,T,G,ie);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(J,k,T):Uint8Array.prototype.lastIndexOf.call(J,k,T):F(J,[k],T,G,ie);throw new TypeError("val must be string, number or Buffer")}function F(J,k,T,G,ie){let ae=1,fe=J.length,Be=k.length;if(G!==void 0&&(G=String(G).toLowerCase(),G==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(J.length<2||k.length<2)return-1;ae=2,fe/=2,Be/=2,T/=2}function vt(it,ot){return ae===1?it[ot]:it.readUInt16BE(ot*ae)}let gt;if(ie){let it=-1;for(gt=T;gt<fe;gt++)if(vt(J,gt)===vt(k,it===-1?0:gt-it)){if(it===-1&&(it=gt),gt-it+1===Be)return it*ae}else it!==-1&&(gt-=gt-it),it=-1}else for(T+Be>fe&&(T=fe-Be),gt=T;gt>=0;gt--){let it=!0;for(let ot=0;ot<Be;ot++)if(vt(J,gt+ot)!==vt(k,ot)){it=!1;break}if(it)return gt}return-1}l.prototype.includes=function(k,T,G){return this.indexOf(k,T,G)!==-1},l.prototype.indexOf=function(k,T,G){return O(this,k,T,G,!0)},l.prototype.lastIndexOf=function(k,T,G){return O(this,k,T,G,!1)};function U(J,k,T,G){T=Number(T)||0;const ie=J.length-T;G?(G=Number(G),G>ie&&(G=ie)):G=ie;const ae=k.length;G>ae/2&&(G=ae/2);let fe;for(fe=0;fe<G;++fe){const Be=parseInt(k.substr(fe*2,2),16);if(pe(Be))return fe;J[T+fe]=Be}return fe}function V(J,k,T,G){return Ji(He(k,J.length-T),J,T,G)}function A(J,k,T,G){return Ji(kt(k),J,T,G)}function Q(J,k,T,G){return Ji(pi(k),J,T,G)}function H(J,k,T,G){return Ji(Qe(k,J.length-T),J,T,G)}l.prototype.write=function(k,T,G,ie){if(T===void 0)ie="utf8",G=this.length,T=0;else if(G===void 0&&typeof T=="string")ie=T,G=this.length,T=0;else if(isFinite(T))T=T>>>0,isFinite(G)?(G=G>>>0,ie===void 0&&(ie="utf8")):(ie=G,G=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ae=this.length-T;if((G===void 0||G>ae)&&(G=ae),k.length>0&&(G<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let fe=!1;for(;;)switch(ie){case"hex":return U(this,k,T,G);case"utf8":case"utf-8":return V(this,k,T,G);case"ascii":case"latin1":case"binary":return A(this,k,T,G);case"base64":return Q(this,k,T,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,k,T,G);default:if(fe)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),fe=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function re(J,k,T){return k===0&&T===J.length?e.fromByteArray(J):e.fromByteArray(J.slice(k,T))}function le(J,k,T){T=Math.min(J.length,T);const G=[];let ie=k;for(;ie<T;){const ae=J[ie];let fe=null,Be=ae>239?4:ae>223?3:ae>191?2:1;if(ie+Be<=T){let vt,gt,it,ot;switch(Be){case 1:ae<128&&(fe=ae);break;case 2:vt=J[ie+1],(vt&192)===128&&(ot=(ae&31)<<6|vt&63,ot>127&&(fe=ot));break;case 3:vt=J[ie+1],gt=J[ie+2],(vt&192)===128&&(gt&192)===128&&(ot=(ae&15)<<12|(vt&63)<<6|gt&63,ot>2047&&(ot<55296||ot>57343)&&(fe=ot));break;case 4:vt=J[ie+1],gt=J[ie+2],it=J[ie+3],(vt&192)===128&&(gt&192)===128&&(it&192)===128&&(ot=(ae&15)<<18|(vt&63)<<12|(gt&63)<<6|it&63,ot>65535&&ot<1114112&&(fe=ot))}}fe===null?(fe=65533,Be=1):fe>65535&&(fe-=65536,G.push(fe>>>10&1023|55296),fe=56320|fe&1023),G.push(fe),ie+=Be}return Z(G)}const q=4096;function Z(J){const k=J.length;if(k<=q)return String.fromCharCode.apply(String,J);let T="",G=0;for(;G<k;)T+=String.fromCharCode.apply(String,J.slice(G,G+=q));return T}function W(J,k,T){let G="";T=Math.min(J.length,T);for(let ie=k;ie<T;++ie)G+=String.fromCharCode(J[ie]&127);return G}function $(J,k,T){let G="";T=Math.min(J.length,T);for(let ie=k;ie<T;++ie)G+=String.fromCharCode(J[ie]);return G}function ne(J,k,T){const G=J.length;(!k||k<0)&&(k=0),(!T||T<0||T>G)&&(T=G);let ie="";for(let ae=k;ae<T;++ae)ie+=Ie[J[ae]];return ie}function we(J,k,T){const G=J.slice(k,T);let ie="";for(let ae=0;ae<G.length-1;ae+=2)ie+=String.fromCharCode(G[ae]+G[ae+1]*256);return ie}l.prototype.slice=function(k,T){const G=this.length;k=~~k,T=T===void 0?G:~~T,k<0?(k+=G,k<0&&(k=0)):k>G&&(k=G),T<0?(T+=G,T<0&&(T=0)):T>G&&(T=G),T<k&&(T=k);const ie=this.subarray(k,T);return Object.setPrototypeOf(ie,l.prototype),ie};function ye(J,k,T){if(J%1!==0||J<0)throw new RangeError("offset is not uint");if(J+k>T)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(k,T,G){k=k>>>0,T=T>>>0,G||ye(k,T,this.length);let ie=this[k],ae=1,fe=0;for(;++fe<T&&(ae*=256);)ie+=this[k+fe]*ae;return ie},l.prototype.readUintBE=l.prototype.readUIntBE=function(k,T,G){k=k>>>0,T=T>>>0,G||ye(k,T,this.length);let ie=this[k+--T],ae=1;for(;T>0&&(ae*=256);)ie+=this[k+--T]*ae;return ie},l.prototype.readUint8=l.prototype.readUInt8=function(k,T){return k=k>>>0,T||ye(k,1,this.length),this[k]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(k,T){return k=k>>>0,T||ye(k,2,this.length),this[k]|this[k+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(k,T){return k=k>>>0,T||ye(k,2,this.length),this[k]<<8|this[k+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(k,T){return k=k>>>0,T||ye(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(k,T){return k=k>>>0,T||ye(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},l.prototype.readBigUInt64LE=Bt(function(k){k=k>>>0,ge(k,"offset");const T=this[k],G=this[k+7];(T===void 0||G===void 0)&&be(k,this.length-8);const ie=T+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,ae=this[++k]+this[++k]*2**8+this[++k]*2**16+G*2**24;return BigInt(ie)+(BigInt(ae)<<BigInt(32))}),l.prototype.readBigUInt64BE=Bt(function(k){k=k>>>0,ge(k,"offset");const T=this[k],G=this[k+7];(T===void 0||G===void 0)&&be(k,this.length-8);const ie=T*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],ae=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+G;return(BigInt(ie)<<BigInt(32))+BigInt(ae)}),l.prototype.readIntLE=function(k,T,G){k=k>>>0,T=T>>>0,G||ye(k,T,this.length);let ie=this[k],ae=1,fe=0;for(;++fe<T&&(ae*=256);)ie+=this[k+fe]*ae;return ae*=128,ie>=ae&&(ie-=Math.pow(2,8*T)),ie},l.prototype.readIntBE=function(k,T,G){k=k>>>0,T=T>>>0,G||ye(k,T,this.length);let ie=T,ae=1,fe=this[k+--ie];for(;ie>0&&(ae*=256);)fe+=this[k+--ie]*ae;return ae*=128,fe>=ae&&(fe-=Math.pow(2,8*T)),fe},l.prototype.readInt8=function(k,T){return k=k>>>0,T||ye(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},l.prototype.readInt16LE=function(k,T){k=k>>>0,T||ye(k,2,this.length);const G=this[k]|this[k+1]<<8;return G&32768?G|4294901760:G},l.prototype.readInt16BE=function(k,T){k=k>>>0,T||ye(k,2,this.length);const G=this[k+1]|this[k]<<8;return G&32768?G|4294901760:G},l.prototype.readInt32LE=function(k,T){return k=k>>>0,T||ye(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},l.prototype.readInt32BE=function(k,T){return k=k>>>0,T||ye(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},l.prototype.readBigInt64LE=Bt(function(k){k=k>>>0,ge(k,"offset");const T=this[k],G=this[k+7];(T===void 0||G===void 0)&&be(k,this.length-8);const ie=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(G<<24);return(BigInt(ie)<<BigInt(32))+BigInt(T+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),l.prototype.readBigInt64BE=Bt(function(k){k=k>>>0,ge(k,"offset");const T=this[k],G=this[k+7];(T===void 0||G===void 0)&&be(k,this.length-8);const ie=(T<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(ie)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+G)}),l.prototype.readFloatLE=function(k,T){return k=k>>>0,T||ye(k,4,this.length),i.read(this,k,!0,23,4)},l.prototype.readFloatBE=function(k,T){return k=k>>>0,T||ye(k,4,this.length),i.read(this,k,!1,23,4)},l.prototype.readDoubleLE=function(k,T){return k=k>>>0,T||ye(k,8,this.length),i.read(this,k,!0,52,8)},l.prototype.readDoubleBE=function(k,T){return k=k>>>0,T||ye(k,8,this.length),i.read(this,k,!1,52,8)};function xe(J,k,T,G,ie,ae){if(!l.isBuffer(J))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>ie||k<ae)throw new RangeError('"value" argument is out of bounds');if(T+G>J.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(k,T,G,ie){if(k=+k,T=T>>>0,G=G>>>0,!ie){const Be=Math.pow(2,8*G)-1;xe(this,k,T,G,Be,0)}let ae=1,fe=0;for(this[T]=k&255;++fe<G&&(ae*=256);)this[T+fe]=k/ae&255;return T+G},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(k,T,G,ie){if(k=+k,T=T>>>0,G=G>>>0,!ie){const Be=Math.pow(2,8*G)-1;xe(this,k,T,G,Be,0)}let ae=G-1,fe=1;for(this[T+ae]=k&255;--ae>=0&&(fe*=256);)this[T+ae]=k/fe&255;return T+G},l.prototype.writeUint8=l.prototype.writeUInt8=function(k,T,G){return k=+k,T=T>>>0,G||xe(this,k,T,1,255,0),this[T]=k&255,T+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(k,T,G){return k=+k,T=T>>>0,G||xe(this,k,T,2,65535,0),this[T]=k&255,this[T+1]=k>>>8,T+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(k,T,G){return k=+k,T=T>>>0,G||xe(this,k,T,2,65535,0),this[T]=k>>>8,this[T+1]=k&255,T+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(k,T,G){return k=+k,T=T>>>0,G||xe(this,k,T,4,4294967295,0),this[T+3]=k>>>24,this[T+2]=k>>>16,this[T+1]=k>>>8,this[T]=k&255,T+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(k,T,G){return k=+k,T=T>>>0,G||xe(this,k,T,4,4294967295,0),this[T]=k>>>24,this[T+1]=k>>>16,this[T+2]=k>>>8,this[T+3]=k&255,T+4};function Se(J,k,T,G,ie){K(k,G,ie,J,T,7);let ae=Number(k&BigInt(4294967295));J[T++]=ae,ae=ae>>8,J[T++]=ae,ae=ae>>8,J[T++]=ae,ae=ae>>8,J[T++]=ae;let fe=Number(k>>BigInt(32)&BigInt(4294967295));return J[T++]=fe,fe=fe>>8,J[T++]=fe,fe=fe>>8,J[T++]=fe,fe=fe>>8,J[T++]=fe,T}function Re(J,k,T,G,ie){K(k,G,ie,J,T,7);let ae=Number(k&BigInt(4294967295));J[T+7]=ae,ae=ae>>8,J[T+6]=ae,ae=ae>>8,J[T+5]=ae,ae=ae>>8,J[T+4]=ae;let fe=Number(k>>BigInt(32)&BigInt(4294967295));return J[T+3]=fe,fe=fe>>8,J[T+2]=fe,fe=fe>>8,J[T+1]=fe,fe=fe>>8,J[T]=fe,T+8}l.prototype.writeBigUInt64LE=Bt(function(k,T=0){return Se(this,k,T,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Bt(function(k,T=0){return Re(this,k,T,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(k,T,G,ie){if(k=+k,T=T>>>0,!ie){const vt=Math.pow(2,8*G-1);xe(this,k,T,G,vt-1,-vt)}let ae=0,fe=1,Be=0;for(this[T]=k&255;++ae<G&&(fe*=256);)k<0&&Be===0&&this[T+ae-1]!==0&&(Be=1),this[T+ae]=(k/fe>>0)-Be&255;return T+G},l.prototype.writeIntBE=function(k,T,G,ie){if(k=+k,T=T>>>0,!ie){const vt=Math.pow(2,8*G-1);xe(this,k,T,G,vt-1,-vt)}let ae=G-1,fe=1,Be=0;for(this[T+ae]=k&255;--ae>=0&&(fe*=256);)k<0&&Be===0&&this[T+ae+1]!==0&&(Be=1),this[T+ae]=(k/fe>>0)-Be&255;return T+G},l.prototype.writeInt8=function(k,T,G){return k=+k,T=T>>>0,G||xe(this,k,T,1,127,-128),k<0&&(k=255+k+1),this[T]=k&255,T+1},l.prototype.writeInt16LE=function(k,T,G){return k=+k,T=T>>>0,G||xe(this,k,T,2,32767,-32768),this[T]=k&255,this[T+1]=k>>>8,T+2},l.prototype.writeInt16BE=function(k,T,G){return k=+k,T=T>>>0,G||xe(this,k,T,2,32767,-32768),this[T]=k>>>8,this[T+1]=k&255,T+2},l.prototype.writeInt32LE=function(k,T,G){return k=+k,T=T>>>0,G||xe(this,k,T,4,2147483647,-2147483648),this[T]=k&255,this[T+1]=k>>>8,this[T+2]=k>>>16,this[T+3]=k>>>24,T+4},l.prototype.writeInt32BE=function(k,T,G){return k=+k,T=T>>>0,G||xe(this,k,T,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[T]=k>>>24,this[T+1]=k>>>16,this[T+2]=k>>>8,this[T+3]=k&255,T+4},l.prototype.writeBigInt64LE=Bt(function(k,T=0){return Se(this,k,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Bt(function(k,T=0){return Re(this,k,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ze(J,k,T,G,ie,ae){if(T+G>J.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function se(J,k,T,G,ie){return k=+k,T=T>>>0,ie||Ze(J,k,T,4),i.write(J,k,T,G,23,4),T+4}l.prototype.writeFloatLE=function(k,T,G){return se(this,k,T,!0,G)},l.prototype.writeFloatBE=function(k,T,G){return se(this,k,T,!1,G)};function oe(J,k,T,G,ie){return k=+k,T=T>>>0,ie||Ze(J,k,T,8),i.write(J,k,T,G,52,8),T+8}l.prototype.writeDoubleLE=function(k,T,G){return oe(this,k,T,!0,G)},l.prototype.writeDoubleBE=function(k,T,G){return oe(this,k,T,!1,G)},l.prototype.copy=function(k,T,G,ie){if(!l.isBuffer(k))throw new TypeError("argument should be a Buffer");if(G||(G=0),!ie&&ie!==0&&(ie=this.length),T>=k.length&&(T=k.length),T||(T=0),ie>0&&ie<G&&(ie=G),ie===G||k.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),k.length-T<ie-G&&(ie=k.length-T+G);const ae=ie-G;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(T,G,ie):Uint8Array.prototype.set.call(k,this.subarray(G,ie),T),ae},l.prototype.fill=function(k,T,G,ie){if(typeof k=="string"){if(typeof T=="string"?(ie=T,T=0,G=this.length):typeof G=="string"&&(ie=G,G=this.length),ie!==void 0&&typeof ie!="string")throw new TypeError("encoding must be a string");if(typeof ie=="string"&&!l.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(k.length===1){const fe=k.charCodeAt(0);(ie==="utf8"&&fe<128||ie==="latin1")&&(k=fe)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(T<0||this.length<T||this.length<G)throw new RangeError("Out of range index");if(G<=T)return this;T=T>>>0,G=G===void 0?this.length:G>>>0,k||(k=0);let ae;if(typeof k=="number")for(ae=T;ae<G;++ae)this[ae]=k;else{const fe=l.isBuffer(k)?k:l.from(k,ie),Be=fe.length;if(Be===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(ae=0;ae<G-T;++ae)this[ae+T]=fe[ae%Be]}return this};const ve={};function ke(J,k,T){ve[J]=class extends T{constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${J}]`,this.stack,delete this.name}get code(){return J}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${J}]: ${this.message}`}}}ke("ERR_BUFFER_OUT_OF_BOUNDS",function(J){return J?`${J} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ke("ERR_INVALID_ARG_TYPE",function(J,k){return`The "${J}" argument must be of type number. Received type ${typeof k}`},TypeError),ke("ERR_OUT_OF_RANGE",function(J,k,T){let G=`The value of "${J}" is out of range.`,ie=T;return Number.isInteger(T)&&Math.abs(T)>2**32?ie=Fe(String(T)):typeof T=="bigint"&&(ie=String(T),(T>BigInt(2)**BigInt(32)||T<-(BigInt(2)**BigInt(32)))&&(ie=Fe(ie)),ie+="n"),G+=` It must be ${k}. Received ${ie}`,G},RangeError);function Fe(J){let k="",T=J.length;const G=J[0]==="-"?1:0;for(;T>=G+4;T-=3)k=`_${J.slice(T-3,T)}${k}`;return`${J.slice(0,T)}${k}`}function z(J,k,T){ge(k,"offset"),(J[k]===void 0||J[k+T]===void 0)&&be(k,J.length-(T+1))}function K(J,k,T,G,ie,ae){if(J>T||J<k){const fe=typeof k=="bigint"?"n":"";let Be;throw ae>3?k===0||k===BigInt(0)?Be=`>= 0${fe} and < 2${fe} ** ${(ae+1)*8}${fe}`:Be=`>= -(2${fe} ** ${(ae+1)*8-1}${fe}) and < 2 ** ${(ae+1)*8-1}${fe}`:Be=`>= ${k}${fe} and <= ${T}${fe}`,new ve.ERR_OUT_OF_RANGE("value",Be,J)}z(G,ie,ae)}function ge(J,k){if(typeof J!="number")throw new ve.ERR_INVALID_ARG_TYPE(k,"number",J)}function be(J,k,T){throw Math.floor(J)!==J?(ge(J,T),new ve.ERR_OUT_OF_RANGE(T||"offset","an integer",J)):k<0?new ve.ERR_BUFFER_OUT_OF_BOUNDS:new ve.ERR_OUT_OF_RANGE(T||"offset",`>= ${T?1:0} and <= ${k}`,J)}const me=/[^+/0-9A-Za-z-_]/g;function Je(J){if(J=J.split("=")[0],J=J.trim().replace(me,""),J.length<2)return"";for(;J.length%4!==0;)J=J+"=";return J}function He(J,k){k=k||1/0;let T;const G=J.length;let ie=null;const ae=[];for(let fe=0;fe<G;++fe){if(T=J.charCodeAt(fe),T>55295&&T<57344){if(!ie){if(T>56319){(k-=3)>-1&&ae.push(239,191,189);continue}else if(fe+1===G){(k-=3)>-1&&ae.push(239,191,189);continue}ie=T;continue}if(T<56320){(k-=3)>-1&&ae.push(239,191,189),ie=T;continue}T=(ie-55296<<10|T-56320)+65536}else ie&&(k-=3)>-1&&ae.push(239,191,189);if(ie=null,T<128){if((k-=1)<0)break;ae.push(T)}else if(T<2048){if((k-=2)<0)break;ae.push(T>>6|192,T&63|128)}else if(T<65536){if((k-=3)<0)break;ae.push(T>>12|224,T>>6&63|128,T&63|128)}else if(T<1114112){if((k-=4)<0)break;ae.push(T>>18|240,T>>12&63|128,T>>6&63|128,T&63|128)}else throw new Error("Invalid code point")}return ae}function kt(J){const k=[];for(let T=0;T<J.length;++T)k.push(J.charCodeAt(T)&255);return k}function Qe(J,k){let T,G,ie;const ae=[];for(let fe=0;fe<J.length&&!((k-=2)<0);++fe)T=J.charCodeAt(fe),G=T>>8,ie=T%256,ae.push(ie),ae.push(G);return ae}function pi(J){return e.toByteArray(Je(J))}function Ji(J,k,T,G){let ie;for(ie=0;ie<G&&!(ie+T>=k.length||ie>=J.length);++ie)k[ie+T]=J[ie];return ie}function je(J,k){return J instanceof k||J!=null&&J.constructor!=null&&J.constructor.name!=null&&J.constructor.name===k.name}function pe(J){return J!==J}const Ie=function(){const J="0123456789abcdef",k=new Array(256);for(let T=0;T<16;++T){const G=T*16;for(let ie=0;ie<16;++ie)k[G+ie]=J[T]+J[ie]}return k}();function Bt(J){return typeof BigInt>"u"?ki:J}function ki(){throw new Error("BigInt not supported")}})(Fa);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var i=Fa,n=i.Buffer;function r(a,l){for(var h in a)l[h]=a[h]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=i:(r(i,e),e.Buffer=s);function s(a,l,h){return n(a,l,h)}s.prototype=Object.create(n.prototype),r(n,s),s.from=function(a,l,h){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,l,h)},s.alloc=function(a,l,h){if(typeof a!="number")throw new TypeError("Argument must be a number");var p=n(a);return l!==void 0?typeof h=="string"?p.fill(l,h):p.fill(l):p.fill(0),p},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(a)}})(Ym,Ym.exports);var fT=Ym.exports,sg=65536,Y5=4294967295;function $5(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Z5=fT.Buffer,_f=bt.crypto||bt.msCrypto;_f&&_f.getRandomValues?Qm.exports=q5:Qm.exports=$5;function q5(t,e){if(t>Y5)throw new RangeError("requested too many random bytes");var i=Z5.allocUnsafe(t);if(t>0)if(t>sg)for(var n=0;n<t;n+=sg)_f.getRandomValues(i.slice(n,n+sg));else _f.getRandomValues(i);return typeof e=="function"?process.nextTick(function(){e(null,i)}):i}var X5=Qm.exports,$m={exports:{}},pT=Mf.EventEmitter,og,Q1;function e4(){if(Q1)return og;Q1=1;function t(S,M){var b=Object.keys(S);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(S);M&&(w=w.filter(function(E){return Object.getOwnPropertyDescriptor(S,E).enumerable})),b.push.apply(b,w)}return b}function e(S){for(var M=1;M<arguments.length;M++){var b=arguments[M]!=null?arguments[M]:{};M%2?t(Object(b),!0).forEach(function(w){i(S,w,b[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(b)):t(Object(b)).forEach(function(w){Object.defineProperty(S,w,Object.getOwnPropertyDescriptor(b,w))})}return S}function i(S,M,b){return M=a(M),M in S?Object.defineProperty(S,M,{value:b,enumerable:!0,configurable:!0,writable:!0}):S[M]=b,S}function n(S,M){if(!(S instanceof M))throw new TypeError("Cannot call a class as a function")}function r(S,M){for(var b=0;b<M.length;b++){var w=M[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(S,a(w.key),w)}}function s(S,M,b){return M&&r(S.prototype,M),b&&r(S,b),Object.defineProperty(S,"prototype",{writable:!1}),S}function a(S){var M=l(S,"string");return typeof M=="symbol"?M:String(M)}function l(S,M){if(typeof S!="object"||S===null)return S;var b=S[Symbol.toPrimitive];if(b!==void 0){var w=b.call(S,M||"default");if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(S)}var h=Fa,p=h.Buffer,d=Aa,m=d.inspect,y=m&&m.custom||"inspect";function v(S,M,b){p.prototype.copy.call(S,M,b)}return og=function(){function S(){n(this,S),this.head=null,this.tail=null,this.length=0}return s(S,[{key:"push",value:function(b){var w={data:b,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(b){var w={data:b,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(this.length!==0){var b=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(this.length===0)return"";for(var w=this.head,E=""+w.data;w=w.next;)E+=b+w.data;return E}},{key:"concat",value:function(b){if(this.length===0)return p.alloc(0);for(var w=p.allocUnsafe(b>>>0),E=this.head,B=0;E;)v(E.data,w,B),B+=E.data.length,E=E.next;return w}},{key:"consume",value:function(b,w){var E;return b<this.head.data.length?(E=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):b===this.head.data.length?E=this.shift():E=w?this._getString(b):this._getBuffer(b),E}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var w=this.head,E=1,B=w.data;for(b-=B.length;w=w.next;){var L=w.data,I=b>L.length?L.length:b;if(I===L.length?B+=L:B+=L.slice(0,b),b-=I,b===0){I===L.length?(++E,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=L.slice(I));break}++E}return this.length-=E,B}},{key:"_getBuffer",value:function(b){var w=p.allocUnsafe(b),E=this.head,B=1;for(E.data.copy(w),b-=E.data.length;E=E.next;){var L=E.data,I=b>L.length?L.length:b;if(L.copy(w,w.length-b,0,I),b-=I,b===0){I===L.length?(++B,E.next?this.head=E.next:this.head=this.tail=null):(this.head=E,E.data=L.slice(I));break}++B}return this.length-=B,w}},{key:y,value:function(b,w){return m(this,e(e({},w),{},{depth:0,customInspect:!1}))}}]),S}(),og}function t4(t,e){var i=this,n=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;return n||r?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Zm,this,t)):process.nextTick(Zm,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?i._writableState?i._writableState.errorEmitted?process.nextTick(Oc,i):(i._writableState.errorEmitted=!0,process.nextTick(Y1,i,s)):process.nextTick(Y1,i,s):e?(process.nextTick(Oc,i),e(s)):process.nextTick(Oc,i)}),this)}function Y1(t,e){Zm(t,e),Oc(t)}function Oc(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i4(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Zm(t,e){t.emit("error",e)}function n4(t,e){var i=t._readableState,n=t._writableState;i&&i.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}var dT={destroy:t4,undestroy:i4,errorOrDestroy:n4},vo={};function r4(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var gT={};function Cn(t,e,i){i||(i=Error);function n(s,a,l){return typeof e=="string"?e:e(s,a,l)}var r=function(s){r4(a,s);function a(l,h,p){return s.call(this,n(l,h,p))||this}return a}(i);r.prototype.name=i.name,r.prototype.code=t,gT[t]=r}function $1(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map(function(n){return String(n)}),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:i===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function s4(t,e,i){return t.substr(!i||i<0?0:+i,e.length)===e}function o4(t,e,i){return(i===void 0||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}function a4(t,e,i){return typeof i!="number"&&(i=0),i+e.length>t.length?!1:t.indexOf(e,i)!==-1}Cn("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Cn("ERR_INVALID_ARG_TYPE",function(t,e,i){var n;typeof e=="string"&&s4(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var r;if(o4(t," argument"))r="The ".concat(t," ").concat(n," ").concat($1(e,"type"));else{var s=a4(t,".")?"property":"argument";r='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat($1(e,"type"))}return r+=". Received type ".concat(typeof i),r},TypeError);Cn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Cn("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Cn("ERR_STREAM_PREMATURE_CLOSE","Premature close");Cn("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Cn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Cn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Cn("ERR_STREAM_WRITE_AFTER_END","write after end");Cn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Cn("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Cn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");vo.codes=gT;var l4=vo.codes.ERR_INVALID_OPT_VALUE;function u4(t,e,i){return t.highWaterMark!=null?t.highWaterMark:e?t[i]:null}function h4(t,e,i,n){var r=u4(e,n,i);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var s=n?i:"highWaterMark";throw new l4(s,r)}return Math.floor(r)}return t.objectMode?16:16*1024}var mT={getHighWaterMark:h4},qm={exports:{}};typeof Object.create=="function"?qm.exports=function(e,i){i&&(e.super_=i,e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:qm.exports=function(e,i){if(i){e.super_=i;var n=function(){};n.prototype=i.prototype,e.prototype=new n,e.prototype.constructor=e}};var ja=qm.exports;const yT=ln(ja);var c4=f4;function f4(t,e){if(ag("noDeprecation"))return t;var i=!1;function n(){if(!i){if(ag("throwDeprecation"))throw new Error(e);ag("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}return n}function ag(t){try{if(!bt.localStorage)return!1}catch{return!1}var e=bt.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var lg,Z1;function vT(){if(Z1)return lg;Z1=1,lg=U;function t(se){var oe=this;this.next=null,this.entry=null,this.finish=function(){Ze(oe,se)}}var e;U.WritableState=O;var i={deprecate:c4},n=pT,r=Fa.Buffer,s=(typeof bt<"u"?bt:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(se){return r.from(se)}function l(se){return r.isBuffer(se)||se instanceof s}var h=dT,p=mT,d=p.getHighWaterMark,m=vo.codes,y=m.ERR_INVALID_ARG_TYPE,v=m.ERR_METHOD_NOT_IMPLEMENTED,S=m.ERR_MULTIPLE_CALLBACK,M=m.ERR_STREAM_CANNOT_PIPE,b=m.ERR_STREAM_DESTROYED,w=m.ERR_STREAM_NULL_VALUES,E=m.ERR_STREAM_WRITE_AFTER_END,B=m.ERR_UNKNOWN_ENCODING,L=h.errorOrDestroy;ja(U,n);function I(){}function O(se,oe,ve){e=e||Ta(),se=se||{},typeof ve!="boolean"&&(ve=oe instanceof e),this.objectMode=!!se.objectMode,ve&&(this.objectMode=this.objectMode||!!se.writableObjectMode),this.highWaterMark=d(this,se,"writableHighWaterMark",ve),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ke=se.decodeStrings===!1;this.decodeStrings=!ke,this.defaultEncoding=se.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Fe){Z(oe,Fe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=se.emitClose!==!1,this.autoDestroy=!!se.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}O.prototype.getBuffer=function(){for(var oe=this.bufferedRequest,ve=[];oe;)ve.push(oe),oe=oe.next;return ve},function(){try{Object.defineProperty(O.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var F;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(U,Symbol.hasInstance,{value:function(oe){return F.call(this,oe)?!0:this!==U?!1:oe&&oe._writableState instanceof O}})):F=function(oe){return oe instanceof this};function U(se){e=e||Ta();var oe=this instanceof e;if(!oe&&!F.call(U,this))return new U(se);this._writableState=new O(se,this,oe),this.writable=!0,se&&(typeof se.write=="function"&&(this._write=se.write),typeof se.writev=="function"&&(this._writev=se.writev),typeof se.destroy=="function"&&(this._destroy=se.destroy),typeof se.final=="function"&&(this._final=se.final)),n.call(this)}U.prototype.pipe=function(){L(this,new M)};function V(se,oe){var ve=new E;L(se,ve),process.nextTick(oe,ve)}function A(se,oe,ve,ke){var Fe;return ve===null?Fe=new w:typeof ve!="string"&&!oe.objectMode&&(Fe=new y("chunk",["string","Buffer"],ve)),Fe?(L(se,Fe),process.nextTick(ke,Fe),!1):!0}U.prototype.write=function(se,oe,ve){var ke=this._writableState,Fe=!1,z=!ke.objectMode&&l(se);return z&&!r.isBuffer(se)&&(se=a(se)),typeof oe=="function"&&(ve=oe,oe=null),z?oe="buffer":oe||(oe=ke.defaultEncoding),typeof ve!="function"&&(ve=I),ke.ending?V(this,ve):(z||A(this,ke,se,ve))&&(ke.pendingcb++,Fe=H(this,ke,z,se,oe,ve)),Fe},U.prototype.cork=function(){this._writableState.corked++},U.prototype.uncork=function(){var se=this._writableState;se.corked&&(se.corked--,!se.writing&&!se.corked&&!se.bufferProcessing&&se.bufferedRequest&&ne(this,se))},U.prototype.setDefaultEncoding=function(oe){if(typeof oe=="string"&&(oe=oe.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((oe+"").toLowerCase())>-1))throw new B(oe);return this._writableState.defaultEncoding=oe,this},Object.defineProperty(U.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Q(se,oe,ve){return!se.objectMode&&se.decodeStrings!==!1&&typeof oe=="string"&&(oe=r.from(oe,ve)),oe}Object.defineProperty(U.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function H(se,oe,ve,ke,Fe,z){if(!ve){var K=Q(oe,ke,Fe);ke!==K&&(ve=!0,Fe="buffer",ke=K)}var ge=oe.objectMode?1:ke.length;oe.length+=ge;var be=oe.length<oe.highWaterMark;if(be||(oe.needDrain=!0),oe.writing||oe.corked){var me=oe.lastBufferedRequest;oe.lastBufferedRequest={chunk:ke,encoding:Fe,isBuf:ve,callback:z,next:null},me?me.next=oe.lastBufferedRequest:oe.bufferedRequest=oe.lastBufferedRequest,oe.bufferedRequestCount+=1}else re(se,oe,!1,ge,ke,Fe,z);return be}function re(se,oe,ve,ke,Fe,z,K){oe.writelen=ke,oe.writecb=K,oe.writing=!0,oe.sync=!0,oe.destroyed?oe.onwrite(new b("write")):ve?se._writev(Fe,oe.onwrite):se._write(Fe,z,oe.onwrite),oe.sync=!1}function le(se,oe,ve,ke,Fe){--oe.pendingcb,ve?(process.nextTick(Fe,ke),process.nextTick(Se,se,oe),se._writableState.errorEmitted=!0,L(se,ke)):(Fe(ke),se._writableState.errorEmitted=!0,L(se,ke),Se(se,oe))}function q(se){se.writing=!1,se.writecb=null,se.length-=se.writelen,se.writelen=0}function Z(se,oe){var ve=se._writableState,ke=ve.sync,Fe=ve.writecb;if(typeof Fe!="function")throw new S;if(q(ve),oe)le(se,ve,ke,oe,Fe);else{var z=we(ve)||se.destroyed;!z&&!ve.corked&&!ve.bufferProcessing&&ve.bufferedRequest&&ne(se,ve),ke?process.nextTick(W,se,ve,z,Fe):W(se,ve,z,Fe)}}function W(se,oe,ve,ke){ve||$(se,oe),oe.pendingcb--,ke(),Se(se,oe)}function $(se,oe){oe.length===0&&oe.needDrain&&(oe.needDrain=!1,se.emit("drain"))}function ne(se,oe){oe.bufferProcessing=!0;var ve=oe.bufferedRequest;if(se._writev&&ve&&ve.next){var ke=oe.bufferedRequestCount,Fe=new Array(ke),z=oe.corkedRequestsFree;z.entry=ve;for(var K=0,ge=!0;ve;)Fe[K]=ve,ve.isBuf||(ge=!1),ve=ve.next,K+=1;Fe.allBuffers=ge,re(se,oe,!0,oe.length,Fe,"",z.finish),oe.pendingcb++,oe.lastBufferedRequest=null,z.next?(oe.corkedRequestsFree=z.next,z.next=null):oe.corkedRequestsFree=new t(oe),oe.bufferedRequestCount=0}else{for(;ve;){var be=ve.chunk,me=ve.encoding,Je=ve.callback,He=oe.objectMode?1:be.length;if(re(se,oe,!1,He,be,me,Je),ve=ve.next,oe.bufferedRequestCount--,oe.writing)break}ve===null&&(oe.lastBufferedRequest=null)}oe.bufferedRequest=ve,oe.bufferProcessing=!1}U.prototype._write=function(se,oe,ve){ve(new v("_write()"))},U.prototype._writev=null,U.prototype.end=function(se,oe,ve){var ke=this._writableState;return typeof se=="function"?(ve=se,se=null,oe=null):typeof oe=="function"&&(ve=oe,oe=null),se!=null&&this.write(se,oe),ke.corked&&(ke.corked=1,this.uncork()),ke.ending||Re(this,ke,ve),this},Object.defineProperty(U.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function we(se){return se.ending&&se.length===0&&se.bufferedRequest===null&&!se.finished&&!se.writing}function ye(se,oe){se._final(function(ve){oe.pendingcb--,ve&&L(se,ve),oe.prefinished=!0,se.emit("prefinish"),Se(se,oe)})}function xe(se,oe){!oe.prefinished&&!oe.finalCalled&&(typeof se._final=="function"&&!oe.destroyed?(oe.pendingcb++,oe.finalCalled=!0,process.nextTick(ye,se,oe)):(oe.prefinished=!0,se.emit("prefinish")))}function Se(se,oe){var ve=we(oe);if(ve&&(xe(se,oe),oe.pendingcb===0&&(oe.finished=!0,se.emit("finish"),oe.autoDestroy))){var ke=se._readableState;(!ke||ke.autoDestroy&&ke.endEmitted)&&se.destroy()}return ve}function Re(se,oe,ve){oe.ending=!0,Se(se,oe),ve&&(oe.finished?process.nextTick(ve):se.once("finish",ve)),oe.ended=!0,se.writable=!1}function Ze(se,oe,ve){var ke=se.entry;for(se.entry=null;ke;){var Fe=ke.callback;oe.pendingcb--,Fe(ve),ke=ke.next}oe.corkedRequestsFree.next=se}return Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(oe){this._writableState&&(this._writableState.destroyed=oe)}}),U.prototype.destroy=h.destroy,U.prototype._undestroy=h.undestroy,U.prototype._destroy=function(se,oe){oe(se)},lg}var ug,q1;function Ta(){if(q1)return ug;q1=1;var t=Object.keys||function(p){var d=[];for(var m in p)d.push(m);return d};ug=a;var e=_T(),i=vT();ja(a,e);for(var n=t(i.prototype),r=0;r<n.length;r++){var s=n[r];a.prototype[s]||(a.prototype[s]=i.prototype[s])}function a(p){if(!(this instanceof a))return new a(p);e.call(this,p),i.call(this,p),this.allowHalfOpen=!0,p&&(p.readable===!1&&(this.readable=!1),p.writable===!1&&(this.writable=!1),p.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",l)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function l(){this._writableState.ended||process.nextTick(h,this)}function h(p){p.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(d){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=d,this._writableState.destroyed=d)}}),ug}var hg={},X1;function ex(){if(X1)return hg;X1=1;var t=fT.Buffer,e=t.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(w){if(!w)return"utf8";for(var E;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(E)return;w=(""+w).toLowerCase(),E=!0}}function n(w){var E=i(w);if(typeof E!="string"&&(t.isEncoding===e||!e(w)))throw new Error("Unknown encoding: "+w);return E||w}hg.StringDecoder=r;function r(w){this.encoding=n(w);var E;switch(this.encoding){case"utf16le":this.text=m,this.end=y,E=4;break;case"utf8":this.fillLast=h,E=4;break;case"base64":this.text=v,this.end=S,E=3;break;default:this.write=M,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(E)}r.prototype.write=function(w){if(w.length===0)return"";var E,B;if(this.lastNeed){if(E=this.fillLast(w),E===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<w.length?E?E+this.text(w,B):this.text(w,B):E||""},r.prototype.end=d,r.prototype.text=p,r.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length};function s(w){return w<=127?0:w>>5===6?2:w>>4===14?3:w>>3===30?4:w>>6===2?-1:-2}function a(w,E,B){var L=E.length-1;if(L<B)return 0;var I=s(E[L]);return I>=0?(I>0&&(w.lastNeed=I-1),I):--L<B||I===-2?0:(I=s(E[L]),I>=0?(I>0&&(w.lastNeed=I-2),I):--L<B||I===-2?0:(I=s(E[L]),I>=0?(I>0&&(I===2?I=0:w.lastNeed=I-3),I):0))}function l(w,E,B){if((E[0]&192)!==128)return w.lastNeed=0,"�";if(w.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return w.lastNeed=1,"�";if(w.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return w.lastNeed=2,"�"}}function h(w){var E=this.lastTotal-this.lastNeed,B=l(this,w);if(B!==void 0)return B;if(this.lastNeed<=w.length)return w.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,E,0,w.length),this.lastNeed-=w.length}function p(w,E){var B=a(this,w,E);if(!this.lastNeed)return w.toString("utf8",E);this.lastTotal=B;var L=w.length-(B-this.lastNeed);return w.copy(this.lastChar,0,L),w.toString("utf8",E,L)}function d(w){var E=w&&w.length?this.write(w):"";return this.lastNeed?E+"�":E}function m(w,E){if((w.length-E)%2===0){var B=w.toString("utf16le",E);if(B){var L=B.charCodeAt(B.length-1);if(L>=55296&&L<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",E,w.length-1)}function y(w){var E=w&&w.length?this.write(w):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,B)}return E}function v(w,E){var B=(w.length-E)%3;return B===0?w.toString("base64",E):(this.lastNeed=3-B,this.lastTotal=3,B===1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",E,w.length-B))}function S(w){var E=w&&w.length?this.write(w):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function M(w){return w.toString(this.encoding)}function b(w){return w&&w.length?this.write(w):""}return hg}var tx=vo.codes.ERR_STREAM_PREMATURE_CLOSE;function p4(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];t.apply(this,n)}}}function d4(){}function g4(t){return t.setHeader&&typeof t.abort=="function"}function wT(t,e,i){if(typeof e=="function")return wT(t,null,e);e||(e={}),i=p4(i||d4);var n=e.readable||e.readable!==!1&&t.readable,r=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||l()},a=t._writableState&&t._writableState.finished,l=function(){r=!1,a=!0,n||i.call(t)},h=t._readableState&&t._readableState.endEmitted,p=function(){n=!1,h=!0,r||i.call(t)},d=function(S){i.call(t,S)},m=function(){var S;if(n&&!h)return(!t._readableState||!t._readableState.ended)&&(S=new tx),i.call(t,S);if(r&&!a)return(!t._writableState||!t._writableState.ended)&&(S=new tx),i.call(t,S)},y=function(){t.req.on("finish",l)};return g4(t)?(t.on("complete",l),t.on("abort",m),t.req?y():t.on("request",y)):r&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",p),t.on("finish",l),e.error!==!1&&t.on("error",d),t.on("close",m),function(){t.removeListener("complete",l),t.removeListener("abort",m),t.removeListener("request",y),t.req&&t.req.removeListener("finish",l),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",l),t.removeListener("end",p),t.removeListener("error",d),t.removeListener("close",m)}}var yy=wT,cg,ix;function m4(){if(ix)return cg;ix=1;var t;function e(B,L,I){return L=i(L),L in B?Object.defineProperty(B,L,{value:I,enumerable:!0,configurable:!0,writable:!0}):B[L]=I,B}function i(B){var L=n(B,"string");return typeof L=="symbol"?L:String(L)}function n(B,L){if(typeof B!="object"||B===null)return B;var I=B[Symbol.toPrimitive];if(I!==void 0){var O=I.call(B,L||"default");if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(B)}var r=yy,s=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),h=Symbol("ended"),p=Symbol("lastPromise"),d=Symbol("handlePromise"),m=Symbol("stream");function y(B,L){return{value:B,done:L}}function v(B){var L=B[s];if(L!==null){var I=B[m].read();I!==null&&(B[p]=null,B[s]=null,B[a]=null,L(y(I,!1)))}}function S(B){process.nextTick(v,B)}function M(B,L){return function(I,O){B.then(function(){if(L[h]){I(y(void 0,!0));return}L[d](I,O)},O)}}var b=Object.getPrototypeOf(function(){}),w=Object.setPrototypeOf((t={get stream(){return this[m]},next:function(){var L=this,I=this[l];if(I!==null)return Promise.reject(I);if(this[h])return Promise.resolve(y(void 0,!0));if(this[m].destroyed)return new Promise(function(V,A){process.nextTick(function(){L[l]?A(L[l]):V(y(void 0,!0))})});var O=this[p],F;if(O)F=new Promise(M(O,this));else{var U=this[m].read();if(U!==null)return Promise.resolve(y(U,!1));F=new Promise(this[d])}return this[p]=F,F}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var L=this;return new Promise(function(I,O){L[m].destroy(null,function(F){if(F){O(F);return}I(y(void 0,!0))})})}),t),b),E=function(L){var I,O=Object.create(w,(I={},e(I,m,{value:L,writable:!0}),e(I,s,{value:null,writable:!0}),e(I,a,{value:null,writable:!0}),e(I,l,{value:null,writable:!0}),e(I,h,{value:L._readableState.endEmitted,writable:!0}),e(I,d,{value:function(U,V){var A=O[m].read();A?(O[p]=null,O[s]=null,O[a]=null,U(y(A,!1))):(O[s]=U,O[a]=V)},writable:!0}),I));return O[p]=null,r(L,function(F){if(F&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"){var U=O[a];U!==null&&(O[p]=null,O[s]=null,O[a]=null,U(F)),O[l]=F;return}var V=O[s];V!==null&&(O[p]=null,O[s]=null,O[a]=null,V(y(void 0,!0))),O[h]=!0}),L.on("readable",S.bind(null,O)),O};return cg=E,cg}var fg,nx;function y4(){return nx||(nx=1,fg=function(){throw new Error("Readable.from is not available in the browser")}),fg}var pg,rx;function _T(){if(rx)return pg;rx=1,pg=V;var t;V.ReadableState=U,Mf.EventEmitter;var e=function(K,ge){return K.listeners(ge).length},i=pT,n=Fa.Buffer,r=(typeof bt<"u"?bt:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(z){return n.from(z)}function a(z){return n.isBuffer(z)||z instanceof r}var l=Aa,h;l&&l.debuglog?h=l.debuglog("stream"):h=function(){};var p=e4(),d=dT,m=mT,y=m.getHighWaterMark,v=vo.codes,S=v.ERR_INVALID_ARG_TYPE,M=v.ERR_STREAM_PUSH_AFTER_EOF,b=v.ERR_METHOD_NOT_IMPLEMENTED,w=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,E,B,L;ja(V,i);var I=d.errorOrDestroy,O=["error","close","destroy","pause","resume"];function F(z,K,ge){if(typeof z.prependListener=="function")return z.prependListener(K,ge);!z._events||!z._events[K]?z.on(K,ge):Array.isArray(z._events[K])?z._events[K].unshift(ge):z._events[K]=[ge,z._events[K]]}function U(z,K,ge){t=t||Ta(),z=z||{},typeof ge!="boolean"&&(ge=K instanceof t),this.objectMode=!!z.objectMode,ge&&(this.objectMode=this.objectMode||!!z.readableObjectMode),this.highWaterMark=y(this,z,"readableHighWaterMark",ge),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=z.emitClose!==!1,this.autoDestroy=!!z.autoDestroy,this.destroyed=!1,this.defaultEncoding=z.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,z.encoding&&(E||(E=ex().StringDecoder),this.decoder=new E(z.encoding),this.encoding=z.encoding)}function V(z){if(t=t||Ta(),!(this instanceof V))return new V(z);var K=this instanceof t;this._readableState=new U(z,this,K),this.readable=!0,z&&(typeof z.read=="function"&&(this._read=z.read),typeof z.destroy=="function"&&(this._destroy=z.destroy)),i.call(this)}Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(K){this._readableState&&(this._readableState.destroyed=K)}}),V.prototype.destroy=d.destroy,V.prototype._undestroy=d.undestroy,V.prototype._destroy=function(z,K){K(z)},V.prototype.push=function(z,K){var ge=this._readableState,be;return ge.objectMode?be=!0:typeof z=="string"&&(K=K||ge.defaultEncoding,K!==ge.encoding&&(z=n.from(z,K),K=""),be=!0),A(this,z,K,!1,be)},V.prototype.unshift=function(z){return A(this,z,null,!0,!1)};function A(z,K,ge,be,me){h("readableAddChunk",K);var Je=z._readableState;if(K===null)Je.reading=!1,Z(z,Je);else{var He;if(me||(He=H(Je,K)),He)I(z,He);else if(Je.objectMode||K&&K.length>0)if(typeof K!="string"&&!Je.objectMode&&Object.getPrototypeOf(K)!==n.prototype&&(K=s(K)),be)Je.endEmitted?I(z,new w):Q(z,Je,K,!0);else if(Je.ended)I(z,new M);else{if(Je.destroyed)return!1;Je.reading=!1,Je.decoder&&!ge?(K=Je.decoder.write(K),Je.objectMode||K.length!==0?Q(z,Je,K,!1):ne(z,Je)):Q(z,Je,K,!1)}else be||(Je.reading=!1,ne(z,Je))}return!Je.ended&&(Je.length<Je.highWaterMark||Je.length===0)}function Q(z,K,ge,be){K.flowing&&K.length===0&&!K.sync?(K.awaitDrain=0,z.emit("data",ge)):(K.length+=K.objectMode?1:ge.length,be?K.buffer.unshift(ge):K.buffer.push(ge),K.needReadable&&W(z)),ne(z,K)}function H(z,K){var ge;return!a(K)&&typeof K!="string"&&K!==void 0&&!z.objectMode&&(ge=new S("chunk",["string","Buffer","Uint8Array"],K)),ge}V.prototype.isPaused=function(){return this._readableState.flowing===!1},V.prototype.setEncoding=function(z){E||(E=ex().StringDecoder);var K=new E(z);this._readableState.decoder=K,this._readableState.encoding=this._readableState.decoder.encoding;for(var ge=this._readableState.buffer.head,be="";ge!==null;)be+=K.write(ge.data),ge=ge.next;return this._readableState.buffer.clear(),be!==""&&this._readableState.buffer.push(be),this._readableState.length=be.length,this};var re=1073741824;function le(z){return z>=re?z=re:(z--,z|=z>>>1,z|=z>>>2,z|=z>>>4,z|=z>>>8,z|=z>>>16,z++),z}function q(z,K){return z<=0||K.length===0&&K.ended?0:K.objectMode?1:z!==z?K.flowing&&K.length?K.buffer.head.data.length:K.length:(z>K.highWaterMark&&(K.highWaterMark=le(z)),z<=K.length?z:K.ended?K.length:(K.needReadable=!0,0))}V.prototype.read=function(z){h("read",z),z=parseInt(z,10);var K=this._readableState,ge=z;if(z!==0&&(K.emittedReadable=!1),z===0&&K.needReadable&&((K.highWaterMark!==0?K.length>=K.highWaterMark:K.length>0)||K.ended))return h("read: emitReadable",K.length,K.ended),K.length===0&&K.ended?ve(this):W(this),null;if(z=q(z,K),z===0&&K.ended)return K.length===0&&ve(this),null;var be=K.needReadable;h("need readable",be),(K.length===0||K.length-z<K.highWaterMark)&&(be=!0,h("length less than watermark",be)),K.ended||K.reading?(be=!1,h("reading or ended",be)):be&&(h("do read"),K.reading=!0,K.sync=!0,K.length===0&&(K.needReadable=!0),this._read(K.highWaterMark),K.sync=!1,K.reading||(z=q(ge,K)));var me;return z>0?me=oe(z,K):me=null,me===null?(K.needReadable=K.length<=K.highWaterMark,z=0):(K.length-=z,K.awaitDrain=0),K.length===0&&(K.ended||(K.needReadable=!0),ge!==z&&K.ended&&ve(this)),me!==null&&this.emit("data",me),me};function Z(z,K){if(h("onEofChunk"),!K.ended){if(K.decoder){var ge=K.decoder.end();ge&&ge.length&&(K.buffer.push(ge),K.length+=K.objectMode?1:ge.length)}K.ended=!0,K.sync?W(z):(K.needReadable=!1,K.emittedReadable||(K.emittedReadable=!0,$(z)))}}function W(z){var K=z._readableState;h("emitReadable",K.needReadable,K.emittedReadable),K.needReadable=!1,K.emittedReadable||(h("emitReadable",K.flowing),K.emittedReadable=!0,process.nextTick($,z))}function $(z){var K=z._readableState;h("emitReadable_",K.destroyed,K.length,K.ended),!K.destroyed&&(K.length||K.ended)&&(z.emit("readable"),K.emittedReadable=!1),K.needReadable=!K.flowing&&!K.ended&&K.length<=K.highWaterMark,se(z)}function ne(z,K){K.readingMore||(K.readingMore=!0,process.nextTick(we,z,K))}function we(z,K){for(;!K.reading&&!K.ended&&(K.length<K.highWaterMark||K.flowing&&K.length===0);){var ge=K.length;if(h("maybeReadMore read 0"),z.read(0),ge===K.length)break}K.readingMore=!1}V.prototype._read=function(z){I(this,new b("_read()"))},V.prototype.pipe=function(z,K){var ge=this,be=this._readableState;switch(be.pipesCount){case 0:be.pipes=z;break;case 1:be.pipes=[be.pipes,z];break;default:be.pipes.push(z);break}be.pipesCount+=1,h("pipe count=%d opts=%j",be.pipesCount,K);var me=(!K||K.end!==!1)&&z!==process.stdout&&z!==process.stderr,Je=me?kt:ki;be.endEmitted?process.nextTick(Je):ge.once("end",Je),z.on("unpipe",He);function He(J,k){h("onunpipe"),J===ge&&k&&k.hasUnpiped===!1&&(k.hasUnpiped=!0,Ji())}function kt(){h("onend"),z.end()}var Qe=ye(ge);z.on("drain",Qe);var pi=!1;function Ji(){h("cleanup"),z.removeListener("close",Ie),z.removeListener("finish",Bt),z.removeListener("drain",Qe),z.removeListener("error",pe),z.removeListener("unpipe",He),ge.removeListener("end",kt),ge.removeListener("end",ki),ge.removeListener("data",je),pi=!0,be.awaitDrain&&(!z._writableState||z._writableState.needDrain)&&Qe()}ge.on("data",je);function je(J){h("ondata");var k=z.write(J);h("dest.write",k),k===!1&&((be.pipesCount===1&&be.pipes===z||be.pipesCount>1&&Fe(be.pipes,z)!==-1)&&!pi&&(h("false write response, pause",be.awaitDrain),be.awaitDrain++),ge.pause())}function pe(J){h("onerror",J),ki(),z.removeListener("error",pe),e(z,"error")===0&&I(z,J)}F(z,"error",pe);function Ie(){z.removeListener("finish",Bt),ki()}z.once("close",Ie);function Bt(){h("onfinish"),z.removeListener("close",Ie),ki()}z.once("finish",Bt);function ki(){h("unpipe"),ge.unpipe(z)}return z.emit("pipe",ge),be.flowing||(h("pipe resume"),ge.resume()),z};function ye(z){return function(){var ge=z._readableState;h("pipeOnDrain",ge.awaitDrain),ge.awaitDrain&&ge.awaitDrain--,ge.awaitDrain===0&&e(z,"data")&&(ge.flowing=!0,se(z))}}V.prototype.unpipe=function(z){var K=this._readableState,ge={hasUnpiped:!1};if(K.pipesCount===0)return this;if(K.pipesCount===1)return z&&z!==K.pipes?this:(z||(z=K.pipes),K.pipes=null,K.pipesCount=0,K.flowing=!1,z&&z.emit("unpipe",this,ge),this);if(!z){var be=K.pipes,me=K.pipesCount;K.pipes=null,K.pipesCount=0,K.flowing=!1;for(var Je=0;Je<me;Je++)be[Je].emit("unpipe",this,{hasUnpiped:!1});return this}var He=Fe(K.pipes,z);return He===-1?this:(K.pipes.splice(He,1),K.pipesCount-=1,K.pipesCount===1&&(K.pipes=K.pipes[0]),z.emit("unpipe",this,ge),this)},V.prototype.on=function(z,K){var ge=i.prototype.on.call(this,z,K),be=this._readableState;return z==="data"?(be.readableListening=this.listenerCount("readable")>0,be.flowing!==!1&&this.resume()):z==="readable"&&!be.endEmitted&&!be.readableListening&&(be.readableListening=be.needReadable=!0,be.flowing=!1,be.emittedReadable=!1,h("on readable",be.length,be.reading),be.length?W(this):be.reading||process.nextTick(Se,this)),ge},V.prototype.addListener=V.prototype.on,V.prototype.removeListener=function(z,K){var ge=i.prototype.removeListener.call(this,z,K);return z==="readable"&&process.nextTick(xe,this),ge},V.prototype.removeAllListeners=function(z){var K=i.prototype.removeAllListeners.apply(this,arguments);return(z==="readable"||z===void 0)&&process.nextTick(xe,this),K};function xe(z){var K=z._readableState;K.readableListening=z.listenerCount("readable")>0,K.resumeScheduled&&!K.paused?K.flowing=!0:z.listenerCount("data")>0&&z.resume()}function Se(z){h("readable nexttick read 0"),z.read(0)}V.prototype.resume=function(){var z=this._readableState;return z.flowing||(h("resume"),z.flowing=!z.readableListening,Re(this,z)),z.paused=!1,this};function Re(z,K){K.resumeScheduled||(K.resumeScheduled=!0,process.nextTick(Ze,z,K))}function Ze(z,K){h("resume",K.reading),K.reading||z.read(0),K.resumeScheduled=!1,z.emit("resume"),se(z),K.flowing&&!K.reading&&z.read(0)}V.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function se(z){var K=z._readableState;for(h("flow",K.flowing);K.flowing&&z.read()!==null;);}V.prototype.wrap=function(z){var K=this,ge=this._readableState,be=!1;z.on("end",function(){if(h("wrapped end"),ge.decoder&&!ge.ended){var He=ge.decoder.end();He&&He.length&&K.push(He)}K.push(null)}),z.on("data",function(He){if(h("wrapped data"),ge.decoder&&(He=ge.decoder.write(He)),!(ge.objectMode&&He==null)&&!(!ge.objectMode&&(!He||!He.length))){var kt=K.push(He);kt||(be=!0,z.pause())}});for(var me in z)this[me]===void 0&&typeof z[me]=="function"&&(this[me]=function(kt){return function(){return z[kt].apply(z,arguments)}}(me));for(var Je=0;Je<O.length;Je++)z.on(O[Je],this.emit.bind(this,O[Je]));return this._read=function(He){h("wrapped _read",He),be&&(be=!1,z.resume())},this},typeof Symbol=="function"&&(V.prototype[Symbol.asyncIterator]=function(){return B===void 0&&(B=m4()),B(this)}),Object.defineProperty(V.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(V.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(V.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(K){this._readableState&&(this._readableState.flowing=K)}}),V._fromList=oe,Object.defineProperty(V.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function oe(z,K){if(K.length===0)return null;var ge;return K.objectMode?ge=K.buffer.shift():!z||z>=K.length?(K.decoder?ge=K.buffer.join(""):K.buffer.length===1?ge=K.buffer.first():ge=K.buffer.concat(K.length),K.buffer.clear()):ge=K.buffer.consume(z,K.decoder),ge}function ve(z){var K=z._readableState;h("endReadable",K.endEmitted),K.endEmitted||(K.ended=!0,process.nextTick(ke,K,z))}function ke(z,K){if(h("endReadableNT",z.endEmitted,z.length),!z.endEmitted&&z.length===0&&(z.endEmitted=!0,K.readable=!1,K.emit("end"),z.autoDestroy)){var ge=K._writableState;(!ge||ge.autoDestroy&&ge.finished)&&K.destroy()}}typeof Symbol=="function"&&(V.from=function(z,K){return L===void 0&&(L=y4()),L(V,z,K)});function Fe(z,K){for(var ge=0,be=z.length;ge<be;ge++)if(z[ge]===K)return ge;return-1}return pg}var bT=Lr,ep=vo.codes,v4=ep.ERR_METHOD_NOT_IMPLEMENTED,w4=ep.ERR_MULTIPLE_CALLBACK,_4=ep.ERR_TRANSFORM_ALREADY_TRANSFORMING,b4=ep.ERR_TRANSFORM_WITH_LENGTH_0,tp=Ta();ja(Lr,tp);function x4(t,e){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(n===null)return this.emit("error",new w4);i.writechunk=null,i.writecb=null,e!=null&&this.push(e),n(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function Lr(t){if(!(this instanceof Lr))return new Lr(t);tp.call(this,t),this._transformState={afterTransform:x4.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",S4)}function S4(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,i){sx(t,e,i)}):sx(this,null,null)}Lr.prototype.push=function(t,e){return this._transformState.needTransform=!1,tp.prototype.push.call(this,t,e)};Lr.prototype._transform=function(t,e,i){i(new v4("_transform()"))};Lr.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}};Lr.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Lr.prototype._destroy=function(t,e){tp.prototype._destroy.call(this,t,function(i){e(i)})};function sx(t,e,i){if(e)return t.emit("error",e);if(i!=null&&t.push(i),t._writableState.length)throw new b4;if(t._transformState.transforming)throw new _4;return t.push(null)}var C4=Eu,xT=bT;ja(Eu,xT);function Eu(t){if(!(this instanceof Eu))return new Eu(t);xT.call(this,t)}Eu.prototype._transform=function(t,e,i){i(null,t)};var dg;function M4(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var ST=vo.codes,k4=ST.ERR_MISSING_ARGS,T4=ST.ERR_STREAM_DESTROYED;function ox(t){if(t)throw t}function E4(t){return t.setHeader&&typeof t.abort=="function"}function A4(t,e,i,n){n=M4(n);var r=!1;t.on("close",function(){r=!0}),dg===void 0&&(dg=yy),dg(t,{readable:e,writable:i},function(a){if(a)return n(a);r=!0,n()});var s=!1;return function(a){if(!r&&!s){if(s=!0,E4(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(a||new T4("pipe"))}}}function ax(t){t()}function R4(t,e){return t.pipe(e)}function L4(t){return!t.length||typeof t[t.length-1]!="function"?ox:t.pop()}function O4(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=L4(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new k4("streams");var r,s=e.map(function(a,l){var h=l<e.length-1,p=l>0;return A4(a,h,p,function(d){r||(r=d),d&&s.forEach(ax),!h&&(s.forEach(ax),n(r))})});return e.reduce(R4)}var I4=O4;(function(t,e){e=t.exports=_T(),e.Stream=e,e.Readable=e,e.Writable=vT(),e.Duplex=Ta(),e.Transform=bT,e.PassThrough=C4,e.finished=yy,e.pipeline=I4})($m,$m.exports);var N4=$m.exports;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let lx;var D4=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:bt):t=>(lx||(lx=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));function ux(t,e){for(const i in e)Object.defineProperty(t,i,{value:e[i],enumerable:!0,configurable:!0});return t}function B4(t,e,i){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");i||(i={}),typeof e=="object"&&(i=e,e=""),e&&(i.code=e);try{return ux(t,i)}catch{i.message=t.message,i.stack=t.stack;const r=function(){};return r.prototype=Object.create(Object.getPrototypeOf(t)),ux(new r,i)}}var U4=B4;/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const J4=P5("simple-peer"),CT=F5,hx=X5,P4=N4,gg=D4,qe=U4,{Buffer:F4}=Fa,mg=64*1024,j4=5*1e3,W4=5*1e3;function cx(t){return t.replace(/a=ice-options:trickle\s\n/g,"")}function G4(t){console.warn(t)}class po extends P4.Duplex{constructor(e){if(e=Object.assign({allowHalfOpen:!1},e),super(e),this._id=hx(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||hx(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||po.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},po.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(i=>i),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=e.trickle!==void 0?e.trickle:!0,this.allowHalfTrickle=e.allowHalfTrickle!==void 0?e.allowHalfTrickle:!1,this.iceCompleteTimeout=e.iceCompleteTimeout||j4,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&typeof e.wrtc=="object"?e.wrtc:CT(),!this._wrtc)throw qe(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(i){this.destroy(qe(i,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=i=>{this._onIceCandidate(i)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(i=>{this.destroy(qe(i,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=i=>{this._setupData(i)},this.streams&&this.streams.forEach(i=>{this.addStream(i)}),this._pc.ontrack=i=>{this._onTrack(i)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw qe(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof e=="string")try{e=JSON.parse(e)}catch{e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(i=>{this._addIceCandidate(i)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(i=>{this.destroy(qe(i,"ERR_SET_REMOTE_DESCRIPTION"))}),!e.sdp&&!e.candidate&&!e.renegotiate&&!e.transceiverRequest&&this.destroy(qe(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const i=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(i).catch(n=>{!i.address||i.address.endsWith(".local")?G4("Ignoring unsupported ICE candidate."):this.destroy(qe(n,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw qe(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,i){if(!this.destroying){if(this.destroyed)throw qe(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,i),this._needsNegotiation()}catch(n){this.destroy(qe(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:i}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw qe(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(i=>{this.addTrack(i,e)})}}addTrack(e,i){if(this.destroying)return;if(this.destroyed)throw qe(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(e)||new Map;let r=n.get(i);if(!r)r=this._pc.addTrack(e,i),n.set(i,r),this._senderMap.set(e,n),this._needsNegotiation();else throw r.removed?qe(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):qe(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(e,i,n){if(this.destroying)return;if(this.destroyed)throw qe(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(e),s=r?r.get(n):null;if(!s)throw qe(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");i&&this._senderMap.set(i,r),s.replaceTrack!=null?s.replaceTrack(i):this.destroy(qe(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,i){if(this.destroying)return;if(this.destroyed)throw qe(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(e),r=n?n.get(i):null;if(!r)throw qe(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(s){s.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(r):this.destroy(qe(s,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw qe(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(i=>{this.removeTrack(i,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,gg(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw qe(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,i){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),gg(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),i()}))}_setupData(e){if(!e.channel)return this.destroy(qe(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=mg),this.channelName=this._channel.label,this._channel.onmessage=n=>{this._onChannelMessage(n)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=n=>{const r=n.error instanceof Error?n.error:new Error(`Datachannel error: ${n.message} ${n.filename}:${n.lineno}:${n.colno}`);this.destroy(qe(r,"ERR_DATA_CHANNEL"))};let i=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(i&&this._onChannelClose(),i=!0):i=!1},W4)}_read(){}_write(e,i,n){if(this.destroyed)return n(qe(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(r){return this.destroy(qe(r,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>mg?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=cx(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const i=()=>{if(this.destroyed)return;const s=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:s.type,sdp:s.sdp})},n=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?i():this.once("_iceComplete",i))},r=s=>{this.destroy(qe(s,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(n).catch(r)}).catch(e=>{this.destroy(qe(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{!e.mid&&e.sender.track&&!e.requested&&(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=cx(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const i=()=>{if(this.destroyed)return;const s=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:s.type,sdp:s.sdp}),this.initiator||this._requestMissingTransceivers()},n=()=>{this.destroyed||(this.trickle||this._iceComplete?i():this.once("_iceComplete",i))},r=s=>{this.destroy(qe(s,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(n).catch(r)}).catch(e=>{this.destroy(qe(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(qe(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,i=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,i),this.emit("iceStateChange",e,i),(e==="connected"||e==="completed")&&(this._pcReady=!0,this._maybeReady()),e==="failed"&&this.destroy(qe(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),e==="closed"&&this.destroy(qe(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const i=n=>(Object.prototype.toString.call(n.values)==="[object Array]"&&n.values.forEach(r=>{Object.assign(n,r)}),n);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{const r=[];n.forEach(s=>{r.push(i(s))}),e(null,r)},n=>e(n)):this._pc.getStats.length>0?this._pc.getStats(n=>{if(this.destroyed)return;const r=[];n.result().forEach(s=>{const a={};s.names().forEach(l=>{a[l]=s.stat(l)}),a.id=s.id,a.type=s.type,a.timestamp=s.timestamp,r.push(i(a))}),e(null,r)},n=>e(n)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((i,n)=>{if(this.destroyed)return;i&&(n=[]);const r={},s={},a={};let l=!1;n.forEach(p=>{(p.type==="remotecandidate"||p.type==="remote-candidate")&&(r[p.id]=p),(p.type==="localcandidate"||p.type==="local-candidate")&&(s[p.id]=p),(p.type==="candidatepair"||p.type==="candidate-pair")&&(a[p.id]=p)});const h=p=>{l=!0;let d=s[p.localCandidateId];d&&(d.ip||d.address)?(this.localAddress=d.ip||d.address,this.localPort=Number(d.port)):d&&d.ipAddress?(this.localAddress=d.ipAddress,this.localPort=Number(d.portNumber)):typeof p.googLocalAddress=="string"&&(d=p.googLocalAddress.split(":"),this.localAddress=d[0],this.localPort=Number(d[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let m=r[p.remoteCandidateId];m&&(m.ip||m.address)?(this.remoteAddress=m.ip||m.address,this.remotePort=Number(m.port)):m&&m.ipAddress?(this.remoteAddress=m.ipAddress,this.remotePort=Number(m.portNumber)):typeof p.googRemoteAddress=="string"&&(m=p.googRemoteAddress.split(":"),this.remoteAddress=m[0],this.remotePort=Number(m[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(p=>{p.type==="transport"&&p.selectedCandidatePairId&&h(a[p.selectedCandidatePairId]),(p.type==="googCandidatePair"&&p.googActiveConnection==="true"||(p.type==="candidatepair"||p.type==="candidate-pair")&&p.selected)&&h(p)}),!l&&(!Object.keys(a).length||Object.keys(s).length)){setTimeout(e,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(d){return this.destroy(qe(d,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const p=this._cb;this._cb=null,p(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>mg||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let i=e.data;i instanceof ArrayBuffer&&(i=F4.from(i)),this.push(i)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(i=>{this._debug("on track"),this.emit("track",e.track,i),this._remoteTracks.push({track:e.track,stream:i}),!this._remoteStreams.some(n=>n.id===i.id)&&(this._remoteStreams.push(i),gg(()=>{this._debug("on stream"),this.emit("stream",i)}))})}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],J4.apply(null,e)}}po.WEBRTC_SUPPORT=!!CT();po.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};po.channelConfig={};var V4=po;const K4=ln(V4);var MT={exports:{}},Ic=1;function z4(){return Ic=(Ic*9301+49297)%233280,Ic/233280}function H4(t){Ic=t}var Q4={nextValue:z4,seed:H4},Xm=Q4,Xs="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",gs,fx,Xl;function e0(){Xl=!1}function kT(t){if(!t){gs!==Xs&&(gs=Xs,e0());return}if(t!==gs){if(t.length!==Xs.length)throw new Error("Custom alphabet for shortid must be "+Xs.length+" unique characters. You submitted "+t.length+" characters: "+t);var e=t.split("").filter(function(i,n,r){return n!==r.lastIndexOf(i)});if(e.length)throw new Error("Custom alphabet for shortid must be "+Xs.length+" unique characters. These characters were not unique: "+e.join(", "));gs=t,e0()}}function Y4(t){return kT(t),gs}function $4(t){Xm.seed(t),fx!==t&&(e0(),fx=t)}function Z4(){gs||kT(Xs);for(var t=gs.split(""),e=[],i=Xm.nextValue(),n;t.length>0;)i=Xm.nextValue(),n=Math.floor(i*t.length),e.push(t.splice(n,1)[0]);return e.join("")}function TT(){return Xl||(Xl=Z4(),Xl)}function q4(t){var e=TT();return e[t]}function X4(){return gs||Xs}var vy={get:X4,characters:Y4,seed:$4,lookup:q4,shuffled:TT},yg=typeof window=="object"&&(window.crypto||window.msCrypto),t0;!yg||!yg.getRandomValues?t0=function(t){for(var e=[],i=0;i<t;i++)e.push(Math.floor(Math.random()*256));return e}:t0=function(t){return yg.getRandomValues(new Uint8Array(t))};var e9=t0,t9=function(t,e,i){for(var n=(2<<Math.log(e.length-1)/Math.LN2)-1,r=-~(1.6*n*i/e.length),s="";;)for(var a=t(r),l=r;l--;)if(s+=e[a[l]&n]||"",s.length===+i)return s},i9=vy,n9=e9,r9=t9;function s9(t){for(var e=0,i,n="";!i;)n=n+r9(n9,i9.get(),1),i=t<Math.pow(16,e+1),e++;return n}var o9=s9,pc=o9,a9=1567752802062,l9=7,dc,px;function u9(t){var e="",i=Math.floor((Date.now()-a9)*.001);return i===px?dc++:(dc=0,px=i),e=e+pc(l9),e=e+pc(t),dc>0&&(e=e+pc(dc)),e=e+pc(i),e}var h9=u9,c9=vy;function f9(t){if(!t||typeof t!="string"||t.length<6)return!1;var e=new RegExp("[^"+c9.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!e.test(t)}var p9=f9;(function(t){var e=vy,i=h9,n=p9,r=0;function s(p){return e.seed(p),t.exports}function a(p){return r=p,t.exports}function l(p){return p!==void 0&&e.characters(p),e.shuffled()}function h(){return i(r)}t.exports=h,t.exports.generate=h,t.exports.seed=s,t.exports.worker=a,t.exports.characters=l,t.exports.isValid=n})(MT);var d9=MT.exports,g9=d9;const m9=ln(g9),y9=Object.assign;var fi=function(t){this.signaller=D5(t.server),this.id=t.id||m9.generate(),this.stream=t.stream||null,this._peerOptions=t.peerOptions||{},this._room=t.room,this.settings.shareMediaWhenRequested=!0,this.settings.shareMediaWhenInitiating=!1,this.settings.requestMediaWhenInitiating=!0,this.settings.autoconnect=!1,this.peers={},this.rtcPeers={},this.signaller.on("ready",this._readyForSignalling.bind(this)),this.signaller.on("message",this._handleMessage.bind(this)),this.signaller.on("broadcast",this._receivedBroadcast.bind(this)),this.signaller.emit("join",this._room,{uuid:this.id}),this.signaller.on("new peer",this._newPeer.bind(this))};yT(fi,Mf.EventEmitter);fi.prototype.sendToAll=function(t){Object.keys(this.rtcPeers).forEach(function(e){this.rtcPeers[e].send(t)},this)};fi.prototype.sendToPeer=function(t,e){t in this.rtcPeers&&this.rtcPeers[t].send(e)};fi.prototype.reinitAll=function(){Object.keys(this.rtcPeers).forEach((function(t){this.reinitPeer(t)}).bind(this))};fi.prototype.initRtcPeer=function(t,e){this.emit("new peer",{id:t});var i=e;this.iceServers&&(e.config={iceServers:this.iceServers}),e.initiator===!0?(this.stream!=null&&this.settings.shareMediaWhenInitiating===!0&&(i.stream=this.stream),this.settings.requestMediaWhenInitiating===!0&&(i.offerConstraints={offerToReceiveVideo:!0,offerToReceiveAudio:!0})):this.settings.shareMediaWhenRequested===!0&&this.stream!=null&&(i.stream=this.stream);var n=y9(this._peerOptions,i);this.rtcPeers[t]=new K4(n),this._attachPeerEvents(this.rtcPeers[t],t)};fi.prototype.reinitRtcConnection=function(t,e){this.rtcPeers[t]._destroy(null,(function(i){this.initRtcPeer(t,{stream:this.stream,initiator:!0})}).bind(this))};fi.prototype._newPeer=function(t){this.peers[t]={rtcPeer:null},this.emit("new peer",t)};fi.prototype._readyForSignalling=function({peers:t,servers:e}){t.forEach(i=>{this._newPeer(i)}),e&&(this.iceServers=e),this.emit("ready")};fi.prototype.initConnectionFromId=function(t,e){t in this.rtcPeers?(console.log("Already connected to..",t,this.rtcPeers),this.rtcPeers[t].initiator===!1&&this.reinitRtcConnection(t)):this.initRtcPeer(t,{initiator:!0})};fi.prototype._handleMessage=function(t){t.type==="signal"?this._handleSignal(t):this.emit("message",t)};fi.prototype._handleSignal=function(t){this.rtcPeers[t.id]||this.initRtcPeer(t.id,{initiator:!1}),this.rtcPeers[t.id].signal(t.message)};fi.prototype._receivedBroadcast=function(t){this.emit("broadcast",t)};fi.prototype.broadcast=function(t){this.signaller.emit("broadcast",t)};fi.prototype._attachPeerEvents=function(t,e){t.on("signal",(function(i,n){this.signaller.emit("message",{id:i,message:n,type:"signal"})}).bind(this,e)),t.on("stream",(function(i,n){this.rtcPeers[i].stream=n,this.emit("stream",i,n)}).bind(this,e)),t.on("connect",(function(i){this.emit("connect",i)}).bind(this,e)),t.on("data",(function(i,n){this.emit("data",{id:i,data:JSON.parse(n)})}).bind(this,e)),t.on("close",(function(i){delete this.rtcPeers[i],this.emit("close",i)}).bind(this,e)),t.on("error",function(i){console.warn("simple peer error",i)})};fi.prototype._destroy=function(){Object.values(this.rtcPeers).forEach(function(t){t.destroy()}),this.signaller.close()};var Br=function(){this.session={},this.nickFromId={},this.idFromNick={},this.loadFromStorage()};yT(Br,fi);Br.prototype.init=function(t,e){this.settings={server:e.server||"https://patch-bay.glitch.me/",room:e.room||"patch-bay",stream:t},this.makeGlobal=e.makeGlobal||!0,this.setPageTitle=e.setTitle||!0,this.session.id&&(this.settings.id=this.session.id),fi.call(this,this.settings),this.makeGlobal&&(window.pb=this),this.on("ready",()=>{this.nick||(this.session.nick?this.setName(this.session.nick):(this.session.id=this.id,this.setName(this.session.id)))}),this.on("broadcast",this._processBroadcast.bind(this)),this.on("new peer",this.handleNewPeer.bind(this)),window.onbeforeunload=()=>{this.session.id=window.pb.id,this.session.nick=this.nick,sessionStorage.setItem("pb",JSON.stringify(this.session))};var i=this;this.on("stream",function(n,r){console.log("got stream!",n,r);const s=document.createElement("video");"srcObject"in s?s.srcObject=r:s.src=window.URL.createObjectURL(r),s.addEventListener("loadedmetadata",()=>{s.play(),i.video=s,i.emit("got video",i.nickFromId[n],s)})})};Br.prototype.loadFromStorage=function(){sessionStorage.getItem("pb")!==null&&(this.session=JSON.parse(sessionStorage.getItem("pb")))};Br.prototype.initSource=function(t,e){this.initConnectionFromId(this.idFromNick[t],e)};Br.prototype.handleNewPeer=function(t){this.nickFromId[t]=t,this.idFromNick[t]=t,this.nick&&this.broadcast({type:"update-nick",id:this.id,nick:this.nick})};Br.prototype.list=function(){var t=Object.keys(this.idFromNick);return console.log(t),Object.keys(this.idFromNick)};Br.prototype.setName=function(t){this.broadcast({type:"update-nick",id:this.id,nick:t,previous:this.nick}),this.nick=t,this.setPageTitle&&(document.title=t)};Br.prototype._processBroadcast=function(t){t.type==="update-nick"&&t.previous!==t.nick&&(delete this.idFromNick[this.nickFromId[t.id]],this.nickFromId[t.id]=t.nick,this.idFromNick[t.nick]=t.id,t.previous)};class v9 extends p0{constructor(e,i,n){super(e),this.local=i.components[e]={},i.hydra=this,this.state=i,this.emit=n}load(e){let n=(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream?"highp":"mediump";const r={detectAudio:!0,canvas:e.querySelector("canvas"),precision:n};this.state.serverURL===null?(console.log("LOCAL ONLY, WILL NOT INIT webRTC and gallery"),this.hydra=new Hydra(r)):(this.pb=new Br,r.pb=this.pb,this.hydra=new Hydra(r),this.pb.init(this.hydra.captureStream,{server:this.state.serverURL,room:"iclc"}),window.pb=this.pb),window.hydraSynth=this.hydra,window.P5=tj,this.emit("hydra loaded")}update(e){return!1}createElement({width:e=window.innerWidth,height:i=window.innerHeight}={}){return Yt`<div style="width:100%;height:100%;">
        <canvas id="hydra-canvas" class="bg-black" style="image-rendering:pixelated; width:100%;height:100%" width="${e}" height="${i}"></canvas></div>`}}var vg={exports:{}},dx;function Wa(){return dx||(dx=1,function(t,e){var i=i||{};i.scope={},i.findInternal=function(n,r,s){n instanceof String&&(n=String(n));for(var a=n.length,l=0;l<a;l++){var h=n[l];if(r.call(s,h,l,n))return{i:l,v:h}}return{i:-1,v:void 0}},i.ASSUME_ES5=!1,i.ASSUME_NO_NATIVE_MAP=!1,i.ASSUME_NO_NATIVE_SET=!1,i.SIMPLE_FROUND_POLYFILL=!1,i.ISOLATE_POLYFILLS=!1,i.FORCE_POLYFILL_PROMISE=!1,i.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,i.defineProperty=i.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(n,r,s){return n==Array.prototype||n==Object.prototype||(n[r]=s.value),n},i.getGlobal=function(n){n=[typeof globalThis=="object"&&globalThis,n,typeof window=="object"&&window,typeof self=="object"&&self,typeof bt=="object"&&bt];for(var r=0;r<n.length;++r){var s=n[r];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")},i.global=i.getGlobal(bt),i.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",i.TRUST_ES6_POLYFILLS=!i.ISOLATE_POLYFILLS||i.IS_SYMBOL_NATIVE,i.polyfills={},i.propertyToPolyfillSymbol={},i.POLYFILL_PREFIX="$jscp$",i.polyfill=function(n,r,s,a){r&&(i.ISOLATE_POLYFILLS?i.polyfillIsolated(n,r,s,a):i.polyfillUnisolated(n,r,s,a))},i.polyfillUnisolated=function(n,r,s,a){for(s=i.global,n=n.split("."),a=0;a<n.length-1;a++){var l=n[a];if(!(l in s))return;s=s[l]}n=n[n.length-1],a=s[n],r=r(a),r!=a&&r!=null&&i.defineProperty(s,n,{configurable:!0,writable:!0,value:r})},i.polyfillIsolated=function(n,r,s,a){var l=n.split(".");n=l.length===1,a=l[0],a=!n&&a in i.polyfills?i.polyfills:i.global;for(var h=0;h<l.length-1;h++){var p=l[h];if(!(p in a))return;a=a[p]}l=l[l.length-1],s=i.IS_SYMBOL_NATIVE&&s==="es6"?a[l]:null,r=r(s),r!=null&&(n?i.defineProperty(i.polyfills,l,{configurable:!0,writable:!0,value:r}):r!==s&&(i.propertyToPolyfillSymbol[l]===void 0&&(s=1e9*Math.random()>>>0,i.propertyToPolyfillSymbol[l]=i.IS_SYMBOL_NATIVE?i.global.Symbol(l):i.POLYFILL_PREFIX+s+"$"+l),i.defineProperty(a,i.propertyToPolyfillSymbol[l],{configurable:!0,writable:!0,value:r})))},i.polyfill("Array.prototype.find",function(n){return n||function(r,s){return i.findInternal(this,r,s).v}},"es6","es3"),function(n,r){t.exports=r()}(bt,function(){function n(o){return new RegExp("(^|\\s)"+o+"(?:$|\\s)\\s*")}function r(o){for(var u=o.childNodes.length;0<u;--u)o.removeChild(o.firstChild);return o}function s(o,u){return r(o).appendChild(u)}function a(o,u,f,c){if(o=document.createElement(o),f&&(o.className=f),c&&(o.style.cssText=c),typeof u=="string")o.appendChild(document.createTextNode(u));else if(u)for(f=0;f<u.length;++f)o.appendChild(u[f]);return o}function l(o,u,f,c){return o=a(o,u,f,c),o.setAttribute("role","presentation"),o}function h(o,u){if(u.nodeType==3&&(u=u.parentNode),o.contains)return o.contains(u);do if(u.nodeType==11&&(u=u.host),u==o)return!0;while(u=u.parentNode)}function p(o){try{var u=o.activeElement}catch{u=o.body||null}for(;u&&u.shadowRoot&&u.shadowRoot.activeElement;)u=u.shadowRoot.activeElement;return u}function d(o,u){var f=o.className;n(u).test(f)||(o.className+=(f?" ":"")+u)}function m(o,u){o=o.split(" ");for(var f=0;f<o.length;f++)o[f]&&!n(o[f]).test(u)&&(u+=" "+o[f]);return u}function y(o){return o.display.wrapper.ownerDocument}function v(o){var u=Array.prototype.slice.call(arguments,1);return function(){return o.apply(null,u)}}function S(o,u,f){u||(u={});for(var c in o)!o.hasOwnProperty(c)||f===!1&&u.hasOwnProperty(c)||(u[c]=o[c]);return u}function M(o,u,f,c,g){for(u==null&&(u=o.search(/[^\s\u00a0]/),u==-1&&(u=o.length)),c=c||0,g=g||0;;){var _=o.indexOf("	",c);if(0>_||_>=u)return g+(u-c);g+=_-c,g+=f-g%f,c=_+1}}function b(o,u){for(var f=0;f<o.length;++f)if(o[f]==u)return f;return-1}function w(o,u,f){for(var c=0,g=0;;){var _=o.indexOf("	",c);_==-1&&(_=o.length);var x=_-c;if(_==o.length||g+x>=u)return c+Math.min(x,u-g);if(g+=_-c,g+=f-g%f,c=_+1,g>=u)return c}}function E(o){for(;wh.length<=o;)wh.push(B(wh)+" ");return wh[o]}function B(o){return o[o.length-1]}function L(o,u){for(var f=[],c=0;c<o.length;c++)f[c]=u(o[c],c);return f}function I(o,u,f){for(var c=0,g=f(u);c<o.length&&f(o[c])<=g;)c++;o.splice(c,0,u)}function O(){}function F(o,u){return Object.create?o=Object.create(o):(O.prototype=o,o=new O),u&&S(u,o),o}function U(o){return/\w/.test(o)||""<o&&(o.toUpperCase()!=o.toLowerCase()||qE.test(o))}function V(o,u){return u?-1<u.source.indexOf("\\w")&&U(o)?!0:u.test(o):U(o)}function A(o){for(var u in o)if(o.hasOwnProperty(u)&&o[u])return!1;return!0}function Q(o){return 768<=o.charCodeAt(0)&&XE.test(o)}function H(o,u,f){for(;(0>f?0<u:u<o.length)&&Q(o.charAt(u));)u+=f;return u}function re(o,u,f){for(var c=u>f?-1:1;;){if(u==f)return u;var g=(u+f)/2;if(g=0>c?Math.ceil(g):Math.floor(g),g==u)return o(g)?u:f;o(g)?f=g:u=g+c}}function le(o,u,f,c){if(!o)return c(u,f,"ltr",0);for(var g=!1,_=0;_<o.length;++_){var x=o[_];(x.from<f&&x.to>u||u==f&&x.to==u)&&(c(Math.max(x.from,u),Math.min(x.to,f),x.level==1?"rtl":"ltr",_),g=!0)}g||c(u,f,"ltr")}function q(o,u,f){var c;vl=null;for(var g=0;g<o.length;++g){var _=o[g];if(_.from<u&&_.to>u)return g;_.to==u&&(_.from!=_.to&&f=="before"?c=g:vl=g),_.from==u&&(_.from!=_.to&&f!="before"?c=g:vl=g)}return c??vl}function Z(o,u){var f=o.order;return f==null&&(f=o.order=eA(o.text,u)),f}function W(o,u,f){if(o.removeEventListener)o.removeEventListener(u,f,!1);else if(o.detachEvent)o.detachEvent("on"+u,f);else{var c=(o=o._handlers)&&o[u];c&&(f=b(c,f),-1<f&&(o[u]=c.slice(0,f).concat(c.slice(f+1))))}}function $(o,u){var f=o._handlers&&o._handlers[u]||_h;if(f.length)for(var c=Array.prototype.slice.call(arguments,2),g=0;g<f.length;++g)f[g].apply(null,c)}function ne(o,u,f){return typeof u=="string"&&(u={type:u,preventDefault:function(){this.defaultPrevented=!0}}),$(o,f||u.type,o,u),Ze(u)||u.codemirrorIgnore}function we(o){var u=o._handlers&&o._handlers.cursorActivity;if(u){o=o.curOp.cursorActivityHandlers||(o.curOp.cursorActivityHandlers=[]);for(var f=0;f<u.length;++f)b(o,u[f])==-1&&o.push(u[f])}}function ye(o,u){return 0<(o._handlers&&o._handlers[u]||_h).length}function xe(o){o.prototype.on=function(u,f){Ue(this,u,f)},o.prototype.off=function(u,f){W(this,u,f)}}function Se(o){o.preventDefault?o.preventDefault():o.returnValue=!1}function Re(o){o.stopPropagation?o.stopPropagation():o.cancelBubble=!0}function Ze(o){return o.defaultPrevented!=null?o.defaultPrevented:o.returnValue==0}function se(o){Se(o),Re(o)}function oe(o){var u=o.which;return u==null&&(o.button&1?u=1:o.button&2?u=3:o.button&4&&(u=2)),hn&&o.ctrlKey&&u==1&&(u=3),u}function ve(o,u){2<arguments.length&&(u.dependencies=Array.prototype.slice.call(arguments,2)),Wp[o]=u}function ke(o){if(typeof o=="string"&&Do.hasOwnProperty(o))o=Do[o];else if(o&&typeof o.name=="string"&&Do.hasOwnProperty(o.name)){var u=Do[o.name];typeof u=="string"&&(u={name:u}),o=F(u,o),o.name=u.name}else{if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(o))return ke("application/xml");if(typeof o=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(o))return ke("application/json")}return typeof o=="string"?{name:o}:o||{name:"null"}}function Fe(o,u){u=ke(u);var f=Wp[u.name];if(!f)return Fe(o,"text/plain");if(o=f(o,u),Bo.hasOwnProperty(u.name)){f=Bo[u.name];for(var c in f)f.hasOwnProperty(c)&&(o.hasOwnProperty(c)&&(o["_"+c]=o[c]),o[c]=f[c])}if(o.name=u.name,u.helperType&&(o.helperType=u.helperType),u.modeProps)for(var g in u.modeProps)o[g]=u.modeProps[g];return o}function z(o,u){o=Bo.hasOwnProperty(o)?Bo[o]:Bo[o]={},S(u,o)}function K(o,u){if(u===!0)return u;if(o.copyState)return o.copyState(u);o={};for(var f in u){var c=u[f];c instanceof Array&&(c=c.concat([])),o[f]=c}return o}function ge(o,u){for(var f;o.innerMode&&(f=o.innerMode(u),!(!f||f.mode==o));)u=f.state,o=f.mode;return f||{mode:o,state:u}}function be(o,u,f){return o.startState?o.startState(u,f):!0}function me(o,u){if(u-=o.first,0>u||u>=o.size)throw Error("There is no line "+(u+o.first)+" in the document.");for(;!o.lines;)for(var f=0;;++f){var c=o.children[f],g=c.chunkSize();if(u<g){o=c;break}u-=g}return o.lines[u]}function Je(o,u,f){var c=[],g=u.line;return o.iter(u.line,f.line+1,function(_){_=_.text,g==f.line&&(_=_.slice(0,f.ch)),g==u.line&&(_=_.slice(u.ch)),c.push(_),++g}),c}function He(o,u,f){var c=[];return o.iter(u,f,function(g){c.push(g.text)}),c}function kt(o,u){if(u-=o.height)for(;o;o=o.parent)o.height+=u}function Qe(o){if(o.parent==null)return null;var u=o.parent;o=b(u.lines,o);for(var f=u.parent;f;u=f,f=f.parent)for(var c=0;f.children[c]!=u;++c)o+=f.children[c].chunkSize();return o+u.first}function pi(o,u){var f=o.first;e:do{for(var c=0;c<o.children.length;++c){var g=o.children[c],_=g.height;if(u<_){o=g;continue e}u-=_,f+=g.chunkSize()}return f}while(!o.lines);for(c=0;c<o.lines.length&&(g=o.lines[c].height,!(u<g));++c)u-=g;return f+c}function Ji(o,u){return u>=o.first&&u<o.first+o.size}function je(o,u){return String(o.lineNumberFormatter(u+o.firstLineNumber))}function pe(o,u,f){if(f===void 0&&(f=null),!(this instanceof pe))return new pe(o,u,f);this.line=o,this.ch=u,this.sticky=f}function Ie(o,u){return o.line-u.line||o.ch-u.ch}function Bt(o,u){return o.sticky==u.sticky&&Ie(o,u)==0}function ki(o){return pe(o.line,o.ch)}function J(o,u){return 0>Ie(o,u)?u:o}function k(o,u){return 0>Ie(o,u)?o:u}function T(o,u){if(u.line<o.first)return pe(o.first,0);var f=o.first+o.size-1;return u.line>f?pe(f,me(o,f).text.length):(o=me(o,u.line).text.length,f=u.ch,u=f==null||f>o?pe(u.line,o):0>f?pe(u.line,0):u,u)}function G(o,u){for(var f=[],c=0;c<u.length;c++)f[c]=T(o,u[c]);return f}function ie(o,u,f,c){var g=[o.state.modeGen],_={};za(o,u.text,o.doc.mode,f,function(R,D){return g.push(R,D)},_,c);var x=f.state;c=function(R){f.baseTokens=g;var D=o.state.overlays[R],j=1,X=0;f.state=!0,za(o,u.text,D.mode,f,function(ee,te){for(var ce=j;X<ee;){var Ce=g[j];Ce>ee&&g.splice(j,1,ee,g[j+1],Ce),j+=2,X=Math.min(ee,Ce)}if(te)if(D.opaque)g.splice(ce,j-ce,ee,"overlay "+te),j=ce+2;else for(;ce<j;ce+=2)ee=g[ce+1],g[ce+1]=(ee?ee+" ":"")+"overlay "+te},_),f.state=x,f.baseTokens=null,f.baseTokenPos=1};for(var C=0;C<o.state.overlays.length;++C)c(C);return{styles:g,classes:_.bgClass||_.textClass?_:null}}function ae(o,u,f){if(!u.styles||u.styles[0]!=o.state.modeGen){var c=fe(o,Qe(u)),g=u.text.length>o.options.maxHighlightLength&&K(o.doc.mode,c.state),_=ie(o,u,c);g&&(c.state=g),u.stateAfter=c.save(!g),u.styles=_.styles,_.classes?u.styleClasses=_.classes:u.styleClasses&&(u.styleClasses=null),f===o.doc.highlightFrontier&&(o.doc.modeFrontier=Math.max(o.doc.modeFrontier,++o.doc.highlightFrontier))}return u.styles}function fe(o,u,f){var c=o.doc,g=o.display;if(!c.mode.startState)return new Qn(c,!0,u);var _=Wu(o,u,f),x=_>c.first&&me(c,_-1).stateAfter,C=x?Qn.fromSaved(c,x,_):new Qn(c,be(c.mode),_);return c.iter(_,u,function(R){Be(o,R.text,C);var D=C.line;R.stateAfter=D==u-1||D%5==0||D>=g.viewFrom&&D<g.viewTo?C.save():null,C.nextLine()}),f&&(c.modeFrontier=C.line),C}function Be(o,u,f,c){var g=o.doc.mode;for(o=new Wt(u,o.options.tabSize,f),o.start=o.pos=c||0,u==""&&vt(g,f.state);!o.eol();)gt(g,o,f.state),o.start=o.pos}function vt(o,u){if(o.blankLine)return o.blankLine(u);if(o.innerMode&&(o=ge(o,u),o.mode.blankLine))return o.mode.blankLine(o.state)}function gt(o,u,f,c){for(var g=0;10>g;g++){c&&(c[0]=ge(o,f).mode);var _=o.token(u,f);if(u.pos>u.start)return _}throw Error("Mode "+o.name+" failed to advance stream.")}function it(o,u,f,c){var g=o.doc,_=g.mode;u=T(g,u);var x=me(g,u.line);f=fe(o,u.line,f),o=new Wt(x.text,o.options.tabSize,f);var C;for(c&&(C=[]);(c||o.pos<u.ch)&&!o.eol();){o.start=o.pos;var R=gt(_,o,f.state);c&&C.push(new Qv(o,R,K(g.mode,f.state)))}return c?C:new Qv(o,R,f.state)}function ot(o,u){if(o)for(;;){var f=o.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!f)break;o=o.slice(0,f.index)+o.slice(f.index+f[0].length);var c=f[1]?"bgClass":"textClass";u[c]==null?u[c]=f[2]:new RegExp("(?:^|\\s)"+f[2]+"(?:$|\\s)").test(u[c])||(u[c]+=" "+f[2])}return o}function za(o,u,f,c,g,_,x){var C=f.flattenSpans;C==null&&(C=o.options.flattenSpans);var R=0,D=null,j=new Wt(u,o.options.tabSize,c),X=o.options.addModeClass&&[null];for(u==""&&ot(vt(f,c.state),_);!j.eol();){if(j.pos>o.options.maxHighlightLength){C=!1,x&&Be(o,u,c,j.pos),j.pos=u.length;var ee=null}else ee=ot(gt(f,j,c.state,X),_);if(X){var te=X[0].name;te&&(ee="m-"+(ee?te+" "+ee:te))}if(!C||D!=ee){for(;R<j.start;)R=Math.min(j.start,R+5e3),g(R,D);D=ee}j.start=j.pos}for(;R<j.pos;)o=Math.min(j.pos,R+5e3),g(o,D),R=o}function Wu(o,u,f){for(var c,g,_=o.doc,x=f?-1:u-(o.doc.mode.innerMode?1e3:100);u>x;--u){if(u<=_.first)return _.first;var C=me(_,u-1),R=C.stateAfter;if(R&&(!f||u+(R instanceof bh?R.lookAhead:0)<=_.modeFrontier))return u;C=M(C.text,null,o.options.tabSize),(g==null||c>C)&&(g=u-1,c=C)}return g}function op(o,u){if(o.modeFrontier=Math.min(o.modeFrontier,u),!(o.highlightFrontier<u-10)){for(var f=o.first,c=u-1;c>f;c--){var g=me(o,c).stateAfter;if(g&&(!(g instanceof bh)||c+g.lookAhead<u)){f=c+1;break}}o.highlightFrontier=Math.min(o.highlightFrontier,f)}}function Tn(o,u,f){this.marker=o,this.from=u,this.to=f}function Pi(o,u){if(o)for(var f=0;f<o.length;++f){var c=o[f];if(c.marker==u)return c}}function Kn(o,u){if(u.full)return null;var f=Ji(o,u.from.line)&&me(o,u.from.line).markedSpans,c=Ji(o,u.to.line)&&me(o,u.to.line).markedSpans;if(!f&&!c)return null;o=u.from.ch;var g=u.to.ch,_=Ie(u.from,u.to)==0,x;if(f)for(var C=0;C<f.length;++C){var R=f[C],D=R.marker;if(R.from==null||(D.inclusiveLeft?R.from<=o:R.from<o)||!(R.from!=o||D.type!="bookmark"||_&&R.marker.insertLeft)){var j=R.to==null||(D.inclusiveRight?R.to>=o:R.to>o);(x||(x=[])).push(new Tn(D,R.from,j?null:R.to))}}f=x;var X;if(c)for(x=0;x<c.length;++x)C=c[x],R=C.marker,(C.to==null||(R.inclusiveRight?C.to>=g:C.to>g)||C.from==g&&R.type=="bookmark"&&(!_||C.marker.insertLeft))&&(D=C.from==null||(R.inclusiveLeft?C.from<=g:C.from<g),(X||(X=[])).push(new Tn(R,D?null:C.from-g,C.to==null?null:C.to-g)));if(c=u.text.length==1,g=B(u.text).length+(c?o:0),f)for(_=0;_<f.length;++_)x=f[_],x.to==null&&(C=Pi(X,x.marker),C?c&&(x.to=C.to==null?null:C.to+g):x.to=o);if(X)for(o=0;o<X.length;++o)_=X[o],_.to!=null&&(_.to+=g),_.from==null?Pi(f,_.marker)||(_.from=g,c&&(f||(f=[])).push(_)):(_.from+=g,c&&(f||(f=[])).push(_));if(f&&(f=Ha(f)),X&&X!=f&&(X=Ha(X)),o=[f],!c){u=u.text.length-2;var ee;if(0<u&&f)for(c=0;c<f.length;++c)f[c].to==null&&(ee||(ee=[])).push(new Tn(f[c].marker,null,null));for(f=0;f<u;++f)o.push(ee);o.push(X)}return o}function Ha(o){for(var u=0;u<o.length;++u){var f=o[u];f.from!=null&&f.from==f.to&&f.marker.clearWhenEmpty!==!1&&o.splice(u--,1)}return o.length?o:null}function xr(o,u,f){var c=null;if(o.iter(u.line,f.line+1,function(j){if(j.markedSpans)for(var X=0;X<j.markedSpans.length;++X){var ee=j.markedSpans[X].marker;!ee.readOnly||c&&b(c,ee)!=-1||(c||(c=[])).push(ee)}}),!c)return null;for(o=[{from:u,to:f}],u=0;u<c.length;++u){f=c[u];for(var g=f.find(0),_=0;_<o.length;++_){var x=o[_];if(!(0>Ie(x.to,g.from)||0<Ie(x.from,g.to))){var C=[_,1],R=Ie(x.from,g.from),D=Ie(x.to,g.to);(0>R||!f.inclusiveLeft&&!R)&&C.push({from:x.from,to:g.from}),(0<D||!f.inclusiveRight&&!D)&&C.push({from:g.to,to:x.to}),o.splice.apply(o,C),_+=C.length-3}}}return o}function Gu(o){var u=o.markedSpans;if(u){for(var f=0;f<u.length;++f)u[f].marker.detachLine(o);o.markedSpans=null}}function Qa(o,u){if(u){for(var f=0;f<u.length;++f)u[f].marker.attachLine(o);o.markedSpans=u}}function Pr(o,u){var f=o.lines.length-u.lines.length;if(f!=0)return f;f=o.find();var c=u.find(),g=Ie(f.from,c.from)||(o.inclusiveLeft?-1:0)-(u.inclusiveLeft?-1:0);return g?-g:(f=Ie(f.to,c.to)||(o.inclusiveRight?1:0)-(u.inclusiveRight?1:0))?f:u.id-o.id}function di(o,u){if(o=Mr&&o.markedSpans,o){for(var f,c=0;c<o.length;++c)if(f=o[c],f.marker.collapsed&&(u?f.from:f.to)==null&&(!g||0>Pr(g,f.marker)))var g=f.marker}return g}function Ls(o,u,f,c,g){if(o=me(o,u),o=Mr&&o.markedSpans)for(u=0;u<o.length;++u){var _=o[u];if(_.marker.collapsed){var x=_.marker.find(0),C=Ie(x.from,f)||(_.marker.inclusiveLeft?-1:0)-(g.inclusiveLeft?-1:0),R=Ie(x.to,c)||(_.marker.inclusiveRight?1:0)-(g.inclusiveRight?1:0);if(!(0<=C&&0>=R||0>=C&&0<=R)&&(0>=C&&(_.marker.inclusiveRight&&g.inclusiveLeft?0<=Ie(x.to,f):0<Ie(x.to,f))||0<=C&&(_.marker.inclusiveRight&&g.inclusiveLeft?0>=Ie(x.from,c):0>Ie(x.from,c))))return!0}}}function Zi(o){for(var u;u=di(o,!0);)o=u.find(-1,!0).line;return o}function wo(o,u){o=me(o,u);var f=Zi(o);return o==f?u:Qe(f)}function Vu(o,u){if(u>o.lastLine())return u;var f=me(o,u);if(!qi(o,f))return u;for(;o=di(f,!1);)f=o.find(1,!0).line;return Qe(f)+1}function qi(o,u){var f=Mr&&u.markedSpans;if(f){for(var c,g=0;g<f.length;++g)if(c=f[g],c.marker.collapsed&&(c.from==null||!c.marker.widgetNode&&c.from==0&&c.marker.inclusiveLeft&&_o(o,u,c)))return!0}}function _o(o,u,f){if(f.to==null)return u=f.marker.find(1,!0),_o(o,u.line,Pi(u.line.markedSpans,f.marker));if(f.marker.inclusiveRight&&f.to==u.text.length)return!0;for(var c,g=0;g<u.markedSpans.length;++g)if(c=u.markedSpans[g],c.marker.collapsed&&!c.marker.widgetNode&&c.from==f.to&&(c.to==null||c.to!=f.from)&&(c.marker.inclusiveLeft||f.marker.inclusiveRight)&&_o(o,u,c))return!0}function un(o){o=Zi(o);for(var u=0,f=o.parent,c=0;c<f.lines.length;++c){var g=f.lines[c];if(g==o)break;u+=g.height}for(o=f.parent;o;f=o,o=f.parent)for(c=0;c<o.children.length&&(g=o.children[c],g!=f);++c)u+=g.height;return u}function Fr(o){if(o.height==0)return 0;for(var u=o.text.length,f,c=o;f=di(c,!0);)f=f.find(0,!0),c=f.from.line,u+=f.from.ch-f.to.ch;for(c=o;f=di(c,!1);)o=f.find(0,!0),u-=c.text.length-o.from.ch,c=o.to.line,u+=c.text.length-o.to.ch;return u}function Ya(o){var u=o.display;o=o.doc,u.maxLine=me(o,o.first),u.maxLineLength=Fr(u.maxLine),u.maxLineChanged=!0,o.iter(function(f){var c=Fr(f);c>u.maxLineLength&&(u.maxLineLength=c,u.maxLine=f)})}function $a(o,u){return!o||/^\s*$/.test(o)?null:(u=u.addModeClass?sA:rA,u[o]||(u[o]=o.replace(/\S+/g,"cm-$&")))}function Ku(o,u){var f=l("span",null,null,mi?"padding-right: .1px":null);f={pre:l("pre",[f],"CodeMirror-line"),content:f,col:0,pos:0,cm:o,trailingSpace:!1,splitSpaces:o.getOption("lineWrapping")},u.measure={};for(var c=0;c<=(u.rest?u.rest.length:0);c++){var g=c?u.rest[c-1]:u.line,_=void 0;f.pos=0,f.addToken=jr;var x=o.display.measure;if(Pp!=null)x=Pp;else{var C=s(x,document.createTextNode("AخA")),R=gl(C,0,1).getBoundingClientRect();C=gl(C,1,2).getBoundingClientRect(),r(x),x=R&&R.left!=R.right?Pp=3>C.right-R.right:!1}x&&(_=Z(g,o.doc.direction))&&(f.addToken=Hu(f.addToken,_)),f.map=[];var D=u!=o.display.externalMeasured&&Qe(g);e:{var j=C=R=x=void 0,X=void 0,ee=void 0,te=void 0;_=f,D=ae(o,g,D);var ce=g.markedSpans,Ce=g.text,Pe=0;if(ce)for(var zt=Ce.length,Le=0,yt=1,ft="",wt=0;;){if(wt==Le){X=j=C=ee="",R=x=null,wt=1/0;for(var Ct=[],Ke=void 0,_t=0;_t<ce.length;++_t){var rt=ce[_t],pt=rt.marker;if(pt.type=="bookmark"&&rt.from==Le&&pt.widgetNode)Ct.push(pt);else if(rt.from<=Le&&(rt.to==null||rt.to>Le||pt.collapsed&&rt.to==Le&&rt.from==Le)){if(rt.to!=null&&rt.to!=Le&&wt>rt.to&&(wt=rt.to,j=""),pt.className&&(X+=" "+pt.className),pt.css&&(ee=(ee?ee+";":"")+pt.css),pt.startStyle&&rt.from==Le&&(C+=" "+pt.startStyle),pt.endStyle&&rt.to==wt&&(Ke||(Ke=[])).push(pt.endStyle,rt.to),pt.title&&((x||(x={})).title=pt.title),pt.attributes)for(var yi in pt.attributes)(x||(x={}))[yi]=pt.attributes[yi];pt.collapsed&&(!R||0>Pr(R.marker,pt))&&(R=rt)}else rt.from>Le&&wt>rt.from&&(wt=rt.from)}if(Ke)for(_t=0;_t<Ke.length;_t+=2)Ke[_t+1]==wt&&(j+=" "+Ke[_t]);if(!R||R.from==Le)for(Ke=0;Ke<Ct.length;++Ke)Os(_,0,Ct[Ke]);if(R&&(R.from||0)==Le){if(Os(_,(R.to==null?zt+1:R.to)-Le,R.marker,R.from==null),R.to==null)break e;R.to==Le&&(R=!1)}}if(Le>=zt)break;for(Ct=Math.min(zt,wt);;){if(ft){if(Ke=Le+ft.length,R||(_t=Ke>Ct?ft.slice(0,Ct-Le):ft,_.addToken(_,_t,te?te+X:X,C,Le+_t.length==wt?j:"",ee,x)),Ke>=Ct){ft=ft.slice(Ct-Le),Le=Ct;break}Le=Ke,C=""}ft=Ce.slice(Pe,Pe=D[yt++]),te=$a(D[yt++],_.cm.options)}}else for(x=1;x<D.length;x+=2)_.addToken(_,Ce.slice(Pe,Pe=D[x]),$a(D[x+1],_.cm.options))}g.styleClasses&&(g.styleClasses.bgClass&&(f.bgClass=m(g.styleClasses.bgClass,f.bgClass||"")),g.styleClasses.textClass&&(f.textClass=m(g.styleClasses.textClass,f.textClass||""))),f.map.length==0&&(g=f.map,_=g.push,x=f.content,R=x.appendChild,C=o.display.measure,Jp==null&&(j=a("span","​"),s(C,a("span",[j,document.createTextNode("x")])),C.firstChild.offsetHeight!=0&&(Jp=1>=j.offsetWidth&&2<j.offsetHeight&&!(nt&&8>Tt))),C=Jp?a("span","​"):a("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px"),C.setAttribute("cm-text",""),_.call(g,0,0,R.call(x,C))),c==0?(u.measure.map=f.map,u.measure.cache={}):((u.measure.maps||(u.measure.maps=[])).push(f.map),(u.measure.caches||(u.measure.caches=[])).push({}))}return mi&&(yi=f.content.lastChild,/\bcm-tab\b/.test(yi.className)||yi.querySelector&&yi.querySelector(".cm-tab"))&&(f.content.className="cm-tab-wrap-hack"),$(o,"renderLine",o,u.line,f.pre),f.pre.className&&(f.textClass=m(f.pre.className,f.textClass||"")),f}function zu(o){var u=a("span","•","cm-invalidchar");return u.title="\\u"+o.charCodeAt(0).toString(16),u.setAttribute("aria-label",u.title),u}function jr(o,u,f,c,g,_,x){if(u){if(o.splitSpaces){var C=o.trailingSpace;if(1<u.length&&!/  /.test(u))C=u;else{for(var R="",D=0;D<u.length;D++){var j=u.charAt(D);j!=" "||!C||D!=u.length-1&&u.charCodeAt(D+1)!=32||(j=" "),R+=j,C=j==" "}C=R}}else C=u;if(R=C,D=o.cm.state.specialChars,j=!1,D.test(u)){C=document.createDocumentFragment();for(var X=0;;){D.lastIndex=X;var ee=D.exec(u),te=ee?ee.index-X:u.length-X;if(te){var ce=document.createTextNode(R.slice(X,X+te));nt&&9>Tt?C.appendChild(a("span",[ce])):C.appendChild(ce),o.map.push(o.pos,o.pos+te,ce),o.col+=te,o.pos+=te}if(!ee)break;X+=te+1,ee[0]=="	"?(ee=o.cm.options.tabSize,ee-=o.col%ee,te=C.appendChild(a("span",E(ee),"cm-tab")),te.setAttribute("role","presentation"),te.setAttribute("cm-text","	"),o.col+=ee):(ee[0]=="\r"||ee[0]==`
`?(te=C.appendChild(a("span",ee[0]=="\r"?"␍":"␤","cm-invalidchar")),te.setAttribute("cm-text",ee[0])):(te=o.cm.options.specialCharPlaceholder(ee[0]),te.setAttribute("cm-text",ee[0]),nt&&9>Tt?C.appendChild(a("span",[te])):C.appendChild(te)),o.col+=1),o.map.push(o.pos,o.pos+1,te),o.pos++}}else o.col+=u.length,C=document.createTextNode(R),o.map.push(o.pos,o.pos+u.length,C),nt&&9>Tt&&(j=!0),o.pos+=u.length;if(o.trailingSpace=R.charCodeAt(u.length-1)==32,f||c||g||j||_||x){if(u=f||"",c&&(u+=c),g&&(u+=g),c=a("span",[C],u,_),x)for(var Ce in x)x.hasOwnProperty(Ce)&&Ce!="style"&&Ce!="class"&&c.setAttribute(Ce,x[Ce]);return o.content.appendChild(c)}o.content.appendChild(C)}}function Hu(o,u){return function(f,c,g,_,x,C,R){g=g?g+" cm-force-border":"cm-force-border";for(var D=f.pos,j=D+c.length;;){for(var X=void 0,ee=0;ee<u.length&&(X=u[ee],!(X.to>D&&X.from<=D));ee++);if(X.to>=j)return o(f,c,g,_,x,C,R);o(f,c.slice(0,X.to-D),g,_,null,C,R),_=null,c=c.slice(X.to-D),D=X.to}}}function Os(o,u,f,c){var g=!c&&f.widgetNode;g&&o.map.push(o.pos,o.pos+u,g),!c&&o.cm.display.input.needsContentAttribute&&(g||(g=o.content.appendChild(document.createElement("span"))),g.setAttribute("cm-marker",f.id)),g&&(o.cm.display.input.setUneditable(g),o.content.appendChild(g)),o.pos+=u,o.trailingSpace=!1}function zn(o,u,f){for(var c=this.line=u,g;c=di(c,!1);)c=c.find(1,!0).line,(g||(g=[])).push(c);this.size=(this.rest=g)?Qe(B(this.rest))-f+1:1,this.node=this.text=null,this.hidden=qi(o,u)}function Is(o,u,f){var c=[],g;for(g=u;g<f;)u=new zn(o.doc,me(o.doc,g),g),g+=u.size,c.push(u);return c}function St(o,u){if(o=o.ownsGroup)try{var f=o.delayedCallbacks,c=0;do{for(;c<f.length;c++)f[c].call(null);for(var g=0;g<o.ops.length;g++){var _=o.ops[g];if(_.cursorActivityHandlers)for(;_.cursorActivityCalled<_.cursorActivityHandlers.length;)_.cursorActivityHandlers[_.cursorActivityCalled++].call(null,_.cm)}}while(c<f.length)}finally{Jo=null,u(o)}}function Ot(o,u){var f=o._handlers&&o._handlers[u]||_h;if(f.length){var c=Array.prototype.slice.call(arguments,2);if(Jo)var g=Jo.delayedCallbacks;else wl?g=wl:(g=wl=[],setTimeout(Qu,0));for(var _=function(C){g.push(function(){return f[C].apply(null,c)})},x=0;x<f.length;++x)_(x)}}function Qu(){var o=wl;wl=null;for(var u=0;u<o.length;++u)o[u]()}function Za(o,u,f,c){for(var g=0;g<u.changes.length;g++){var _=u.changes[g];if(_=="text"){_=o;var x=u,C=x.text.className,R=Wr(_,x);x.text==x.node&&(x.node=R.pre),x.text.parentNode.replaceChild(R.pre,x.text),x.text=R.pre,R.bgClass!=x.bgClass||R.textClass!=x.textClass?(x.bgClass=R.bgClass,x.textClass=R.textClass,Gr(_,x)):C&&(x.text.className=C)}else if(_=="gutter")Yu(o,u,f,c);else if(_=="class")Gr(o,u);else if(_=="widget"){_=o,x=u,C=c,x.alignable&&(x.alignable=null),R=n("CodeMirror-linewidget");for(var D=x.node.firstChild,j;D;D=j)j=D.nextSibling,R.test(D.className)&&x.node.removeChild(D);Vr(_,x,C)}}u.changes=null}function Ns(o){return o.node==o.text&&(o.node=a("div",null,null,"position: relative"),o.text.parentNode&&o.text.parentNode.replaceChild(o.node,o.text),o.node.appendChild(o.text),nt&&8>Tt&&(o.node.style.zIndex=2)),o.node}function Wr(o,u){var f=o.display.externalMeasured;return f&&f.line==u.line?(o.display.externalMeasured=null,u.measure=f.measure,f.built):Ku(o,u)}function Gr(o,u){var f=u.bgClass?u.bgClass+" "+(u.line.bgClass||""):u.line.bgClass;if(f&&(f+=" CodeMirror-linebackground"),u.background)f?u.background.className=f:(u.background.parentNode.removeChild(u.background),u.background=null);else if(f){var c=Ns(u);u.background=c.insertBefore(a("div",null,f),c.firstChild),o.display.input.setUneditable(u.background)}u.line.wrapClass?Ns(u).className=u.line.wrapClass:u.node!=u.text&&(u.node.className=""),u.text.className=(u.textClass?u.textClass+" "+(u.line.textClass||""):u.line.textClass)||""}function Yu(o,u,f,c){if(u.gutter&&(u.node.removeChild(u.gutter),u.gutter=null),u.gutterBackground&&(u.node.removeChild(u.gutterBackground),u.gutterBackground=null),u.line.gutterClass){var g=Ns(u);u.gutterBackground=a("div",null,"CodeMirror-gutter-background "+u.line.gutterClass,"left: "+(o.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px; width: "+c.gutterTotalWidth+"px"),o.display.input.setUneditable(u.gutterBackground),g.insertBefore(u.gutterBackground,u.text)}if(g=u.line.gutterMarkers,o.options.lineNumbers||g){var _=Ns(u),x=u.gutter=a("div",null,"CodeMirror-gutter-wrapper","left: "+(o.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px");if(x.setAttribute("aria-hidden","true"),o.display.input.setUneditable(x),_.insertBefore(x,u.text),u.line.gutterClass&&(x.className+=" "+u.line.gutterClass),!o.options.lineNumbers||g&&g["CodeMirror-linenumbers"]||(u.lineNumber=x.appendChild(a("div",je(o.options,f),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+c.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+o.display.lineNumInnerWidth+"px"))),g)for(u=0;u<o.display.gutterSpecs.length;++u)f=o.display.gutterSpecs[u].className,(_=g.hasOwnProperty(f)&&g[f])&&x.appendChild(a("div",[_],"CodeMirror-gutter-elt","left: "+c.gutterLeft[f]+"px; width: "+c.gutterWidth[f]+"px"))}}function qa(o,u,f,c){var g=Wr(o,u);return u.text=u.node=g.pre,g.bgClass&&(u.bgClass=g.bgClass),g.textClass&&(u.textClass=g.textClass),Gr(o,u),Yu(o,u,f,c),Vr(o,u,c),u.node}function Vr(o,u,f){if($u(o,u.line,u,f,!0),u.rest)for(var c=0;c<u.rest.length;c++)$u(o,u.rest[c],u,f,!1)}function $u(o,u,f,c,g){if(u.widgets){var _=Ns(f),x=0;for(u=u.widgets;x<u.length;++x){var C=u[x],R=a("div",[C.node],"CodeMirror-linewidget"+(C.className?" "+C.className:""));C.handleMouseEvents||R.setAttribute("cm-ignore-events","true");var D=C,j=R,X=c;if(D.noHScroll){(f.alignable||(f.alignable=[])).push(j);var ee=X.wrapperWidth;j.style.left=X.fixedPos+"px",D.coverGutter||(ee-=X.gutterTotalWidth,j.style.paddingLeft=X.gutterTotalWidth+"px"),j.style.width=ee+"px"}D.coverGutter&&(j.style.zIndex=5,j.style.position="relative",D.noHScroll||(j.style.marginLeft=-X.gutterTotalWidth+"px")),o.display.input.setUneditable(R),g&&C.above?_.insertBefore(R,f.gutter||f.text):_.appendChild(R),Ot(C,"redraw")}}}function N(o){if(o.height!=null)return o.height;var u=o.doc.cm;if(!u)return 0;if(!h(document.body,o.node)){var f="position: relative;";o.coverGutter&&(f+="margin-left: -"+u.display.gutters.offsetWidth+"px;"),o.noHScroll&&(f+="width: "+u.display.wrapper.clientWidth+"px;"),s(u.display.measure,a("div",[o.node],null,f))}return o.height=o.node.parentNode.offsetHeight}function Y(o,u){for(u=u.target||u.srcElement;u!=o.wrapper;u=u.parentNode)if(!u||u.nodeType==1&&u.getAttribute("cm-ignore-events")=="true"||u.parentNode==o.sizer&&u!=o.mover)return!0}function ue(o){return o.mover.offsetHeight-o.lineSpace.offsetHeight}function _e(o){if(o.cachedPaddingH)return o.cachedPaddingH;var u=s(o.measure,a("pre","x","CodeMirror-line-like"));return u=window.getComputedStyle?window.getComputedStyle(u):u.currentStyle,u={left:parseInt(u.paddingLeft),right:parseInt(u.paddingRight)},isNaN(u.left)||isNaN(u.right)||(o.cachedPaddingH=u),u}function De(o){return 50-o.display.nativeBarWidth}function We(o){return o.display.scroller.clientWidth-De(o)-o.display.barWidth}function jt(o){return o.display.scroller.clientHeight-De(o)-o.display.barHeight}function bo(o,u,f){if(o.line==u)return{map:o.measure.map,cache:o.measure.cache};if(o.rest){for(var c=0;c<o.rest.length;c++)if(o.rest[c]==u)return{map:o.measure.maps[c],cache:o.measure.caches[c]};for(u=0;u<o.rest.length;u++)if(Qe(o.rest[u])>f)return{map:o.measure.maps[u],cache:o.measure.caches[u],before:!0}}}function ap(o,u){if(u>=o.display.viewFrom&&u<o.display.viewTo)return o.display.view[Us(o,u)];if((o=o.display.externalMeasured)&&u>=o.lineN&&u<o.lineN+o.size)return o}function Ds(o,u){var f=Qe(u),c=ap(o,f);if(c&&!c.text?c=null:c&&c.changes&&(Za(o,c,f,fp(o)),o.curOp.forceUpdate=!0),!c){var g=Zi(u);c=Qe(g),g=o.display.externalMeasured=new zn(o.doc,g,c),g.lineN=c,c=g.built=Ku(o,g),g.text=c.pre,s(o.display.lineMeasure,c.pre),c=g}return o=bo(c,u,f),{line:u,view:c,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function En(o,u,f,c,g){u.before&&(f=-1);var _=f+(c||"");if(u.cache.hasOwnProperty(_))o=u.cache[_];else{if(u.rect||(u.rect=u.view.text.getBoundingClientRect()),!u.hasHeights){var x=u.view,C=u.rect,R=o.options.lineWrapping,D=R&&We(o);if(!x.measure.heights||R&&x.measure.width!=D){var j=x.measure.heights=[];if(R)for(x.measure.width=D,x=x.text.firstChild.getClientRects(),R=0;R<x.length-1;R++){D=x[R];var X=x[R+1];2<Math.abs(D.bottom-X.bottom)&&j.push((D.bottom+X.top)/2-C.top)}j.push(C.bottom-C.top)}u.hasHeights=!0}if(j=c,x=Ty(u.map,f,j),c=x.node,C=x.start,R=x.end,f=x.collapse,c.nodeType==3){for(var ee=0;4>ee;ee++){for(;C&&Q(u.line.text.charAt(x.coverStart+C));)--C;for(;x.coverStart+R<x.coverEnd&&Q(u.line.text.charAt(x.coverStart+R));)++R;if(nt&&9>Tt&&C==0&&R==x.coverEnd-x.coverStart)var te=c.parentNode.getBoundingClientRect();else{if(te=gl(c,C,R).getClientRects(),R=$v,j=="left")for(D=0;D<te.length&&(R=te[D]).left==R.right;D++);else for(D=te.length-1;0<=D&&(R=te[D]).left==R.right;D--);te=R}if(te.left||te.right||C==0)break;R=C,--C,f="right"}nt&&11>Tt&&((ee=!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI)||(jp!=null?ee=jp:(j=s(o.display.measure,a("span","x")),ee=j.getBoundingClientRect(),j=gl(j,0,1).getBoundingClientRect(),ee=jp=1<Math.abs(ee.left-j.left)),ee=!ee),ee||(ee=screen.logicalXDPI/screen.deviceXDPI,j=screen.logicalYDPI/screen.deviceYDPI,te={left:te.left*ee,right:te.right*ee,top:te.top*j,bottom:te.bottom*j}))}else 0<C&&(f=j="right"),te=o.options.lineWrapping&&1<(ee=c.getClientRects()).length?ee[j=="right"?ee.length-1:0]:c.getBoundingClientRect();for(!(nt&&9>Tt)||C||te&&(te.left||te.right)||(te=(te=c.parentNode.getClientRects()[0])?{left:te.left,right:te.left+So(o.display),top:te.top,bottom:te.bottom}:$v),c=te.top-u.rect.top,C=te.bottom-u.rect.top,ee=(c+C)/2,j=u.view.measure.heights,x=0;x<j.length-1&&!(ee<j[x]);x++);f={left:(f=="right"?te.right:te.left)-u.rect.left,right:(f=="left"?te.left:te.right)-u.rect.left,top:x?j[x-1]:0,bottom:j[x]},te.left||te.right||(f.bogus=!0),o.options.singleCursorHeightPerLine||(f.rtop=c,f.rbottom=C),o=f,o.bogus||(u.cache[_]=o)}return{left:o.left,right:o.right,top:g?o.rtop:o.top,bottom:g?o.rbottom:o.bottom}}function Ty(o,u,f){for(var c,g,_,x,C,R,D=0;D<o.length;D+=3)if(C=o[D],R=o[D+1],u<C?(g=0,_=1,x="left"):u<R?(g=u-C,_=g+1):(D==o.length-3||u==R&&o[D+3]>u)&&(_=R-C,g=_-1,u>=R&&(x="right")),g!=null){if(c=o[D+2],C==R&&f==(c.insertLeft?"left":"right")&&(x=f),f=="left"&&g==0)for(;D&&o[D-2]==o[D-3]&&o[D-1].insertLeft;)c=o[(D-=3)+2],x="left";if(f=="right"&&g==R-C)for(;D<o.length-3&&o[D+3]==o[D+4]&&!o[D+5].insertLeft;)c=o[(D+=3)+2],x="right";break}return{node:c,start:g,end:_,collapse:x,coverStart:C,coverEnd:R}}function Ey(o){if(o.measure&&(o.measure.cache={},o.measure.heights=null,o.rest))for(var u=0;u<o.rest.length;u++)o.measure.caches[u]={}}function Ay(o){o.display.externalMeasure=null,r(o.display.lineMeasure);for(var u=0;u<o.display.view.length;u++)Ey(o.display.view[u])}function Xa(o){Ay(o),o.display.cachedCharWidth=o.display.cachedTextHeight=o.display.cachedPaddingH=null,o.options.lineWrapping||(o.display.maxLineChanged=!0),o.display.lineNumChars=null}function Ry(o){return Yr&&yh?-(o.body.getBoundingClientRect().left-parseInt(getComputedStyle(o.body).marginLeft)):o.defaultView.pageXOffset||(o.documentElement||o.body).scrollLeft}function Ly(o){return Yr&&yh?-(o.body.getBoundingClientRect().top-parseInt(getComputedStyle(o.body).marginTop)):o.defaultView.pageYOffset||(o.documentElement||o.body).scrollTop}function lp(o){o=Zi(o).widgets;var u=0;if(o)for(var f=0;f<o.length;++f)o[f].above&&(u+=N(o[f]));return u}function Zu(o,u,f,c,g){return g||(g=lp(u),f.top+=g,f.bottom+=g),c=="line"||(c||(c="local"),u=un(u),u=c=="local"?u+o.display.lineSpace.offsetTop:u-o.display.viewOffset,(c=="page"||c=="window")&&(g=o.display.lineSpace.getBoundingClientRect(),u+=g.top+(c=="window"?0:Ly(y(o))),o=g.left+(c=="window"?0:Ry(y(o))),f.left+=o,f.right+=o),f.top+=u,f.bottom+=u),f}function Oy(o,u,f){if(f=="div")return u;var c=u.left;return u=u.top,f=="page"?(c-=Ry(y(o)),u-=Ly(y(o))):f!="local"&&f||(f=o.display.sizer.getBoundingClientRect(),c+=f.left,u+=f.top),o=o.display.lineSpace.getBoundingClientRect(),{left:c-o.left,top:u-o.top}}function qu(o,u,f,c,g){c||(c=me(o.doc,u.line));var _=c;return u=u.ch,c=En(o,Ds(o,c),u,g),Zu(o,_,c,f)}function An(o,u,f,c,g,_){function x(ee,te){return ee=En(o,g,ee,te?"right":"left",_),te?ee.left=ee.right:ee.right=ee.left,Zu(o,c,ee,f)}function C(ee,te,ce){return x(ce?ee-1:ee,R[te].level==1!=ce)}c=c||me(o.doc,u.line),g||(g=Ds(o,c));var R=Z(c,o.doc.direction),D=u.ch;if(u=u.sticky,D>=c.text.length?(D=c.text.length,u="before"):0>=D&&(D=0,u="after"),!R)return x(u=="before"?D-1:D,u=="before");var j=q(R,D,u),X=vl;return j=C(D,j,u=="before"),X!=null&&(j.other=C(D,X,u!="before")),j}function Iy(o,u){var f=0;return u=T(o.doc,u),o.options.lineWrapping||(f=So(o.display)*u.ch),u=me(o.doc,u.line),o=un(u)+o.display.lineSpace.offsetTop,{left:f,right:f,top:o,bottom:o+u.height}}function up(o,u,f,c,g){return o=pe(o,u,f),o.xRel=g,c&&(o.outside=c),o}function hp(o,u,f){var c=o.doc;if(f+=o.display.viewOffset,0>f)return up(c.first,0,null,-1,-1);var g=pi(c,f),_=c.first+c.size-1;if(g>_)return up(c.first+c.size-1,me(c,_).text.length,null,1,1);0>u&&(u=0);for(var x=me(c,g);;){_=pE(o,x,g,u,f);var C=void 0,R=_.ch+(0<_.xRel||0<_.outside?1:0);if(x=Mr&&x.markedSpans)for(var D=0;D<x.length;++D){var j=x[D];j.marker.collapsed&&(j.from==null||j.from<R)&&(j.to==null||j.to>R)&&(!C||0>Pr(C,j.marker))&&(C=j.marker)}if(!C||(_=C.find(1),_.line==g))return _;x=me(c,g=_.line)}}function Ny(o,u,f,c){c-=lp(u),u=u.text.length;var g=re(function(_){return En(o,f,_-1).bottom<=c},u,0);return u=re(function(_){return En(o,f,_).top>c},g,u),{begin:g,end:u}}function Dy(o,u,f,c){return f||(f=Ds(o,u)),c=Zu(o,u,En(o,f,c),"line").top,Ny(o,u,f,c)}function cp(o,u,f,c){return o.bottom<=f?!1:o.top>f?!0:(c?o.left:o.right)>u}function pE(o,u,f,c,g){g-=un(u);var _=Ds(o,u),x=lp(u),C=0,R=u.text.length,D=!0,j=Z(u,o.doc.direction);j&&(j=(o.options.lineWrapping?gE:dE)(o,u,f,_,j,c,g),C=(D=j.level!=1)?j.from:j.to-1,R=D?j.to:j.from-1);var X=null,ee=null;j=re(function(ce){var Ce=En(o,_,ce);return Ce.top+=x,Ce.bottom+=x,cp(Ce,c,g,!1)?(Ce.top<=g&&Ce.left<=c&&(X=ce,ee=Ce),!0):!1},C,R);var te=!1;return ee?(C=c-ee.left<ee.right-c,D=C==D,j=X+(D?0:1),D=D?"after":"before",C=C?ee.left:ee.right):(D||j!=R&&j!=C||j++,D=j==0?"after":j==u.text.length?"before":En(o,_,j-(D?1:0)).bottom+x<=g==D?"after":"before",te=An(o,pe(f,j,D),"line",u,_),C=te.left,te=g<te.top?-1:g>=te.bottom?1:0),j=H(u.text,j,1),up(f,j,D,te,c-C)}function dE(o,u,f,c,g,_,x){var C=re(function(j){j=g[j];var X=j.level!=1;return cp(An(o,pe(f,X?j.to:j.from,X?"before":"after"),"line",u,c),_,x,!0)},0,g.length-1),R=g[C];if(0<C){var D=R.level!=1;D=An(o,pe(f,D?R.from:R.to,D?"after":"before"),"line",u,c),cp(D,_,x,!0)&&D.top>x&&(R=g[C-1])}return R}function gE(o,u,f,c,g,_,x){x=Ny(o,u,c,x),f=x.begin,x=x.end,/\s/.test(u.text.charAt(x-1))&&x--;for(var C=u=null,R=0;R<g.length;R++){var D=g[R];if(!(D.from>=x||D.to<=f)){var j=En(o,c,D.level!=1?Math.min(x,D.to)-1:Math.max(f,D.from)).right;j=j<_?_-j+1e9:j-_,(!u||C>j)&&(u=D,C=j)}}return u||(u=g[g.length-1]),u.from<f&&(u={from:f,to:u.to,level:u.level}),u.to>x&&(u={from:u.from,to:x,level:u.level}),u}function xo(o){if(o.cachedTextHeight!=null)return o.cachedTextHeight;if(Gs==null){Gs=a("pre",null,"CodeMirror-line-like");for(var u=0;49>u;++u)Gs.appendChild(document.createTextNode("x")),Gs.appendChild(a("br"));Gs.appendChild(document.createTextNode("x"))}return s(o.measure,Gs),u=Gs.offsetHeight/50,3<u&&(o.cachedTextHeight=u),r(o.measure),u||1}function So(o){if(o.cachedCharWidth!=null)return o.cachedCharWidth;var u=a("span","xxxxxxxxxx"),f=a("pre",[u],"CodeMirror-line-like");return s(o.measure,f),u=u.getBoundingClientRect(),u=(u.right-u.left)/10,2<u&&(o.cachedCharWidth=u),u||10}function fp(o){for(var u=o.display,f={},c={},g=u.gutters.clientLeft,_=u.gutters.firstChild,x=0;_;_=_.nextSibling,++x){var C=o.display.gutterSpecs[x].className;f[C]=_.offsetLeft+_.clientLeft+g,c[C]=_.clientWidth}return{fixedPos:pp(u),gutterTotalWidth:u.gutters.offsetWidth,gutterLeft:f,gutterWidth:c,wrapperWidth:u.wrapper.clientWidth}}function pp(o){return o.scroller.getBoundingClientRect().left-o.sizer.getBoundingClientRect().left}function By(o){var u=xo(o.display),f=o.options.lineWrapping,c=f&&Math.max(5,o.display.scroller.clientWidth/So(o.display)-3);return function(g){if(qi(o.doc,g))return 0;var _=0;if(g.widgets)for(var x=0;x<g.widgets.length;x++)g.widgets[x].height&&(_+=g.widgets[x].height);return f?_+(Math.ceil(g.text.length/c)||1)*u:_+u}}function dp(o){var u=o.doc,f=By(o);u.iter(function(c){var g=f(c);g!=c.height&&kt(c,g)})}function Bs(o,u,f,c){var g=o.display;if(!f&&(u.target||u.srcElement).getAttribute("cm-not-content")=="true")return null;f=g.lineSpace.getBoundingClientRect();try{var _=u.clientX-f.left,x=u.clientY-f.top}catch{return null}u=hp(o,_,x);var C;return c&&0<u.xRel&&(C=me(o.doc,u.line).text).length==u.ch&&(c=M(C,C.length,o.options.tabSize)-C.length,u=pe(u.line,Math.max(0,Math.round((_-_e(o.display).left)/So(o.display))-c))),u}function Us(o,u){if(u>=o.display.viewTo||(u-=o.display.viewFrom,0>u))return null;o=o.display.view;for(var f=0;f<o.length;f++)if(u-=o[f].size,0>u)return f}function Ti(o,u,f,c){u==null&&(u=o.doc.first),f==null&&(f=o.doc.first+o.doc.size),c||(c=0);var g=o.display;if(c&&f<g.viewTo&&(g.updateLineNumbers==null||g.updateLineNumbers>u)&&(g.updateLineNumbers=u),o.curOp.viewChanged=!0,u>=g.viewTo)Mr&&wo(o.doc,u)<g.viewTo&&zr(o);else if(f<=g.viewFrom)Mr&&Vu(o.doc,f+c)>g.viewFrom?zr(o):(g.viewFrom+=c,g.viewTo+=c);else if(u<=g.viewFrom&&f>=g.viewTo)zr(o);else if(u<=g.viewFrom){var _=Xu(o,f,f+c,1);_?(g.view=g.view.slice(_.index),g.viewFrom=_.lineN,g.viewTo+=c):zr(o)}else if(f>=g.viewTo)(_=Xu(o,u,u,-1))?(g.view=g.view.slice(0,_.index),g.viewTo=_.lineN):zr(o);else{_=Xu(o,u,u,-1);var x=Xu(o,f,f+c,1);_&&x?(g.view=g.view.slice(0,_.index).concat(Is(o,_.lineN,x.lineN)).concat(g.view.slice(x.index)),g.viewTo+=c):zr(o)}(o=g.externalMeasured)&&(f<o.lineN?o.lineN+=c:u<o.lineN+o.size&&(g.externalMeasured=null))}function Kr(o,u,f){o.curOp.viewChanged=!0;var c=o.display,g=o.display.externalMeasured;g&&u>=g.lineN&&u<g.lineN+g.size&&(c.externalMeasured=null),u<c.viewFrom||u>=c.viewTo||(o=c.view[Us(o,u)],o.node!=null&&(o=o.changes||(o.changes=[]),b(o,f)==-1&&o.push(f)))}function zr(o){o.display.viewFrom=o.display.viewTo=o.doc.first,o.display.view=[],o.display.viewOffset=0}function Xu(o,u,f,c){var g=Us(o,u),_=o.display.view;if(!Mr||f==o.doc.first+o.doc.size)return{index:g,lineN:f};for(var x=o.display.viewFrom,C=0;C<g;C++)x+=_[C].size;if(x!=u){if(0<c){if(g==_.length-1)return null;u=x+_[g].size-u,g++}else u=x-u;f+=u}for(;wo(o.doc,f)!=f;){if(g==(0>c?0:_.length-1))return null;f+=c*_[g-(0>c?1:0)].size,g+=c}return{index:g,lineN:f}}function Uy(o){o=o.display.view;for(var u=0,f=0;f<o.length;f++){var c=o[f];c.hidden||c.node&&!c.changes||++u}return u}function el(o){o.display.input.showSelection(o.display.input.prepareSelection())}function Jy(o,u){u===void 0&&(u=!0);var f=o.doc,c={},g=c.cursors=document.createDocumentFragment(),_=c.selection=document.createDocumentFragment(),x=o.options.$customCursor;x&&(u=!0);for(var C=0;C<f.sel.ranges.length;C++)if(u||C!=f.sel.primIndex){var R=f.sel.ranges[C];if(!(R.from().line>=o.display.viewTo||R.to().line<o.display.viewFrom)){var D=R.empty();if(x){var j=x(o,R);j&&gp(o,j,g)}else(D||o.options.showCursorWhenSelecting)&&gp(o,R.head,g);D||mE(o,R,_)}}return c}function gp(o,u,f){var c=An(o,u,"div",null,null,!o.options.singleCursorHeightPerLine),g=f.appendChild(a("div"," ","CodeMirror-cursor"));g.style.left=c.left+"px",g.style.top=c.top+"px",g.style.height=Math.max(0,c.bottom-c.top)*o.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(o.getWrapperElement().className)&&(u=qu(o,u,"div",null,null),u=u.right-u.left,g.style.width=(0<u?u:o.defaultCharWidth())+"px"),c.other&&(o=f.appendChild(a("div"," ","CodeMirror-cursor CodeMirror-secondarycursor")),o.style.display="",o.style.left=c.other.left+"px",o.style.top=c.other.top+"px",o.style.height=.85*(c.other.bottom-c.other.top)+"px")}function eh(o,u){return o.top-u.top||o.left-u.left}function mE(o,u,f){function c(te,ce,Ce,Pe){0>ce&&(ce=0),ce=Math.round(ce),Pe=Math.round(Pe),C.appendChild(a("div",null,"CodeMirror-selected","position: absolute; left: "+te+`px;
                             top: `+ce+"px; width: "+(Ce??j-te)+`px;
                             height: `+(Pe-ce)+"px"))}function g(te,ce,Ce){function Pe(Ke,_t){return qu(o,pe(te,Ke),"div",Le,_t)}function zt(Ke,_t,rt){return Ke=Dy(o,Le,null,Ke),_t=_t=="ltr"==(rt=="after")?"left":"right",rt=rt=="after"?Ke.begin:Ke.end-(/\s/.test(Le.text.charAt(Ke.end-1))?2:1),Pe(rt,_t)[_t]}var Le=me(x,te),yt=Le.text.length,ft,wt,Ct=Z(Le,x.direction);return le(Ct,ce||0,Ce??yt,function(Ke,_t,rt,pt){var yi=rt=="ltr",Ri=Pe(Ke,yi?"left":"right"),en=Pe(_t-1,yi?"right":"left"),Ks=ce==null&&Ke==0,zs=Ce==null&&_t==yt,zp=pt==0;pt=!Ct||pt==Ct.length-1,3>=en.top-Ri.top?(_t=(X?Ks:zs)&&zp?D:(yi?Ri:en).left,c(_t,Ri.top,((X?zs:Ks)&&pt?j:(yi?en:Ri).right)-_t,Ri.bottom)):(yi?(yi=X&&Ks&&zp?D:Ri.left,Ks=X?j:zt(Ke,rt,"before"),Ke=X?D:zt(_t,rt,"after"),zs=X&&zs&&pt?j:en.right):(yi=X?zt(Ke,rt,"before"):D,Ks=!X&&Ks&&zp?j:Ri.right,Ke=!X&&zs&&pt?D:en.left,zs=X?zt(_t,rt,"after"):j),c(yi,Ri.top,Ks-yi,Ri.bottom),Ri.bottom<en.top&&c(D,Ri.bottom,null,en.top),c(Ke,en.top,zs-Ke,en.bottom)),(!ft||0>eh(Ri,ft))&&(ft=Ri),0>eh(en,ft)&&(ft=en),(!wt||0>eh(Ri,wt))&&(wt=Ri),0>eh(en,wt)&&(wt=en)}),{start:ft,end:wt}}var _=o.display,x=o.doc,C=document.createDocumentFragment(),R=_e(o.display),D=R.left,j=Math.max(_.sizerWidth,We(o)-_.sizer.offsetLeft)-R.right,X=x.direction=="ltr";if(_=u.from(),u=u.to(),_.line==u.line)g(_.line,_.ch,u.ch);else{var ee=me(x,_.line);R=me(x,u.line),R=Zi(ee)==Zi(R),_=g(_.line,_.ch,R?ee.text.length+1:null).end,u=g(u.line,R?0:null,u.ch).start,R&&(_.top<u.top-2?(c(_.right,_.top,null,_.bottom),c(D,u.top,u.left,u.bottom)):c(_.right,_.top,u.left-_.right,_.bottom)),_.bottom<u.top&&c(D,_.bottom,null,u.top)}f.appendChild(C)}function mp(o){if(o.state.focused){var u=o.display;clearInterval(u.blinker);var f=!0;u.cursorDiv.style.visibility="",0<o.options.cursorBlinkRate?u.blinker=setInterval(function(){o.hasFocus()||Co(o),u.cursorDiv.style.visibility=(f=!f)?"":"hidden"},o.options.cursorBlinkRate):0>o.options.cursorBlinkRate&&(u.cursorDiv.style.visibility="hidden")}}function Py(o){o.hasFocus()||(o.display.input.focus(),o.state.focused||vp(o))}function yp(o){o.state.delayingBlurEvent=!0,setTimeout(function(){o.state.delayingBlurEvent&&(o.state.delayingBlurEvent=!1,o.state.focused&&Co(o))},100)}function vp(o,u){o.state.delayingBlurEvent&&!o.state.draggingText&&(o.state.delayingBlurEvent=!1),o.options.readOnly!="nocursor"&&(o.state.focused||($(o,"focus",o,u),o.state.focused=!0,d(o.display.wrapper,"CodeMirror-focused"),o.curOp||o.display.selForContextMenu==o.doc.sel||(o.display.input.reset(),mi&&setTimeout(function(){return o.display.input.reset(!0)},20)),o.display.input.receivedFocus()),mp(o))}function Co(o,u){o.state.delayingBlurEvent||(o.state.focused&&($(o,"blur",o,u),o.state.focused=!1,Ws(o.display.wrapper,"CodeMirror-focused")),clearInterval(o.display.blinker),setTimeout(function(){o.state.focused||(o.display.shift=!1)},150))}function th(o){for(var u=o.display,f=u.lineDiv.offsetTop,c=Math.max(0,u.scroller.getBoundingClientRect().top),g=u.lineDiv.getBoundingClientRect().top,_=0,x=0;x<u.view.length;x++){var C=u.view[x],R=o.options.lineWrapping,D=0;if(!C.hidden){if(g+=C.line.height,nt&&8>Tt){R=C.node.offsetTop+C.node.offsetHeight;var j=R-f;f=R}else{var X=C.node.getBoundingClientRect();j=X.bottom-X.top,!R&&C.text.firstChild&&(D=C.text.firstChild.getBoundingClientRect().right-X.left-1)}if(R=C.line.height-j,(.005<R||-.005>R)&&(g<c&&(_-=R),kt(C.line,j),Fy(C.line),C.rest))for(j=0;j<C.rest.length;j++)Fy(C.rest[j]);D>o.display.sizerWidth&&(D=Math.ceil(D/So(o.display)),D>o.display.maxLineLength&&(o.display.maxLineLength=D,o.display.maxLine=C.line,o.display.maxLineChanged=!0))}}2<Math.abs(_)&&(u.scroller.scrollTop+=_)}function Fy(o){if(o.widgets)for(var u=0;u<o.widgets.length;++u){var f=o.widgets[u],c=f.node.parentNode;c&&(f.height=c.offsetHeight)}}function ih(o,u,f){var c=f&&f.top!=null?Math.max(0,f.top):o.scroller.scrollTop;c=Math.floor(c-o.lineSpace.offsetTop);var g=f&&f.bottom!=null?f.bottom:c+o.wrapper.clientHeight;if(c=pi(u,c),g=pi(u,g),f&&f.ensure){var _=f.ensure.from.line;f=f.ensure.to.line,_<c?(c=_,g=pi(u,un(me(u,_))+o.wrapper.clientHeight)):Math.min(f,u.lastLine())>=g&&(c=pi(u,un(me(u,f))-o.wrapper.clientHeight),g=f)}return{from:c,to:Math.max(g,c+1)}}function wp(o,u){var f=o.display,c=xo(o.display);0>u.top&&(u.top=0);var g=o.curOp&&o.curOp.scrollTop!=null?o.curOp.scrollTop:f.scroller.scrollTop,_=jt(o),x={};u.bottom-u.top>_&&(u.bottom=u.top+_);var C=o.doc.height+ue(f),R=u.top<c;return c=u.bottom>C-c,u.top<g?x.scrollTop=R?0:u.top:u.bottom>g+_&&(_=Math.min(u.top,(c?C:u.bottom)-_),_!=g&&(x.scrollTop=_)),g=o.options.fixedGutter?0:f.gutters.offsetWidth,_=o.curOp&&o.curOp.scrollLeft!=null?o.curOp.scrollLeft:f.scroller.scrollLeft-g,o=We(o)-f.gutters.offsetWidth,(f=u.right-u.left>o)&&(u.right=u.left+o),10>u.left?x.scrollLeft=0:u.left<_?x.scrollLeft=Math.max(0,u.left+g-(f?0:10)):u.right>o+_-3&&(x.scrollLeft=u.right+(f?0:10)-o),x}function nh(o,u){u!=null&&(rh(o),o.curOp.scrollTop=(o.curOp.scrollTop==null?o.doc.scrollTop:o.curOp.scrollTop)+u)}function Mo(o){rh(o);var u=o.getCursor();o.curOp.scrollToPos={from:u,to:u,margin:o.options.cursorScrollMargin}}function tl(o,u,f){u==null&&f==null||rh(o),u!=null&&(o.curOp.scrollLeft=u),f!=null&&(o.curOp.scrollTop=f)}function rh(o){var u=o.curOp.scrollToPos;if(u){o.curOp.scrollToPos=null;var f=Iy(o,u.from),c=Iy(o,u.to);jy(o,f,c,u.margin)}}function jy(o,u,f,c){u=wp(o,{left:Math.min(u.left,f.left),top:Math.min(u.top,f.top)-c,right:Math.max(u.right,f.right),bottom:Math.max(u.bottom,f.bottom)+c}),tl(o,u.scrollLeft,u.scrollTop)}function il(o,u){2>Math.abs(o.doc.scrollTop-u)||(Cr||bp(o,{top:u}),Wy(o,u,!0),Cr&&bp(o),rl(o,100))}function Wy(o,u,f){u=Math.max(0,Math.min(o.display.scroller.scrollHeight-o.display.scroller.clientHeight,u)),(o.display.scroller.scrollTop!=u||f)&&(o.doc.scrollTop=u,o.display.scrollbars.setScrollTop(u),o.display.scroller.scrollTop!=u&&(o.display.scroller.scrollTop=u))}function Js(o,u,f,c){u=Math.max(0,Math.min(u,o.display.scroller.scrollWidth-o.display.scroller.clientWidth)),(f?u==o.doc.scrollLeft:2>Math.abs(o.doc.scrollLeft-u))&&!c||(o.doc.scrollLeft=u,zy(o),o.display.scroller.scrollLeft!=u&&(o.display.scroller.scrollLeft=u),o.display.scrollbars.setScrollLeft(u))}function nl(o){var u=o.display,f=u.gutters.offsetWidth,c=Math.round(o.doc.height+ue(o.display));return{clientHeight:u.scroller.clientHeight,viewHeight:u.wrapper.clientHeight,scrollWidth:u.scroller.scrollWidth,clientWidth:u.scroller.clientWidth,viewWidth:u.wrapper.clientWidth,barLeft:o.options.fixedGutter?f:0,docHeight:c,scrollHeight:c+De(o)+u.barHeight,nativeBarWidth:u.nativeBarWidth,gutterWidth:f}}function ko(o,u){u||(u=nl(o));var f=o.display.barWidth,c=o.display.barHeight;for(Gy(o,u),u=0;4>u&&f!=o.display.barWidth||c!=o.display.barHeight;u++)f!=o.display.barWidth&&o.options.lineWrapping&&th(o),Gy(o,nl(o)),f=o.display.barWidth,c=o.display.barHeight}function Gy(o,u){var f=o.display,c=f.scrollbars.update(u);f.sizer.style.paddingRight=(f.barWidth=c.right)+"px",f.sizer.style.paddingBottom=(f.barHeight=c.bottom)+"px",f.heightForcer.style.borderBottom=c.bottom+"px solid transparent",c.right&&c.bottom?(f.scrollbarFiller.style.display="block",f.scrollbarFiller.style.height=c.bottom+"px",f.scrollbarFiller.style.width=c.right+"px"):f.scrollbarFiller.style.display="",c.bottom&&o.options.coverGutterNextToScrollbar&&o.options.fixedGutter?(f.gutterFiller.style.display="block",f.gutterFiller.style.height=c.bottom+"px",f.gutterFiller.style.width=u.gutterWidth+"px"):f.gutterFiller.style.display=""}function Vy(o){o.display.scrollbars&&(o.display.scrollbars.clear(),o.display.scrollbars.addClass&&Ws(o.display.wrapper,o.display.scrollbars.addClass)),o.display.scrollbars=new Zv[o.options.scrollbarStyle](function(u){o.display.wrapper.insertBefore(u,o.display.scrollbarFiller),Ue(u,"mousedown",function(){o.state.focused&&setTimeout(function(){return o.display.input.focus()},0)}),u.setAttribute("cm-not-content","true")},function(u,f){f=="horizontal"?Js(o,u):il(o,u)},o),o.display.scrollbars.addClass&&d(o.display.wrapper,o.display.scrollbars.addClass)}function Ps(o){o.curOp={cm:o,viewChanged:!1,startHeight:o.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++oA,markArrays:null},o=o.curOp,Jo?Jo.ops.push(o):o.ownsGroup=Jo={ops:[o],delayedCallbacks:[]}}function Fs(o){(o=o.curOp)&&St(o,function(u){for(var f=0;f<u.ops.length;f++)u.ops[f].cm.curOp=null;for(u=u.ops,f=0;f<u.length;f++){var c=u[f],g=c.cm,_=g.display,x=g.display;!x.scrollbarsClipped&&x.scroller.offsetWidth&&(x.nativeBarWidth=x.scroller.offsetWidth-x.scroller.clientWidth,x.heightForcer.style.height=De(g)+"px",x.sizer.style.marginBottom=-x.nativeBarWidth+"px",x.sizer.style.borderRightWidth=De(g)+"px",x.scrollbarsClipped=!0),c.updateMaxLine&&Ya(g),c.mustUpdate=c.viewChanged||c.forceUpdate||c.scrollTop!=null||c.scrollToPos&&(c.scrollToPos.from.line<_.viewFrom||c.scrollToPos.to.line>=_.viewTo)||_.maxLineChanged&&g.options.lineWrapping,c.update=c.mustUpdate&&new xh(g,c.mustUpdate&&{top:c.scrollTop,ensure:c.scrollToPos},c.forceUpdate)}for(f=0;f<u.length;f++)c=u[f],c.updatedDisplay=c.mustUpdate&&_p(c.cm,c.update);for(f=0;f<u.length;f++)c=u[f],g=c.cm,_=g.display,c.updatedDisplay&&th(g),c.barMeasure=nl(g),_.maxLineChanged&&!g.options.lineWrapping&&(x=_.maxLine.text.length,x=En(g,Ds(g,_.maxLine),x,void 0),c.adjustWidthTo=x.left+3,g.display.sizerWidth=c.adjustWidthTo,c.barMeasure.scrollWidth=Math.max(_.scroller.clientWidth,_.sizer.offsetLeft+c.adjustWidthTo+De(g)+g.display.barWidth),c.maxScrollLeft=Math.max(0,_.sizer.offsetLeft+c.adjustWidthTo-We(g))),(c.updatedDisplay||c.selectionChanged)&&(c.preparedSelection=_.input.prepareSelection());for(f=0;f<u.length;f++)c=u[f],g=c.cm,c.adjustWidthTo!=null&&(g.display.sizer.style.minWidth=c.adjustWidthTo+"px",c.maxScrollLeft<g.doc.scrollLeft&&Js(g,Math.min(g.display.scroller.scrollLeft,c.maxScrollLeft),!0),g.display.maxLineChanged=!1),_=c.focus&&c.focus==p(y(g)),c.preparedSelection&&g.display.input.showSelection(c.preparedSelection,_),(c.updatedDisplay||c.startHeight!=g.doc.height)&&ko(g,c.barMeasure),c.updatedDisplay&&Sp(g,c.barMeasure),c.selectionChanged&&mp(g),g.state.focused&&c.updateInput&&g.display.input.reset(c.typing),_&&Py(c.cm);for(f=0;f<u.length;f++){var C=void 0;if(c=u[f],g=c.cm,_=g.display,x=g.doc,c.updatedDisplay&&Ky(g,c.update),_.wheelStartX==null||c.scrollTop==null&&c.scrollLeft==null&&!c.scrollToPos||(_.wheelStartX=_.wheelStartY=null),c.scrollTop!=null&&Wy(g,c.scrollTop,c.forceScroll),c.scrollLeft!=null&&Js(g,c.scrollLeft,!0,!0),c.scrollToPos){var R=T(x,c.scrollToPos.from),D=T(x,c.scrollToPos.to),j=c.scrollToPos.margin;j==null&&(j=0),g.options.lineWrapping||R!=D||(D=R.sticky=="before"?pe(R.line,R.ch+1,"before"):R,R=R.ch?pe(R.line,R.sticky=="before"?R.ch-1:R.ch,"after"):R);for(var X=0;5>X;X++){var ee=!1;C=An(g,R);var te=D&&D!=R?An(g,D):C;C={left:Math.min(C.left,te.left),top:Math.min(C.top,te.top)-j,right:Math.max(C.left,te.left),bottom:Math.max(C.bottom,te.bottom)+j},te=wp(g,C);var ce=g.doc.scrollTop,Ce=g.doc.scrollLeft;if(te.scrollTop!=null&&(il(g,te.scrollTop),1<Math.abs(g.doc.scrollTop-ce)&&(ee=!0)),te.scrollLeft!=null&&(Js(g,te.scrollLeft),1<Math.abs(g.doc.scrollLeft-Ce)&&(ee=!0)),!ee)break}D=C,ne(g,"scrollCursorIntoView")||(j=g.display,X=j.sizer.getBoundingClientRect(),R=null,ee=j.wrapper.ownerDocument,0>D.top+X.top?R=!0:D.bottom+X.top>(ee.defaultView.innerHeight||ee.documentElement.clientHeight)&&(R=!1),R==null||YE||(D=a("div","​",null,`position: absolute;
                         top: `+(D.top-j.viewOffset-g.display.lineSpace.offsetTop)+`px;
                         height: `+(D.bottom-D.top+De(g)+j.barHeight)+`px;
                         left: `+D.left+"px; width: "+Math.max(2,D.right-D.left)+"px;"),g.display.lineSpace.appendChild(D),D.scrollIntoView(R),g.display.lineSpace.removeChild(D)))}if(D=c.maybeHiddenMarkers,R=c.maybeUnhiddenMarkers,D)for(j=0;j<D.length;++j)D[j].lines.length||$(D[j],"hide");if(R)for(D=0;D<R.length;++D)R[D].lines.length&&$(R[D],"unhide");_.wrapper.offsetHeight&&(x.scrollTop=g.display.scroller.scrollTop),c.changeObjs&&$(g,"changes",g,c.changeObjs),c.update&&c.update.finish()}})}function Fi(o,u){if(o.curOp)return u();Ps(o);try{return u()}finally{Fs(o)}}function $t(o,u){return function(){if(o.curOp)return u.apply(o,arguments);Ps(o);try{return u.apply(o,arguments)}finally{Fs(o)}}}function gi(o){return function(){if(this.curOp)return o.apply(this,arguments);Ps(this);try{return o.apply(this,arguments)}finally{Fs(this)}}}function Zt(o){return function(){var u=this.cm;if(!u||u.curOp)return o.apply(this,arguments);Ps(u);try{return o.apply(this,arguments)}finally{Fs(u)}}}function rl(o,u){o.doc.highlightFrontier<o.display.viewTo&&o.state.highlight.set(u,v(yE,o))}function yE(o){var u=o.doc;if(!(u.highlightFrontier>=o.display.viewTo)){var f=+new Date+o.options.workTime,c=fe(o,u.highlightFrontier),g=[];u.iter(c.line,Math.min(u.first+u.size,o.display.viewTo+500),function(_){if(c.line>=o.display.viewFrom){var x=_.styles,C=_.text.length>o.options.maxHighlightLength?K(u.mode,c.state):null,R=ie(o,_,c,!0);for(C&&(c.state=C),_.styles=R.styles,C=_.styleClasses,(R=R.classes)?_.styleClasses=R:C&&(_.styleClasses=null),R=!x||x.length!=_.styles.length||C!=R&&(!C||!R||C.bgClass!=R.bgClass||C.textClass!=R.textClass),C=0;!R&&C<x.length;++C)R=x[C]!=_.styles[C];R&&g.push(c.line),_.stateAfter=c.save()}else _.text.length<=o.options.maxHighlightLength&&Be(o,_.text,c),_.stateAfter=c.line%5==0?c.save():null;if(c.nextLine(),+new Date>f)return rl(o,o.options.workDelay),!0}),u.highlightFrontier=c.line,u.modeFrontier=Math.max(u.modeFrontier,c.line),g.length&&Fi(o,function(){for(var _=0;_<g.length;_++)Kr(o,g[_],"text")})}}function _p(o,u){var f=o.display,c=o.doc;if(u.editorIsHidden)return zr(o),!1;if(!u.force&&u.visible.from>=f.viewFrom&&u.visible.to<=f.viewTo&&(f.updateLineNumbers==null||f.updateLineNumbers>=f.viewTo)&&f.renderedView==f.view&&Uy(o)==0)return!1;Hy(o)&&(zr(o),u.dims=fp(o));var g=c.first+c.size,_=Math.max(u.visible.from-o.options.viewportMargin,c.first),x=Math.min(g,u.visible.to+o.options.viewportMargin);return f.viewFrom<_&&20>_-f.viewFrom&&(_=Math.max(c.first,f.viewFrom)),f.viewTo>x&&20>f.viewTo-x&&(x=Math.min(g,f.viewTo)),Mr&&(_=wo(o.doc,_),x=Vu(o.doc,x)),c=_!=f.viewFrom||x!=f.viewTo||f.lastWrapHeight!=u.wrapperHeight||f.lastWrapWidth!=u.wrapperWidth,g=o.display,g.view.length==0||_>=g.viewTo||x<=g.viewFrom?(g.view=Is(o,_,x),g.viewFrom=_):(g.viewFrom>_?g.view=Is(o,_,g.viewFrom).concat(g.view):g.viewFrom<_&&(g.view=g.view.slice(Us(o,_))),g.viewFrom=_,g.viewTo<x?g.view=g.view.concat(Is(o,g.viewTo,x)):g.viewTo>x&&(g.view=g.view.slice(0,Us(o,x)))),g.viewTo=x,f.viewOffset=un(me(o.doc,f.viewFrom)),o.display.mover.style.top=f.viewOffset+"px",x=Uy(o),!c&&x==0&&!u.force&&f.renderedView==f.view&&(f.updateLineNumbers==null||f.updateLineNumbers>=f.viewTo)?!1:(o.hasFocus()?_=null:(_=p(y(o)))&&h(o.display.lineDiv,_)?(_={activeElt:_},window.getSelection&&(g=y(o).defaultView.getSelection(),g.anchorNode&&g.extend&&h(o.display.lineDiv,g.anchorNode)&&(_.anchorNode=g.anchorNode,_.anchorOffset=g.anchorOffset,_.focusNode=g.focusNode,_.focusOffset=g.focusOffset))):_=null,4<x&&(f.lineDiv.style.display="none"),vE(o,f.updateLineNumbers,u.dims),4<x&&(f.lineDiv.style.display=""),f.renderedView=f.view,(x=_)&&x.activeElt&&x.activeElt!=p(x.activeElt.ownerDocument)&&(x.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(x.activeElt.nodeName)&&x.anchorNode&&h(document.body,x.anchorNode)&&h(document.body,x.focusNode)&&(g=x.activeElt.ownerDocument,_=g.defaultView.getSelection(),g=g.createRange(),g.setEnd(x.anchorNode,x.anchorOffset),g.collapse(!1),_.removeAllRanges(),_.addRange(g),_.extend(x.focusNode,x.focusOffset))),r(f.cursorDiv),r(f.selectionDiv),f.gutters.style.height=f.sizer.style.minHeight=0,c&&(f.lastWrapHeight=u.wrapperHeight,f.lastWrapWidth=u.wrapperWidth,rl(o,400)),f.updateLineNumbers=null,!0)}function Ky(o,u){for(var f=u.viewport,c=!0;;c=!1){if(c&&o.options.lineWrapping&&u.oldDisplayWidth!=We(o))c&&(u.visible=ih(o.display,o.doc,f));else if(f&&f.top!=null&&(f={top:Math.min(o.doc.height+ue(o.display)-jt(o),f.top)}),u.visible=ih(o.display,o.doc,f),u.visible.from>=o.display.viewFrom&&u.visible.to<=o.display.viewTo)break;if(!_p(o,u))break;th(o),c=nl(o),el(o),ko(o,c),Sp(o,c),u.force=!1}u.signal(o,"update",o),(o.display.viewFrom!=o.display.reportedViewFrom||o.display.viewTo!=o.display.reportedViewTo)&&(u.signal(o,"viewportChange",o,o.display.viewFrom,o.display.viewTo),o.display.reportedViewFrom=o.display.viewFrom,o.display.reportedViewTo=o.display.viewTo)}function bp(o,u){if(u=new xh(o,u),_p(o,u)){th(o),Ky(o,u);var f=nl(o);el(o),ko(o,f),Sp(o,f),u.finish()}}function vE(o,u,f){function c(ee){var te=ee.nextSibling;return mi&&hn&&o.display.currentWheelTarget==ee?ee.style.display="none":ee.parentNode.removeChild(ee),te}var g=o.display,_=o.options.lineNumbers,x=g.lineDiv,C=x.firstChild,R=g.view;g=g.viewFrom;for(var D=0;D<R.length;D++){var j=R[D];if(!j.hidden)if(j.node&&j.node.parentNode==x){for(;C!=j.node;)C=c(C);C=_&&u!=null&&u<=g&&j.lineNumber,j.changes&&(-1<b(j.changes,"gutter")&&(C=!1),Za(o,j,g,f)),C&&(r(j.lineNumber),j.lineNumber.appendChild(document.createTextNode(je(o.options,g)))),C=j.node.nextSibling}else{var X=qa(o,j,g,f);x.insertBefore(X,C)}g+=j.size}for(;C;)C=c(C)}function xp(o){o.sizer.style.marginLeft=o.gutters.offsetWidth+"px",Ot(o,"gutterChanged",o)}function Sp(o,u){o.display.sizer.style.minHeight=u.docHeight+"px",o.display.heightForcer.style.top=u.docHeight+"px",o.display.gutters.style.height=u.docHeight+o.display.barHeight+De(o)+"px"}function zy(o){var u=o.display,f=u.view;if(u.alignWidgets||u.gutters.firstChild&&o.options.fixedGutter){for(var c=pp(u)-u.scroller.scrollLeft+o.doc.scrollLeft,g=u.gutters.offsetWidth,_=c+"px",x=0;x<f.length;x++)if(!f[x].hidden){o.options.fixedGutter&&(f[x].gutter&&(f[x].gutter.style.left=_),f[x].gutterBackground&&(f[x].gutterBackground.style.left=_));var C=f[x].alignable;if(C)for(var R=0;R<C.length;R++)C[R].style.left=_}o.options.fixedGutter&&(u.gutters.style.left=c+g+"px")}}function Hy(o){if(!o.options.lineNumbers)return!1;var u=o.doc;u=je(o.options,u.first+u.size-1);var f=o.display;if(u.length!=f.lineNumChars){var c=f.measure.appendChild(a("div",[a("div",u)],"CodeMirror-linenumber CodeMirror-gutter-elt")),g=c.firstChild.offsetWidth;return c=c.offsetWidth-g,f.lineGutter.style.width="",f.lineNumInnerWidth=Math.max(g,f.lineGutter.offsetWidth-c)+1,f.lineNumWidth=f.lineNumInnerWidth+c,f.lineNumChars=f.lineNumInnerWidth?u.length:-1,f.lineGutter.style.width=f.lineNumWidth+"px",xp(o.display),!0}return!1}function Cp(o,u){for(var f=[],c=!1,g=0;g<o.length;g++){var _=o[g],x=null;if(typeof _!="string"&&(x=_.style,_=_.className),_=="CodeMirror-linenumbers")if(u)c=!0;else continue;f.push({className:_,style:x})}return u&&!c&&f.push({className:"CodeMirror-linenumbers",style:null}),f}function Qy(o){var u=o.gutters,f=o.gutterSpecs;r(u),o.lineGutter=null;for(var c=0;c<f.length;++c){var g=f[c],_=g.className;g=g.style;var x=u.appendChild(a("div",null,"CodeMirror-gutter "+_));g&&(x.style.cssText=g),_=="CodeMirror-linenumbers"&&(o.lineGutter=x,x.style.width=(o.lineNumWidth||1)+"px")}u.style.display=f.length?"":"none",xp(o)}function sl(o){Qy(o.display),Ti(o),zy(o)}function wE(o,u,f,c){this.input=f,this.scrollbarFiller=a("div",null,"CodeMirror-scrollbar-filler"),this.scrollbarFiller.setAttribute("cm-not-content","true"),this.gutterFiller=a("div",null,"CodeMirror-gutter-filler"),this.gutterFiller.setAttribute("cm-not-content","true"),this.lineDiv=l("div",null,"CodeMirror-code"),this.selectionDiv=a("div",null,null,"position: relative; z-index: 1"),this.cursorDiv=a("div",null,"CodeMirror-cursors"),this.measure=a("div",null,"CodeMirror-measure"),this.lineMeasure=a("div",null,"CodeMirror-measure"),this.lineSpace=l("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var g=l("div",[this.lineSpace],"CodeMirror-lines");this.mover=a("div",[g],null,"position: relative"),this.sizer=a("div",[this.mover],"CodeMirror-sizer"),this.sizerWidth=null,this.heightForcer=a("div",null,null,"position: absolute; height: 50px; width: 1px;"),this.gutters=a("div",null,"CodeMirror-gutters"),this.lineGutter=null,this.scroller=a("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll"),this.scroller.setAttribute("tabIndex","-1"),this.wrapper=a("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror"),Yr&&105<=zv&&(this.wrapper.style.clipPath="inset(0px)"),this.wrapper.setAttribute("translate","no"),nt&&8>Tt&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0),mi||Cr&&dl||(this.scroller.draggable=!0),o&&(o.appendChild?o.appendChild(this.wrapper):o(this.wrapper)),this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=u.first,this.view=[],this.externalMeasured=this.renderedView=null,this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0,this.updateLineNumbers=null,this.nativeBarWidth=this.barHeight=this.barWidth=0,this.scrollbarsClipped=!1,this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null,this.alignWidgets=!1,this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null,this.maxLineLength=0,this.maxLineChanged=!1,this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null,this.shift=!1,this.activeTouch=this.selForContextMenu=null,this.gutterSpecs=Cp(c.gutters,c.lineNumbers),Qy(this),f.init(this)}function Yy(o){var u=o.wheelDeltaX,f=o.wheelDeltaY;return u==null&&o.detail&&o.axis==o.HORIZONTAL_AXIS&&(u=o.detail),f==null&&o.detail&&o.axis==o.VERTICAL_AXIS?f=o.detail:f==null&&(f=o.wheelDelta),{x:u,y:f}}function _E(o){return o=Yy(o),o.x*=kr,o.y*=kr,o}function $y(o,u){Yr&&zv==102&&(o.display.chromeScrollHack==null?o.display.sizer.style.pointerEvents="none":clearTimeout(o.display.chromeScrollHack),o.display.chromeScrollHack=setTimeout(function(){o.display.chromeScrollHack=null,o.display.sizer.style.pointerEvents=""},100));var f=Yy(u),c=f.x;f=f.y;var g=kr;u.deltaMode===0&&(c=u.deltaX,f=u.deltaY,g=1);var _=o.display,x=_.scroller,C=x.scrollWidth>x.clientWidth,R=x.scrollHeight>x.clientHeight;if(c&&C||f&&R){if(f&&hn&&mi){C=u.target;var D=_.view;e:for(;C!=x;C=C.parentNode)for(var j=0;j<D.length;j++)if(D[j].node==C){o.display.currentWheelTarget=C;break e}}!c||Cr||Ln||g==null?(f&&g!=null&&(g*=f,R=o.doc.scrollTop,C=R+_.wrapper.clientHeight,0>g?R=Math.max(0,R+g-50):C=Math.min(o.doc.height,C+g+50),bp(o,{top:R,bottom:C})),20>Sh&&u.deltaMode!==0&&(_.wheelStartX==null?(_.wheelStartX=x.scrollLeft,_.wheelStartY=x.scrollTop,_.wheelDX=c,_.wheelDY=f,setTimeout(function(){if(_.wheelStartX!=null){var X=x.scrollLeft-_.wheelStartX,ee=x.scrollTop-_.wheelStartY;X=ee&&_.wheelDY&&ee/_.wheelDY||X&&_.wheelDX&&X/_.wheelDX,_.wheelStartX=_.wheelStartY=null,X&&(kr=(kr*Sh+X)/(Sh+1),++Sh)}},200)):(_.wheelDX+=c,_.wheelDY+=f))):(f&&R&&il(o,Math.max(0,x.scrollTop+f*g)),Js(o,Math.max(0,x.scrollLeft+c*g)),(!f||f&&R)&&Se(u),_.wheelStartX=null)}}function Rn(o,u,f){o=o&&o.options.selectionsMayTouch,f=u[f],u.sort(function(R,D){return Ie(R.from(),D.from())}),f=b(u,f);for(var c=1;c<u.length;c++){var g=u[c],_=u[c-1],x=Ie(_.to(),g.from());if(o&&!g.empty()?0<x:0<=x){x=k(_.from(),g.from());var C=J(_.to(),g.to());g=_.empty()?g.from()==g.head:_.from()==_.head,c<=f&&--f,u.splice(--c,2,new at(g?C:x,g?x:C))}}return new Xi(u,f)}function Sr(o,u){return new Xi([new at(o,u||o)],0)}function Hr(o){return o.text?pe(o.from.line+o.text.length-1,B(o.text).length+(o.text.length==1?o.from.ch:0)):o.to}function Zy(o,u){if(0>Ie(o,u.from))return o;if(0>=Ie(o,u.to))return Hr(u);var f=o.line+u.text.length-(u.to.line-u.from.line)-1,c=o.ch;return o.line==u.to.line&&(c+=Hr(u).ch-u.to.ch),pe(f,c)}function Mp(o,u){for(var f=[],c=0;c<o.sel.ranges.length;c++){var g=o.sel.ranges[c];f.push(new at(Zy(g.anchor,u),Zy(g.head,u)))}return Rn(o.cm,f,o.sel.primIndex)}function qy(o,u,f){return o.line==u.line?pe(f.line,o.ch-u.ch+f.ch):pe(f.line+(o.line-u.line),o.ch)}function kp(o){o.doc.mode=Fe(o.options,o.doc.modeOption),ol(o)}function ol(o){o.doc.iter(function(u){u.stateAfter&&(u.stateAfter=null),u.styles&&(u.styles=null)}),o.doc.modeFrontier=o.doc.highlightFrontier=o.doc.first,rl(o,100),o.state.modeGen++,o.curOp&&Ti(o)}function Xy(o,u){return u.from.ch==0&&u.to.ch==0&&B(u.text)==""&&(!o.cm||o.cm.options.wholeLineUpdateBefore)}function Tp(o,u,f,c){function g(ce,Ce,Pe){ce.text=Ce,ce.stateAfter&&(ce.stateAfter=null),ce.styles&&(ce.styles=null),ce.order!=null&&(ce.order=null),Gu(ce),Qa(ce,Pe),Ce=c?c(ce):1,Ce!=ce.height&&kt(ce,Ce),Ot(ce,"change",ce,u)}function _(ce,Ce){for(var Pe=[];ce<Ce;++ce)Pe.push(new Uo(R[ce],f?f[ce]:null,c));return Pe}var x=u.from,C=u.to,R=u.text,D=me(o,x.line),j=me(o,C.line),X=B(R),ee=f?f[R.length-1]:null,te=C.line-x.line;u.full?(o.insert(0,_(0,R.length)),o.remove(R.length,o.size-R.length)):Xy(o,u)?(C=_(0,R.length-1),g(j,j.text,ee),te&&o.remove(x.line,te),C.length&&o.insert(x.line,C)):D==j?R.length==1?g(D,D.text.slice(0,x.ch)+X+D.text.slice(C.ch),ee):(te=_(1,R.length-1),te.push(new Uo(X+D.text.slice(C.ch),ee,c)),g(D,D.text.slice(0,x.ch)+R[0],f?f[0]:null),o.insert(x.line+1,te)):R.length==1?(g(D,D.text.slice(0,x.ch)+R[0]+j.text.slice(C.ch),f?f[0]:null),o.remove(x.line+1,te)):(g(D,D.text.slice(0,x.ch)+R[0],f?f[0]:null),g(j,X+j.text.slice(C.ch),ee),ee=_(1,R.length-1),1<te&&o.remove(x.line+1,te-1),o.insert(x.line+1,ee)),Ot(o,"change",o,u)}function Qr(o,u,f){function c(g,_,x){if(g.linked)for(var C=0;C<g.linked.length;++C){var R=g.linked[C];if(R.doc!=_){var D=x&&R.sharedHist;(!f||D)&&(u(R.doc,D),c(R.doc,g,D))}}}c(o,null,!0)}function ev(o,u){if(u.cm)throw Error("This document is already in use.");o.doc=u,u.cm=o,dp(o),kp(o),tv(o),o.options.direction=u.direction,o.options.lineWrapping||Ya(o),o.options.mode=u.modeOption,Ti(o)}function tv(o){(o.doc.direction=="rtl"?d:Ws)(o.display.lineDiv,"CodeMirror-rtl")}function bE(o){Fi(o,function(){tv(o),Ti(o)})}function sh(o){this.done=[],this.undone=[],this.undoDepth=o?o.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null,this.generation=this.maxGeneration=o?o.maxGeneration:1}function Ep(o,u){var f={from:ki(u.from),to:Hr(u),text:Je(o,u.from,u.to)};return rv(o,f,u.from.line,u.to.line+1),Qr(o,function(c){return rv(c,f,u.from.line,u.to.line+1)},!0),f}function iv(o){for(;o.length&&B(o).ranges;)o.pop()}function nv(o,u,f,c){var g=o.history;g.undone.length=0;var _=+new Date,x;if(x=g.lastOp==c||g.lastOrigin==u.origin&&u.origin&&(u.origin.charAt(0)=="+"&&g.lastModTime>_-(o.cm?o.cm.options.historyEventDelay:500)||u.origin.charAt(0)=="*")){if(g.lastOp==c){iv(g.done);var C=B(g.done)}else g.done.length&&!B(g.done).ranges?C=B(g.done):1<g.done.length&&!g.done[g.done.length-2].ranges?(g.done.pop(),C=B(g.done)):C=void 0;x=C}if(x){var R=B(C.changes);Ie(u.from,u.to)==0&&Ie(u.from,R.to)==0?R.to=Hr(u):C.changes.push(Ep(o,u))}else for((C=B(g.done))&&C.ranges||oh(o.sel,g.done),C={changes:[Ep(o,u)],generation:g.generation},g.done.push(C);g.done.length>g.undoDepth;)g.done.shift(),g.done[0].ranges||g.done.shift();g.done.push(f),g.generation=++g.maxGeneration,g.lastModTime=g.lastSelTime=_,g.lastOp=g.lastSelOp=c,g.lastOrigin=g.lastSelOrigin=u.origin,R||$(o,"historyAdded")}function oh(o,u){var f=B(u);f&&f.ranges&&f.equals(o)||u.push(o)}function rv(o,u,f,c){var g=u["spans_"+o.id],_=0;o.iter(Math.max(o.first,f),Math.min(o.first+o.size,c),function(x){x.markedSpans&&((g||(g=u["spans_"+o.id]={}))[_]=x.markedSpans),++_})}function sv(o,u){var f;if(f=u["spans_"+o.id]){for(var c=[],g=0;g<u.text.length;++g){var _=c,x=_.push,C=void 0,R=f[g];if(R){for(var D=0;D<R.length;++D)R[D].marker.explicitlyCleared?C||(C=R.slice(0,D)):C&&C.push(R[D]);C=C?C.length?C:null:R}else C=null;x.call(_,C)}f=c}else f=null;if(o=Kn(o,u),!f)return o;if(!o)return f;for(u=0;u<f.length;++u)if(c=f[u],g=o[u],c&&g)e:for(_=0;_<g.length;++_){for(x=g[_],C=0;C<c.length;++C)if(c[C].marker==x.marker)continue e;c.push(x)}else g&&(f[u]=g);return f}function To(o,u,f){for(var c=[],g=0;g<o.length;++g){var _=o[g];if(_.ranges)c.push(f?Xi.prototype.deepCopy.call(_):_);else{_=_.changes;var x=[];c.push({changes:x});for(var C=0;C<_.length;++C){var R=_[C],D;if(x.push({from:R.from,to:R.to,text:R.text}),u)for(var j in R)(D=j.match(/^spans_(\d+)$/))&&-1<b(u,Number(D[1]))&&(B(x)[j]=R[j],delete R[j])}}}return c}function Ap(o,u,f,c){return c?(o=o.anchor,f&&(c=0>Ie(u,o),c!=0>Ie(f,o)?(o=u,u=f):c!=0>Ie(u,f)&&(u=f)),new at(o,u)):new at(f||u,u)}function ah(o,u,f,c,g){g==null&&(g=o.cm&&(o.cm.display.shift||o.extend)),ii(o,new Xi([Ap(o.sel.primary(),u,f,g)],0),c)}function ov(o,u,f){for(var c=[],g=o.cm&&(o.cm.display.shift||o.extend),_=0;_<o.sel.ranges.length;_++)c[_]=Ap(o.sel.ranges[_],u[_],null,g);u=Rn(o.cm,c,o.sel.primIndex),ii(o,u,f)}function Rp(o,u,f,c){var g=o.sel.ranges.slice(0);g[u]=f,ii(o,Rn(o.cm,g,o.sel.primIndex),c)}function xE(o,u,f){return f={ranges:u.ranges,update:function(c){this.ranges=[];for(var g=0;g<c.length;g++)this.ranges[g]=new at(T(o,c[g].anchor),T(o,c[g].head))},origin:f&&f.origin},$(o,"beforeSelectionChange",o,f),o.cm&&$(o.cm,"beforeSelectionChange",o.cm,f),f.ranges!=u.ranges?Rn(o.cm,f.ranges,f.ranges.length-1):u}function av(o,u,f){var c=o.history.done,g=B(c);g&&g.ranges?(c[c.length-1]=u,lh(o,u,f)):ii(o,u,f)}function ii(o,u,f){lh(o,u,f),u=o.sel;var c=o.cm?o.cm.curOp.id:NaN,g=o.history,_=f&&f.origin,x;if(!(x=c==g.lastSelOp)&&(x=_&&g.lastSelOrigin==_)&&!(x=g.lastModTime==g.lastSelTime&&g.lastOrigin==_)){x=B(g.done);var C=_.charAt(0);x=C=="*"||C=="+"&&x.ranges.length==u.ranges.length&&x.somethingSelected()==u.somethingSelected()&&new Date-o.history.lastSelTime<=(o.cm?o.cm.options.historyEventDelay:500)}x?g.done[g.done.length-1]=u:oh(u,g.done),g.lastSelTime=+new Date,g.lastSelOrigin=_,g.lastSelOp=c,f&&f.clearRedo!==!1&&iv(g.undone)}function lh(o,u,f){(ye(o,"beforeSelectionChange")||o.cm&&ye(o.cm,"beforeSelectionChange"))&&(u=xE(o,u,f));var c=f&&f.bias||(0>Ie(u.primary().head,o.sel.primary().head)?-1:1);lv(o,hv(o,u,c,!0)),f&&f.scroll===!1||!o.cm||o.cm.getOption("readOnly")=="nocursor"||Mo(o.cm)}function lv(o,u){u.equals(o.sel)||(o.sel=u,o.cm&&(o.cm.curOp.updateInput=1,o.cm.curOp.selectionChanged=!0,we(o.cm)),Ot(o,"cursorActivity",o))}function uv(o){lv(o,hv(o,o.sel,null,!1))}function hv(o,u,f,c){for(var g,_=0;_<u.ranges.length;_++){var x=u.ranges[_],C=u.ranges.length==o.sel.ranges.length&&o.sel.ranges[_],R=uh(o,x.anchor,C&&C.anchor,f,c);C=x.head==x.anchor?R:uh(o,x.head,C&&C.head,f,c),(g||R!=x.anchor||C!=x.head)&&(g||(g=u.ranges.slice(0,_)),g[_]=new at(R,C))}return g?Rn(o.cm,g,u.primIndex):u}function Eo(o,u,f,c,g){var _=me(o,u.line);if(_.markedSpans)for(var x=0;x<_.markedSpans.length;++x){var C=_.markedSpans[x],R=C.marker,D="selectLeft"in R?!R.selectLeft:R.inclusiveLeft,j="selectRight"in R?!R.selectRight:R.inclusiveRight;if((C.from==null||(D?C.from<=u.ch:C.from<u.ch))&&(C.to==null||(j?C.to>=u.ch:C.to>u.ch))){if(g&&($(R,"beforeCursorEnter"),R.explicitlyCleared))if(_.markedSpans){--x;continue}else break;if(R.atomic)return f&&(x=R.find(0>c?1:-1),C=void 0,(0>c?j:D)&&(x=cv(o,x,-c,x&&x.line==u.line?_:null)),x&&x.line==u.line&&(C=Ie(x,f))&&(0>c?0>C:0<C))?Eo(o,x,u,c,g):(f=R.find(0>c?-1:1),(0>c?D:j)&&(f=cv(o,f,c,f.line==u.line?_:null)),f?Eo(o,f,u,c,g):null)}}return u}function uh(o,u,f,c,g){return c=c||1,u=Eo(o,u,f,c,g)||!g&&Eo(o,u,f,c,!0)||Eo(o,u,f,-c,g)||!g&&Eo(o,u,f,-c,!0),u||(o.cantEdit=!0,pe(o.first,0))}function cv(o,u,f,c){return 0>f&&u.ch==0?u.line>o.first?T(o,pe(u.line-1)):null:0<f&&u.ch==(c||me(o,u.line)).text.length?u.line<o.first+o.size-1?pe(u.line+1,0):null:new pe(u.line,u.ch+f)}function fv(o){o.setSelection(pe(o.firstLine(),0),pe(o.lastLine()),Hn)}function pv(o,u,f){var c={canceled:!1,from:u.from,to:u.to,text:u.text,origin:u.origin,cancel:function(){return c.canceled=!0}};return f&&(c.update=function(g,_,x,C){g&&(c.from=T(o,g)),_&&(c.to=T(o,_)),x&&(c.text=x),C!==void 0&&(c.origin=C)}),$(o,"beforeChange",o,c),o.cm&&$(o.cm,"beforeChange",o.cm,c),c.canceled?(o.cm&&(o.cm.curOp.updateInput=2),null):{from:c.from,to:c.to,text:c.text,origin:c.origin}}function Ao(o,u,f){if(o.cm){if(!o.cm.curOp)return $t(o.cm,Ao)(o,u,f);if(o.cm.state.suppressEdits)return}if(!((ye(o,"beforeChange")||o.cm&&ye(o.cm,"beforeChange"))&&(u=pv(o,u,!0),!u)))if(f=Yv&&!f&&xr(o,u.from,u.to))for(var c=f.length-1;0<=c;--c)dv(o,{from:f[c].from,to:f[c].to,text:c?[""]:u.text,origin:u.origin});else dv(o,u)}function dv(o,u){if(u.text.length!=1||u.text[0]!=""||Ie(u.from,u.to)!=0){var f=Mp(o,u);nv(o,u,f,o.cm?o.cm.curOp.id:NaN),al(o,u,f,Kn(o,u));var c=[];Qr(o,function(g,_){_||b(c,g.history)!=-1||(vv(g.history,u),c.push(g.history)),al(g,u,null,Kn(g,u))})}}function hh(o,u,f){var c=o.cm&&o.cm.state.suppressEdits;if(!c||f){for(var g=o.history,_,x=o.sel,C=u=="undo"?g.done:g.undone,R=u=="undo"?g.undone:g.done,D=0;D<C.length&&(_=C[D],f?!_.ranges||_.equals(o.sel):_.ranges);D++);if(D!=C.length){for(g.lastOrigin=g.lastSelOrigin=null;;)if(_=C.pop(),_.ranges){if(oh(_,R),f&&!_.equals(o.sel)){ii(o,_,{clearRedo:!1});return}x=_}else{if(c){C.push(_);return}break}var j=[];oh(x,R),R.push({changes:j,generation:g.generation}),g.generation=_.generation||++g.maxGeneration;var X=ye(o,"beforeChange")||o.cm&&ye(o.cm,"beforeChange");for(f=function(ee){var te=_.changes[ee];if(te.origin=u,X&&!pv(o,te,!1))return C.length=0,{};j.push(Ep(o,te));var ce=ee?Mp(o,te):B(C);al(o,te,ce,sv(o,te)),!ee&&o.cm&&o.cm.scrollIntoView({from:te.from,to:Hr(te)});var Ce=[];Qr(o,function(Pe,zt){zt||b(Ce,Pe.history)!=-1||(vv(Pe.history,te),Ce.push(Pe.history)),al(Pe,te,null,sv(Pe,te))})},c=_.changes.length-1;0<=c;--c)if(g=f(c))return g.v}}}function gv(o,u){if(u!=0&&(o.first+=u,o.sel=new Xi(L(o.sel.ranges,function(g){return new at(pe(g.anchor.line+u,g.anchor.ch),pe(g.head.line+u,g.head.ch))}),o.sel.primIndex),o.cm)){Ti(o.cm,o.first,o.first-u,u);for(var f=o.cm.display,c=f.viewFrom;c<f.viewTo;c++)Kr(o.cm,c,"gutter")}}function al(o,u,f,c){if(o.cm&&!o.cm.curOp)return $t(o.cm,al)(o,u,f,c);if(u.to.line<o.first)gv(o,u.text.length-1-(u.to.line-u.from.line));else if(!(u.from.line>o.lastLine())){if(u.from.line<o.first){var g=u.text.length-1-(o.first-u.from.line);gv(o,g),u={from:pe(o.first,0),to:pe(u.to.line+g,u.to.ch),text:[B(u.text)],origin:u.origin}}g=o.lastLine(),u.to.line>g&&(u={from:u.from,to:pe(g,me(o,g).text.length),text:[u.text[0]],origin:u.origin}),u.removed=Je(o,u.from,u.to),f||(f=Mp(o,u)),o.cm?SE(o.cm,u,c):Tp(o,u,c),lh(o,f,Hn),o.cantEdit&&uh(o,pe(o.firstLine(),0))&&(o.cantEdit=!1)}}function SE(o,u,f){var c=o.doc,g=o.display,_=u.from,x=u.to,C=!1,R=_.line;o.options.lineWrapping||(R=Qe(Zi(me(c,_.line))),c.iter(R,x.line+1,function(D){if(D==g.maxLine)return C=!0})),-1<c.sel.contains(u.from,u.to)&&we(o),Tp(c,u,f,By(o)),o.options.lineWrapping||(c.iter(R,_.line+u.text.length,function(D){var j=Fr(D);j>g.maxLineLength&&(g.maxLine=D,g.maxLineLength=j,g.maxLineChanged=!0,C=!1)}),C&&(o.curOp.updateMaxLine=!0)),op(c,_.line),rl(o,400),f=u.text.length-(x.line-_.line)-1,u.full?Ti(o):_.line!=x.line||u.text.length!=1||Xy(o.doc,u)?Ti(o,_.line,x.line+1,f):Kr(o,_.line,"text"),f=ye(o,"changes"),((c=ye(o,"change"))||f)&&(u={from:_,to:x,text:u.text,removed:u.removed,origin:u.origin},c&&Ot(o,"change",o,u),f&&(o.curOp.changeObjs||(o.curOp.changeObjs=[])).push(u)),o.display.selForContextMenu=null}function Ro(o,u,f,c,g){c||(c=f),0>Ie(c,f)&&(c=[c,f],f=c[0],c=c[1]),typeof u=="string"&&(u=o.splitLines(u)),Ao(o,{from:f,to:c,text:u,origin:g})}function mv(o,u,f,c){f<o.line?o.line+=c:u<o.line&&(o.line=u,o.ch=0)}function yv(o,u,f,c){for(var g=0;g<o.length;++g){var _=o[g],x=!0;if(_.ranges)for(_.copied||(_=o[g]=_.deepCopy(),_.copied=!0),x=0;x<_.ranges.length;x++)mv(_.ranges[x].anchor,u,f,c),mv(_.ranges[x].head,u,f,c);else{for(var C=0;C<_.changes.length;++C){var R=_.changes[C];if(f<R.from.line)R.from=pe(R.from.line+c,R.from.ch),R.to=pe(R.to.line+c,R.to.ch);else if(u<=R.to.line){x=!1;break}}x||(o.splice(0,g+1),g=0)}}}function vv(o,u){var f=u.from.line,c=u.to.line;u=u.text.length-(c-f)-1,yv(o.done,f,c,u),yv(o.undone,f,c,u)}function ll(o,u,f,c){var g=u,_=u;return typeof u=="number"?_=me(o,Math.max(o.first,Math.min(u,o.first+o.size-1))):g=Qe(u),g==null?null:(c(_,g)&&o.cm&&Kr(o.cm,g,f),_)}function ul(o){this.lines=o,this.parent=null;for(var u=0,f=0;f<o.length;++f)o[f].parent=this,u+=o[f].height;this.height=u}function hl(o){this.children=o;for(var u=0,f=0,c=0;c<o.length;++c){var g=o[c];u+=g.chunkSize(),f+=g.height,g.parent=this}this.size=u,this.height=f,this.parent=null}function CE(o,u,f,c){var g=new bl(o,f,c),_=o.cm;return _&&g.noHScroll&&(_.display.alignWidgets=!0),ll(o,u,"widget",function(x){var C=x.widgets||(x.widgets=[]);return g.insertAt==null?C.push(g):C.splice(Math.min(C.length,Math.max(0,g.insertAt)),0,g),g.line=x,_&&!qi(o,x)&&(C=un(x)<o.scrollTop,kt(x,x.height+N(g)),C&&nh(_,g.height),_.curOp.forceUpdate=!0),!0}),_&&Ot(_,"lineWidgetAdded",_,g,typeof u=="number"?u:Qe(u)),g}function Lo(o,u,f,c,g){if(c&&c.shared)return ME(o,u,f,c,g);if(o.cm&&!o.cm.curOp)return $t(o.cm,Lo)(o,u,f,c,g);var _=new Zr(o,g);if(g=Ie(u,f),c&&S(c,_,!1),0<g||g==0&&_.clearWhenEmpty!==!1)return _;if(_.replacedWith&&(_.collapsed=!0,_.widgetNode=l("span",[_.replacedWith],"CodeMirror-widget"),c.handleMouseEvents||_.widgetNode.setAttribute("cm-ignore-events","true"),c.insertLeft&&(_.widgetNode.insertLeft=!0)),_.collapsed){if(Ls(o,u.line,u,f,_)||u.line!=f.line&&Ls(o,f.line,u,f,_))throw Error("Inserting collapsed marker partially overlapping an existing one");Mr=!0}_.addToHistory&&nv(o,{from:u,to:f,origin:"markText"},o.sel,NaN);var x=u.line,C=o.cm,R;if(o.iter(x,f.line+1,function(D){C&&_.collapsed&&!C.options.lineWrapping&&Zi(D)==C.display.maxLine&&(R=!0),_.collapsed&&x!=u.line&&kt(D,0);var j=new Tn(_,x==u.line?u.ch:null,x==f.line?f.ch:null),X=o.cm&&o.cm.curOp;(X=X&&window.WeakSet&&(X.markedSpans||(X.markedSpans=new WeakSet)))&&D.markedSpans&&X.has(D.markedSpans)?D.markedSpans.push(j):(D.markedSpans=D.markedSpans?D.markedSpans.concat([j]):[j],X&&X.add(D.markedSpans)),j.marker.attachLine(D),++x}),_.collapsed&&o.iter(u.line,f.line+1,function(D){qi(o,D)&&kt(D,0)}),_.clearOnEnter&&Ue(_,"beforeCursorEnter",function(){return _.clear()}),_.readOnly&&(Yv=!0,(o.history.done.length||o.history.undone.length)&&o.clearHistory()),_.collapsed&&(_.id=++qv,_.atomic=!0),C){if(R&&(C.curOp.updateMaxLine=!0),_.collapsed)Ti(C,u.line,f.line+1);else if(_.className||_.startStyle||_.endStyle||_.css||_.attributes||_.title)for(c=u.line;c<=f.line;c++)Kr(C,c,"text");_.atomic&&uv(C.doc),Ot(C,"markerAdded",C,_)}return _}function ME(o,u,f,c,g){c=S(c),c.shared=!1;var _=[Lo(o,u,f,c,g)],x=_[0],C=c.widgetNode;return Qr(o,function(R){C&&(c.widgetNode=C.cloneNode(!0)),_.push(Lo(R,T(R,u),T(R,f),c,g));for(var D=0;D<R.linked.length;++D)if(R.linked[D].isParent)return;x=B(_)}),new xl(_,x)}function wv(o){return o.findMarks(pe(o.first,0),o.clipPos(pe(o.lastLine())),function(u){return u.parent})}function kE(o){for(var u=function(c){c=o[c];var g=[c.primary.doc];Qr(c.primary.doc,function(C){return g.push(C)});for(var _=0;_<c.markers.length;_++){var x=c.markers[_];b(g,x.doc)==-1&&(x.parent=null,c.markers.splice(_--,1))}},f=0;f<o.length;f++)u(f)}function TE(o){var u=this;if(_v(u),!ne(u,o)&&!Y(u.display,o)){Se(o),nt&&(Xv=+new Date);var f=Bs(u,o,!0),c=o.dataTransfer.files;if(f&&!u.isReadOnly())if(c&&c.length&&window.FileReader&&window.File)for(var g=c.length,_=Array(g),x=0,C=function(){++x==g&&$t(u,function(){f=T(u.doc,f);var j={from:f,to:f,text:u.doc.splitLines(_.filter(function(X){return X!=null}).join(u.doc.lineSeparator())),origin:"paste"};Ao(u.doc,j),av(u.doc,Sr(T(u.doc,f),T(u.doc,Hr(j))))})()},R=function(j,X){if(u.options.allowDropFileTypes&&b(u.options.allowDropFileTypes,j.type)==-1)C();else{var ee=new FileReader;ee.onerror=function(){return C()},ee.onload=function(){var te=ee.result;/[\x00-\x08\x0e-\x1f]{2}/.test(te)||(_[X]=te),C()},ee.readAsText(j)}},D=0;D<c.length;D++)R(c[D],D);else if(u.state.draggingText&&-1<u.doc.sel.contains(f))u.state.draggingText(o),setTimeout(function(){return u.display.input.focus()},20);else try{if(R=o.dataTransfer.getData("Text")){if(u.state.draggingText&&!u.state.draggingText.copy&&(D=u.listSelections()),lh(u.doc,Sr(f,f)),D)for(c=0;c<D.length;++c)Ro(u.doc,"",D[c].anchor,D[c].head,"drag");u.replaceSelection(R,"around","paste"),u.display.input.focus()}}catch{}}}function _v(o){o.display.dragCursor&&(o.display.lineSpace.removeChild(o.display.dragCursor),o.display.dragCursor=null)}function bv(o){if(document.getElementsByClassName){for(var u=document.getElementsByClassName("CodeMirror"),f=[],c=0;c<u.length;c++){var g=u[c].CodeMirror;g&&f.push(g)}f.length&&f[0].operation(function(){for(var _=0;_<f.length;_++)o(f[_])})}}function EE(){var o;Ue(window,"resize",function(){o==null&&(o=setTimeout(function(){o=null,bv(AE)},100))}),Ue(window,"blur",function(){return bv(Co)})}function AE(o){var u=o.display;u.cachedCharWidth=u.cachedTextHeight=u.cachedPaddingH=null,u.scrollbarsClipped=!1,o.setSize()}function RE(o){var u=o.split(/-(?!$)/);o=u[u.length-1];for(var f,c,g,_,x=0;x<u.length-1;x++){var C=u[x];if(/^(cmd|meta|m)$/i.test(C))_=!0;else if(/^a(lt)?$/i.test(C))f=!0;else if(/^(c|ctrl|control)$/i.test(C))c=!0;else if(/^s(hift)?$/i.test(C))g=!0;else throw Error("Unrecognized modifier name: "+C)}return f&&(o="Alt-"+o),c&&(o="Ctrl-"+o),_&&(o="Cmd-"+o),g&&(o="Shift-"+o),o}function LE(o){var u={},f;for(f in o)if(o.hasOwnProperty(f)){var c=o[f];if(!/^(name|fallthrough|(de|at)tach)$/.test(f)){if(c!="...")for(var g=L(f.split(" "),RE),_=0;_<g.length;_++){if(_==g.length-1)var x=g.join(" "),C=c;else x=g.slice(0,_+1).join(" "),C="...";var R=u[x];if(!R)u[x]=C;else if(R!=C)throw Error("Inconsistent bindings for "+x)}delete o[f]}}for(var D in u)o[D]=u[D];return o}function Oo(o,u,f,c){u=ch(u);var g=u.call?u.call(o,c):u[o];if(g===!1)return"nothing";if(g==="...")return"multi";if(g!=null&&f(g))return"handled";if(u.fallthrough){if(Object.prototype.toString.call(u.fallthrough)!="[object Array]")return Oo(o,u.fallthrough,f,c);for(g=0;g<u.fallthrough.length;g++){var _=Oo(o,u.fallthrough[g],f,c);if(_)return _}}}function xv(o){return o=typeof o=="string"?o:qr[o.keyCode],o=="Ctrl"||o=="Alt"||o=="Shift"||o=="Mod"}function Sv(o,u,f){var c=o;return u.altKey&&c!="Alt"&&(o="Alt-"+o),(Hv?u.metaKey:u.ctrlKey)&&c!="Ctrl"&&(o="Ctrl-"+o),(Hv?u.ctrlKey:u.metaKey)&&c!="Mod"&&(o="Cmd-"+o),!f&&u.shiftKey&&c!="Shift"&&(o="Shift-"+o),o}function Cv(o,u){if(Ln&&o.keyCode==34&&o.char)return!1;var f=qr[o.keyCode];return f==null||o.altGraphKey?!1:(o.keyCode==3&&o.code&&(f=o.code),Sv(f,o,u))}function ch(o){return typeof o=="string"?Ml[o]:o}function Io(o,u){for(var f=o.doc.sel.ranges,c=[],g=0;g<f.length;g++){for(var _=u(f[g]);c.length&&0>=Ie(_.from,B(c).to);){var x=c.pop();if(0>Ie(x.from,_.from)){_.from=x.from;break}}c.push(_)}Fi(o,function(){for(var C=c.length-1;0<=C;C--)Ro(o.doc,"",c[C].from,c[C].to,"+delete");Mo(o)})}function Lp(o,u,f){return u=H(o.text,u+f,f),0>u||u>o.text.length?null:u}function Op(o,u,f){return o=Lp(o,u.ch,f),o==null?null:new pe(u.line,o,0>f?"after":"before")}function Ip(o,u,f,c,g){if(o&&(u.doc.direction=="rtl"&&(g=-g),o=Z(f,u.doc.direction))){o=0>g?B(o):o[0];var _=0>g==(o.level==1)?"after":"before";if(0<o.level||u.doc.direction=="rtl"){var x=Ds(u,f),C=0>g?f.text.length-1:0,R=En(u,x,C).top;C=re(function(D){return En(u,x,D).top==R},0>g==(o.level==1)?o.from:o.to-1,C),_=="before"&&(C=Lp(f,C,1))}else C=0>g?o.to:o.from;return new pe(c,C,_)}return new pe(c,0>g?f.text.length:0,0>g?"before":"after")}function OE(o,u,f,c){var g=Z(u,o.doc.direction);if(!g)return Op(u,f,c);f.ch>=u.text.length?(f.ch=u.text.length,f.sticky="before"):0>=f.ch&&(f.ch=0,f.sticky="after");var _=q(g,f.ch,f.sticky),x=g[_];if(o.doc.direction=="ltr"&&x.level%2==0&&(0<c?x.to>f.ch:x.from<f.ch))return Op(u,f,c);var C=function(te,ce){return Lp(u,te instanceof pe?te.ch:te,ce)},R,D=function(te){return o.options.lineWrapping?(R=R||Ds(o,u),Dy(o,u,R,te)):{begin:0,end:u.text.length}},j=D(f.sticky=="before"?C(f,-1):f.ch);if(o.doc.direction=="rtl"||x.level==1){var X=x.level==1==0>c,ee=C(f,X?1:-1);if(ee!=null&&(X?ee<=x.to&&ee<=j.end:ee>=x.from&&ee>=j.begin))return new pe(f.line,ee,X?"before":"after")}return x=function(te,ce,Ce){for(var Pe=function(ft,wt){return wt?new pe(f.line,C(ft,1),"before"):new pe(f.line,ft,"after")};0<=te&&te<g.length;te+=ce){var zt=g[te],Le=0<ce==(zt.level!=1),yt=Le?Ce.begin:C(Ce.end,-1);if(zt.from<=yt&&yt<zt.to||(yt=Le?zt.from:C(zt.to,-1),Ce.begin<=yt&&yt<Ce.end))return Pe(yt,Le)}},(_=x(_+c,c,j))?_:(j=0<c?j.end:C(j.begin,-1),j==null||0<c&&j==u.text.length||!(_=x(0<c?0:g.length-1,c,D(j)))?null:_)}function Mv(o,u){var f=me(o.doc,u),c=Zi(f);return c!=f&&(u=Qe(c)),Ip(!0,o,c,u,1)}function kv(o,u){var f=Mv(o,u.line),c=me(o.doc,f.line);return o=Z(c,o.doc.direction),o&&o[0].level!=0?f:(c=Math.max(f.ch,c.text.search(/\S/)),pe(f.line,u.line==f.line&&u.ch<=c&&u.ch?0:c,f.sticky))}function fh(o,u,f){if(typeof u=="string"&&(u=kl[u],!u))return!1;o.display.input.ensurePolled();var c=o.display.shift,g=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),f&&(o.display.shift=!1),g=u(o)!=vh}finally{o.display.shift=c,o.state.suppressEdits=!1}return g}function cl(o,u,f,c){var g=o.state.keySeq;if(g){if(xv(u))return"handled";if(/'$/.test(u)?o.state.keySeq=null:lA.set(50,function(){o.state.keySeq==g&&(o.state.keySeq=null,o.display.input.reset())}),Tv(o,g+" "+u,f,c))return!0}return Tv(o,u,f,c)}function Tv(o,u,f,c){e:{for(var g=0;g<o.state.keyMaps.length;g++){var _=Oo(u,o.state.keyMaps[g],c,o);if(_){c=_;break e}}c=o.options.extraKeys&&Oo(u,o.options.extraKeys,c,o)||Oo(u,o.options.keyMap,c,o)}return c=="multi"&&(o.state.keySeq=u),c=="handled"&&Ot(o,"keyHandled",o,u,f),(c=="handled"||c=="multi")&&(Se(f),mp(o)),!!c}function Ev(o,u){var f=Cv(u,!0);return f?u.shiftKey&&!o.state.keySeq?cl(o,"Shift-"+f,u,function(c){return fh(o,c,!0)})||cl(o,f,u,function(c){if(typeof c=="string"?/^go[A-Z]/.test(c):c.motion)return fh(o,c)}):cl(o,f,u,function(c){return fh(o,c)}):!1}function IE(o,u,f){return cl(o,"'"+f+"'",u,function(c){return fh(o,c,!0)})}function Av(o){if((!o.target||o.target==this.display.input.getField())&&(this.curOp.focus=p(y(this)),!ne(this,o))){nt&&11>Tt&&o.keyCode==27&&(o.returnValue=!1);var u=o.keyCode;this.display.shift=u==16||o.shiftKey;var f=Ev(this,o);Ln&&(Gp=f?u:null,!f&&u==88&&!nA&&(hn?o.metaKey:o.ctrlKey)&&this.replaceSelection("",null,"cut")),Cr&&!hn&&!f&&u==46&&o.shiftKey&&!o.ctrlKey&&document.execCommand&&document.execCommand("cut"),u!=18||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||NE(this)}}function NE(o){function u(c){c.keyCode!=18&&c.altKey||(Ws(f,"CodeMirror-crosshair"),W(document,"keyup",u),W(document,"mouseover",u))}var f=o.display.lineDiv;d(f,"CodeMirror-crosshair"),Ue(document,"keyup",u),Ue(document,"mouseover",u)}function Rv(o){o.keyCode==16&&(this.doc.sel.shift=!1),ne(this,o)}function Lv(o){if(!(o.target&&o.target!=this.display.input.getField()||Y(this.display,o)||ne(this,o)||o.ctrlKey&&!o.altKey||hn&&o.metaKey)){var u=o.keyCode,f=o.charCode;Ln&&u==Gp?(Gp=null,Se(o)):(!Ln||o.which&&!(10>o.which)||!Ev(this,o))&&(u=String.fromCharCode(f??u),u!="\b"&&!IE(this,o,u)&&this.display.input.onKeyPress(o))}}function DE(o,u){var f=+new Date;return El&&El.compare(f,o,u)?(Tl=El=null,"triple"):Tl&&Tl.compare(f,o,u)?(El=new Vp(f,o,u),Tl=null,"double"):(Tl=new Vp(f,o,u),El=null,"single")}function Ov(o){var u=this.display;if(!(ne(this,o)||u.activeTouch&&u.input.supportsTouch())){if(u.input.ensurePolled(),u.shift=o.shiftKey,Y(u,o))mi||(u.scroller.draggable=!1,setTimeout(function(){return u.scroller.draggable=!0},100));else if(!ph(this,o,"gutterClick",!0)){var f=Bs(this,o),c=oe(o),g=f?DE(f,c):"single";y(this).defaultView.focus(),c==1&&this.state.selectingText&&this.state.selectingText(o),(!f||!BE(this,c,f,g,o))&&(c==1?f?UE(this,f,g,o):(o.target||o.srcElement)==u.scroller&&Se(o):c==2?(f&&ah(this.doc,f),setTimeout(function(){return u.input.focus()},20)):c==3&&(Bp?this.display.input.onContextMenu(o):yp(this)))}}}function BE(o,u,f,c,g){var _="Click";return c=="double"?_="Double"+_:c=="triple"&&(_="Triple"+_),cl(o,Sv((u==1?"Left":u==2?"Middle":"Right")+_,g),g,function(x){if(typeof x=="string"&&(x=kl[x]),!x)return!1;var C=!1;try{o.isReadOnly()&&(o.state.suppressEdits=!0),C=x(o,f)!=vh}finally{o.state.suppressEdits=!1}return C})}function UE(o,u,f,c){nt?setTimeout(v(Py,o),0):o.curOp.focus=p(y(o));var g=o.getOption("configureMouse");g=g?g(o,f,c):{},g.unit==null&&(g.unit=($E?c.shiftKey&&c.metaKey:c.altKey)?"rectangle":f=="single"?"char":f=="double"?"word":"line"),(g.extend==null||o.doc.extend)&&(g.extend=o.doc.extend||c.shiftKey),g.addNew==null&&(g.addNew=hn?c.metaKey:c.ctrlKey),g.moveOnDrag==null&&(g.moveOnDrag=!(hn?c.altKey:c.ctrlKey));var _=o.doc.sel,x;o.options.dragDrop&&tA&&!o.isReadOnly()&&f=="single"&&-1<(x=_.contains(u))&&(0>Ie((x=_.ranges[x]).from(),u)||0<u.xRel)&&(0<Ie(x.to(),u)||0>u.xRel)?JE(o,c,u,g):PE(o,c,u,g)}function JE(o,u,f,c){var g=o.display,_=!1,x=$t(o,function(D){mi&&(g.scroller.draggable=!1),o.state.draggingText=!1,o.state.delayingBlurEvent&&(o.hasFocus()?o.state.delayingBlurEvent=!1:yp(o)),W(g.wrapper.ownerDocument,"mouseup",x),W(g.wrapper.ownerDocument,"mousemove",C),W(g.scroller,"dragstart",R),W(g.scroller,"drop",x),_||(Se(D),c.addNew||ah(o.doc,f,null,null,c.extend),mi&&!mh||nt&&Tt==9?setTimeout(function(){g.wrapper.ownerDocument.body.focus({preventScroll:!0}),g.input.focus()},20):g.input.focus())}),C=function(D){_=_||10<=Math.abs(u.clientX-D.clientX)+Math.abs(u.clientY-D.clientY)},R=function(){return _=!0};mi&&(g.scroller.draggable=!0),o.state.draggingText=x,x.copy=!c.moveOnDrag,Ue(g.wrapper.ownerDocument,"mouseup",x),Ue(g.wrapper.ownerDocument,"mousemove",C),Ue(g.scroller,"dragstart",R),Ue(g.scroller,"drop",x),o.state.delayingBlurEvent=!0,setTimeout(function(){return g.input.focus()},20),g.scroller.dragDrop&&g.scroller.dragDrop()}function Iv(o,u,f){return f=="char"?new at(u,u):f=="word"?o.findWordAt(u):f=="line"?new at(pe(u.line,0),T(o.doc,pe(u.line+1,0))):(o=f(o,u),new at(o.from,o.to))}function PE(o,u,f,c){function g(Le){if(Ie(te,Le)!=0)if(te=Le,c.unit=="rectangle"){var yt=[],ft=o.options.tabSize,wt=M(me(R,f.line).text,f.ch,ft),Ct=M(me(R,Le.line).text,Le.ch,ft),Ke=Math.min(wt,Ct);wt=Math.max(wt,Ct),Ct=Math.min(f.line,Le.line);for(var _t=Math.min(o.lastLine(),Math.max(f.line,Le.line));Ct<=_t;Ct++){var rt=me(R,Ct).text,pt=w(rt,Ke,ft);Ke==wt?yt.push(new at(pe(Ct,pt),pe(Ct,pt))):rt.length>pt&&yt.push(new at(pe(Ct,pt),pe(Ct,w(rt,wt,ft))))}yt.length||yt.push(new at(f,f)),ii(R,Rn(o,D.ranges.slice(0,X).concat(yt),X),{origin:"*mouse",scroll:!1}),o.scrollIntoView(Le)}else yt=ee,Ke=Iv(o,Le,c.unit),Le=yt.anchor,0<Ie(Ke.anchor,Le)?(ft=Ke.head,Le=k(yt.from(),Ke.anchor)):(ft=Ke.anchor,Le=J(yt.to(),Ke.head)),yt=D.ranges.slice(0),yt[X]=FE(o,new at(T(R,Le),ft)),ii(R,Rn(o,yt,X),Up)}function _(Le){var yt=++Ce,ft=Bs(o,Le,!0,c.unit=="rectangle");if(ft)if(Ie(ft,te)!=0){o.curOp.focus=p(y(o)),g(ft);var wt=ih(C,R);(ft.line>=wt.to||ft.line<wt.from)&&setTimeout($t(o,function(){Ce==yt&&_(Le)}),150)}else{var Ct=Le.clientY<ce.top?-20:Le.clientY>ce.bottom?20:0;Ct&&setTimeout($t(o,function(){Ce==yt&&(C.scroller.scrollTop+=Ct,_(Le))}),50)}}function x(Le){o.state.selectingText=!1,Ce=1/0,Le&&(Se(Le),C.input.focus()),W(C.wrapper.ownerDocument,"mousemove",Pe),W(C.wrapper.ownerDocument,"mouseup",zt),R.history.lastSelOrigin=null}nt&&yp(o);var C=o.display,R=o.doc;Se(u);var D=R.sel,j=D.ranges;if(c.addNew&&!c.extend)var X=R.sel.contains(f),ee=-1<X?j[X]:new at(f,f);else ee=R.sel.primary(),X=R.sel.primIndex;c.unit=="rectangle"?(c.addNew||(ee=new at(f,f)),f=Bs(o,u,!0,!0),X=-1):(u=Iv(o,f,c.unit),ee=c.extend?Ap(ee,u.anchor,u.head,c.extend):u),c.addNew?X==-1?(X=j.length,ii(R,Rn(o,j.concat([ee]),X),{scroll:!1,origin:"*mouse"})):1<j.length&&j[X].empty()&&c.unit=="char"&&!c.extend?(ii(R,Rn(o,j.slice(0,X).concat(j.slice(X+1)),0),{scroll:!1,origin:"*mouse"}),D=R.sel):Rp(R,X,ee,Up):(X=0,ii(R,new Xi([ee],0),Up),D=R.sel);var te=f,ce=C.wrapper.getBoundingClientRect(),Ce=0,Pe=$t(o,function(Le){Le.buttons!==0&&oe(Le)?_(Le):x(Le)}),zt=$t(o,x);o.state.selectingText=zt,Ue(C.wrapper.ownerDocument,"mousemove",Pe),Ue(C.wrapper.ownerDocument,"mouseup",zt)}function FE(o,u){var f=u.anchor,c=u.head,g=me(o.doc,f.line);if(Ie(f,c)==0&&f.sticky==c.sticky||(g=Z(g),!g))return u;var _=q(g,f.ch,f.sticky),x=g[_];if(x.from!=f.ch&&x.to!=f.ch)return u;var C=_+(x.from==f.ch==(x.level!=1)?0:1);return C==0||C==g.length?u:(c.line!=f.line?o=0<(c.line-f.line)*(o.doc.direction=="ltr"?1:-1):(o=q(g,c.ch,c.sticky),_=o-_||(c.ch-f.ch)*(x.level==1?-1:1),o=o==C-1||o==C?0>_:0<_),g=g[C+(o?-1:0)],g=(C=o==(g.level==1))?g.from:g.to,C=C?"after":"before",f.ch==g&&f.sticky==C?u:new at(new pe(f.line,g,C),c))}function ph(o,u,f,c){if(u.touches)var g=u.touches[0].clientX,_=u.touches[0].clientY;else try{g=u.clientX,_=u.clientY}catch{return!1}if(g>=Math.floor(o.display.gutters.getBoundingClientRect().right))return!1;c&&Se(u),c=o.display;var x=c.lineDiv.getBoundingClientRect();if(_>x.bottom||!ye(o,f))return Ze(u);for(_-=x.top-c.viewOffset,x=0;x<o.display.gutterSpecs.length;++x){var C=c.gutters.childNodes[x];if(C&&C.getBoundingClientRect().right>=g)return g=pi(o.doc,_),$(o,f,o,g,o.display.gutterSpecs[x].className,u),Ze(u)}}function Nv(o,u){var f;(f=Y(o.display,u))||(f=ye(o,"gutterContextMenu")?ph(o,u,"gutterContextMenu",!1):!1),!f&&!ne(o,u,"contextmenu")&&!Bp&&o.display.input.onContextMenu(u)}function Dv(o){o.display.wrapper.className=o.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+o.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Xa(o)}function jE(o,u,f){!u!=!(f&&f!=Po)&&(f=o.display.dragFunctions,u=u?Ue:W,u(o.display.scroller,"dragstart",f.start),u(o.display.scroller,"dragenter",f.enter),u(o.display.scroller,"dragover",f.over),u(o.display.scroller,"dragleave",f.leave),u(o.display.scroller,"drop",f.drop))}function WE(o){o.options.lineWrapping?(d(o.display.wrapper,"CodeMirror-wrap"),o.display.sizer.style.minWidth="",o.display.sizerWidth=null):(Ws(o.display.wrapper,"CodeMirror-wrap"),Ya(o)),dp(o),Ti(o),Xa(o),setTimeout(function(){return ko(o)},100)}function Rt(o,u){var f=this;if(!(this instanceof Rt))return new Rt(o,u);this.options=u=u?S(u):{},S(tw,u,!1);var c=u.value;typeof c=="string"?c=new Ai(c,u.mode,null,u.lineSeparator,u.direction):u.mode&&(c.modeOption=u.mode),this.doc=c;var g=new Rt.inputStyles[u.inputStyle](this);o=this.display=new wE(o,c,g,u),o.wrapper.CodeMirror=this,Dv(this),u.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Vy(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new $r,keySeq:null,specialChars:null},u.autofocus&&!dl&&o.input.focus(),nt&&11>Tt&&setTimeout(function(){return f.display.input.reset(!0)},20),GE(this),ew||(EE(),ew=!0),Ps(this),this.curOp.forceUpdate=!0,ev(this,c),u.autofocus&&!dl||this.hasFocus()?setTimeout(function(){f.hasFocus()&&!f.state.focused&&vp(f)},20):Co(this);for(var _ in Mh)Mh.hasOwnProperty(_)&&Mh[_](this,u[_],Po);for(Hy(this),u.finishInit&&u.finishInit(this),c=0;c<Kp.length;++c)Kp[c](this);Fs(this),mi&&u.lineWrapping&&getComputedStyle(o.lineDiv).textRendering=="optimizelegibility"&&(o.lineDiv.style.textRendering="auto")}function GE(o){function u(){c.activeTouch&&(g=setTimeout(function(){return c.activeTouch=null},1e3),_=c.activeTouch,_.end=+new Date)}function f(C,R){if(R.left==null)return!0;var D=R.left-C.left;return C=R.top-C.top,400<D*D+C*C}var c=o.display;Ue(c.scroller,"mousedown",$t(o,Ov)),nt&&11>Tt?Ue(c.scroller,"dblclick",$t(o,function(C){if(!ne(o,C)){var R=Bs(o,C);!R||ph(o,C,"gutterClick",!0)||Y(o.display,C)||(Se(C),C=o.findWordAt(R),ah(o.doc,C.anchor,C.head))}})):Ue(c.scroller,"dblclick",function(C){return ne(o,C)||Se(C)}),Ue(c.scroller,"contextmenu",function(C){return Nv(o,C)}),Ue(c.input.getField(),"contextmenu",function(C){c.scroller.contains(C.target)||Nv(o,C)});var g,_={end:0};Ue(c.scroller,"touchstart",function(C){var R;(R=!ne(o,C))&&(C.touches.length!=1?R=!1:(R=C.touches[0],R=1>=R.radiusX&&1>=R.radiusY),R=!R),R&&!ph(o,C,"gutterClick",!0)&&(c.input.ensurePolled(),clearTimeout(g),R=+new Date,c.activeTouch={start:R,moved:!1,prev:300>=R-_.end?_:null},C.touches.length==1&&(c.activeTouch.left=C.touches[0].pageX,c.activeTouch.top=C.touches[0].pageY))}),Ue(c.scroller,"touchmove",function(){c.activeTouch&&(c.activeTouch.moved=!0)}),Ue(c.scroller,"touchend",function(C){var R=c.activeTouch;if(R&&!Y(c,C)&&R.left!=null&&!R.moved&&300>new Date-R.start){var D=o.coordsChar(c.activeTouch,"page");R=!R.prev||f(R,R.prev)?new at(D,D):!R.prev.prev||f(R,R.prev.prev)?o.findWordAt(D):new at(pe(D.line,0),T(o.doc,pe(D.line+1,0))),o.setSelection(R.anchor,R.head),o.focus(),Se(C)}u()}),Ue(c.scroller,"touchcancel",u),Ue(c.scroller,"scroll",function(){c.scroller.clientHeight&&(il(o,c.scroller.scrollTop),Js(o,c.scroller.scrollLeft,!0),$(o,"scroll",o))}),Ue(c.scroller,"mousewheel",function(C){return $y(o,C)}),Ue(c.scroller,"DOMMouseScroll",function(C){return $y(o,C)}),Ue(c.wrapper,"scroll",function(){return c.wrapper.scrollTop=c.wrapper.scrollLeft=0}),c.dragFunctions={enter:function(C){ne(o,C)||se(C)},over:function(C){if(!ne(o,C)){var R=Bs(o,C);if(R){var D=document.createDocumentFragment();gp(o,R,D),o.display.dragCursor||(o.display.dragCursor=a("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),o.display.lineSpace.insertBefore(o.display.dragCursor,o.display.cursorDiv)),s(o.display.dragCursor,D)}se(C)}},start:function(C){if(nt&&(!o.state.draggingText||100>+new Date-Xv))se(C);else if(!ne(o,C)&&!Y(o.display,C)&&(C.dataTransfer.setData("Text",o.getSelection()),C.dataTransfer.effectAllowed="copyMove",C.dataTransfer.setDragImage&&!mh)){var R=a("img",null,null,"position: fixed; left: 0; top: 0;");R.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Ln&&(R.width=R.height=1,o.display.wrapper.appendChild(R),R._top=R.offsetTop),C.dataTransfer.setDragImage(R,0,0),Ln&&R.parentNode.removeChild(R)}},drop:$t(o,TE),leave:function(C){ne(o,C)||_v(o)}};var x=c.input.getField();Ue(x,"keyup",function(C){return Rv.call(o,C)}),Ue(x,"keydown",$t(o,Av)),Ue(x,"keypress",$t(o,Lv)),Ue(x,"focus",function(C){return vp(o,C)}),Ue(x,"blur",function(C){return Co(o,C)})}function fl(o,u,f,c){var g=o.doc,_;f==null&&(f="add"),f=="smart"&&(g.mode.indent?_=fe(o,u).state:f="prev");var x=o.options.tabSize,C=me(g,u),R=M(C.text,null,x);C.stateAfter&&(C.stateAfter=null);var D=C.text.match(/^\s*/)[0];if(!c&&!/\S/.test(C.text)){var j=0;f="not"}else if(f=="smart"&&(j=g.mode.indent(_,C.text.slice(D.length),C.text),j==vh||150<j)){if(!c)return;f="prev"}if(f=="prev"?j=u>g.first?M(me(g,u-1).text,null,x):0:f=="add"?j=R+o.options.indentUnit:f=="subtract"?j=R-o.options.indentUnit:typeof f=="number"&&(j=R+f),j=Math.max(0,j),f="",c=0,o.options.indentWithTabs)for(o=Math.floor(j/x);o;--o)c+=x,f+="	";if(c<j&&(f+=E(j-c)),f!=D)return Ro(g,f,pe(u,0),pe(u,D.length),"+input"),C.stateAfter=null,!0;for(x=0;x<g.sel.ranges.length;x++)if(C=g.sel.ranges[x],C.head.line==u&&C.head.ch<D.length){u=pe(u,D.length),Rp(g,x,new at(u,u));break}}function Np(o,u,f,c,g){var _=o.doc;o.display.shift=!1,c||(c=_.sel);var x=+new Date-200,C=g=="paste"||o.state.pasteIncoming>x,R=Fp(u),D=null;if(C&&1<c.ranges.length)if(ji&&ji.text.join(`
`)==u){if(c.ranges.length%ji.text.length==0){D=[];for(var j=0;j<ji.text.length;j++)D.push(_.splitLines(ji.text[j]))}}else R.length==c.ranges.length&&o.options.pasteLinesPerSelection&&(D=L(R,function(Ce){return[Ce]}));j=o.curOp.updateInput;for(var X=c.ranges.length-1;0<=X;X--){var ee=c.ranges[X],te=ee.from(),ce=ee.to();ee.empty()&&(f&&0<f?te=pe(te.line,te.ch-f):o.state.overwrite&&!C?ce=pe(ce.line,Math.min(me(_,ce.line).text.length,ce.ch+B(R).length)):C&&ji&&ji.lineWise&&ji.text.join(`
`)==R.join(`
`)&&(te=ce=pe(te.line,0))),ee={from:te,to:ce,text:D?D[X%D.length]:R,origin:g||(C?"paste":o.state.cutIncoming>x?"cut":"+input")},Ao(o.doc,ee),Ot(o,"inputRead",o,ee)}u&&!C&&Uv(o,u),Mo(o),2>o.curOp.updateInput&&(o.curOp.updateInput=j),o.curOp.typing=!0,o.state.pasteIncoming=o.state.cutIncoming=-1}function Bv(o,u){var f=o.clipboardData&&o.clipboardData.getData("Text");if(f)return o.preventDefault(),u.isReadOnly()||u.options.disableInput||!u.hasFocus()||Fi(u,function(){return Np(u,f,0,null,"paste")}),!0}function Uv(o,u){if(o.options.electricChars&&o.options.smartIndent)for(var f=o.doc.sel,c=f.ranges.length-1;0<=c;c--){var g=f.ranges[c];if(!(100<g.head.ch||c&&f.ranges[c-1].head.line==g.head.line)){var _=o.getModeAt(g.head),x=!1;if(_.electricChars){for(var C=0;C<_.electricChars.length;C++)if(-1<u.indexOf(_.electricChars.charAt(C))){x=fl(o,g.head.line,"smart");break}}else _.electricInput&&_.electricInput.test(me(o.doc,g.head.line).text.slice(0,g.head.ch))&&(x=fl(o,g.head.line,"smart"));x&&Ot(o,"electricInput",o,g.head.line)}}}function Jv(o){for(var u=[],f=[],c=0;c<o.doc.sel.ranges.length;c++){var g=o.doc.sel.ranges[c].head.line;g={anchor:pe(g,0),head:pe(g+1,0)},f.push(g),u.push(o.getRange(g.anchor,g.head))}return{text:u,ranges:f}}function Pv(o,u,f,c){o.setAttribute("autocorrect",f?"":"off"),o.setAttribute("autocapitalize",c?"":"off"),o.setAttribute("spellcheck",!!u)}function Fv(){var o=a("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),u=a("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return mi?o.style.width="1000px":o.setAttribute("wrap","off"),pl&&(o.style.border="1px solid black"),Pv(o),u}function Dp(o,u,f,c,g){function _(Ce){if(c=="codepoint"){var Pe=R.text.charCodeAt(u.ch+(0<f?0:-1));Pe=isNaN(Pe)?null:new pe(u.line,Math.max(0,Math.min(R.text.length,u.ch+f*((0<f?55296<=Pe&&56320>Pe:56320<=Pe&&57343>Pe)?2:1))),-f)}else Pe=g?OE(o.cm,R,u,f):Op(R,u,f);if(Pe==null)if((Ce=!Ce)&&(Ce=u.line+D,Ce<o.first||Ce>=o.first+o.size?Ce=!1:(u=new pe(Ce,u.ch,u.sticky),Ce=R=me(o,Ce))),Ce)u=Ip(g,o.cm,R,u.line,D);else return!1;else u=Pe;return!0}var x=u,C=f,R=me(o,u.line),D=g&&o.direction=="rtl"?-f:f;if(c=="char"||c=="codepoint")_();else if(c=="column")_(!0);else if(c=="word"||c=="group")for(var j=null,X=c=="group",ee=o.cm&&o.cm.getHelper(u,"wordChars"),te=!0;!(0>f)||_(!te);te=!1){var ce=R.text.charAt(u.ch)||`
`;if(ce=V(ce,ee)?"w":X&&ce==`
`?"n":!X||/\s/.test(ce)?null:"p",!X||te||ce||(ce="s"),j&&j!=ce){0>f&&(f=1,_(),u.sticky="after");break}if(ce&&(j=ce),0<f&&!_(!te))break}return C=uh(o,u,x,C,!0),Bt(x,C)&&(C.hitSide=!0),C}function jv(o,u,f,c){var g=o.doc,_=u.left;if(c=="page"){var x=Math.min(o.display.wrapper.clientHeight,y(o).defaultView.innerHeight||g(o).documentElement.clientHeight);x=Math.max(x-.5*xo(o.display),3),x=(0<f?u.bottom:u.top)+f*x}else c=="line"&&(x=0<f?u.bottom+3:u.top-3);for(;u=hp(o,_,x),!!u.outside;){if(0>f?0>=x:x>=g.height){u.hitSide=!0;break}x+=5*f}return u}function Wv(o,u){var f=ap(o,u.line);if(!f||f.hidden)return null;var c=me(o.doc,u.line);return f=bo(f,c,u.line),o=Z(c,o.doc.direction),c="left",o&&(c=q(o,u.ch)%2?"right":"left"),u=Ty(f.map,u.ch,c),u.offset=u.collapse=="right"?u.end:u.start,u}function VE(o){for(;o;o=o.parentNode)if(/CodeMirror-gutter-wrapper/.test(o.className))return!0;return!1}function No(o,u){return u&&(o.bad=!0),o}function KE(o,u,f,c,g){function _(te){return function(ce){return ce.id==te}}function x(){j&&(D+=X,ee&&(D+=X),j=ee=!1)}function C(te){te&&(x(),D+=te)}function R(te){if(te.nodeType==1){var ce=te.getAttribute("cm-text");if(ce)C(ce);else{ce=te.getAttribute("cm-marker");var Ce;if(ce)te=o.findMarks(pe(c,0),pe(g+1,0),_(+ce)),te.length&&(Ce=te[0].find(0))&&C(Je(o.doc,Ce.from,Ce.to).join(X));else if(te.getAttribute("contenteditable")!="false"&&(Ce=/^(pre|div|p|li|table|br)$/i.test(te.nodeName),/^br$/i.test(te.nodeName)||te.textContent.length!=0)){for(Ce&&x(),ce=0;ce<te.childNodes.length;ce++)R(te.childNodes[ce]);/^(pre|p)$/i.test(te.nodeName)&&(ee=!0),Ce&&(j=!0)}}}else te.nodeType==3&&C(te.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var D="",j=!1,X=o.doc.lineSeparator(),ee=!1;R(u),u!=f;)u=u.nextSibling,ee=!1;return D}function dh(o,u,f){if(u==o.display.lineDiv){var c=o.display.lineDiv.childNodes[f];if(!c)return No(o.clipPos(pe(o.display.viewTo-1)),!0);u=null,f=0}else for(c=u;;c=c.parentNode){if(!c||c==o.display.lineDiv)return null;if(c.parentNode&&c.parentNode==o.display.lineDiv)break}for(var g=0;g<o.display.view.length;g++){var _=o.display.view[g];if(_.node==c)return zE(_,u,f)}}function zE(o,u,f){function c(j,X,ee){for(var te=-1;te<(D?D.length:0);te++)for(var ce=0>te?R.map:D[te],Ce=0;Ce<ce.length;Ce+=3){var Pe=ce[Ce+2];if(Pe==j||Pe==X)return X=Qe(0>te?o.line:o.rest[te]),te=ce[Ce]+ee,(0>ee||Pe!=j)&&(te=ce[Ce+(ee?1:0)]),pe(X,te)}}var g=o.text.firstChild,_=!1;if(!u||!h(g,u))return No(pe(Qe(o.line),0),!0);if(u==g&&(_=!0,u=g.childNodes[f],f=0,!u))return f=o.rest?B(o.rest):o.line,No(pe(Qe(f),f.text.length),_);var x=u.nodeType==3?u:null,C=u;for(x||u.childNodes.length!=1||u.firstChild.nodeType!=3||(x=u.firstChild,f&&(f=x.nodeValue.length));C.parentNode!=g;)C=C.parentNode;var R=o.measure,D=R.maps;if(u=c(x,C,f))return No(u,_);for(g=C.nextSibling,x=x?x.nodeValue.length-f:0;g;g=g.nextSibling){if(u=c(g,g.firstChild,0))return No(pe(u.line,u.ch-x),_);x+=g.textContent.length}for(C=C.previousSibling;C;C=C.previousSibling){if(u=c(C,C.firstChild,-1))return No(pe(u.line,u.ch+f),_);f+=C.textContent.length}}var Ei=navigator.userAgent,Gv=navigator.platform,Cr=/gecko\/\d/i.test(Ei),Vv=/MSIE \d/.test(Ei),Kv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ei),gh=/Edge\/(\d+)/.exec(Ei),nt=Vv||Kv||gh,Tt=nt&&(Vv?document.documentMode||6:+(gh||Kv)[1]),mi=!gh&&/WebKit\//.test(Ei),HE=mi&&/Qt\/\d+\.\d+/.test(Ei),Yr=!gh&&/Chrome\/(\d+)/.exec(Ei),zv=Yr&&+Yr[1],Ln=/Opera\//.test(Ei),mh=/Apple Computer/.test(navigator.vendor),QE=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Ei),YE=/PhantomJS/.test(Ei),pl=mh&&(/Mobile\/\w+/.test(Ei)||2<navigator.maxTouchPoints),yh=/Android/.test(Ei),dl=pl||yh||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Ei),hn=pl||/Mac/.test(Gv),$E=/\bCrOS\b/.test(Ei),ZE=/win/i.test(Gv),js=Ln&&Ei.match(/Version\/(\d*\.\d*)/);js&&(js=Number(js[1])),js&&15<=js&&(Ln=!1,mi=!0);var Hv=hn&&(HE||Ln&&(js==null||12.11>js)),Bp=Cr||nt&&9<=Tt,Ws=function(o,u){var f=o.className;if(u=n(u).exec(f)){var c=f.slice(u.index+u[0].length);o.className=f.slice(0,u.index)+(c?u[1]+c:"")}},gl=document.createRange?function(o,u,f,c){var g=document.createRange();return g.setEnd(c||o,f),g.setStart(o,u),g}:function(o,u,f){var c=document.body.createTextRange();try{c.moveToElementText(o.parentNode)}catch{return c}return c.collapse(!0),c.moveEnd("character",f),c.moveStart("character",u),c},ml=function(o){o.select()};pl?ml=function(o){o.selectionStart=0,o.selectionEnd=o.value.length}:nt&&(ml=function(o){try{o.select()}catch{}});var $r=function(){this.f=this.id=null,this.time=0,this.handler=v(this.onTimeout,this)};$r.prototype.onTimeout=function(o){o.id=0,o.time<=+new Date?o.f():setTimeout(o.handler,o.time-+new Date)},$r.prototype.set=function(o,u){this.f=u,u=+new Date+o,(!this.id||u<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,o),this.time=u)};var vh={toString:function(){return"CodeMirror.Pass"}},Hn={scroll:!1},Up={origin:"*mouse"},yl={origin:"+move"},wh=[""],qE=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,XE=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,vl=null,eA=function(){function o(x,C,R){this.level=x,this.from=C,this.to=R}var u=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,f=/[stwN]/,c=/[LRr]/,g=/[Lb1n]/,_=/[1n]/;return function(x,C){var R=C=="ltr"?"L":"R";if(x.length==0||C=="ltr"&&!u.test(x))return!1;for(var D=x.length,j=[],X=0;X<D;++X){var ee=j,te=ee.push,ce=x.charCodeAt(X);ce=247>=ce?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(ce):1424<=ce&&1524>=ce?"R":1536<=ce&&1785>=ce?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(ce-1536):1774<=ce&&2220>=ce?"r":8192<=ce&&8203>=ce?"w":ce==8204?"b":"L",te.call(ee,ce)}for(X=0,ee=R;X<D;++X)te=j[X],te=="m"?j[X]=ee:ee=te;for(X=0,ee=R;X<D;++X)te=j[X],te=="1"&&ee=="r"?j[X]="n":c.test(te)&&(ee=te,te=="r"&&(j[X]="R"));for(X=1,ee=j[0];X<D-1;++X)te=j[X],te=="+"&&ee=="1"&&j[X+1]=="1"?j[X]="1":te!=","||ee!=j[X+1]||ee!="1"&&ee!="n"||(j[X]=ee),ee=te;for(X=0;X<D;++X)if(ee=j[X],ee==",")j[X]="N";else if(ee=="%"){for(ee=X+1;ee<D&&j[ee]=="%";++ee);for(te=X&&j[X-1]=="!"||ee<D&&j[ee]=="1"?"1":"N";X<ee;++X)j[X]=te;X=ee-1}for(X=0,ee=R;X<D;++X)te=j[X],ee=="L"&&te=="1"?j[X]="L":c.test(te)&&(ee=te);for(ee=0;ee<D;++ee)if(f.test(j[ee])){for(X=ee+1;X<D&&f.test(j[X]);++X);for(te=(ee?j[ee-1]:R)=="L",te=te==((X<D?j[X]:R)=="L")?te?"L":"R":R;ee<X;++ee)j[ee]=te;ee=X-1}R=[];var Ce;for(X=0;X<D;)if(g.test(j[X])){for(ee=X,++X;X<D&&g.test(j[X]);++X);R.push(new o(0,ee,X))}else{var Pe=X;for(ee=R.length,te=C=="rtl"?1:0,++X;X<D&&j[X]!="L";++X);for(ce=Pe;ce<X;)if(_.test(j[ce])){for(Pe<ce&&(R.splice(ee,0,new o(1,Pe,ce)),ee+=te),Pe=ce,++ce;ce<X&&_.test(j[ce]);++ce);R.splice(ee,0,new o(2,Pe,ce)),ee+=te,Pe=ce}else++ce;Pe<X&&R.splice(ee,0,new o(1,Pe,X))}return C=="ltr"&&(R[0].level==1&&(Ce=x.match(/^\s+/))&&(R[0].from=Ce[0].length,R.unshift(new o(0,0,Ce[0].length))),B(R).level==1&&(Ce=x.match(/\s+$/))&&(B(R).to-=Ce[0].length,R.push(new o(0,D-Ce[0].length,D)))),C=="rtl"?R.reverse():R}}(),_h=[],Ue=function(o,u,f){o.addEventListener?o.addEventListener(u,f,!1):o.attachEvent?o.attachEvent("on"+u,f):(o=o._handlers||(o._handlers={}),o[u]=(o[u]||_h).concat(f))},tA=function(){if(nt&&9>Tt)return!1;var o=a("div");return"draggable"in o||"dragDrop"in o}(),Jp,Pp,Fp=`

b`.split(/\n/).length!=3?function(o){for(var u=0,f=[],c=o.length;u<=c;){var g=o.indexOf(`
`,u);g==-1&&(g=o.length);var _=o.slice(u,o.charAt(g-1)=="\r"?g-1:g),x=_.indexOf("\r");x!=-1?(f.push(_.slice(0,x)),u+=x+1):(f.push(_),u=g+1)}return f}:function(o){return o.split(/\r\n?|\n/)},iA=window.getSelection?function(o){try{return o.selectionStart!=o.selectionEnd}catch{return!1}}:function(o){try{var u=o.ownerDocument.selection.createRange()}catch{}return u&&u.parentElement()==o?u.compareEndPoints("StartToEnd",u)!=0:!1},nA=function(){var o=a("div");return"oncopy"in o?!0:(o.setAttribute("oncopy","return;"),typeof o.oncopy=="function")}(),jp=null,Wp={},Do={},Bo={},Wt=function(o,u,f){this.pos=this.start=0,this.string=o,this.tabSize=u||8,this.lineStart=this.lastColumnPos=this.lastColumnValue=0,this.lineOracle=f};Wt.prototype.eol=function(){return this.pos>=this.string.length},Wt.prototype.sol=function(){return this.pos==this.lineStart},Wt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Wt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Wt.prototype.eat=function(o){var u=this.string.charAt(this.pos);if(typeof o=="string"?u==o:u&&(o.test?o.test(u):o(u)))return++this.pos,u},Wt.prototype.eatWhile=function(o){for(var u=this.pos;this.eat(o););return this.pos>u},Wt.prototype.eatSpace=function(){for(var o=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>o},Wt.prototype.skipToEnd=function(){this.pos=this.string.length},Wt.prototype.skipTo=function(o){if(o=this.string.indexOf(o,this.pos),-1<o)return this.pos=o,!0},Wt.prototype.backUp=function(o){this.pos-=o},Wt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=M(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?M(this.string,this.lineStart,this.tabSize):0)},Wt.prototype.indentation=function(){return M(this.string,null,this.tabSize)-(this.lineStart?M(this.string,this.lineStart,this.tabSize):0)},Wt.prototype.match=function(o,u,f){if(typeof o=="string"){var c=function(_){return f?_.toLowerCase():_},g=this.string.substr(this.pos,o.length);if(c(g)==c(o))return u!==!1&&(this.pos+=o.length),!0}else return(o=this.string.slice(this.pos).match(o))&&0<o.index?null:(o&&u!==!1&&(this.pos+=o[0].length),o)},Wt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Wt.prototype.hideFirstChars=function(o,u){this.lineStart+=o;try{return u()}finally{this.lineStart-=o}},Wt.prototype.lookAhead=function(o){var u=this.lineOracle;return u&&u.lookAhead(o)},Wt.prototype.baseToken=function(){var o=this.lineOracle;return o&&o.baseToken(this.pos)};var bh=function(o,u){this.state=o,this.lookAhead=u},Qn=function(o,u,f,c){this.state=u,this.doc=o,this.line=f,this.maxLookAhead=c||0,this.baseTokens=null,this.baseTokenPos=1};Qn.prototype.lookAhead=function(o){var u=this.doc.getLine(this.line+o);return u!=null&&o>this.maxLookAhead&&(this.maxLookAhead=o),u},Qn.prototype.baseToken=function(o){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=o;)this.baseTokenPos+=2;var u=this.baseTokens[this.baseTokenPos+1];return{type:u&&u.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-o}},Qn.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Qn.fromSaved=function(o,u,f){return u instanceof bh?new Qn(o,K(o.mode,u.state),f,u.lookAhead):new Qn(o,K(o.mode,u),f)},Qn.prototype.save=function(o){return o=o!==!1?K(this.doc.mode,this.state):this.state,0<this.maxLookAhead?new bh(o,this.maxLookAhead):o};var Qv=function(o,u,f){this.start=o.start,this.end=o.pos,this.string=o.current(),this.type=u||null,this.state=f},Yv=!1,Mr=!1,Uo=function(o,u,f){this.text=o,Qa(this,u),this.height=f?f(this):1};Uo.prototype.lineNo=function(){return Qe(this)},xe(Uo);var rA={},sA={},Jo=null,wl=null,$v={left:0,right:0,top:0,bottom:0},Gs,Vs=function(o,u,f){this.cm=f;var c=this.vert=a("div",[a("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),g=this.horiz=a("div",[a("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");c.tabIndex=g.tabIndex=-1,o(c),o(g),Ue(c,"scroll",function(){c.clientHeight&&u(c.scrollTop,"vertical")}),Ue(g,"scroll",function(){g.clientWidth&&u(g.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,nt&&8>Tt&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Vs.prototype.update=function(o){var u=o.scrollWidth>o.clientWidth+1,f=o.scrollHeight>o.clientHeight+1,c=o.nativeBarWidth;return f?(this.vert.style.display="block",this.vert.style.bottom=u?c+"px":"0",this.vert.firstChild.style.height=Math.max(0,o.scrollHeight-o.clientHeight+(o.viewHeight-(u?c:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),u?(this.horiz.style.display="block",this.horiz.style.right=f?c+"px":"0",this.horiz.style.left=o.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,o.scrollWidth-o.clientWidth+(o.viewWidth-o.barLeft-(f?c:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&0<o.clientHeight&&(c==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:f?c:0,bottom:u?c:0}},Vs.prototype.setScrollLeft=function(o){this.horiz.scrollLeft!=o&&(this.horiz.scrollLeft=o),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Vs.prototype.setScrollTop=function(o){this.vert.scrollTop!=o&&(this.vert.scrollTop=o),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Vs.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=hn&&!QE?"12px":"18px",this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new $r,this.disableVert=new $r},Vs.prototype.enableZeroWidthBar=function(o,u,f){function c(){var g=o.getBoundingClientRect();(f=="vert"?document.elementFromPoint(g.right-1,(g.top+g.bottom)/2):document.elementFromPoint((g.right+g.left)/2,g.bottom-1))!=o?o.style.visibility="hidden":u.set(1e3,c)}o.style.visibility="",u.set(1e3,c)},Vs.prototype.clear=function(){var o=this.horiz.parentNode;o.removeChild(this.horiz),o.removeChild(this.vert)};var _l=function(){};_l.prototype.update=function(){return{bottom:0,right:0}},_l.prototype.setScrollLeft=function(){},_l.prototype.setScrollTop=function(){},_l.prototype.clear=function(){};var Zv={native:Vs,null:_l},oA=0,xh=function(o,u,f){var c=o.display;this.viewport=u,this.visible=ih(c,o.doc,u),this.editorIsHidden=!c.wrapper.offsetWidth,this.wrapperHeight=c.wrapper.clientHeight,this.wrapperWidth=c.wrapper.clientWidth,this.oldDisplayWidth=We(o),this.force=f,this.dims=fp(o),this.events=[]};xh.prototype.signal=function(o,u){ye(o,u)&&this.events.push(arguments)},xh.prototype.finish=function(){for(var o=0;o<this.events.length;o++)$.apply(null,this.events[o])};var Sh=0,kr=null;nt?kr=-.53:Cr?kr=15:Yr?kr=-.7:mh&&(kr=-1/3);var Xi=function(o,u){this.ranges=o,this.primIndex=u};Xi.prototype.primary=function(){return this.ranges[this.primIndex]},Xi.prototype.equals=function(o){if(o==this)return!0;if(o.primIndex!=this.primIndex||o.ranges.length!=this.ranges.length)return!1;for(var u=0;u<this.ranges.length;u++){var f=this.ranges[u],c=o.ranges[u];if(!Bt(f.anchor,c.anchor)||!Bt(f.head,c.head))return!1}return!0},Xi.prototype.deepCopy=function(){for(var o=[],u=0;u<this.ranges.length;u++)o[u]=new at(ki(this.ranges[u].anchor),ki(this.ranges[u].head));return new Xi(o,this.primIndex)},Xi.prototype.somethingSelected=function(){for(var o=0;o<this.ranges.length;o++)if(!this.ranges[o].empty())return!0;return!1},Xi.prototype.contains=function(o,u){u||(u=o);for(var f=0;f<this.ranges.length;f++){var c=this.ranges[f];if(0<=Ie(u,c.from())&&0>=Ie(o,c.to()))return f}return-1};var at=function(o,u){this.anchor=o,this.head=u};at.prototype.from=function(){return k(this.anchor,this.head)},at.prototype.to=function(){return J(this.anchor,this.head)},at.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ul.prototype={chunkSize:function(){return this.lines.length},removeInner:function(o,u){for(var f=o,c=o+u;f<c;++f){var g=this.lines[f];this.height-=g.height;var _=g;_.parent=null,Gu(_),Ot(g,"delete")}this.lines.splice(o,u)},collapse:function(o){o.push.apply(o,this.lines)},insertInner:function(o,u,f){for(this.height+=f,this.lines=this.lines.slice(0,o).concat(u).concat(this.lines.slice(o)),o=0;o<u.length;++o)u[o].parent=this},iterN:function(o,u,f){for(u=o+u;o<u;++o)if(f(this.lines[o]))return!0}},hl.prototype={chunkSize:function(){return this.size},removeInner:function(o,u){this.size-=u;for(var f=0;f<this.children.length;++f){var c=this.children[f],g=c.chunkSize();if(o<g){var _=Math.min(u,g-o),x=c.height;if(c.removeInner(o,_),this.height-=x-c.height,g==_&&(this.children.splice(f--,1),c.parent=null),(u-=_)==0)break;o=0}else o-=g}25>this.size-u&&(1<this.children.length||!(this.children[0]instanceof ul))&&(o=[],this.collapse(o),this.children=[new ul(o)],this.children[0].parent=this)},collapse:function(o){for(var u=0;u<this.children.length;++u)this.children[u].collapse(o)},insertInner:function(o,u,f){this.size+=u.length,this.height+=f;for(var c=0;c<this.children.length;++c){var g=this.children[c],_=g.chunkSize();if(o<=_){if(g.insertInner(o,u,f),g.lines&&50<g.lines.length){for(u=o=g.lines.length%25+25;u<g.lines.length;)f=new ul(g.lines.slice(u,u+=25)),g.height-=f.height,this.children.splice(++c,0,f),f.parent=this;g.lines=g.lines.slice(0,o),this.maybeSpill()}break}o-=_}},maybeSpill:function(){if(!(10>=this.children.length)){var o=this;do{var u=o.children.splice(o.children.length-5,5);if(u=new hl(u),o.parent){o.size-=u.size,o.height-=u.height;var f=b(o.parent.children,o);o.parent.children.splice(f+1,0,u)}else f=new hl(o.children),f.parent=o,o.children=[f,u],o=f;u.parent=o.parent}while(10<o.children.length);o.parent.maybeSpill()}},iterN:function(o,u,f){for(var c=0;c<this.children.length;++c){var g=this.children[c],_=g.chunkSize();if(o<_){if(_=Math.min(u,_-o),g.iterN(o,_,f))return!0;if((u-=_)==0)break;o=0}else o-=_}}};var bl=function(o,u,f){if(f)for(var c in f)f.hasOwnProperty(c)&&(this[c]=f[c]);this.doc=o,this.node=u};bl.prototype.clear=function(){var o=this.doc.cm,u=this.line.widgets,f=this.line,c=Qe(f);if(c!=null&&u){for(var g=0;g<u.length;++g)u[g]==this&&u.splice(g--,1);u.length||(f.widgets=null);var _=N(this);kt(f,Math.max(0,f.height-_)),o&&(Fi(o,function(){var x=-_;un(f)<(o.curOp&&o.curOp.scrollTop||o.doc.scrollTop)&&nh(o,x),Kr(o,c,"widget")}),Ot(o,"lineWidgetCleared",o,this,c))}},bl.prototype.changed=function(){var o=this,u=this.height,f=this.doc.cm,c=this.line;this.height=null;var g=N(this)-u;g&&(qi(this.doc,c)||kt(c,c.height+g),f&&Fi(f,function(){f.curOp.forceUpdate=!0,un(c)<(f.curOp&&f.curOp.scrollTop||f.doc.scrollTop)&&nh(f,g),Ot(f,"lineWidgetChanged",f,o,Qe(c))}))},xe(bl);var qv=0,Zr=function(o,u){this.lines=[],this.type=u,this.doc=o,this.id=++qv};Zr.prototype.clear=function(){if(!this.explicitlyCleared){var o=this.doc.cm,u=o&&!o.curOp;if(u&&Ps(o),ye(this,"clear")){var f=this.find();f&&Ot(this,"clear",f.from,f.to)}for(var c=f=null,g=0;g<this.lines.length;++g){var _=this.lines[g],x=Pi(_.markedSpans,this);o&&!this.collapsed?Kr(o,Qe(_),"text"):o&&(x.to!=null&&(c=Qe(_)),x.from!=null&&(f=Qe(_)));for(var C=_,R=void 0,D=_.markedSpans,j=x,X=0;X<D.length;++X)D[X]!=j&&(R||(R=[])).push(D[X]);C.markedSpans=R,x.from==null&&this.collapsed&&!qi(this.doc,_)&&o&&kt(_,xo(o.display))}if(o&&this.collapsed&&!o.options.lineWrapping)for(g=0;g<this.lines.length;++g)_=Zi(this.lines[g]),x=Fr(_),x>o.display.maxLineLength&&(o.display.maxLine=_,o.display.maxLineLength=x,o.display.maxLineChanged=!0);f!=null&&o&&this.collapsed&&Ti(o,f,c+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,o&&uv(o.doc)),o&&Ot(o,"markerCleared",o,this,f,c),u&&Fs(o),this.parent&&this.parent.clear()}},Zr.prototype.find=function(o,u){o==null&&this.type=="bookmark"&&(o=1);for(var f,c,g=0;g<this.lines.length;++g){var _=this.lines[g],x=Pi(_.markedSpans,this);if(x.from!=null&&(f=pe(u?_:Qe(_),x.from),o==-1))return f;if(x.to!=null&&(c=pe(u?_:Qe(_),x.to),o==1))return c}return f&&{from:f,to:c}},Zr.prototype.changed=function(){var o=this,u=this.find(-1,!0),f=this,c=this.doc.cm;u&&c&&Fi(c,function(){var g=u.line,_=Qe(u.line);(_=ap(c,_))&&(Ey(_),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,qi(f.doc,g)||f.height==null||(_=f.height,f.height=null,(_=N(f)-_)&&kt(g,g.height+_)),Ot(c,"markerChanged",c,o)})},Zr.prototype.attachLine=function(o){if(!this.lines.length&&this.doc.cm){var u=this.doc.cm.curOp;u.maybeHiddenMarkers&&b(u.maybeHiddenMarkers,this)!=-1||(u.maybeUnhiddenMarkers||(u.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(o)},Zr.prototype.detachLine=function(o){this.lines.splice(b(this.lines,o),1),!this.lines.length&&this.doc.cm&&(o=this.doc.cm.curOp,(o.maybeHiddenMarkers||(o.maybeHiddenMarkers=[])).push(this))},xe(Zr);var xl=function(o,u){for(this.markers=o,this.primary=u,u=0;u<o.length;++u)o[u].parent=this};xl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var o=0;o<this.markers.length;++o)this.markers[o].clear();Ot(this,"clear")}},xl.prototype.find=function(o,u){return this.primary.find(o,u)},xe(xl);var aA=0,Ai=function(o,u,f,c,g){if(!(this instanceof Ai))return new Ai(o,u,f,c,g);f==null&&(f=0),hl.call(this,[new ul([new Uo("",null)])]),this.first=f,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=f,f=pe(f,0),this.sel=Sr(f),this.history=new sh(null),this.id=++aA,this.modeOption=u,this.lineSep=c,this.direction=g=="rtl"?"rtl":"ltr",this.extend=!1,typeof o=="string"&&(o=this.splitLines(o)),Tp(this,{from:f,to:f,text:o}),ii(this,Sr(f),Hn)};Ai.prototype=F(hl.prototype,{constructor:Ai,iter:function(o,u,f){f?this.iterN(o-this.first,u-o,f):this.iterN(this.first,this.first+this.size,o)},insert:function(o,u){for(var f=0,c=0;c<u.length;++c)f+=u[c].height;this.insertInner(o-this.first,u,f)},remove:function(o,u){this.removeInner(o-this.first,u)},getValue:function(o){var u=He(this,this.first,this.first+this.size);return o===!1?u:u.join(o||this.lineSeparator())},setValue:Zt(function(o){var u=pe(this.first,0),f=this.first+this.size-1;Ao(this,{from:u,to:pe(f,me(this,f).text.length),text:this.splitLines(o),origin:"setValue",full:!0},!0),this.cm&&tl(this.cm,0,0),ii(this,Sr(u),Hn)}),replaceRange:function(o,u,f,c){u=T(this,u),f=f?T(this,f):u,Ro(this,o,u,f,c)},getRange:function(o,u,f){return o=Je(this,T(this,o),T(this,u)),f===!1?o:f===""?o.join(""):o.join(f||this.lineSeparator())},getLine:function(o){return(o=this.getLineHandle(o))&&o.text},getLineHandle:function(o){if(Ji(this,o))return me(this,o)},getLineNumber:function(o){return Qe(o)},getLineHandleVisualStart:function(o){return typeof o=="number"&&(o=me(this,o)),Zi(o)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(o){return T(this,o)},getCursor:function(o){var u=this.sel.primary();return o==null||o=="head"?u.head:o=="anchor"?u.anchor:o=="end"||o=="to"||o===!1?u.to():u.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Zt(function(o,u,f){o=T(this,typeof o=="number"?pe(o,u||0):o),ii(this,Sr(o,null),f)}),setSelection:Zt(function(o,u,f){var c=T(this,o);o=T(this,u||o),ii(this,Sr(c,o),f)}),extendSelection:Zt(function(o,u,f){ah(this,T(this,o),u&&T(this,u),f)}),extendSelections:Zt(function(o,u){ov(this,G(this,o),u)}),extendSelectionsBy:Zt(function(o,u){o=L(this.sel.ranges,o),ov(this,G(this,o),u)}),setSelections:Zt(function(o,u,f){if(o.length){for(var c=[],g=0;g<o.length;g++)c[g]=new at(T(this,o[g].anchor),T(this,o[g].head||o[g].anchor));u==null&&(u=Math.min(o.length-1,this.sel.primIndex)),ii(this,Rn(this.cm,c,u),f)}}),addSelection:Zt(function(o,u,f){var c=this.sel.ranges.slice(0);c.push(new at(T(this,o),T(this,u||o))),ii(this,Rn(this.cm,c,c.length-1),f)}),getSelection:function(o){for(var u=this.sel.ranges,f,c=0;c<u.length;c++){var g=Je(this,u[c].from(),u[c].to());f=f?f.concat(g):g}return o===!1?f:f.join(o||this.lineSeparator())},getSelections:function(o){for(var u=[],f=this.sel.ranges,c=0;c<f.length;c++){var g=Je(this,f[c].from(),f[c].to());o!==!1&&(g=g.join(o||this.lineSeparator())),u[c]=g}return u},replaceSelection:function(o,u,f){for(var c=[],g=0;g<this.sel.ranges.length;g++)c[g]=o;this.replaceSelections(c,u,f||"+input")},replaceSelections:Zt(function(o,u,f){for(var c=[],g=this.sel,_=0;_<g.ranges.length;_++){var x=g.ranges[_];c[_]={from:x.from(),to:x.to(),text:this.splitLines(o[_]),origin:f}}if(o=u&&u!="end"){for(o=[],g=f=pe(this.first,0),_=0;_<c.length;_++){var C=c[_];x=qy(C.from,f,g);var R=qy(Hr(C),f,g);f=C.to,g=R,u=="around"?(C=this.sel.ranges[_],C=0>Ie(C.head,C.anchor),o[_]=new at(C?R:x,C?x:R)):o[_]=new at(x,x)}o=new Xi(o,this.sel.primIndex)}for(u=o,o=c.length-1;0<=o;o--)Ao(this,c[o]);u?av(this,u):this.cm&&Mo(this.cm)}),undo:Zt(function(){hh(this,"undo")}),redo:Zt(function(){hh(this,"redo")}),undoSelection:Zt(function(){hh(this,"undo",!0)}),redoSelection:Zt(function(){hh(this,"redo",!0)}),setExtending:function(o){this.extend=o},getExtending:function(){return this.extend},historySize:function(){for(var o=this.history,u=0,f=0,c=0;c<o.done.length;c++)o.done[c].ranges||++u;for(c=0;c<o.undone.length;c++)o.undone[c].ranges||++f;return{undo:u,redo:f}},clearHistory:function(){var o=this;this.history=new sh(this.history),Qr(this,function(u){return u.history=o.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(o){return o&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(o){return this.history.generation==(o||this.cleanGeneration)},getHistory:function(){return{done:To(this.history.done),undone:To(this.history.undone)}},setHistory:function(o){var u=this.history=new sh(this.history);u.done=To(o.done.slice(0),null,!0),u.undone=To(o.undone.slice(0),null,!0)},setGutterMarker:Zt(function(o,u,f){return ll(this,o,"gutter",function(c){var g=c.gutterMarkers||(c.gutterMarkers={});return g[u]=f,!f&&A(g)&&(c.gutterMarkers=null),!0})}),clearGutter:Zt(function(o){var u=this;this.iter(function(f){f.gutterMarkers&&f.gutterMarkers[o]&&ll(u,f,"gutter",function(){return f.gutterMarkers[o]=null,A(f.gutterMarkers)&&(f.gutterMarkers=null),!0})})}),lineInfo:function(o){if(typeof o=="number"){if(!Ji(this,o))return null;var u=o;if(o=me(this,o),!o)return null}else if(u=Qe(o),u==null)return null;return{line:u,handle:o,text:o.text,gutterMarkers:o.gutterMarkers,textClass:o.textClass,bgClass:o.bgClass,wrapClass:o.wrapClass,widgets:o.widgets}},addLineClass:Zt(function(o,u,f){return ll(this,o,u=="gutter"?"gutter":"class",function(c){var g=u=="text"?"textClass":u=="background"?"bgClass":u=="gutter"?"gutterClass":"wrapClass";if(c[g]){if(n(f).test(c[g]))return!1;c[g]+=" "+f}else c[g]=f;return!0})}),removeLineClass:Zt(function(o,u,f){return ll(this,o,u=="gutter"?"gutter":"class",function(c){var g=u=="text"?"textClass":u=="background"?"bgClass":u=="gutter"?"gutterClass":"wrapClass",_=c[g];if(_)if(f==null)c[g]=null;else{var x=_.match(n(f));if(!x)return!1;var C=x.index+x[0].length;c[g]=_.slice(0,x.index)+(x.index&&C!=_.length?" ":"")+_.slice(C)||null}else return!1;return!0})}),addLineWidget:Zt(function(o,u,f){return CE(this,o,u,f)}),removeLineWidget:function(o){o.clear()},markText:function(o,u,f){return Lo(this,T(this,o),T(this,u),f,f&&f.type||"range")},setBookmark:function(o,u){return u={replacedWith:u&&(u.nodeType==null?u.widget:u),insertLeft:u&&u.insertLeft,clearWhenEmpty:!1,shared:u&&u.shared,handleMouseEvents:u&&u.handleMouseEvents},o=T(this,o),Lo(this,o,o,u,"bookmark")},findMarksAt:function(o){o=T(this,o);var u=[],f=me(this,o.line).markedSpans;if(f)for(var c=0;c<f.length;++c){var g=f[c];(g.from==null||g.from<=o.ch)&&(g.to==null||g.to>=o.ch)&&u.push(g.marker.parent||g.marker)}return u},findMarks:function(o,u,f){o=T(this,o),u=T(this,u);var c=[],g=o.line;return this.iter(o.line,u.line+1,function(_){if(_=_.markedSpans)for(var x=0;x<_.length;x++){var C=_[x];C.to!=null&&g==o.line&&o.ch>=C.to||C.from==null&&g!=o.line||C.from!=null&&g==u.line&&C.from>=u.ch||f&&!f(C.marker)||c.push(C.marker.parent||C.marker)}++g}),c},getAllMarks:function(){var o=[];return this.iter(function(u){if(u=u.markedSpans)for(var f=0;f<u.length;++f)u[f].from!=null&&o.push(u[f].marker)}),o},posFromIndex:function(o){var u,f=this.first,c=this.lineSeparator().length;return this.iter(function(g){if(g=g.text.length+c,g>o)return u=o,!0;o-=g,++f}),T(this,pe(f,u))},indexFromPos:function(o){o=T(this,o);var u=o.ch;if(o.line<this.first||0>o.ch)return 0;var f=this.lineSeparator().length;return this.iter(this.first,o.line,function(c){u+=c.text.length+f}),u},copy:function(o){var u=new Ai(He(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return u.scrollTop=this.scrollTop,u.scrollLeft=this.scrollLeft,u.sel=this.sel,u.extend=!1,o&&(u.history.undoDepth=this.history.undoDepth,u.setHistory(this.getHistory())),u},linkedDoc:function(o){o||(o={});var u=this.first,f=this.first+this.size;for(o.from!=null&&o.from>u&&(u=o.from),o.to!=null&&o.to<f&&(f=o.to),u=new Ai(He(this,u,f),o.mode||this.modeOption,u,this.lineSep,this.direction),o.sharedHist&&(u.history=this.history),(this.linked||(this.linked=[])).push({doc:u,sharedHist:o.sharedHist}),u.linked=[{doc:this,isParent:!0,sharedHist:o.sharedHist}],o=wv(this),f=0;f<o.length;f++){var c=o[f],g=c.find(),_=u.clipPos(g.from);g=u.clipPos(g.to),Ie(_,g)&&(_=Lo(u,_,g,c.primary,c.primary.type),c.markers.push(_),_.parent=c)}return u},unlinkDoc:function(o){if(o instanceof Rt&&(o=o.doc),this.linked){for(var u=0;u<this.linked.length;++u)if(this.linked[u].doc==o){this.linked.splice(u,1),o.unlinkDoc(this),kE(wv(this));break}}if(o.history==this.history){var f=[o.id];Qr(o,function(c){return f.push(c.id)},!0),o.history=new sh(null),o.history.done=To(this.history.done,f),o.history.undone=To(this.history.undone,f)}},iterLinkedDocs:function(o){Qr(this,o)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(o){return this.lineSep?o.split(this.lineSep):Fp(o)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Zt(function(o){o!="rtl"&&(o="ltr"),o!=this.direction&&(this.direction=o,this.iter(function(u){return u.order=null}),this.cm&&bE(this.cm))})}),Ai.prototype.eachLine=Ai.prototype.iter;for(var Xv=0,ew=!1,qr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Sl=0;10>Sl;Sl++)qr[Sl+48]=qr[Sl+96]=String(Sl);for(var Ch=65;90>=Ch;Ch++)qr[Ch]=String.fromCharCode(Ch);for(var Cl=1;12>=Cl;Cl++)qr[Cl+111]=qr[Cl+63235]="F"+Cl;var Ml={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};Ml.default=hn?Ml.macDefault:Ml.pcDefault;var kl={selectAll:fv,singleSelection:function(o){return o.setSelection(o.getCursor("anchor"),o.getCursor("head"),Hn)},killLine:function(o){return Io(o,function(u){if(u.empty()){var f=me(o.doc,u.head.line).text.length;return u.head.ch==f&&u.head.line<o.lastLine()?{from:u.head,to:pe(u.head.line+1,0)}:{from:u.head,to:pe(u.head.line,f)}}return{from:u.from(),to:u.to()}})},deleteLine:function(o){return Io(o,function(u){return{from:pe(u.from().line,0),to:T(o.doc,pe(u.to().line+1,0))}})},delLineLeft:function(o){return Io(o,function(u){return{from:pe(u.from().line,0),to:u.from()}})},delWrappedLineLeft:function(o){return Io(o,function(u){var f=o.charCoords(u.head,"div").top+5;return{from:o.coordsChar({left:0,top:f},"div"),to:u.from()}})},delWrappedLineRight:function(o){return Io(o,function(u){var f=o.charCoords(u.head,"div").top+5;return f=o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:f},"div"),{from:u.from(),to:f}})},undo:function(o){return o.undo()},redo:function(o){return o.redo()},undoSelection:function(o){return o.undoSelection()},redoSelection:function(o){return o.redoSelection()},goDocStart:function(o){return o.extendSelection(pe(o.firstLine(),0))},goDocEnd:function(o){return o.extendSelection(pe(o.lastLine()))},goLineStart:function(o){return o.extendSelectionsBy(function(u){return Mv(o,u.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(o){return o.extendSelectionsBy(function(u){return kv(o,u.head)},{origin:"+move",bias:1})},goLineEnd:function(o){return o.extendSelectionsBy(function(u){u=u.head.line;for(var f=me(o.doc,u),c=f,g;g=di(c,!1);)c=g.find(1,!0).line;return c!=f&&(u=Qe(c)),Ip(!0,o,f,u,-1)},{origin:"+move",bias:-1})},goLineRight:function(o){return o.extendSelectionsBy(function(u){return u=o.cursorCoords(u.head,"div").top+5,o.coordsChar({left:o.display.lineDiv.offsetWidth+100,top:u},"div")},yl)},goLineLeft:function(o){return o.extendSelectionsBy(function(u){return u=o.cursorCoords(u.head,"div").top+5,o.coordsChar({left:0,top:u},"div")},yl)},goLineLeftSmart:function(o){return o.extendSelectionsBy(function(u){var f=o.cursorCoords(u.head,"div").top+5;return f=o.coordsChar({left:0,top:f},"div"),f.ch<o.getLine(f.line).search(/\S/)?kv(o,u.head):f},yl)},goLineUp:function(o){return o.moveV(-1,"line")},goLineDown:function(o){return o.moveV(1,"line")},goPageUp:function(o){return o.moveV(-1,"page")},goPageDown:function(o){return o.moveV(1,"page")},goCharLeft:function(o){return o.moveH(-1,"char")},goCharRight:function(o){return o.moveH(1,"char")},goColumnLeft:function(o){return o.moveH(-1,"column")},goColumnRight:function(o){return o.moveH(1,"column")},goWordLeft:function(o){return o.moveH(-1,"word")},goGroupRight:function(o){return o.moveH(1,"group")},goGroupLeft:function(o){return o.moveH(-1,"group")},goWordRight:function(o){return o.moveH(1,"word")},delCharBefore:function(o){return o.deleteH(-1,"codepoint")},delCharAfter:function(o){return o.deleteH(1,"char")},delWordBefore:function(o){return o.deleteH(-1,"word")},delWordAfter:function(o){return o.deleteH(1,"word")},delGroupBefore:function(o){return o.deleteH(-1,"group")},delGroupAfter:function(o){return o.deleteH(1,"group")},indentAuto:function(o){return o.indentSelection("smart")},indentMore:function(o){return o.indentSelection("add")},indentLess:function(o){return o.indentSelection("subtract")},insertTab:function(o){return o.replaceSelection("	")},insertSoftTab:function(o){for(var u=[],f=o.listSelections(),c=o.options.tabSize,g=0;g<f.length;g++){var _=f[g].from();_=M(o.getLine(_.line),_.ch,c),u.push(E(c-_%c))}o.replaceSelections(u)},defaultTab:function(o){o.somethingSelected()?o.indentSelection("add"):o.execCommand("insertTab")},transposeChars:function(o){return Fi(o,function(){for(var u=o.listSelections(),f=[],c=0;c<u.length;c++)if(u[c].empty()){var g=u[c].head,_=me(o.doc,g.line).text;if(_){if(g.ch==_.length&&(g=new pe(g.line,g.ch-1)),0<g.ch)g=new pe(g.line,g.ch+1),o.replaceRange(_.charAt(g.ch-1)+_.charAt(g.ch-2),pe(g.line,g.ch-2),g,"+transpose");else if(g.line>o.doc.first){var x=me(o.doc,g.line-1).text;x&&(g=new pe(g.line,1),o.replaceRange(_.charAt(0)+o.doc.lineSeparator()+x.charAt(x.length-1),pe(g.line-1,x.length-1),g,"+transpose"))}}f.push(new at(g,g))}o.setSelections(f)})},newlineAndIndent:function(o){return Fi(o,function(){for(var u=o.listSelections(),f=u.length-1;0<=f;f--)o.replaceRange(o.doc.lineSeparator(),u[f].anchor,u[f].head,"+input");for(u=o.listSelections(),f=0;f<u.length;f++)o.indentLine(u[f].from().line,null,!0);Mo(o)})},openLine:function(o){return o.replaceSelection(`
`,"start")},toggleOverwrite:function(o){return o.toggleOverwrite()}},lA=new $r,Gp=null,Vp=function(o,u,f){this.time=o,this.pos=u,this.button=f};Vp.prototype.compare=function(o,u,f){return this.time+400>o&&Ie(u,this.pos)==0&&f==this.button};var Tl,El,Po={toString:function(){return"CodeMirror.Init"}},tw={},Mh={};Rt.defaults=tw,Rt.optionHandlers=Mh;var Kp=[];Rt.defineInitHook=function(o){return Kp.push(o)};var ji=null,mt=function(o){this.cm=o,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new $r,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};mt.prototype.init=function(o){function u(C){for(C=C.target;C;C=C.parentNode){if(C==x)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(C.className))break}return!1}function f(C){if(u(C)&&!ne(_,C)){if(_.somethingSelected())ji={lineWise:!1,text:_.getSelections()},C.type=="cut"&&_.replaceSelection("",null,"cut");else if(_.options.lineWiseCopyCut){var R=Jv(_);ji={lineWise:!0,text:R.text},C.type=="cut"&&_.operation(function(){_.setSelections(R.ranges,0,Hn),_.replaceSelection("",null,"cut")})}else return;if(C.clipboardData){C.clipboardData.clearData();var D=ji.text.join(`
`);if(C.clipboardData.setData("Text",D),C.clipboardData.getData("Text")==D){C.preventDefault();return}}var j=Fv();C=j.firstChild,_.display.lineSpace.insertBefore(j,_.display.lineSpace.firstChild),C.value=ji.text.join(`
`);var X=p(x.ownerDocument);ml(C),setTimeout(function(){_.display.lineSpace.removeChild(j),X.focus(),X==x&&g.showPrimarySelection()},50)}}var c=this,g=this,_=g.cm,x=g.div=o.lineDiv;x.contentEditable=!0,Pv(x,_.options.spellcheck,_.options.autocorrect,_.options.autocapitalize),Ue(x,"paste",function(C){!u(C)||ne(_,C)||Bv(C,_)||11>=Tt&&setTimeout($t(_,function(){return c.updateFromDOM()}),20)}),Ue(x,"compositionstart",function(C){c.composing={data:C.data,done:!1}}),Ue(x,"compositionupdate",function(C){c.composing||(c.composing={data:C.data,done:!1})}),Ue(x,"compositionend",function(C){c.composing&&(C.data!=c.composing.data&&c.readFromDOMSoon(),c.composing.done=!0)}),Ue(x,"touchstart",function(){return g.forceCompositionEnd()}),Ue(x,"input",function(){c.composing||c.readFromDOMSoon()}),Ue(x,"copy",f),Ue(x,"cut",f)},mt.prototype.screenReaderLabelChanged=function(o){o?this.div.setAttribute("aria-label",o):this.div.removeAttribute("aria-label")},mt.prototype.prepareSelection=function(){var o=Jy(this.cm,!1);return o.focus=p(this.div.ownerDocument)==this.div,o},mt.prototype.showSelection=function(o,u){o&&this.cm.display.view.length&&((o.focus||u)&&this.showPrimarySelection(),this.showMultipleSelections(o))},mt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},mt.prototype.showPrimarySelection=function(){var o=this.getSelection(),u=this.cm,f=u.doc.sel.primary(),c=f.from();if(f=f.to(),u.display.viewTo==u.display.viewFrom||c.line>=u.display.viewTo||f.line<u.display.viewFrom)o.removeAllRanges();else{var g=dh(u,o.anchorNode,o.anchorOffset),_=dh(u,o.focusNode,o.focusOffset);if(!g||g.bad||!_||_.bad||Ie(k(g,_),c)!=0||Ie(J(g,_),f)!=0)if(g=u.display.view,c=c.line>=u.display.viewFrom&&Wv(u,c)||{node:g[0].measure.map[2],offset:0},f=f.line<u.display.viewTo&&Wv(u,f),f||(f=g[g.length-1].measure,f=f.maps?f.maps[f.maps.length-1]:f.map,f={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}),c&&f){g=o.rangeCount&&o.getRangeAt(0);try{var x=gl(c.node,c.offset,f.offset,f.node)}catch{}x&&(!Cr&&u.state.focused?(o.collapse(c.node,c.offset),x.collapsed||(o.removeAllRanges(),o.addRange(x))):(o.removeAllRanges(),o.addRange(x)),g&&o.anchorNode==null?o.addRange(g):Cr&&this.startGracePeriod()),this.rememberSelection()}else o.removeAllRanges()}},mt.prototype.startGracePeriod=function(){var o=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){o.gracePeriod=!1,o.selectionChanged()&&o.cm.operation(function(){return o.cm.curOp.selectionChanged=!0})},20)},mt.prototype.showMultipleSelections=function(o){s(this.cm.display.cursorDiv,o.cursors),s(this.cm.display.selectionDiv,o.selection)},mt.prototype.rememberSelection=function(){var o=this.getSelection();this.lastAnchorNode=o.anchorNode,this.lastAnchorOffset=o.anchorOffset,this.lastFocusNode=o.focusNode,this.lastFocusOffset=o.focusOffset},mt.prototype.selectionInEditor=function(){var o=this.getSelection();return o.rangeCount?(o=o.getRangeAt(0).commonAncestorContainer,h(this.div,o)):!1},mt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&(this.selectionInEditor()&&p(this.div.ownerDocument)==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},mt.prototype.blur=function(){this.div.blur()},mt.prototype.getField=function(){return this.div},mt.prototype.supportsTouch=function(){return!0},mt.prototype.receivedFocus=function(){function o(){f.cm.state.focused&&(f.pollSelection(),f.polling.set(f.cm.options.pollInterval,o))}var u=this,f=this;this.selectionInEditor()?setTimeout(function(){return u.pollSelection()},20):Fi(this.cm,function(){return f.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,o)},mt.prototype.selectionChanged=function(){var o=this.getSelection();return o.anchorNode!=this.lastAnchorNode||o.anchorOffset!=this.lastAnchorOffset||o.focusNode!=this.lastFocusNode||o.focusOffset!=this.lastFocusOffset},mt.prototype.pollSelection=function(){if(this.readDOMTimeout==null&&!this.gracePeriod&&this.selectionChanged()){var o=this.getSelection(),u=this.cm;if(yh&&Yr&&this.cm.display.gutterSpecs.length&&VE(o.anchorNode))this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.composing){this.rememberSelection();var f=dh(u,o.anchorNode,o.anchorOffset),c=dh(u,o.focusNode,o.focusOffset);f&&c&&Fi(u,function(){ii(u.doc,Sr(f,c),Hn),(f.bad||c.bad)&&(u.curOp.selectionChanged=!0)})}}},mt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var o=this.cm,u=o.display,f=o.doc.sel.primary(),c=f.from(),g=f.to();if(c.ch==0&&c.line>o.firstLine()&&(c=pe(c.line-1,me(o.doc,c.line-1).length)),g.ch==me(o.doc,g.line).text.length&&g.line<o.lastLine()&&(g=pe(g.line+1,0)),c.line<u.viewFrom||g.line>u.viewTo-1)return!1;var _;c.line==u.viewFrom||(_=Us(o,c.line))==0?(f=Qe(u.view[0].line),_=u.view[0].node):(f=Qe(u.view[_].line),_=u.view[_-1].node.nextSibling);var x=Us(o,g.line);if(x==u.view.length-1?(g=u.viewTo-1,u=u.lineDiv.lastChild):(g=Qe(u.view[x+1].line)-1,u=u.view[x+1].node.previousSibling),!_)return!1;for(u=o.doc.splitLines(KE(o,_,u,f,g)),_=Je(o.doc,pe(f,0),pe(g,me(o.doc,g).text.length));1<u.length&&1<_.length;)if(B(u)==B(_))u.pop(),_.pop(),g--;else if(u[0]==_[0])u.shift(),_.shift(),f++;else break;var C=0;x=0;for(var R=u[0],D=_[0],j=Math.min(R.length,D.length);C<j&&R.charCodeAt(C)==D.charCodeAt(C);)++C;for(R=B(u),D=B(_),j=Math.min(R.length-(u.length==1?C:0),D.length-(_.length==1?C:0));x<j&&R.charCodeAt(R.length-x-1)==D.charCodeAt(D.length-x-1);)++x;if(u.length==1&&_.length==1&&f==c.line)for(;C&&C>c.ch&&R.charCodeAt(R.length-x-1)==D.charCodeAt(D.length-x-1);)C--,x++;if(u[u.length-1]=R.slice(0,R.length-x).replace(/^\u200b+/,""),u[0]=u[0].slice(C).replace(/\u200b+$/,""),c=pe(f,C),f=pe(g,_.length?B(_).length-x:0),1<u.length||u[0]||Ie(c,f))return Ro(o.doc,u,c,f,"+input"),!0},mt.prototype.ensurePolled=function(){this.forceCompositionEnd()},mt.prototype.reset=function(){this.forceCompositionEnd()},mt.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},mt.prototype.readFromDOMSoon=function(){var o=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(o.readDOMTimeout=null,o.composing)if(o.composing.done)o.composing=null;else return;o.updateFromDOM()},80))},mt.prototype.updateFromDOM=function(){var o=this;!this.cm.isReadOnly()&&this.pollContent()||Fi(this.cm,function(){return Ti(o.cm)})},mt.prototype.setUneditable=function(o){o.contentEditable="false"},mt.prototype.onKeyPress=function(o){o.charCode==0||this.composing||(o.preventDefault(),this.cm.isReadOnly()||$t(this.cm,Np)(this.cm,String.fromCharCode(o.charCode==null?o.keyCode:o.charCode),0))},mt.prototype.readOnlyChanged=function(o){this.div.contentEditable=String(o!="nocursor")},mt.prototype.onContextMenu=function(){},mt.prototype.resetPosition=function(){},mt.prototype.needsContentAttribute=!0;var Ut=function(o){this.cm=o,this.prevInput="",this.pollingFast=!1,this.polling=new $r,this.hasSelection=!1,this.composing=null,this.resetting=!1};Ut.prototype.init=function(o){function u(x){if(!ne(g,x)){if(g.somethingSelected())ji={lineWise:!1,text:g.getSelections()};else if(g.options.lineWiseCopyCut){var C=Jv(g);ji={lineWise:!0,text:C.text},x.type=="cut"?g.setSelections(C.ranges,null,Hn):(c.prevInput="",_.value=C.text.join(`
`),ml(_))}else return;x.type=="cut"&&(g.state.cutIncoming=+new Date)}}var f=this,c=this,g=this.cm;this.createField(o);var _=this.textarea;o.wrapper.insertBefore(this.wrapper,o.wrapper.firstChild),pl&&(_.style.width="0px"),Ue(_,"input",function(){nt&&9<=Tt&&f.hasSelection&&(f.hasSelection=null),c.poll()}),Ue(_,"paste",function(x){ne(g,x)||Bv(x,g)||(g.state.pasteIncoming=+new Date,c.fastPoll())}),Ue(_,"cut",u),Ue(_,"copy",u),Ue(o.scroller,"paste",function(x){if(!Y(o,x)&&!ne(g,x))if(_.dispatchEvent){var C=new Event("paste");C.clipboardData=x.clipboardData,_.dispatchEvent(C)}else g.state.pasteIncoming=+new Date,c.focus()}),Ue(o.lineSpace,"selectstart",function(x){Y(o,x)||Se(x)}),Ue(_,"compositionstart",function(){var x=g.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:x,range:g.markText(x,g.getCursor("to"),{className:"CodeMirror-composing"})}}),Ue(_,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},Ut.prototype.createField=function(o){this.wrapper=Fv(),this.textarea=this.wrapper.firstChild},Ut.prototype.screenReaderLabelChanged=function(o){o?this.textarea.setAttribute("aria-label",o):this.textarea.removeAttribute("aria-label")},Ut.prototype.prepareSelection=function(){var o=this.cm,u=o.display,f=o.doc,c=Jy(o);if(o.options.moveInputWithCursor){o=An(o,f.sel.primary().head,"div"),f=u.wrapper.getBoundingClientRect();var g=u.lineDiv.getBoundingClientRect();c.teTop=Math.max(0,Math.min(u.wrapper.clientHeight-10,o.top+g.top-f.top)),c.teLeft=Math.max(0,Math.min(u.wrapper.clientWidth-10,o.left+g.left-f.left))}return c},Ut.prototype.showSelection=function(o){var u=this.cm.display;s(u.cursorDiv,o.cursors),s(u.selectionDiv,o.selection),o.teTop!=null&&(this.wrapper.style.top=o.teTop+"px",this.wrapper.style.left=o.teLeft+"px")},Ut.prototype.reset=function(o){if(!(this.contextMenuPending||this.composing&&o)){var u=this.cm;this.resetting=!0,u.somethingSelected()?(this.prevInput="",o=u.getSelection(),this.textarea.value=o,u.state.focused&&ml(this.textarea),nt&&9<=Tt&&(this.hasSelection=o)):o||(this.prevInput=this.textarea.value="",nt&&9<=Tt&&(this.hasSelection=null)),this.resetting=!1}},Ut.prototype.getField=function(){return this.textarea},Ut.prototype.supportsTouch=function(){return!1},Ut.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!dl||p(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch{}},Ut.prototype.blur=function(){this.textarea.blur()},Ut.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ut.prototype.receivedFocus=function(){this.slowPoll()},Ut.prototype.slowPoll=function(){var o=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){o.poll(),o.cm.state.focused&&o.slowPoll()})},Ut.prototype.fastPoll=function(){function o(){f.poll()||u?(f.pollingFast=!1,f.slowPoll()):(u=!0,f.polling.set(60,o))}var u=!1,f=this;f.pollingFast=!0,f.polling.set(20,o)},Ut.prototype.poll=function(){var o=this,u=this.cm,f=this.textarea,c=this.prevInput;if(this.contextMenuPending||this.resetting||!u.state.focused||iA(f)&&!c&&!this.composing||u.isReadOnly()||u.options.disableInput||u.state.keySeq)return!1;var g=f.value;if(g==c&&!u.somethingSelected())return!1;if(nt&&9<=Tt&&this.hasSelection===g||hn&&/[\uf700-\uf7ff]/.test(g))return u.display.input.reset(),!1;if(u.doc.sel==u.display.selForContextMenu){var _=g.charCodeAt(0);if(_!=8203||c||(c="​"),_==8666)return this.reset(),this.cm.execCommand("undo")}var x=0;for(_=Math.min(c.length,g.length);x<_&&c.charCodeAt(x)==g.charCodeAt(x);)++x;return Fi(u,function(){Np(u,g.slice(x),c.length-x,null,o.composing?"*compose":null),1e3<g.length||-1<g.indexOf(`
`)?f.value=o.prevInput="":o.prevInput=g,o.composing&&(o.composing.range.clear(),o.composing.range=u.markText(o.composing.start,u.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ut.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ut.prototype.onKeyPress=function(){nt&&9<=Tt&&(this.hasSelection=null),this.fastPoll()},Ut.prototype.onContextMenu=function(o){function u(){if(x.selectionStart!=null){var te=g.somethingSelected(),ce="​"+(te?x.value:"");x.value="⇚",x.value=ce,c.prevInput=te?"":"​",x.selectionStart=1,x.selectionEnd=ce.length,_.selForContextMenu=g.doc.sel}}function f(){if(c.contextMenuPending==f&&(c.contextMenuPending=!1,c.wrapper.style.cssText=j,x.style.cssText=D,nt&&9>Tt&&_.scrollbars.setScrollTop(_.scroller.scrollTop=R),x.selectionStart!=null)){(!nt||nt&&9>Tt)&&u();var te=0,ce=function(){_.selForContextMenu==g.doc.sel&&x.selectionStart==0&&0<x.selectionEnd&&c.prevInput=="​"?$t(g,fv)(g):10>te++?_.detectingSelectAll=setTimeout(ce,500):(_.selForContextMenu=null,_.input.reset())};_.detectingSelectAll=setTimeout(ce,200)}}var c=this,g=c.cm,_=g.display,x=c.textarea;c.contextMenuPending&&c.contextMenuPending();var C=Bs(g,o),R=_.scroller.scrollTop;if(C&&!Ln){g.options.resetSelectionOnContextMenu&&g.doc.sel.contains(C)==-1&&$t(g,ii)(g.doc,Sr(C),Hn);var D=x.style.cssText,j=c.wrapper.style.cssText;if(C=c.wrapper.offsetParent.getBoundingClientRect(),c.wrapper.style.cssText="position: static",x.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(o.clientY-C.top-5)+"px; left: "+(o.clientX-C.left-5)+`px;
      z-index: 1000; background: `+(nt?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`,mi)var X=x.ownerDocument.defaultView.scrollY;if(_.input.focus(),mi&&x.ownerDocument.defaultView.scrollTo(null,X),_.input.reset(),g.somethingSelected()||(x.value=c.prevInput=" "),c.contextMenuPending=f,_.selForContextMenu=g.doc.sel,clearTimeout(_.detectingSelectAll),nt&&9<=Tt&&u(),Bp){se(o);var ee=function(){W(window,"mouseup",ee),setTimeout(f,20)};Ue(window,"mouseup",ee)}else setTimeout(f,50)}},Ut.prototype.readOnlyChanged=function(o){o||this.reset(),this.textarea.disabled=o=="nocursor",this.textarea.readOnly=!!o},Ut.prototype.setUneditable=function(){},Ut.prototype.needsContentAttribute=!1,function(o){function u(c,g,_,x){o.defaults[c]=g,_&&(f[c]=x?function(C,R,D){D!=Po&&_(C,R,D)}:_)}var f=o.optionHandlers;o.defineOption=u,o.Init=Po,u("value","",function(c,g){return c.setValue(g)},!0),u("mode",null,function(c,g){c.doc.modeOption=g,kp(c)},!0),u("indentUnit",2,kp,!0),u("indentWithTabs",!1),u("smartIndent",!0),u("tabSize",4,function(c){ol(c),Xa(c),Ti(c)},!0),u("lineSeparator",null,function(c,g){if(c.doc.lineSep=g){var _=[],x=c.doc.first;c.doc.iter(function(R){for(var D=0;;){var j=R.text.indexOf(g,D);if(j==-1)break;D=j+g.length,_.push(pe(x,j))}x++});for(var C=_.length-1;0<=C;C--)Ro(c.doc,g,_[C],pe(_[C].line,_[C].ch+g.length))}}),u("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(c,g,_){c.state.specialChars=new RegExp(g.source+(g.test("	")?"":"|	"),"g"),_!=Po&&c.refresh()}),u("specialCharPlaceholder",zu,function(c){return c.refresh()},!0),u("electricChars",!0),u("inputStyle",dl?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor")},!0),u("spellcheck",!1,function(c,g){return c.getInputField().spellcheck=g},!0),u("autocorrect",!1,function(c,g){return c.getInputField().autocorrect=g},!0),u("autocapitalize",!1,function(c,g){return c.getInputField().autocapitalize=g},!0),u("rtlMoveVisually",!ZE),u("wholeLineUpdateBefore",!0),u("theme","default",function(c){Dv(c),sl(c)},!0),u("keyMap","default",function(c,g,_){g=ch(g),(_=_!=Po&&ch(_))&&_.detach&&_.detach(c,g),g.attach&&g.attach(c,_||null)}),u("extraKeys",null),u("configureMouse",null),u("lineWrapping",!1,WE,!0),u("gutters",[],function(c,g){c.display.gutterSpecs=Cp(g,c.options.lineNumbers),sl(c)},!0),u("fixedGutter",!0,function(c,g){c.display.gutters.style.left=g?pp(c.display)+"px":"0",c.refresh()},!0),u("coverGutterNextToScrollbar",!1,function(c){return ko(c)},!0),u("scrollbarStyle","native",function(c){Vy(c),ko(c),c.display.scrollbars.setScrollTop(c.doc.scrollTop),c.display.scrollbars.setScrollLeft(c.doc.scrollLeft)},!0),u("lineNumbers",!1,function(c,g){c.display.gutterSpecs=Cp(c.options.gutters,g),sl(c)},!0),u("firstLineNumber",1,sl,!0),u("lineNumberFormatter",function(c){return c},sl,!0),u("showCursorWhenSelecting",!1,el,!0),u("resetSelectionOnContextMenu",!0),u("lineWiseCopyCut",!0),u("pasteLinesPerSelection",!0),u("selectionsMayTouch",!1),u("readOnly",!1,function(c,g){g=="nocursor"&&(Co(c),c.display.input.blur()),c.display.input.readOnlyChanged(g)}),u("screenReaderLabel",null,function(c,g){c.display.input.screenReaderLabelChanged(g===""?null:g)}),u("disableInput",!1,function(c,g){g||c.display.input.reset()},!0),u("dragDrop",!0,jE),u("allowDropFileTypes",null),u("cursorBlinkRate",530),u("cursorScrollMargin",0),u("cursorHeight",1,el,!0),u("singleCursorHeightPerLine",!0,el,!0),u("workTime",100),u("workDelay",100),u("flattenSpans",!0,ol,!0),u("addModeClass",!1,ol,!0),u("pollInterval",100),u("undoDepth",200,function(c,g){return c.doc.history.undoDepth=g}),u("historyEventDelay",1250),u("viewportMargin",10,function(c){return c.refresh()},!0),u("maxHighlightLength",1e4,ol,!0),u("moveInputWithCursor",!0,function(c,g){g||c.display.input.resetPosition()}),u("tabindex",null,function(c,g){return c.display.input.getField().tabIndex=g||""}),u("autofocus",null),u("direction","ltr",function(c,g){return c.doc.setDirection(g)},!0),u("phrases",null)}(Rt),function(o){var u=o.optionHandlers,f=o.helpers={};o.prototype={constructor:o,focus:function(){y(this).defaultView.focus(),this.display.input.focus()},setOption:function(c,g){var _=this.options,x=_[c];(_[c]!=g||c=="mode")&&(_[c]=g,u.hasOwnProperty(c)&&$t(this,u[c])(this,g,x),$(this,"optionChange",this,c))},getOption:function(c){return this.options[c]},getDoc:function(){return this.doc},addKeyMap:function(c,g){this.state.keyMaps[g?"push":"unshift"](ch(c))},removeKeyMap:function(c){for(var g=this.state.keyMaps,_=0;_<g.length;++_)if(g[_]==c||g[_].name==c)return g.splice(_,1),!0},addOverlay:gi(function(c,g){var _=c.token?c:o.getMode(this.options,c);if(_.startState)throw Error("Overlays may not be stateful.");I(this.state.overlays,{mode:_,modeSpec:c,opaque:g&&g.opaque,priority:g&&g.priority||0},function(x){return x.priority}),this.state.modeGen++,Ti(this)}),removeOverlay:gi(function(c){for(var g=this.state.overlays,_=0;_<g.length;++_){var x=g[_].modeSpec;if(x==c||typeof c=="string"&&x.name==c){g.splice(_,1),this.state.modeGen++,Ti(this);break}}}),indentLine:gi(function(c,g,_){typeof g!="string"&&typeof g!="number"&&(g=g==null?this.options.smartIndent?"smart":"prev":g?"add":"subtract"),Ji(this.doc,c)&&fl(this,c,g,_)}),indentSelection:gi(function(c){for(var g=this.doc.sel.ranges,_=-1,x=0;x<g.length;x++){var C=g[x];if(C.empty())C.head.line>_&&(fl(this,C.head.line,c,!0),_=C.head.line,x==this.doc.sel.primIndex&&Mo(this));else{var R=C.from();C=C.to();var D=Math.max(_,R.line);for(_=Math.min(this.lastLine(),C.line-(C.ch?0:1))+1,C=D;C<_;++C)fl(this,C,c);C=this.doc.sel.ranges,R.ch==0&&g.length==C.length&&0<C[x].from().ch&&Rp(this.doc,x,new at(R,C[x].to()),Hn)}}}),getTokenAt:function(c,g){return it(this,c,g)},getLineTokens:function(c,g){return it(this,pe(c),g,!0)},getTokenTypeAt:function(c){c=T(this.doc,c);var g=ae(this,me(this.doc,c.line)),_=0,x=(g.length-1)/2;if(c=c.ch,c==0)g=g[2];else for(;;){var C=_+x>>1;if((C?g[2*C-1]:0)>=c)x=C;else if(g[2*C+1]<c)_=C+1;else{g=g[2*C+2];break}}return _=g?g.indexOf("overlay "):-1,0>_?g:_==0?null:g.slice(0,_-1)},getModeAt:function(c){var g=this.doc.mode;return g.innerMode?o.innerMode(g,this.getTokenAt(c).state).mode:g},getHelper:function(c,g){return this.getHelpers(c,g)[0]},getHelpers:function(c,g){var _=[];if(!f.hasOwnProperty(g))return _;var x=f[g];if(c=this.getModeAt(c),typeof c[g]=="string")x[c[g]]&&_.push(x[c[g]]);else if(c[g])for(var C=0;C<c[g].length;C++){var R=x[c[g][C]];R&&_.push(R)}else c.helperType&&x[c.helperType]?_.push(x[c.helperType]):x[c.name]&&_.push(x[c.name]);for(g=0;g<x._global.length;g++)C=x._global[g],C.pred(c,this)&&b(_,C.val)==-1&&_.push(C.val);return _},getStateAfter:function(c,g){var _=this.doc;return c=Math.max(_.first,Math.min(c??_.first+_.size-1,_.first+_.size-1)),fe(this,c+1,g).state},cursorCoords:function(c,g){var _=this.doc.sel.primary();return c=c==null?_.head:typeof c=="object"?T(this.doc,c):c?_.from():_.to(),An(this,c,g||"page")},charCoords:function(c,g){return qu(this,T(this.doc,c),g||"page")},coordsChar:function(c,g){return c=Oy(this,c,g||"page"),hp(this,c.left,c.top)},lineAtHeight:function(c,g){return c=Oy(this,{top:c,left:0},g||"page").top,pi(this.doc,c+this.display.viewOffset)},heightAtLine:function(c,g,_){var x=!1;if(typeof c=="number"){var C=this.doc.first+this.doc.size-1;c<this.doc.first?c=this.doc.first:c>C&&(c=C,x=!0),c=me(this.doc,c)}return Zu(this,c,{top:0,left:0},g||"page",_||x).top+(x?this.doc.height-un(c):0)},defaultTextHeight:function(){return xo(this.display)},defaultCharWidth:function(){return So(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(c,g,_,x,C){var R=this.display;c=An(this,T(this.doc,c));var D=c.bottom,j=c.left;if(g.style.position="absolute",g.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(g),R.sizer.appendChild(g),x=="over")D=c.top;else if(x=="above"||x=="near"){var X=Math.max(R.wrapper.clientHeight,this.doc.height),ee=Math.max(R.sizer.clientWidth,R.lineSpace.clientWidth);(x=="above"||c.bottom+g.offsetHeight>X)&&c.top>g.offsetHeight?D=c.top-g.offsetHeight:c.bottom+g.offsetHeight<=X&&(D=c.bottom),j+g.offsetWidth>ee&&(j=ee-g.offsetWidth)}g.style.top=D+"px",g.style.left=g.style.right="",C=="right"?(j=R.sizer.clientWidth-g.offsetWidth,g.style.right="0px"):(C=="left"?j=0:C=="middle"&&(j=(R.sizer.clientWidth-g.offsetWidth)/2),g.style.left=j+"px"),_&&(c=wp(this,{left:j,top:D,right:j+g.offsetWidth,bottom:D+g.offsetHeight}),c.scrollTop!=null&&il(this,c.scrollTop),c.scrollLeft!=null&&Js(this,c.scrollLeft))},triggerOnKeyDown:gi(Av),triggerOnKeyPress:gi(Lv),triggerOnKeyUp:Rv,triggerOnMouseDown:gi(Ov),execCommand:function(c){if(kl.hasOwnProperty(c))return kl[c].call(null,this)},triggerElectric:gi(function(c){Uv(this,c)}),findPosH:function(c,g,_,x){var C=1;0>g&&(C=-1,g=-g),c=T(this.doc,c);for(var R=0;R<g&&(c=Dp(this.doc,c,C,_,x),!c.hitSide);++R);return c},moveH:gi(function(c,g){var _=this;this.extendSelectionsBy(function(x){return _.display.shift||_.doc.extend||x.empty()?Dp(_.doc,x.head,c,g,_.options.rtlMoveVisually):0>c?x.from():x.to()},yl)}),deleteH:gi(function(c,g){var _=this.doc;this.doc.sel.somethingSelected()?_.replaceSelection("",null,"+delete"):Io(this,function(x){var C=Dp(_,x.head,c,g,!1);return 0>c?{from:C,to:x.head}:{from:x.head,to:C}})}),findPosV:function(c,g,_,x){var C=1;0>g&&(C=-1,g=-g);var R=T(this.doc,c);for(c=0;c<g&&(R=An(this,R,"div"),x==null?x=R.left:R.left=x,R=jv(this,R,C,_),!R.hitSide);++c);return R},moveV:gi(function(c,g){var _=this,x=this.doc,C=[],R=!this.display.shift&&!x.extend&&x.sel.somethingSelected();if(x.extendSelectionsBy(function(j){if(R)return 0>c?j.from():j.to();var X=An(_,j.head,"div");j.goalColumn!=null&&(X.left=j.goalColumn),C.push(X.left);var ee=jv(_,X,c,g);return g=="page"&&j==x.sel.primary()&&nh(_,qu(_,ee,"div").top-X.top),ee},yl),C.length)for(var D=0;D<x.sel.ranges.length;D++)x.sel.ranges[D].goalColumn=C[D]}),findWordAt:function(c){var g=me(this.doc,c.line).text,_=c.ch,x=c.ch;if(g){var C=this.getHelper(c,"wordChars");c.sticky!="before"&&x!=g.length||!_?++x:--_;var R=g.charAt(_);for(R=V(R,C)?function(D){return V(D,C)}:/\s/.test(R)?function(D){return/\s/.test(D)}:function(D){return!/\s/.test(D)&&!V(D)};0<_&&R(g.charAt(_-1));)--_;for(;x<g.length&&R(g.charAt(x));)++x}return new at(pe(c.line,_),pe(c.line,x))},toggleOverwrite:function(c){(c==null||c!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?d(this.display.cursorDiv,"CodeMirror-overwrite"):Ws(this.display.cursorDiv,"CodeMirror-overwrite"),$(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==p(y(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:gi(function(c,g){tl(this,c,g)}),getScrollInfo:function(){var c=this.display.scroller;return{left:c.scrollLeft,top:c.scrollTop,height:c.scrollHeight-De(this)-this.display.barHeight,width:c.scrollWidth-De(this)-this.display.barWidth,clientHeight:jt(this),clientWidth:We(this)}},scrollIntoView:gi(function(c,g){c==null?(c={from:this.doc.sel.primary().head,to:null},g==null&&(g=this.options.cursorScrollMargin)):typeof c=="number"?c={from:pe(c,0),to:null}:c.from==null&&(c={from:c,to:null}),c.to||(c.to=c.from),c.margin=g||0,c.from.line!=null?(rh(this),this.curOp.scrollToPos=c):jy(this,c.from,c.to,c.margin)}),setSize:gi(function(c,g){var _=this,x=function(R){return typeof R=="number"||/^\d+$/.test(String(R))?R+"px":R};c!=null&&(this.display.wrapper.style.width=x(c)),g!=null&&(this.display.wrapper.style.height=x(g)),this.options.lineWrapping&&Ay(this);var C=this.display.viewFrom;this.doc.iter(C,this.display.viewTo,function(R){if(R.widgets){for(var D=0;D<R.widgets.length;D++)if(R.widgets[D].noHScroll){Kr(_,C,"widget");break}}++C}),this.curOp.forceUpdate=!0,$(this,"refresh",this)}),operation:function(c){return Fi(this,c)},startOperation:function(){return Ps(this)},endOperation:function(){return Fs(this)},refresh:gi(function(){var c=this.display.cachedTextHeight;Ti(this),this.curOp.forceUpdate=!0,Xa(this),tl(this,this.doc.scrollLeft,this.doc.scrollTop),xp(this.display),(c==null||.5<Math.abs(c-xo(this.display))||this.options.lineWrapping)&&dp(this),$(this,"refresh",this)}),swapDoc:gi(function(c){var g=this.doc;return g.cm=null,this.state.selectingText&&this.state.selectingText(),ev(this,c),Xa(this),this.display.input.reset(),tl(this,c.scrollLeft,c.scrollTop),this.curOp.forceScroll=!0,Ot(this,"swapDoc",this,g),g}),phrase:function(c){var g=this.options.phrases;return g&&Object.prototype.hasOwnProperty.call(g,c)?g[c]:c},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},xe(o),o.registerHelper=function(c,g,_){f.hasOwnProperty(c)||(f[c]=o[c]={_global:[]}),f[c][g]=_},o.registerGlobalHelper=function(c,g,_,x){o.registerHelper(c,g,x),f[c]._global.push({pred:_,val:x})}}(Rt);var uA="iter insert remove copy getEditor constructor".split(" "),Al;for(Al in Ai.prototype)Ai.prototype.hasOwnProperty(Al)&&0>b(uA,Al)&&(Rt.prototype[Al]=function(o){return function(){return o.apply(this.doc,arguments)}}(Ai.prototype[Al]));return xe(Ai),Rt.inputStyles={textarea:Ut,contenteditable:mt},Rt.defineMode=function(o){Rt.defaults.mode||o=="null"||(Rt.defaults.mode=o),ve.apply(this,arguments)},Rt.defineMIME=function(o,u){Do[o]=u},Rt.defineMode("null",function(){return{token:function(o){return o.skipToEnd()}}}),Rt.defineMIME("text/plain","null"),Rt.defineExtension=function(o,u){Rt.prototype[o]=u},Rt.defineDocExtension=function(o,u){Ai.prototype[o]=u},Rt.fromTextArea=function(o,u){function f(){o.value=C.getValue()}if(u=u?S(u):{},u.value=o.value,!u.tabindex&&o.tabIndex&&(u.tabindex=o.tabIndex),!u.placeholder&&o.placeholder&&(u.placeholder=o.placeholder),u.autofocus==null){var c=p(o.ownerDocument);u.autofocus=c==o||o.getAttribute("autofocus")!=null&&c==document.body}if(o.form&&(Ue(o.form,"submit",f),!u.leaveSubmitMethodAlone)){var g=o.form,_=g.submit;try{var x=g.submit=function(){f(),g.submit=_,g.submit(),g.submit=x}}catch{}}u.finishInit=function(R){R.save=f,R.getTextArea=function(){return o},R.toTextArea=function(){R.toTextArea=isNaN,f(),o.parentNode.removeChild(R.getWrapperElement()),o.style.display="",o.form&&(W(o.form,"submit",f),u.leaveSubmitMethodAlone||typeof o.form.submit!="function"||(o.form.submit=_))}},o.style.display="none";var C=Rt(function(R){return o.parentNode.insertBefore(R,o.nextSibling)},u);return C},function(o){o.off=W,o.on=Ue,o.wheelEventPixels=_E,o.Doc=Ai,o.splitLines=Fp,o.countColumn=M,o.findColumn=w,o.isWordChar=U,o.Pass=vh,o.signal=$,o.Line=Uo,o.changeEnd=Hr,o.scrollbarModel=Zv,o.Pos=pe,o.cmpPos=Ie,o.modes=Wp,o.mimeModes=Do,o.resolveMode=ke,o.getMode=Fe,o.modeExtensions=Bo,o.extendMode=z,o.copyState=K,o.startState=be,o.innerMode=ge,o.commands=kl,o.keyMap=Ml,o.keyName=Cv,o.isModifierKey=xv,o.lookupKey=Oo,o.normalizeKeyMap=LE,o.StringStream=Wt,o.SharedTextMarker=xl,o.TextMarker=Zr,o.LineWidget=bl,o.e_preventDefault=Se,o.e_stopPropagation=Re,o.e_stop=se,o.addClass=d,o.contains=h,o.rmClass=Ws,o.keyNames=qr}(Rt),Rt.version="5.65.9",Rt})}(vg)),vg.exports}var w9=Wa();const _9=ln(w9);(function(t,e){(function(i){i(Wa())})(function(i){i.defineMode("javascript",function(n,r){var s,a,l;function h(N,Y,ue){return Wr=N,Gr=ue,Y}function p(N,Y){var ue=N.next();if(ue=='"'||ue=="'")return Y.tokenize=d(ue),Y.tokenize(N,Y);if(ue=="."&&N.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return h("number","number");if(ue=="."&&N.match(".."))return h("spread","meta");if(/[\[\]{}\(\),;:\.]/.test(ue))return h(ue);if(ue=="="&&N.eat(">"))return h("=>","operator");if(ue=="0"&&N.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return h("number","number");if(/\d/.test(ue))return N.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),h("number","number");if(ue=="/"){if(N.eat("*"))return Y.tokenize=m,m(N,Y);if(N.eat("/"))return N.skipToEnd(),h("comment","comment");if(zu(N,Y,1)){e:for(var _e=Y=!1;(ue=N.next())!=null;){if(!Y){if(ue=="/"&&!_e)break e;ue=="["?_e=!0:_e&&ue=="]"&&(_e=!1)}Y=!Y&&ue=="\\"}return N.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),h("regexp","string-2")}return N.eat("="),h("operator","operator",N.current())}if(ue=="`")return Y.tokenize=y,y(N,Y);if(ue=="#"&&N.peek()=="!")return N.skipToEnd(),h("meta","meta");if(ue=="#"&&N.eatWhile(Ot))return h("variable","property");if(ue=="<"&&N.match("!--")||ue=="-"&&N.match("->")&&!/\S/.test(N.string.slice(0,N.start)))return N.skipToEnd(),h("comment","comment");if(Za.test(ue))return ue==">"&&Y.lexical&&Y.lexical.type==">"||(N.eat("=")?ue!="!"&&ue!="="||N.eat("="):/[<>*+\-|&?]/.test(ue)&&(N.eat(ue),ue==">"&&N.eat(ue))),ue=="?"&&N.eat(".")?h("."):h("operator","operator",N.current());if(Ot.test(ue)){if(N.eatWhile(Ot),ue=N.current(),Y.lastType!="."){if(Qu.propertyIsEnumerable(ue))return N=Qu[ue],h(N.type,N.style,ue);if(ue=="async"&&N.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return h("async","keyword",ue)}return h("variable","variable",ue)}}function d(N){return function(Y,ue){var _e=!1,De;if(Os&&Y.peek()=="@"&&Y.match(Ns))return ue.tokenize=p,h("jsonld-keyword","meta");for(;(De=Y.next())!=null&&(De!=N||_e);)_e=!_e&&De=="\\";return _e||(ue.tokenize=p),h("string","string")}}function m(N,Y){for(var ue=!1,_e;_e=N.next();){if(_e=="/"&&ue){Y.tokenize=p;break}ue=_e=="*"}return h("comment","comment")}function y(N,Y){for(var ue=!1,_e;(_e=N.next())!=null;){if(!ue&&(_e=="`"||_e=="$"&&N.eat("{"))){Y.tokenize=p;break}ue=!ue&&_e=="\\"}return h("quasi","string-2",N.current())}function v(N,Y){Y.fatArrowAt&&(Y.fatArrowAt=null);var ue=N.string.indexOf("=>",N.start);if(!(0>ue)){if(St){var _e=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(N.string.slice(N.start,ue));_e&&(ue=_e.index)}_e=0;var De=!1;for(--ue;0<=ue;--ue){var We=N.string.charAt(ue),jt="([{}])".indexOf(We);if(0<=jt&&3>jt){if(!_e){++ue;break}if(--_e==0){We=="("&&(De=!0);break}}else if(3<=jt&&6>jt)++_e;else if(Ot.test(We))De=!0;else if(/["'\/`]/.test(We))for(;;--ue){if(ue==0)return;if(N.string.charAt(ue-1)==We&&N.string.charAt(ue-2)!="\\"){ue--;break}}else if(De&&!_e){++ue;break}}De&&!_e&&(Y.fatArrowAt=ue)}}function S(N,Y,ue,_e,De,We){this.indented=N,this.column=Y,this.type=ue,this.prev=De,this.info=We,_e!=null&&(this.align=_e)}function M(N,Y,ue,_e,De){var We=N.cc;for(s=N,a=De,l=null,qa=We,Vr=Y,N.lexical.hasOwnProperty("align")||(N.lexical.align=!0);;)if((We.length?We.pop():zn?Z:le)(ue,_e)){for(;We.length&&We[We.length-1].lex;)We.pop()();if(l)return l;if(ue=ue=="variable")e:if(Is){for(ue=N.localVars;ue;ue=ue.next)if(ue.name==_e){ue=!0;break e}for(N=N.context;N;N=N.prev)for(ue=N.vars;ue;ue=ue.next)if(ue.name==_e){ue=!0;break e}ue=void 0}else ue=!1;return ue?"variable-2":Y}}function b(){for(var N=arguments.length-1;0<=N;N--)qa.push(arguments[N])}function w(){return b.apply(null,arguments),!0}function E(N,Y){for(;Y;Y=Y.next)if(Y.name==N)return!0;return!1}function B(N){var Y=s;if(l="def",Is){if(Y.context){if(Y.lexical.info=="var"&&Y.context&&Y.context.block){var ue=L(N,Y.context);if(ue!=null){Y.context=ue;return}}else if(!E(N,Y.localVars)){Y.localVars=new F(N,Y.localVars);return}}r.globalVars&&!E(N,Y.globalVars)&&(Y.globalVars=new F(N,Y.globalVars))}}function L(N,Y){return Y?Y.block?(N=L(N,Y.prev))?N==Y.prev?Y:new O(N,Y.vars,!0):null:E(N,Y.vars)?Y:new O(Y.prev,new F(N,Y.vars),!1):null}function I(N){return N=="public"||N=="private"||N=="protected"||N=="abstract"||N=="readonly"}function O(N,Y,ue){this.prev=N,this.vars=Y,this.block=ue}function F(N,Y){this.name=N,this.next=Y}function U(){s.context=new O(s.context,s.localVars,!1),s.localVars=$u}function V(){s.context=new O(s.context,s.localVars,!0),s.localVars=null}function A(){s.localVars=s.context.vars,s.context=s.context.prev}function Q(N,Y){var ue=function(){var _e=s,De=_e.indented;if(_e.lexical.type=="stat")De=_e.lexical.indented;else for(var We=_e.lexical;We&&We.type==")"&&We.align;We=We.prev)De=We.indented;_e.lexical=new S(De,a.column(),N,null,_e.lexical,Y)};return ue.lex=!0,ue}function H(){var N=s;N.lexical.prev&&(N.lexical.type==")"&&(N.indented=N.lexical.indented),N.lexical=N.lexical.prev)}function re(N){function Y(ue){return ue==N?w():N==";"||ue=="}"||ue==")"||ue=="]"?b():w(Y)}return Y}function le(N,Y){return N=="var"?w(Q("vardef",Y),fe,re(";"),H):N=="keyword a"?w(Q("form"),$,le,H):N=="keyword b"?w(Q("form"),le,H):N=="keyword d"?a.match(/^\s*$/,!1)?w():w(Q("stat"),we,re(";"),H):N=="debugger"?w(re(";")):N=="{"?w(Q("}"),V,He,H,A):N==";"?w():N=="if"?(s.lexical.info=="else"&&s.cc[s.cc.length-1]==H&&s.cc.pop()(),w(Q("form"),$,le,H,za)):N=="function"?w(Pi):N=="for"?w(Q("form"),V,Wu,le,A,H):N=="class"||St&&Y=="interface"?(l="keyword",w(Q("form",N=="class"?N:Y),Qa,H)):N=="variable"?St&&Y=="declare"?(l="keyword",w(le)):St&&(Y=="module"||Y=="enum"||Y=="type")&&a.match(/^\s*\w/,!1)?(l="keyword",Y=="enum"?w($a):Y=="type"?w(Ha,re("operator"),je,re(";")):w(Q("form"),Be,re("{"),Q("}"),He,H,H)):St&&Y=="namespace"?(l="keyword",w(Q("form"),Z,le,H)):St&&Y=="abstract"?(l="keyword",w(le)):w(Q("stat"),Fe):N=="switch"?w(Q("form"),$,re("{"),Q("}","switch"),V,He,H,H,A):N=="case"?w(Z,re(":")):N=="default"?w(re(":")):N=="catch"?w(Q("form"),U,q,le,H,A):N=="export"?w(Q("stat"),Zi,H):N=="import"?w(Q("stat"),Vu,H):N=="async"?w(le):Y=="@"?w(Z,le):b(Q("stat"),Z,re(";"),H)}function q(N){if(N=="(")return w(xr,re(")"))}function Z(N,Y){return ne(N,Y,!1)}function W(N,Y){return ne(N,Y,!0)}function $(N){return N!="("?b():w(Q(")"),we,re(")"),H)}function ne(N,Y,ue){if(s.fatArrowAt==a.start){var _e=ue?se:Ze;if(N=="(")return w(U,Q(")"),me(xr,")"),H,re("=>"),_e,A);if(N=="variable")return b(U,Be,re("=>"),_e,A)}return _e=ue?xe:ye,Yu.hasOwnProperty(N)?w(_e):N=="function"?w(Pi,_e):N=="class"||St&&Y=="interface"?(l="keyword",w(Q("form"),Gu,H)):N=="keyword c"||N=="async"?w(ue?W:Z):N=="("?w(Q(")"),we,re(")"),H,_e):N=="operator"||N=="spread"?w(ue?W:Z):N=="["?w(Q("]"),Ya,H,_e):N=="{"?Je(K,"}",null,_e):N=="quasi"?b(Se,_e):N=="new"?w(oe(ue)):w()}function we(N){return N.match(/[;\}\)\],]/)?b():b(Z)}function ye(N,Y){return N==","?w(we):xe(N,Y,!1)}function xe(N,Y,ue){var _e=ue==0?ye:xe,De=ue==0?Z:W;if(N=="=>")return w(U,ue?se:Ze,A);if(N=="operator")return/\+\+|--/.test(Y)||St&&Y=="!"?w(_e):St&&Y=="<"&&a.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?w(Q(">"),me(je,">"),H,_e):Y=="?"?w(Z,re(":"),De):w(De);if(N=="quasi")return b(Se,_e);if(N!=";"){if(N=="(")return Je(W,")","call",_e);if(N==".")return w(z,_e);if(N=="[")return w(Q("]"),we,re("]"),H,_e);if(St&&Y=="as")return l="keyword",w(je,_e);if(N=="regexp")return s.lastType=l="operator",a.backUp(a.pos-a.start-1),w(De)}}function Se(N,Y){return N!="quasi"?b():Y.slice(Y.length-2)!="${"?w(Se):w(we,Re)}function Re(N){if(N=="}")return l="string-2",s.tokenize=y,w(Se)}function Ze(N){return v(a,s),b(N=="{"?le:Z)}function se(N){return v(a,s),b(N=="{"?le:W)}function oe(N){return function(Y){return Y=="."?w(N?ke:ve):Y=="variable"&&St?w(G,N?xe:ye):b(N?W:Z)}}function ve(N,Y){if(Y=="target")return l="keyword",w(ye)}function ke(N,Y){if(Y=="target")return l="keyword",w(xe)}function Fe(N){return N==":"?w(H,le):b(ye,re(";"),H)}function z(N){if(N=="variable")return l="property",w()}function K(N,Y){if(N=="async")return l="property",w(K);if(N=="variable"||Vr=="keyword"){if(l="property",Y=="get"||Y=="set")return w(ge);var ue;return St&&s.fatArrowAt==a.start&&(ue=a.match(/^\s*:\s*/,!1))&&(s.fatArrowAt=a.pos+ue[0].length),w(be)}if(N=="number"||N=="string")return l=Os?"property":Vr+" property",w(be);if(N=="jsonld-keyword")return w(be);if(St&&I(Y))return l="keyword",w(K);if(N=="[")return w(Z,kt,re("]"),be);if(N=="spread")return w(W,be);if(Y=="*")return l="keyword",w(K);if(N==":")return b(be)}function ge(N){return N!="variable"?b(be):(l="property",w(Pi))}function be(N){if(N==":")return w(W);if(N=="(")return b(Pi)}function me(N,Y,ue){function _e(De,We){return(ue?-1<ue.indexOf(De):De==",")?(De=s.lexical,De.info=="call"&&(De.pos=(De.pos||0)+1),w(function(jt,bo){return jt==Y||bo==Y?b():b(N)},_e)):De==Y||We==Y?w():ue&&-1<ue.indexOf(";")?b(N):w(re(Y))}return function(De,We){return De==Y||We==Y?w():b(N,_e)}}function Je(N,Y,ue){for(var _e=3;_e<arguments.length;_e++)qa.push(arguments[_e]);return w(Q(Y,ue),me(N,Y),H)}function He(N){return N=="}"?w():b(le,He)}function kt(N,Y){if(St){if(N==":")return w(je);if(Y=="?")return w(kt)}}function Qe(N,Y){if(St&&(N==":"||Y=="in"))return w(je)}function pi(N){if(St&&N==":")return a.match(/^\s*\w+\s+is\b/,!1)?w(Z,Ji,je):w(je)}function Ji(N,Y){if(Y=="is")return l="keyword",w()}function je(N,Y){if(Y=="keyof"||Y=="typeof"||Y=="infer"||Y=="readonly")return l="keyword",w(Y=="typeof"?W:je);if(N=="variable"||Y=="void")return l="type",w(T);if(Y=="|"||Y=="&")return w(je);if(N=="string"||N=="number"||N=="atom")return w(T);if(N=="[")return w(Q("]"),me(je,"]",","),H,T);if(N=="{")return w(Q("}"),Ie,H,T);if(N=="(")return w(me(k,")"),pe,T);if(N=="<")return w(me(je,">"),je);if(N=="quasi")return b(ki,T)}function pe(N){if(N=="=>")return w(je)}function Ie(N){return N.match(/[\}\)\]]/)?w():N==","||N==";"?w(Ie):b(Bt,Ie)}function Bt(N,Y){if(N=="variable"||Vr=="keyword")return l="property",w(Bt);if(Y=="?"||N=="number"||N=="string")return w(Bt);if(N==":")return w(je);if(N=="[")return w(re("variable"),Qe,re("]"),Bt);if(N=="(")return b(Kn,Bt);if(!N.match(/[;\}\)\],]/))return w()}function ki(N,Y){return N!="quasi"?b():Y.slice(Y.length-2)!="${"?w(ki):w(je,J)}function J(N){if(N=="}")return l="string-2",s.tokenize=y,w(ki)}function k(N,Y){return N=="variable"&&a.match(/^\s*[?:]/,!1)||Y=="?"?w(k):N==":"?w(je):N=="spread"?w(k):b(je)}function T(N,Y){if(Y=="<")return w(Q(">"),me(je,">"),H,T);if(Y=="|"||N=="."||Y=="&")return w(je);if(N=="[")return w(je,re("]"),T);if(Y=="extends"||Y=="implements")return l="keyword",w(je);if(Y=="?")return w(je,re(":"),je)}function G(N,Y){if(Y=="<")return w(Q(">"),me(je,">"),H,T)}function ie(){return b(je,ae)}function ae(N,Y){if(Y=="=")return w(je)}function fe(N,Y){return Y=="enum"?(l="keyword",w($a)):b(Be,kt,it,ot)}function Be(N,Y){if(St&&I(Y))return l="keyword",w(Be);if(N=="variable")return B(Y),w();if(N=="spread")return w(Be);if(N=="[")return Je(gt,"]");if(N=="{")return Je(vt,"}")}function vt(N,Y){return N=="variable"&&!a.match(/^\s*:/,!1)?(B(Y),w(it)):(N=="variable"&&(l="property"),N=="spread"?w(Be):N=="}"?b():N=="["?w(Z,re("]"),re(":"),vt):w(re(":"),Be,it))}function gt(){return b(Be,it)}function it(N,Y){if(Y=="=")return w(W)}function ot(N){if(N==",")return w(fe)}function za(N,Y){if(N=="keyword b"&&Y=="else")return w(Q("form","else"),le,H)}function Wu(N,Y){if(Y=="await")return w(Wu);if(N=="(")return w(Q(")"),op,H)}function op(N){return N=="var"?w(fe,Tn):N=="variable"?w(Tn):b(Tn)}function Tn(N,Y){return N==")"?w():N==";"?w(Tn):Y=="in"||Y=="of"?(l="keyword",w(Z,Tn)):b(Z,Tn)}function Pi(N,Y){if(Y=="*")return l="keyword",w(Pi);if(N=="variable")return B(Y),w(Pi);if(N=="(")return w(U,Q(")"),me(xr,")"),H,pi,le,A);if(St&&Y=="<")return w(Q(">"),me(ie,">"),H,Pi)}function Kn(N,Y){if(Y=="*")return l="keyword",w(Kn);if(N=="variable")return B(Y),w(Kn);if(N=="(")return w(U,Q(")"),me(xr,")"),H,pi,A);if(St&&Y=="<")return w(Q(">"),me(ie,">"),H,Kn)}function Ha(N,Y){if(N=="keyword"||N=="variable")return l="type",w(Ha);if(Y=="<")return w(Q(">"),me(ie,">"),H)}function xr(N,Y){return Y=="@"&&w(Z,xr),N=="spread"?w(xr):St&&I(Y)?(l="keyword",w(xr)):St&&N=="this"?w(kt,it):b(Be,kt,it)}function Gu(N,Y){return N=="variable"?Qa(N,Y):Pr(N,Y)}function Qa(N,Y){if(N=="variable")return B(Y),w(Pr)}function Pr(N,Y){if(Y=="<")return w(Q(">"),me(ie,">"),H,Pr);if(Y=="extends"||Y=="implements"||St&&N==",")return Y=="implements"&&(l="keyword"),w(St?je:Z,Pr);if(N=="{")return w(Q("}"),di,H)}function di(N,Y){if(N=="async"||N=="variable"&&(Y=="static"||Y=="get"||Y=="set"||St&&I(Y))&&a.match(/^\s+[\w$\xa1-\uffff]/,!1))return l="keyword",w(di);if(N=="variable"||Vr=="keyword")return l="property",w(Ls,di);if(N=="number"||N=="string")return w(Ls,di);if(N=="[")return w(Z,kt,re("]"),Ls,di);if(Y=="*")return l="keyword",w(di);if(St&&N=="(")return b(Kn,di);if(N==";"||N==",")return w(di);if(N=="}")return w();if(Y=="@")return w(Z,di)}function Ls(N,Y){return Y=="!"||Y=="?"?w(Ls):N==":"?w(je,it):Y=="="?w(W):(N=s.lexical.prev,b(N&&N.info=="interface"?Kn:Pi))}function Zi(N,Y){return Y=="*"?(l="keyword",w(Fr,re(";"))):Y=="default"?(l="keyword",w(Z,re(";"))):N=="{"?w(me(wo,"}"),Fr,re(";")):b(le)}function wo(N,Y){if(Y=="as")return l="keyword",w(re("variable"));if(N=="variable")return b(W,wo)}function Vu(N){return N=="string"?w():N=="("?b(Z):N=="."?b(ye):b(qi,_o,Fr)}function qi(N,Y){return N=="{"?Je(qi,"}"):(N=="variable"&&B(Y),Y=="*"&&(l="keyword"),w(un))}function _o(N){if(N==",")return w(qi,_o)}function un(N,Y){if(Y=="as")return l="keyword",w(qi)}function Fr(N,Y){if(Y=="from")return l="keyword",w(Z)}function Ya(N){return N=="]"?w():b(me(W,"]"))}function $a(){return b(Q("form"),Be,re("{"),Q("}"),me(Ku,"}"),H,H)}function Ku(){return b(Be,it)}function zu(N,Y,ue){return Y.tokenize==p&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Y.lastType)||Y.lastType=="quasi"&&/\{\s*$/.test(N.string.slice(0,N.pos-(ue||0)))}var jr=n.indentUnit,Hu=r.statementIndent,Os=r.jsonld,zn=r.json||Os,Is=r.trackScope!==!1,St=r.typescript,Ot=r.wordCharacters||/[\w$\xa1-\uffff]/,Qu=function(){function N(bo){return{type:bo,style:"keyword"}}var Y=N("keyword a"),ue=N("keyword b"),_e=N("keyword c"),De=N("keyword d"),We=N("operator"),jt={type:"atom",style:"atom"};return{if:N("if"),while:Y,with:Y,else:ue,do:ue,try:ue,finally:ue,return:De,break:De,continue:De,new:N("new"),delete:_e,void:_e,throw:_e,debugger:N("debugger"),var:N("var"),const:N("var"),let:N("var"),function:N("function"),catch:N("catch"),for:N("for"),switch:N("switch"),case:N("case"),default:N("default"),in:We,typeof:We,instanceof:We,true:jt,false:jt,null:jt,undefined:jt,NaN:jt,Infinity:jt,this:N("this"),class:N("class"),super:N("atom"),yield:_e,export:N("export"),import:N("import"),extends:_e,await:_e}}(),Za=/[+\-*&%=<>!?|~^@]/,Ns=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Wr,Gr,Yu={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0},qa=l=s=null,Vr=a=void 0,$u=new F("this",new F("arguments",null));return U.lex=V.lex=!0,A.lex=!0,H.lex=!0,{startState:function(N){return N={tokenize:p,lastType:"sof",cc:[],lexical:new S((N||0)-jr,0,"block",!1),localVars:r.localVars,context:r.localVars&&new O(null,null,!1),indented:N||0},r.globalVars&&typeof r.globalVars=="object"&&(N.globalVars=r.globalVars),N},token:function(N,Y){if(N.sol()&&(Y.lexical.hasOwnProperty("align")||(Y.lexical.align=!1),Y.indented=N.indentation(),v(N,Y)),Y.tokenize!=m&&N.eatSpace())return null;var ue=Y.tokenize(N,Y);return Wr=="comment"?ue:(Y.lastType=Wr!="operator"||Gr!="++"&&Gr!="--"?Wr:"incdec",M(Y,ue,Wr,Gr,N))},indent:function(N,Y){if(N.tokenize==m||N.tokenize==y)return i.Pass;if(N.tokenize!=p)return 0;var ue=Y&&Y.charAt(0),_e=N.lexical,De;if(!/^\s*else\b/.test(Y))for(var We=N.cc.length-1;0<=We;--We){var jt=N.cc[We];if(jt==H)_e=_e.prev;else if(jt!=za&&jt!=A)break}for(;!(_e.type!="stat"&&_e.type!="form"||ue!="}"&&(!(De=N.cc[N.cc.length-1])||De!=ye&&De!=xe||/^[,\.=+\-*:?[\(]/.test(Y)));)_e=_e.prev;return Hu&&_e.type==")"&&_e.prev.type=="stat"&&(_e=_e.prev),De=_e.type,We=ue==De,De=="vardef"?_e.indented+(N.lastType=="operator"||N.lastType==","?_e.info.length+1:0):De=="form"&&ue=="{"?_e.indented:De=="form"?_e.indented+jr:De=="stat"?(ue=_e.indented,N=N.lastType=="operator"||N.lastType==","||Za.test(Y.charAt(0))||/[,.]/.test(Y.charAt(0)),ue+(N?Hu||jr:0)):_e.info!="switch"||We||r.doubleIndentSwitch==0?_e.align?_e.column+(We?0:1):_e.indented+(We?0:jr):_e.indented+(/^(?:case|default)\b/.test(Y)?jr:2*jr)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:zn?null:"/*",blockCommentEnd:zn?null:"*/",blockCommentContinue:zn?null:" * ",lineComment:zn?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:zn?"json":"javascript",jsonldMode:Os,jsonMode:zn,expressionAllowed:zu,skipExpression:function(N){M(N,"atom","atom","true",new i.StringStream("",2,null))}}}),i.registerHelper("wordChars","javascript",/[\w$]/),i.defineMIME("text/javascript","javascript"),i.defineMIME("text/ecmascript","javascript"),i.defineMIME("application/javascript","javascript"),i.defineMIME("application/x-javascript","javascript"),i.defineMIME("application/ecmascript","javascript"),i.defineMIME("application/json",{name:"javascript",json:!0}),i.defineMIME("application/x-json",{name:"javascript",json:!0}),i.defineMIME("application/manifest+json",{name:"javascript",json:!0}),i.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),i.defineMIME("text/typescript",{name:"javascript",typescript:!0}),i.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();(function(t,e){(function(i){i(Wa())})(function(i){function n(v,S){for(var M=0,b=v.length;M<b;++M)S(v[M])}function r(v,S,M,b){var w=v.getCursor(),E=M(v,w);if(!/\b(?:string|comment)\b/.test(E.type)){var B=i.innerMode(v.getMode(),E.state);if(B.mode.helperType!=="json"){for(E.state=B.state,/^[\w$_]*$/.test(E.string)?E.end>w.ch&&(E.end=w.ch,E.string=E.string.slice(0,w.ch-E.start)):E={start:w.ch,end:w.ch,string:"",state:E.state,type:E.string=="."?"property":null},B=E;B.type=="property";){if(B=M(v,l(w.line,B.start)),B.string!=".")return;if(B=M(v,l(w.line,B.start)),!L)var L=[];L.push(B)}return{list:a(E,L,S,b),from:l(w.line,E.start),to:l(w.line,E.end)}}}}function s(v,S){return v=v.getTokenAt(S),S.ch==v.start+1&&v.string.charAt(0)=="."?(v.end=v.start,v.string=".",v.type="property"):/^\.[\w$_]*$/.test(v.string)&&(v.type="property",v.start++,v.string=v.string.replace(/\./,"")),v}function a(v,S,M,b){function w(U){var V;if(V=U.lastIndexOf(L,0)==0){e:if(Array.prototype.indexOf)V=B.indexOf(U)!=-1;else{for(V=B.length;V--;)if(B[V]===U){V=!0;break e}V=!1}V=!V}V&&B.push(U)}function E(U){if(typeof U=="string"?n(h,w):U instanceof Array?n(p,w):U instanceof Function&&n(d,w),Object.getOwnPropertyNames&&Object.getPrototypeOf)for(;U;U=Object.getPrototypeOf(U))Object.getOwnPropertyNames(U).forEach(w);else for(var V in U)w(V)}var B=[],L=v.string,I=b&&b.globalScope||window;if(S&&S.length){v=S.pop();var O;for(v.type&&v.type.indexOf("variable")===0?(b&&b.additionalContext&&(O=b.additionalContext[v.string]),b&&b.useGlobalScope===!1||(O=O||I[v.string])):v.type=="string"?O="":v.type=="atom"?O=1:v.type=="function"&&(I.jQuery==null||v.string!="$"&&v.string!="jQuery"||typeof I.jQuery!="function"?I._!=null&&v.string=="_"&&typeof I._=="function"&&(O=I._()):O=I.jQuery());O!=null&&S.length;)O=O[S.pop().string];O!=null&&E(O)}else{for(S=v.state.localVars;S;S=S.next)w(S.name);for(O=v.state.context;O;O=O.prev)for(S=O.vars;S;S=S.next)w(S.name);for(S=v.state.globalVars;S;S=S.next)w(S.name);if(b&&b.additionalContext!=null)for(var F in b.additionalContext)w(F);b&&b.useGlobalScope===!1||E(I),n(M,w)}return B}var l=i.Pos;i.registerHelper("hint","javascript",function(v,S){return r(v,m,function(M,b){return M.getTokenAt(b)},S)}),i.registerHelper("hint","coffeescript",function(v,S){return r(v,y,s,S)});var h="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),p="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),d=["prototype","apply","call","bind"],m="break case catch class const continue debugger default delete do else export extends false finally for function if in import instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),y="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ")})})();(function(t,e){(function(i){i(Wa())})(function(i){function n(y,v){if(this.cm=y,this.options=v,this.widget=null,this.tick=this.debounce=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var S=this;y.on("cursorActivity",this.activityFunc=function(){S.cursorActivity()})}}function r(y,v){function S(B,L){var I=typeof L!="string"?function(O){return L(O,v)}:M.hasOwnProperty(L)?M[L]:L;w[B]=I}var M={Up:function(){v.moveFocus(-1)},Down:function(){v.moveFocus(1)},PageUp:function(){v.moveFocus(-v.menuSize()+1,!0)},PageDown:function(){v.moveFocus(v.menuSize()-1,!0)},Home:function(){v.setFocus(0)},End:function(){v.setFocus(v.length-1)},Enter:v.pick,Tab:v.pick,Esc:v.close};/Mac/.test(navigator.platform)&&(M["Ctrl-P"]=function(){v.moveFocus(-1)},M["Ctrl-N"]=function(){v.moveFocus(1)});var b=y.options.customKeys,w=b?{}:M;if(b)for(var E in b)b.hasOwnProperty(E)&&S(E,b[E]);if(y=y.options.extraKeys)for(E in y)y.hasOwnProperty(E)&&S(E,y[E]);return w}function s(y,v){for(;v&&v!=y;){if(v.nodeName.toUpperCase()==="LI"&&v.parentNode==y)return v;v=v.parentNode}}function a(y,v){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=y,this.data=v,this.picked=!1;var S=this,M=y.cm,b=M.getInputField().ownerDocument,w=b.defaultView||b.parentWindow,E=this.hints=b.createElement("ul");E.setAttribute("role","listbox"),E.setAttribute("aria-expanded","true"),E.id=this.id,E.className="CodeMirror-hints "+y.cm.options.theme,this.selectedHint=v.selectedHint||0;for(var B=v.list,L=0;L<B.length;++L){var I=E.appendChild(b.createElement("li")),O=B[L],F="CodeMirror-hint"+(L!=this.selectedHint?"":" CodeMirror-hint-active");O.className!=null&&(F=O.className+" "+F),I.className=F,L==this.selectedHint&&I.setAttribute("aria-selected","true"),I.id=this.id+"-"+L,I.setAttribute("role","option"),O.render?O.render(I,v,O):I.appendChild(b.createTextNode(O.displayText||(typeof O=="string"?O:O.text))),I.hintId=L}var U=y.options.container||b.body;L=M.cursorCoords(y.options.alignWithWord?v.from:null);var V=L.left,A=L.bottom,Q=!0;if(F=I=0,U!==b.body){O=["absolute","relative","fixed"].indexOf(w.getComputedStyle(U).position)!==-1?U:U.offsetParent,F=O.getBoundingClientRect();var H=b.body.getBoundingClientRect();I=F.left-H.left-O.scrollLeft,F=F.top-H.top-O.scrollTop}E.style.left=V-I+"px",E.style.top=A-F+"px",O=w.innerWidth||Math.max(b.body.offsetWidth,b.documentElement.offsetWidth),H=w.innerHeight||Math.max(b.body.offsetHeight,b.documentElement.offsetHeight),U.appendChild(E),M.getInputField().setAttribute("aria-autocomplete","list"),M.getInputField().setAttribute("aria-owns",this.id),M.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint),U=y.options.moveOnOverlap?E.getBoundingClientRect():new DOMRect;var re=y.options.paddingForScrollbar?E.scrollHeight>E.clientHeight+1:!1,le;if(setTimeout(function(){le=M.getScrollInfo()}),0<U.bottom-H){var q=U.bottom-U.top,Z=U.top-(L.bottom-L.top)-2;H-U.top<Z?(q>Z&&(E.style.height=(q=Z)+"px"),E.style.top=(A=L.top-q)+F+"px",Q=!1):E.style.height=H-U.top-2+"px"}if(F=U.right-O,re&&(F+=M.display.nativeBarWidth),0<F&&(U.right-U.left>O&&(E.style.width=O-5+"px",F-=U.right-U.left-O),E.style.left=(V=Math.max(L.left-F-I,0))+"px"),re)for(L=E.firstChild;L;L=L.nextSibling)L.style.paddingRight=M.display.nativeBarWidth+"px";if(M.addKeyMap(this.keyMap=r(y,{moveFocus:function($,ne){S.changeActive(S.selectedHint+$,ne)},setFocus:function($){S.changeActive($)},menuSize:function(){return S.screenAmount()},length:B.length,close:function(){y.close()},pick:function(){S.pick()},data:v})),y.options.closeOnUnfocus){var W;M.on("blur",this.onBlur=function(){W=setTimeout(function(){y.close()},100)}),M.on("focus",this.onFocus=function(){clearTimeout(W)})}return M.on("scroll",this.onScroll=function(){var $=M.getScrollInfo(),ne=M.getWrapperElement().getBoundingClientRect();le||(le=M.getScrollInfo());var we=A+le.top-$.top,ye=we-(w.pageYOffset||(b.documentElement||b.body).scrollTop);if(Q||(ye+=E.offsetHeight),ye<=ne.top||ye>=ne.bottom)return y.close();E.style.top=we+"px",E.style.left=V+le.left-$.left+"px"}),i.on(E,"dblclick",function($){($=s(E,$.target||$.srcElement))&&$.hintId!=null&&(S.changeActive($.hintId),S.pick())}),i.on(E,"click",function($){($=s(E,$.target||$.srcElement))&&$.hintId!=null&&(S.changeActive($.hintId),y.options.completeOnSingleClick&&S.pick())}),i.on(E,"mousedown",function(){setTimeout(function(){M.focus()},20)}),L=this.getSelectedHintRange(),L.from===0&&L.to===0||this.scrollToActive(),i.signal(v,"select",B[this.selectedHint],E.childNodes[this.selectedHint]),!0}function l(y,v){if(!y.somethingSelected())return v;y=[];for(var S=0;S<v.length;S++)v[S].supportsSelection&&y.push(v[S]);return y}function h(y,v,S,M){y.async?y(v,M,S):(y=y(v,S))&&y.then?y.then(M):M(y)}i.showHint=function(y,v,S){if(!v)return y.showHint(S);if(S&&S.async&&(v.async=!0),v={hint:v},S)for(var M in S)v[M]=S[M];return y.showHint(v)},i.defineExtension("showHint",function(y){var v=this.getCursor("start"),S=this.options.hintOptions,M={},b;for(b in m)M[b]=m[b];if(S)for(b in S)S[b]!==void 0&&(M[b]=S[b]);if(y)for(b in y)y[b]!==void 0&&(M[b]=y[b]);if(M.hint.resolve&&(M.hint=M.hint.resolve(this,v)),y=M,v=this.listSelections(),!(1<v.length)){if(this.somethingSelected()){if(!y.hint.supportsSelection)return;for(b=0;b<v.length;b++)if(v[b].head.line!=v[b].anchor.line)return}this.state.completionActive&&this.state.completionActive.close(),v=this.state.completionActive=new n(this,y),v.options.hint&&(i.signal(this,"startCompletion",this),v.update(!0))}}),i.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});var p=window.requestAnimationFrame||function(y){return setTimeout(y,1e3/60)},d=window.cancelAnimationFrame||clearTimeout;n.prototype={close:function(){this.active()&&(this.tick=this.cm.state.completionActive=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&i.signal(this.data,"close"),this.widget&&this.widget.close(),i.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(y,v){var S=y.list[v],M=this;this.cm.operation(function(){S.hint?S.hint(M.cm,y,S):M.cm.replaceRange(typeof S=="string"?S:S.text,S.from||y.from,S.to||y.to,"complete"),i.signal(y,"pick",S),M.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(d(this.debounce),this.debounce=0);var y=this.startPos;this.data&&(y=this.data.from);var v=this.cm.getCursor(),S=this.cm.getLine(v.line);if(v.line!=this.startPos.line||S.length-v.ch!=this.startLen-this.startPos.ch||v.ch<y.ch||this.cm.somethingSelected()||!v.ch||this.options.closeCharacters.test(S.charAt(v.ch-1)))this.close();else{var M=this;this.debounce=p(function(){M.update()}),this.widget&&this.widget.disable()}},update:function(y){if(this.tick!=null){var v=this,S=++this.tick;h(this.options.hint,this.cm,this.options,function(M){v.tick==S&&v.finishUpdate(M,y)})}},finishUpdate:function(y,v){this.data&&i.signal(this.data,"update"),v=this.widget&&this.widget.picked||v&&this.options.completeSingle,this.widget&&this.widget.close(),(this.data=y)&&y.list.length&&(v&&y.list.length==1?this.pick(y,0):(this.widget=new a(this,y),i.signal(y,"shown")))}},a.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var y=this.completion.cm.getInputField();y.removeAttribute("aria-activedescendant"),y.removeAttribute("aria-owns"),y=this.completion.cm,this.completion.options.closeOnUnfocus&&(y.off("blur",this.onBlur),y.off("focus",this.onFocus)),y.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var y=this;this.keyMap={Enter:function(){y.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(y,v){y>=this.data.list.length?y=v?this.data.list.length-1:0:0>y&&(y=v?0:this.data.list.length-1),this.selectedHint!=y&&((v=this.hints.childNodes[this.selectedHint])&&(v.className=v.className.replace(" CodeMirror-hint-active",""),v.removeAttribute("aria-selected")),v=this.hints.childNodes[this.selectedHint=y],v.className+=" CodeMirror-hint-active",v.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",v.id),this.scrollToActive(),i.signal(this.data,"select",this.data.list[this.selectedHint],v))},scrollToActive:function(){var y=this.getSelectedHintRange(),v=this.hints.childNodes[y.from];y=this.hints.childNodes[y.to];var S=this.hints.firstChild;v.offsetTop<this.hints.scrollTop?this.hints.scrollTop=v.offsetTop-S.offsetTop:y.offsetTop+y.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=y.offsetTop+y.offsetHeight-this.hints.clientHeight+S.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var y=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-y),to:Math.min(this.data.list.length-1,this.selectedHint+y)}}},i.registerHelper("hint","auto",{resolve:function(y,v){var S=y.getHelpers(v,"hint"),M;return S.length?(y=function(b,w,E){function B(I){if(I==L.length)return w(null);h(L[I],b,E,function(O){O&&0<O.list.length?w(O):B(I+1)})}var L=l(b,S);B(0)},y.async=!0,y.supportsSelection=!0,y):(M=y.getHelper(y.getCursor(),"hintWords"))?function(b){return i.hint.fromList(b,{words:M})}:i.hint.anyword?function(b,w){return i.hint.anyword(b,w)}:function(){}}}),i.registerHelper("hint","fromList",function(y,v){var S=y.getCursor(),M=y.getTokenAt(S);y=i.Pos(S.line,M.start),M.start<S.ch&&/\w/.test(M.string.charAt(S.ch-M.start-1))?M=M.string.substr(0,S.ch-M.start):(M="",y=S);for(var b=[],w=0;w<v.words.length;w++){var E=v.words[w];E.slice(0,M.length)==M&&b.push(E)}if(b.length)return{list:b,from:y,to:S}}),i.commands.autocomplete=i.showHint;var m={hint:i.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};i.defineOption("hintOptions",null)})})();(function(t,e){var i=i||{};i.scope={},i.findInternal=function(n,r,s){n instanceof String&&(n=String(n));for(var a=n.length,l=0;l<a;l++){var h=n[l];if(r.call(s,h,l,n))return{i:l,v:h}}return{i:-1,v:void 0}},i.ASSUME_ES5=!1,i.ASSUME_NO_NATIVE_MAP=!1,i.ASSUME_NO_NATIVE_SET=!1,i.SIMPLE_FROUND_POLYFILL=!1,i.ISOLATE_POLYFILLS=!1,i.FORCE_POLYFILL_PROMISE=!1,i.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,i.defineProperty=i.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(n,r,s){return n==Array.prototype||n==Object.prototype||(n[r]=s.value),n},i.getGlobal=function(n){n=[typeof globalThis=="object"&&globalThis,n,typeof window=="object"&&window,typeof self=="object"&&self,typeof bt=="object"&&bt];for(var r=0;r<n.length;++r){var s=n[r];if(s&&s.Math==Math)return s}throw Error("Cannot find global object")},i.global=i.getGlobal(bt),i.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",i.TRUST_ES6_POLYFILLS=!i.ISOLATE_POLYFILLS||i.IS_SYMBOL_NATIVE,i.polyfills={},i.propertyToPolyfillSymbol={},i.POLYFILL_PREFIX="$jscp$",i.polyfill=function(n,r,s,a){r&&(i.ISOLATE_POLYFILLS?i.polyfillIsolated(n,r,s,a):i.polyfillUnisolated(n,r,s,a))},i.polyfillUnisolated=function(n,r,s,a){for(s=i.global,n=n.split("."),a=0;a<n.length-1;a++){var l=n[a];if(!(l in s))return;s=s[l]}n=n[n.length-1],a=s[n],r=r(a),r!=a&&r!=null&&i.defineProperty(s,n,{configurable:!0,writable:!0,value:r})},i.polyfillIsolated=function(n,r,s,a){var l=n.split(".");n=l.length===1,a=l[0],a=!n&&a in i.polyfills?i.polyfills:i.global;for(var h=0;h<l.length-1;h++){var p=l[h];if(!(p in a))return;a=a[p]}l=l[l.length-1],s=i.IS_SYMBOL_NATIVE&&s==="es6"?a[l]:null,r=r(s),r!=null&&(n?i.defineProperty(i.polyfills,l,{configurable:!0,writable:!0,value:r}):r!==s&&(i.propertyToPolyfillSymbol[l]===void 0&&(s=1e9*Math.random()>>>0,i.propertyToPolyfillSymbol[l]=i.IS_SYMBOL_NATIVE?i.global.Symbol(l):i.POLYFILL_PREFIX+s+"$"+l),i.defineProperty(a,i.propertyToPolyfillSymbol[l],{configurable:!0,writable:!0,value:r})))},i.polyfill("Array.prototype.find",function(n){return n||function(r,s){return i.findInternal(this,r,s).v}},"es6","es3"),function(n){n(Wa())}(function(n){function r(v){v.state.markedSelection&&v.operation(function(){p(v)})}function s(v){v.state.markedSelection&&v.state.markedSelection.length&&v.operation(function(){l(v)})}function a(v,S,M,b){if(y(S,M)!=0)for(var w=v.state.markedSelection,E=v.state.markedSelectionStyle,B=S.line;;){var L=B==S.line?S:m(B,0);B+=d;var I=B>=M.line,O=I?M:m(B,0);if(L=v.markText(L,O,{className:E}),b==null?w.push(L):w.splice(b++,0,L),I)break}}function l(v){v=v.state.markedSelection;for(var S=0;S<v.length;++S)v[S].clear();v.length=0}function h(v){l(v);for(var S=v.listSelections(),M=0;M<S.length;M++)a(v,S[M].from(),S[M].to())}function p(v){if(!v.somethingSelected())return l(v);if(1<v.listSelections().length)return h(v);var S=v.getCursor("start"),M=v.getCursor("end"),b=v.state.markedSelection;if(!b.length)return a(v,S,M);var w=b[0].find(),E=b[b.length-1].find();if(!w||!E||M.line-S.line<=d||0<=y(S,E.to)||0>=y(M,w.from))return h(v);for(;0<y(S,w.from);)b.shift().clear(),w=b[0].find();for(0>y(S,w.from)&&(w.to.line-S.line<d?(b.shift().clear(),a(v,S,w.to,0)):a(v,S,w.from,0));0>y(M,E.to);)b.pop().clear(),E=b[b.length-1].find();0<y(M,E.to)&&(M.line-E.from.line<d?(b.pop().clear(),a(v,E.from,M)):a(v,E.to,M))}n.defineOption("styleSelectedText",!1,function(v,S,M){M=M&&M!=n.Init,S&&!M?(v.state.markedSelection=[],v.state.markedSelectionStyle=typeof S=="string"?S:"CodeMirror-selectedtext",h(v),v.on("cursorActivity",r),v.on("change",s)):!S&&M&&(v.off("cursorActivity",r),v.off("change",s),l(v),v.state.markedSelection=v.state.markedSelectionStyle=null)});var d=8,m=n.Pos,y=n.cmpPos})})();(function(t,e){(function(i){i(Wa())})(function(i){function n(d){return d=d.search(l),d==-1?0:d}function r(d,m,y){return/\bstring\b/.test(d.getTokenTypeAt(h(m.line,0)))&&!/^['"`]/.test(y)}function s(d,m){var y=d.getMode();return y.useInnerComments!==!1&&y.innerMode?d.getModeAt(m):y}var a={},l=/[^\s\u00a0]/,h=i.Pos,p=i.cmpPos;i.commands.toggleComment=function(d){d.toggleComment()},i.defineExtension("toggleComment",function(d){d||(d=a);for(var m=1/0,y=this.listSelections(),v=null,S=y.length-1;0<=S;S--){var M=y[S].from(),b=y[S].to();M.line>=m||(b.line>=m&&(b=h(m,0)),m=M.line,v==null?this.uncomment(M,b,d)?v="un":(this.lineComment(M,b,d),v="line"):v=="un"?this.uncomment(M,b,d):this.lineComment(M,b,d))}}),i.defineExtension("lineComment",function(d,m,y){y||(y=a);var v=this,S=s(v,d),M=v.getLine(d.line);if(M!=null&&!r(v,d,M)){var b=y.lineComment||S.lineComment;if(b){var w=Math.min(m.ch!=0||m.line==d.line?m.line+1:m.line,v.lastLine()+1),E=y.padding==null?" ":y.padding,B=y.commentBlankLines||d.line==m.line;v.operation(function(){if(y.indent){for(var L=null,I=d.line;I<w;++I){var O=v.getLine(I);O=O.search(l)===-1?O:O.slice(0,n(O)),(L==null||L.length>O.length)&&(L=O)}for(I=d.line;I<w;++I){O=v.getLine(I);var F=L.length;(B||l.test(O))&&(O.slice(0,F)!=L&&(F=n(O)),v.replaceRange(L+b+E,h(I,0),h(I,F)))}}else for(I=d.line;I<w;++I)(B||l.test(v.getLine(I)))&&v.replaceRange(b+E,h(I,0))})}else(y.blockCommentStart||S.blockCommentStart)&&(y.fullLines=!0,v.blockComment(d,m,y))}}),i.defineExtension("blockComment",function(d,m,y){y||(y=a);var v=this,S=s(v,d),M=y.blockCommentStart||S.blockCommentStart,b=y.blockCommentEnd||S.blockCommentEnd;if(!M||!b)(y.lineComment||S.lineComment)&&y.fullLines!=0&&v.lineComment(d,m,y);else if(!/\bcomment\b/.test(v.getTokenTypeAt(h(d.line,0)))){var w=Math.min(m.line,v.lastLine());w!=d.line&&m.ch==0&&l.test(v.getLine(w))&&--w;var E=y.padding==null?" ":y.padding;d.line>w||v.operation(function(){if(y.fullLines!=0){var B=l.test(v.getLine(w));v.replaceRange(E+b,h(w)),v.replaceRange(M+E,h(d.line,0));var L=y.blockCommentLead||S.blockCommentLead;if(L!=null)for(var I=d.line+1;I<=w;++I)(I!=w||B)&&v.replaceRange(L+E,h(I,0))}else B=p(v.getCursor("to"),m)==0,L=!v.somethingSelected(),v.replaceRange(b,m),B&&v.setSelection(L?m:v.getCursor("from"),m),v.replaceRange(M,d)})}}),i.defineExtension("uncomment",function(d,m,y){y||(y=a);var v=this,S=s(v,d),M=Math.min(m.ch!=0||m.line==d.line?m.line:m.line-1,v.lastLine()),b=Math.min(d.line,M),w=y.lineComment||S.lineComment,E=[],B=y.padding==null?" ":y.padding,L;e:if(w){for(var I=b;I<=M;++I){var O=v.getLine(I),F=O.indexOf(w);if(-1<F&&!/comment/.test(v.getTokenTypeAt(h(I,F+1)))&&(F=-1),F==-1&&l.test(O)||-1<F&&l.test(O.slice(0,F)))break e;E.push(O)}if(v.operation(function(){for(var q=b;q<=M;++q){var Z=E[q-b],W=Z.indexOf(w),$=W+w.length;0>W||(Z.slice($,$+B.length)==B&&($+=B.length),L=!0,v.replaceRange("",h(q,W),h(q,$)))}}),L)return!0}var U=y.blockCommentStart||S.blockCommentStart,V=y.blockCommentEnd||S.blockCommentEnd;if(!U||!V)return!1;var A=y.blockCommentLead||S.blockCommentLead,Q=v.getLine(b),H=Q.indexOf(U);if(H==-1)return!1;var re=M==b?Q:v.getLine(M),le=re.indexOf(V,M==b?H+U.length:0);return y=h(b,H+1),S=h(M,le+1),le==-1||!/comment/.test(v.getTokenTypeAt(y))||!/comment/.test(v.getTokenTypeAt(S))||-1<v.getRange(y,S,`
`).indexOf(V)||(S=Q.lastIndexOf(U,d.ch),y=S==-1?-1:Q.slice(0,d.ch).indexOf(V,S+U.length),S!=-1&&y!=-1&&y+V.length!=d.ch)||(y=re.indexOf(V,m.ch),d=re.slice(m.ch).lastIndexOf(U,y-m.ch),S=y==-1||d==-1?-1:m.ch+d,y!=-1&&S!=-1&&S!=m.ch)?!1:(v.operation(function(){v.replaceRange("",h(M,le-(B&&re.slice(le-B.length,le)==B?B.length:0)),h(M,le+V.length));var q=H+U.length;if(B&&Q.slice(q,q+B.length)==B&&(q+=B.length),v.replaceRange("",h(b,H),h(b,q)),A)for(q=b+1;q<=M;++q){var Z=v.getLine(q),W=Z.indexOf(A);if(W!=-1&&!l.test(Z.slice(0,W))){var $=W+A.length;B&&Z.slice($,$+B.length)==B&&($+=B.length),v.replaceRange("",h(q,W),h(q,$))}}}),!0)})})})();const b9={"Ctrl-Enter":"editor: eval line","Ctrl-/":"editor:toggleComment","Alt-Enter":"editor: eval block","Shift-Ctrl-Enter":"editor: eval all","Shift-Ctrl-G":"gallery:shareSketch","Shift-Ctrl-F":"editor: format code","Shift-Ctrl-L":"gallery:saveToURL","Shift-Ctrl-H":"ui: hide all","Shift-Ctrl-S":"screencap"};var x9=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],ET=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],S9="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",AT="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",wg={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},_g="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",C9={5:_g,"5module":_g+" export import",6:_g+" const class extends export import super"},M9=/^in(stanceof)?$/,k9=new RegExp("["+AT+"]"),T9=new RegExp("["+AT+S9+"]");function i0(t,e){for(var i=65536,n=0;n<e.length;n+=2){if(i+=e[n],i>t)return!1;if(i+=e[n+1],i>=t)return!0}return!1}function Or(t,e){return t<65?t===36:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&k9.test(String.fromCharCode(t)):e===!1?!1:i0(t,ET)}function Ea(t,e){return t<48?t===36:t<58?!0:t<65?!1:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&T9.test(String.fromCharCode(t)):e===!1?!1:i0(t,ET)||i0(t,x9)}var st=function(e,i){i===void 0&&(i={}),this.label=e,this.keyword=i.keyword,this.beforeExpr=!!i.beforeExpr,this.startsExpr=!!i.startsExpr,this.isLoop=!!i.isLoop,this.isAssign=!!i.isAssign,this.prefix=!!i.prefix,this.postfix=!!i.postfix,this.binop=i.binop||null,this.updateContext=null};function cn(t,e){return new st(t,{beforeExpr:!0,binop:e})}var fn={beforeExpr:!0},Gi={startsExpr:!0},wy={};function Xe(t,e){return e===void 0&&(e={}),e.keyword=t,wy[t]=new st(t,e)}var P={num:new st("num",Gi),regexp:new st("regexp",Gi),string:new st("string",Gi),name:new st("name",Gi),privateId:new st("privateId",Gi),eof:new st("eof"),bracketL:new st("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new st("]"),braceL:new st("{",{beforeExpr:!0,startsExpr:!0}),braceR:new st("}"),parenL:new st("(",{beforeExpr:!0,startsExpr:!0}),parenR:new st(")"),comma:new st(",",fn),semi:new st(";",fn),colon:new st(":",fn),dot:new st("."),question:new st("?",fn),questionDot:new st("?."),arrow:new st("=>",fn),template:new st("template"),invalidTemplate:new st("invalidTemplate"),ellipsis:new st("...",fn),backQuote:new st("`",Gi),dollarBraceL:new st("${",{beforeExpr:!0,startsExpr:!0}),eq:new st("=",{beforeExpr:!0,isAssign:!0}),assign:new st("_=",{beforeExpr:!0,isAssign:!0}),incDec:new st("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new st("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:cn("||",1),logicalAND:cn("&&",2),bitwiseOR:cn("|",3),bitwiseXOR:cn("^",4),bitwiseAND:cn("&",5),equality:cn("==/!=/===/!==",6),relational:cn("</>/<=/>=",7),bitShift:cn("<</>>/>>>",8),plusMin:new st("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:cn("%",10),star:cn("*",10),slash:cn("/",10),starstar:new st("**",{beforeExpr:!0}),coalesce:cn("??",1),_break:Xe("break"),_case:Xe("case",fn),_catch:Xe("catch"),_continue:Xe("continue"),_debugger:Xe("debugger"),_default:Xe("default",fn),_do:Xe("do",{isLoop:!0,beforeExpr:!0}),_else:Xe("else",fn),_finally:Xe("finally"),_for:Xe("for",{isLoop:!0}),_function:Xe("function",Gi),_if:Xe("if"),_return:Xe("return",fn),_switch:Xe("switch"),_throw:Xe("throw",fn),_try:Xe("try"),_var:Xe("var"),_const:Xe("const"),_while:Xe("while",{isLoop:!0}),_with:Xe("with"),_new:Xe("new",{beforeExpr:!0,startsExpr:!0}),_this:Xe("this",Gi),_super:Xe("super",Gi),_class:Xe("class",Gi),_extends:Xe("extends",fn),_export:Xe("export"),_import:Xe("import",Gi),_null:Xe("null",Gi),_true:Xe("true",Gi),_false:Xe("false",Gi),_in:Xe("in",{beforeExpr:!0,binop:7}),_instanceof:Xe("instanceof",{beforeExpr:!0,binop:7}),_typeof:Xe("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Xe("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Xe("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Mn=/\r\n?|\n|\u2028|\u2029/,E9=new RegExp(Mn.source,"g");function Ga(t){return t===10||t===13||t===8232||t===8233}function RT(t,e,i){i===void 0&&(i=t.length);for(var n=e;n<i;n++){var r=t.charCodeAt(n);if(Ga(r))return n<i-1&&r===13&&t.charCodeAt(n+1)===10?n+2:n+1}return-1}var LT=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,dn=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,OT=Object.prototype,A9=OT.hasOwnProperty,R9=OT.toString,Pu=Object.hasOwn||function(t,e){return A9.call(t,e)},gx=Array.isArray||function(t){return R9.call(t)==="[object Array]"};function ms(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}function Ms(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}var L9=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Au=function(e,i){this.line=e,this.column=i};Au.prototype.offset=function(e){return new Au(this.line,this.column+e)};var ip=function(e,i,n){this.start=i,this.end=n,e.sourceFile!==null&&(this.source=e.sourceFile)};function IT(t,e){for(var i=1,n=0;;){var r=RT(t,n,e);if(r<0)return new Au(i,e-n);++i,n=r}}var n0={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},mx=!1;function O9(t){var e={};for(var i in n0)e[i]=t&&Pu(t,i)?t[i]:n0[i];if(e.ecmaVersion==="latest"?e.ecmaVersion=1e8:e.ecmaVersion==null?(!mx&&typeof console=="object"&&console.warn&&(mx=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),e.allowReserved==null&&(e.allowReserved=e.ecmaVersion<5),(!t||t.allowHashBang==null)&&(e.allowHashBang=e.ecmaVersion>=14),gx(e.onToken)){var n=e.onToken;e.onToken=function(r){return n.push(r)}}return gx(e.onComment)&&(e.onComment=I9(e,e.onComment)),e}function I9(t,e){return function(i,n,r,s,a,l){var h={type:i?"Block":"Line",value:n,start:r,end:s};t.locations&&(h.loc=new ip(this,a,l)),t.ranges&&(h.range=[r,s]),e.push(h)}}var Ru=1,Va=2,_y=4,NT=8,DT=16,BT=32,by=64,UT=128,Fu=256,xy=Ru|Va|Fu;function Sy(t,e){return Va|(t?_y:0)|(e?NT:0)}var bf=0,Cy=1,Ur=2,JT=3,PT=4,FT=5,ti=function(e,i,n){this.options=e=O9(e),this.sourceFile=e.sourceFile,this.keywords=ms(C9[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var r="";e.allowReserved!==!0&&(r=wg[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(r+=" await")),this.reservedWords=ms(r);var s=(r?r+" ":"")+wg.strict;this.reservedWordsStrict=ms(s),this.reservedWordsStrictBind=ms(s+" "+wg.strictBind),this.input=String(i),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf(`
`,n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Mn).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=P.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Ru),this.regexpState=null,this.privateNameStack=[]},_r={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ti.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};_r.inFunction.get=function(){return(this.currentVarScope().flags&Va)>0};_r.inGenerator.get=function(){return(this.currentVarScope().flags&NT)>0&&!this.currentVarScope().inClassFieldInit};_r.inAsync.get=function(){return(this.currentVarScope().flags&_y)>0&&!this.currentVarScope().inClassFieldInit};_r.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&Fu)return!1;if(e.flags&Va)return(e.flags&_y)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};_r.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,i=t.inClassFieldInit;return(e&by)>0||i||this.options.allowSuperOutsideMethod};_r.allowDirectSuper.get=function(){return(this.currentThisScope().flags&UT)>0};_r.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};_r.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,i=t.inClassFieldInit;return(e&(Va|Fu))>0||i};_r.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Fu)>0};ti.extend=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n};ti.parse=function(e,i){return new this(i,e).parse()};ti.parseExpressionAt=function(e,i,n){var r=new this(n,e,i);return r.nextToken(),r.parseExpression()};ti.tokenizer=function(e,i){return new this(i,e)};Object.defineProperties(ti.prototype,_r);var Ui=ti.prototype,N9=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Ui.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){dn.lastIndex=t,t+=dn.exec(this.input)[0].length;var e=N9.exec(this.input.slice(t));if(!e)return!1;if((e[1]||e[2])==="use strict"){dn.lastIndex=t+e[0].length;var i=dn.exec(this.input),n=i.index+i[0].length,r=this.input.charAt(n);return r===";"||r==="}"||Mn.test(i[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||r==="!"&&this.input.charAt(n+1)==="=")}t+=e[0].length,dn.lastIndex=t,t+=dn.exec(this.input)[0].length,this.input[t]===";"&&t++}};Ui.eat=function(t){return this.type===t?(this.next(),!0):!1};Ui.isContextual=function(t){return this.type===P.name&&this.value===t&&!this.containsEsc};Ui.eatContextual=function(t){return this.isContextual(t)?(this.next(),!0):!1};Ui.expectContextual=function(t){this.eatContextual(t)||this.unexpected()};Ui.canInsertSemicolon=function(){return this.type===P.eof||this.type===P.braceR||Mn.test(this.input.slice(this.lastTokEnd,this.start))};Ui.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Ui.semicolon=function(){!this.eat(P.semi)&&!this.insertSemicolon()&&this.unexpected()};Ui.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0};Ui.expect=function(t){this.eat(t)||this.unexpected()};Ui.unexpected=function(t){this.raise(t??this.start,"Unexpected token")};var np=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Ui.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,e?"Assigning to rvalue":"Parenthesized pattern")}};Ui.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,n=t.doubleProto;if(!e)return i>=0||n>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")};Ui.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Ui.isSimpleAssignTarget=function(t){return t.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(t.expression):t.type==="Identifier"||t.type==="MemberExpression"};var Ne=ti.prototype;Ne.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==P.eof;){var i=this.parseStatement(null,!0,e);t.body.push(i)}if(this.inModule)for(var n=0,r=Object.keys(this.undefinedExports);n<r.length;n+=1){var s=r[n];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var My={kind:"loop"},D9={kind:"switch"};Ne.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;dn.lastIndex=this.pos;var e=dn.exec(this.input),i=this.pos+e[0].length,n=this.input.charCodeAt(i);if(n===91||n===92)return!0;if(t)return!1;if(n===123||n>55295&&n<56320)return!0;if(Or(n,!0)){for(var r=i+1;Ea(n=this.input.charCodeAt(r),!0);)++r;if(n===92||n>55295&&n<56320)return!0;var s=this.input.slice(i,r);if(!M9.test(s))return!0}return!1};Ne.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;dn.lastIndex=this.pos;var t=dn.exec(this.input),e=this.pos+t[0].length,i;return!Mn.test(this.input.slice(this.pos,e))&&this.input.slice(e,e+8)==="function"&&(e+8===this.input.length||!(Ea(i=this.input.charCodeAt(e+8))||i>55295&&i<56320))};Ne.parseStatement=function(t,e,i){var n=this.type,r=this.startNode(),s;switch(this.isLet(t)&&(n=P._var,s="let"),n){case P._break:case P._continue:return this.parseBreakContinueStatement(r,n.keyword);case P._debugger:return this.parseDebuggerStatement(r);case P._do:return this.parseDoStatement(r);case P._for:return this.parseForStatement(r);case P._function:return t&&(this.strict||t!=="if"&&t!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r,!1,!t);case P._class:return t&&this.unexpected(),this.parseClass(r,!0);case P._if:return this.parseIfStatement(r);case P._return:return this.parseReturnStatement(r);case P._switch:return this.parseSwitchStatement(r);case P._throw:return this.parseThrowStatement(r);case P._try:return this.parseTryStatement(r);case P._const:case P._var:return s=s||this.value,t&&s!=="var"&&this.unexpected(),this.parseVarStatement(r,s);case P._while:return this.parseWhileStatement(r);case P._with:return this.parseWithStatement(r);case P.braceL:return this.parseBlock(!0,r);case P.semi:return this.parseEmptyStatement(r);case P._export:case P._import:if(this.options.ecmaVersion>10&&n===P._import){dn.lastIndex=this.pos;var a=dn.exec(this.input),l=this.pos+a[0].length,h=this.input.charCodeAt(l);if(h===40||h===46)return this.parseExpressionStatement(r,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===P._import?this.parseImport(r):this.parseExport(r,i);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(r,!0,!t);var p=this.value,d=this.parseExpression();return n===P.name&&d.type==="Identifier"&&this.eat(P.colon)?this.parseLabeledStatement(r,p,d,t):this.parseExpressionStatement(r,d)}};Ne.parseBreakContinueStatement=function(t,e){var i=e==="break";this.next(),this.eat(P.semi)||this.insertSemicolon()?t.label=null:this.type!==P.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var r=this.labels[n];if((t.label==null||r.name===t.label.name)&&(r.kind!=null&&(i||r.kind==="loop")||t.label&&i))break}return n===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")};Ne.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")};Ne.parseDoStatement=function(t){return this.next(),this.labels.push(My),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(P._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(P.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")};Ne.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(My),this.enterScope(0),this.expect(P.parenL),this.type===P.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===P._var||this.type===P._const||i){var n=this.startNode(),r=i?"let":this.value;return this.next(),this.parseVar(n,!0,r),this.finishNode(n,"VariableDeclaration"),(this.type===P._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&n.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===P._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,n)):(e>-1&&this.unexpected(e),this.parseFor(t,n))}var s=this.isContextual("let"),a=!1,l=new np,h=this.parseExpression(e>-1?"await":!0,l);return this.type===P._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===P._in?e>-1&&this.unexpected(e):t.await=e>-1),s&&a&&this.raise(h.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(h,!1,l),this.checkLValPattern(h),this.parseForIn(t,h)):(this.checkExpressionErrors(l,!0),e>-1&&this.unexpected(e),this.parseFor(t,h))};Ne.parseFunctionStatement=function(t,e,i){return this.next(),this.parseFunction(t,au|(i?0:r0),!1,e)};Ne.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(P._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")};Ne.parseReturnStatement=function(t){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(P.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")};Ne.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(P.braceL),this.labels.push(D9),this.enterScope(0);for(var e,i=!1;this.type!==P.braceR;)if(this.type===P._case||this.type===P._default){var n=this.type===P._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),n?e.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,e.test=null),this.expect(P.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")};Ne.parseThrowStatement=function(t){return this.next(),Mn.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var B9=[];Ne.parseCatchClauseParam=function(){var t=this.parseBindingAtom(),e=t.type==="Identifier";return this.enterScope(e?BT:0),this.checkLValPattern(t,e?PT:Ur),this.expect(P.parenR),t};Ne.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===P._catch){var e=this.startNode();this.next(),this.eat(P.parenL)?e.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0)),e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(P._finally)?this.parseBlock():null,!t.handler&&!t.finalizer&&this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")};Ne.parseVarStatement=function(t,e,i){return this.next(),this.parseVar(t,!1,e,i),this.semicolon(),this.finishNode(t,"VariableDeclaration")};Ne.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(My),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")};Ne.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")};Ne.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")};Ne.parseLabeledStatement=function(t,e,i,n){for(var r=0,s=this.labels;r<s.length;r+=1){var a=s[r];a.name===e&&this.raise(i.start,"Label '"+e+"' is already declared")}for(var l=this.type.isLoop?"loop":this.type===P._switch?"switch":null,h=this.labels.length-1;h>=0;h--){var p=this.labels[h];if(p.statementStart===t.start)p.statementStart=this.start,p.kind=l;else break}return this.labels.push({name:e,kind:l,statementStart:this.start}),t.body=this.parseStatement(n?n.indexOf("label")===-1?n+"label":n:"label"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")};Ne.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")};Ne.parseBlock=function(t,e,i){for(t===void 0&&(t=!0),e===void 0&&(e=this.startNode()),e.body=[],this.expect(P.braceL),t&&this.enterScope(0);this.type!==P.braceR;){var n=this.parseStatement(null);e.body.push(n)}return i&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")};Ne.parseFor=function(t,e){return t.init=e,this.expect(P.semi),t.test=this.type===P.semi?null:this.parseExpression(),this.expect(P.semi),t.update=this.type===P.parenR?null:this.parseExpression(),this.expect(P.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")};Ne.parseForIn=function(t,e){var i=this.type===P._in;return this.next(),e.type==="VariableDeclaration"&&e.declarations[0].init!=null&&(!i||this.options.ecmaVersion<8||this.strict||e.kind!=="var"||e.declarations[0].id.type!=="Identifier")&&this.raise(e.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(P.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,i?"ForInStatement":"ForOfStatement")};Ne.parseVar=function(t,e,i,n){for(t.declarations=[],t.kind=i;;){var r=this.startNode();if(this.parseVarId(r,i),this.eat(P.eq)?r.init=this.parseMaybeAssign(e):!n&&i==="const"&&!(this.type===P._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!n&&r.id.type!=="Identifier"&&!(e&&(this.type===P._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):r.init=null,t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(P.comma))break}return t};Ne.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,e==="var"?Cy:Ur,!1)};var au=1,r0=2,jT=4;Ne.parseFunction=function(t,e,i,n,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===P.star&&e&r0&&this.unexpected(),t.generator=this.eat(P.star)),this.options.ecmaVersion>=8&&(t.async=!!n),e&au&&(t.id=e&jT&&this.type!==P.name?null:this.parseIdent(),t.id&&!(e&r0)&&this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?Cy:Ur:JT));var s=this.yieldPos,a=this.awaitPos,l=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Sy(t.async,t.generator)),e&au||(t.id=this.type===P.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=l,this.finishNode(t,e&au?"FunctionDeclaration":"FunctionExpression")};Ne.parseFunctionParams=function(t){this.expect(P.parenL),t.params=this.parseBindingList(P.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Ne.parseClass=function(t,e){this.next();var i=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var n=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(P.braceL);this.type!==P.braceR;){var a=this.parseClassElement(t.superClass!==null);a&&(r.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(s&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&a.key.type==="PrivateIdentifier"&&U9(n,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=i,this.next(),t.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")};Ne.parseClassElement=function(t){if(this.eat(P.semi))return null;var e=this.options.ecmaVersion,i=this.startNode(),n="",r=!1,s=!1,a="method",l=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(P.braceL))return this.parseClassStaticBlock(i),i;this.isClassElementNameStart()||this.type===P.star?l=!0:n="static"}if(i.static=l,!n&&e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===P.star)&&!this.canInsertSemicolon()?s=!0:n="async"),!n&&(e>=9||!s)&&this.eat(P.star)&&(r=!0),!n&&!s&&!r){var h=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=h:n=h)}if(n?(i.computed=!1,i.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),i.key.name=n,this.finishNode(i.key,"Identifier")):this.parseClassElementName(i),e<13||this.type===P.parenL||a!=="method"||r||s){var p=!i.static&&xf(i,"constructor"),d=p&&t;p&&a!=="method"&&this.raise(i.key.start,"Constructor can't have get/set modifier"),i.kind=p?"constructor":a,this.parseClassMethod(i,r,s,d)}else this.parseClassField(i);return i};Ne.isClassElementNameStart=function(){return this.type===P.name||this.type===P.privateId||this.type===P.num||this.type===P.string||this.type===P.bracketL||this.type.keyword};Ne.parseClassElementName=function(t){this.type===P.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)};Ne.parseClassMethod=function(t,e,i,n){var r=t.key;t.kind==="constructor"?(e&&this.raise(r.start,"Constructor can't be a generator"),i&&this.raise(r.start,"Constructor can't be an async method")):t.static&&xf(t,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=t.value=this.parseMethod(e,i,n);return t.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),t.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),t.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")};Ne.parseClassField=function(t){if(xf(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&xf(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(P.eq)){var e=this.currentThisScope(),i=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=i}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")};Ne.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(Fu|by);this.type!==P.braceR;){var i=this.parseStatement(null);t.body.push(i)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")};Ne.parseClassId=function(t,e){this.type===P.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,Ur,!1)):(e===!0&&this.unexpected(),t.id=null)};Ne.parseClassSuper=function(t){t.superClass=this.eat(P._extends)?this.parseExprSubscripts(null,!1):null};Ne.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared};Ne.exitClassBody=function(){var t=this.privateNameStack.pop(),e=t.declared,i=t.used;if(this.options.checkPrivateFields)for(var n=this.privateNameStack.length,r=n===0?null:this.privateNameStack[n-1],s=0;s<i.length;++s){var a=i[s];Pu(e,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function U9(t,e){var i=e.key.name,n=t[i],r="true";return e.type==="MethodDefinition"&&(e.kind==="get"||e.kind==="set")&&(r=(e.static?"s":"i")+e.kind),n==="iget"&&r==="iset"||n==="iset"&&r==="iget"||n==="sget"&&r==="sset"||n==="sset"&&r==="sget"?(t[i]="true",!1):n?!0:(t[i]=r,!1)}function xf(t,e){var i=t.computed,n=t.key;return!i&&(n.type==="Identifier"&&n.name===e||n.type==="Literal"&&n.value===e)}Ne.parseExportAllDeclaration=function(t,e){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==P.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration")};Ne.parseExport=function(t,e){if(this.next(),this.eat(P.star))return this.parseExportAllDeclaration(t,e);if(this.eat(P._default))return this.checkExport(e,"default",this.lastTokStart),t.declaration=this.parseExportDefaultDeclaration(),this.finishNode(t,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())t.declaration=this.parseExportDeclaration(t),t.declaration.type==="VariableDeclaration"?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==P.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var i=0,n=t.specifiers;i<n.length;i+=1){var r=n[i];this.checkUnreserved(r.local),this.checkLocalExport(r.local),r.local.type==="Literal"&&this.raise(r.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")};Ne.parseExportDeclaration=function(t){return this.parseStatement(null)};Ne.parseExportDefaultDeclaration=function(){var t;if(this.type===P._function||(t=this.isAsyncFunction())){var e=this.startNode();return this.next(),t&&this.next(),this.parseFunction(e,au|jT,!1,t)}else if(this.type===P._class){var i=this.startNode();return this.parseClass(i,"nullableID")}else{var n=this.parseMaybeAssign();return this.semicolon(),n}};Ne.checkExport=function(t,e,i){t&&(typeof e!="string"&&(e=e.type==="Identifier"?e.name:e.value),Pu(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)};Ne.checkPatternExport=function(t,e){var i=e.type;if(i==="Identifier")this.checkExport(t,e,e.start);else if(i==="ObjectPattern")for(var n=0,r=e.properties;n<r.length;n+=1){var s=r[n];this.checkPatternExport(t,s)}else if(i==="ArrayPattern")for(var a=0,l=e.elements;a<l.length;a+=1){var h=l[a];h&&this.checkPatternExport(t,h)}else i==="Property"?this.checkPatternExport(t,e.value):i==="AssignmentPattern"?this.checkPatternExport(t,e.left):i==="RestElement"?this.checkPatternExport(t,e.argument):i==="ParenthesizedExpression"&&this.checkPatternExport(t,e.expression)};Ne.checkVariableExport=function(t,e){if(t)for(var i=0,n=e;i<n.length;i+=1){var r=n[i];this.checkPatternExport(t,r.id)}};Ne.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Ne.parseExportSpecifier=function(t){var e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(t,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")};Ne.parseExportSpecifiers=function(t){var e=[],i=!0;for(this.expect(P.braceL);!this.eat(P.braceR);){if(i)i=!1;else if(this.expect(P.comma),this.afterTrailingComma(P.braceR))break;e.push(this.parseExportSpecifier(t))}return e};Ne.parseImport=function(t){return this.next(),this.type===P.string?(t.specifiers=B9,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===P.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")};Ne.parseImportSpecifier=function(){var t=this.startNode();return t.imported=this.parseModuleExportName(),this.eatContextual("as")?t.local=this.parseIdent():(this.checkUnreserved(t.imported),t.local=t.imported),this.checkLValSimple(t.local,Ur),this.finishNode(t,"ImportSpecifier")};Ne.parseImportDefaultSpecifier=function(){var t=this.startNode();return t.local=this.parseIdent(),this.checkLValSimple(t.local,Ur),this.finishNode(t,"ImportDefaultSpecifier")};Ne.parseImportNamespaceSpecifier=function(){var t=this.startNode();return this.next(),this.expectContextual("as"),t.local=this.parseIdent(),this.checkLValSimple(t.local,Ur),this.finishNode(t,"ImportNamespaceSpecifier")};Ne.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===P.name&&(t.push(this.parseImportDefaultSpecifier()),!this.eat(P.comma)))return t;if(this.type===P.star)return t.push(this.parseImportNamespaceSpecifier()),t;for(this.expect(P.braceL);!this.eat(P.braceR);){if(e)e=!1;else if(this.expect(P.comma),this.afterTrailingComma(P.braceR))break;t.push(this.parseImportSpecifier())}return t};Ne.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===P.string){var t=this.parseLiteral(this.value);return L9.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)};Ne.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)};Ne.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&t.type==="ExpressionStatement"&&t.expression.type==="Literal"&&typeof t.expression.value=="string"&&(this.input[t.start]==='"'||this.input[t.start]==="'")};var kn=ti.prototype;kn.toAssignable=function(t,e,i){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&t.name==="await"&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var n=0,r=t.properties;n<r.length;n+=1){var s=r[n];this.toAssignable(s,e),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":t.kind!=="init"&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),t.argument.type==="AssignmentPattern"&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":t.operator!=="="&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,i);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t};kn.toAssignableList=function(t,e){for(var i=t.length,n=0;n<i;n++){var r=t[n];r&&this.toAssignable(r,e)}if(i){var s=t[i-1];this.options.ecmaVersion===6&&e&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return t};kn.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")};kn.parseRestBinding=function(){var t=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==P.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")};kn.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case P.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(P.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case P.braceL:return this.parseObj(!0)}return this.parseIdent()};kn.parseBindingList=function(t,e,i,n){for(var r=[],s=!0;!this.eat(t);)if(s?s=!1:this.expect(P.comma),e&&this.type===P.comma)r.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===P.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===P.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}else r.push(this.parseAssignableListItem(n))}return r};kn.parseAssignableListItem=function(t){var e=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(e),e};kn.parseBindingListItem=function(t){return t};kn.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(P.eq))return i;var n=this.startNodeAt(t,e);return n.left=i,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")};kn.checkLValSimple=function(t,e,i){e===void 0&&(e=bf);var n=e!==bf;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(n?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(e===Ur&&t.name==="let"&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),i&&(Pu(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),e!==FT&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":n&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return n&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,i);default:this.raise(t.start,(n?"Binding":"Assigning to")+" rvalue")}};kn.checkLValPattern=function(t,e,i){switch(e===void 0&&(e=bf),t.type){case"ObjectPattern":for(var n=0,r=t.properties;n<r.length;n+=1){var s=r[n];this.checkLValInnerPattern(s,e,i)}break;case"ArrayPattern":for(var a=0,l=t.elements;a<l.length;a+=1){var h=l[a];h&&this.checkLValInnerPattern(h,e,i)}break;default:this.checkLValSimple(t,e,i)}};kn.checkLValInnerPattern=function(t,e,i){switch(e===void 0&&(e=bf),t.type){case"Property":this.checkLValInnerPattern(t.value,e,i);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,i);break;case"RestElement":this.checkLValPattern(t.argument,e,i);break;default:this.checkLValPattern(t,e,i)}};var Dn=function(e,i,n,r,s){this.token=e,this.isExpr=!!i,this.preserveSpace=!!n,this.override=r,this.generator=!!s},Nt={b_stat:new Dn("{",!1),b_expr:new Dn("{",!0),b_tmpl:new Dn("${",!1),p_stat:new Dn("(",!1),p_expr:new Dn("(",!0),q_tmpl:new Dn("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new Dn("function",!1),f_expr:new Dn("function",!0),f_expr_gen:new Dn("function",!0,!1,null,!0),f_gen:new Dn("function",!1,!1,null,!0)},Ka=ti.prototype;Ka.initialContext=function(){return[Nt.b_stat]};Ka.curContext=function(){return this.context[this.context.length-1]};Ka.braceIsBlock=function(t){var e=this.curContext();return e===Nt.f_expr||e===Nt.f_stat?!0:t===P.colon&&(e===Nt.b_stat||e===Nt.b_expr)?!e.isExpr:t===P._return||t===P.name&&this.exprAllowed?Mn.test(this.input.slice(this.lastTokEnd,this.start)):t===P._else||t===P.semi||t===P.eof||t===P.parenR||t===P.arrow?!0:t===P.braceL?e===Nt.b_stat:t===P._var||t===P._const||t===P.name?!1:!this.exprAllowed};Ka.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if(e.token==="function")return e.generator}return!1};Ka.updateContext=function(t){var e,i=this.type;i.keyword&&t===P.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr};Ka.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)};P.parenR.updateContext=P.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var t=this.context.pop();t===Nt.b_stat&&this.curContext().token==="function"&&(t=this.context.pop()),this.exprAllowed=!t.isExpr};P.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Nt.b_stat:Nt.b_expr),this.exprAllowed=!0};P.dollarBraceL.updateContext=function(){this.context.push(Nt.b_tmpl),this.exprAllowed=!0};P.parenL.updateContext=function(t){var e=t===P._if||t===P._for||t===P._with||t===P._while;this.context.push(e?Nt.p_stat:Nt.p_expr),this.exprAllowed=!0};P.incDec.updateContext=function(){};P._function.updateContext=P._class.updateContext=function(t){t.beforeExpr&&t!==P._else&&!(t===P.semi&&this.curContext()!==Nt.p_stat)&&!(t===P._return&&Mn.test(this.input.slice(this.lastTokEnd,this.start)))&&!((t===P.colon||t===P.braceL)&&this.curContext()===Nt.b_stat)?this.context.push(Nt.f_expr):this.context.push(Nt.f_stat),this.exprAllowed=!1};P.backQuote.updateContext=function(){this.curContext()===Nt.q_tmpl?this.context.pop():this.context.push(Nt.q_tmpl),this.exprAllowed=!1};P.star.updateContext=function(t){if(t===P._function){var e=this.context.length-1;this.context[e]===Nt.f_expr?this.context[e]=Nt.f_expr_gen:this.context[e]=Nt.f_gen}this.exprAllowed=!0};P.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==P.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Ge=ti.prototype;Ge.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&t.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var n=t.key,r;switch(n.type){case"Identifier":r=n.name;break;case"Literal":r=String(n.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6){r==="__proto__"&&s==="init"&&(e.proto&&(i?i.doubleProto<0&&(i.doubleProto=n.start):this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),e.proto=!0);return}r="$"+r;var a=e[r];if(a){var l;s==="init"?l=this.strict&&a.init||a.get||a.set:l=a.init||a[s],l&&this.raiseRecoverable(n.start,"Redefinition of property")}else a=e[r]={init:!1,get:!1,set:!1};a[s]=!0}};Ge.parseExpression=function(t,e){var i=this.start,n=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===P.comma){var s=this.startNodeAt(i,n);for(s.expressions=[r];this.eat(P.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return r};Ge.parseMaybeAssign=function(t,e,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var n=!1,r=-1,s=-1,a=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new np,n=!0);var l=this.start,h=this.startLoc;(this.type===P.parenL||this.type===P.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=t==="await");var p=this.parseMaybeConditional(t,e);if(i&&(p=i.call(this,p,l,h)),this.type.isAssign){var d=this.startNodeAt(l,h);return d.operator=this.value,this.type===P.eq&&(p=this.toAssignable(p,!1,e)),n||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=p.start&&(e.shorthandAssign=-1),this.type===P.eq?this.checkLValPattern(p):this.checkLValSimple(p),d.left=p,this.next(),d.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(d,"AssignmentExpression")}else n&&this.checkExpressionErrors(e,!0);return r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),p};Ge.parseMaybeConditional=function(t,e){var i=this.start,n=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(P.question)){var s=this.startNodeAt(i,n);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(P.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r};Ge.parseExprOps=function(t,e){var i=this.start,n=this.startLoc,r=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||r.start===i&&r.type==="ArrowFunctionExpression"?r:this.parseExprOp(r,i,n,-1,t)};Ge.parseExprOp=function(t,e,i,n,r){var s=this.type.binop;if(s!=null&&(!r||this.type!==P._in)&&s>n){var a=this.type===P.logicalOR||this.type===P.logicalAND,l=this.type===P.coalesce;l&&(s=P.logicalAND.binop);var h=this.value;this.next();var p=this.start,d=this.startLoc,m=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),p,d,s,r),y=this.buildBinary(e,i,t,m,h,a||l);return(a&&this.type===P.coalesce||l&&(this.type===P.logicalOR||this.type===P.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(y,e,i,n,r)}return t};Ge.buildBinary=function(t,e,i,n,r,s){n.type==="PrivateIdentifier"&&this.raise(n.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=i,a.operator=r,a.right=n,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")};Ge.parseMaybeUnary=function(t,e,i,n){var r=this.start,s=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(n),e=!0;else if(this.type.prefix){var l=this.startNode(),h=this.type===P.incDec;l.operator=this.value,l.prefix=!0,this.next(),l.argument=this.parseMaybeUnary(null,!0,h,n),this.checkExpressionErrors(t,!0),h?this.checkLValSimple(l.argument):this.strict&&l.operator==="delete"&&l.argument.type==="Identifier"?this.raiseRecoverable(l.start,"Deleting local variable in strict mode"):l.operator==="delete"&&WT(l.argument)?this.raiseRecoverable(l.start,"Private fields can not be deleted"):e=!0,a=this.finishNode(l,h?"UpdateExpression":"UnaryExpression")}else if(!e&&this.type===P.privateId)(n||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==P._in&&this.unexpected();else{if(a=this.parseExprSubscripts(t,n),this.checkExpressionErrors(t))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var p=this.startNodeAt(r,s);p.operator=this.value,p.prefix=!1,p.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(p,"UpdateExpression")}}if(!i&&this.eat(P.starstar))if(e)this.unexpected(this.lastTokStart);else return this.buildBinary(r,s,a,this.parseMaybeUnary(null,!1,!1,n),"**",!1);else return a};function WT(t){return t.type==="MemberExpression"&&t.property.type==="PrivateIdentifier"||t.type==="ChainExpression"&&WT(t.expression)}Ge.parseExprSubscripts=function(t,e){var i=this.start,n=this.startLoc,r=this.parseExprAtom(t,e);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var s=this.parseSubscripts(r,i,n,!1,e);return t&&s.type==="MemberExpression"&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1),t.trailingComma>=s.start&&(t.trailingComma=-1)),s};Ge.parseSubscripts=function(t,e,i,n,r){for(var s=this.options.ecmaVersion>=8&&t.type==="Identifier"&&t.name==="async"&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start===5&&this.potentialArrowAt===t.start,a=!1;;){var l=this.parseSubscript(t,e,i,n,s,a,r);if(l.optional&&(a=!0),l===t||l.type==="ArrowFunctionExpression"){if(a){var h=this.startNodeAt(e,i);h.expression=l,l=this.finishNode(h,"ChainExpression")}return l}t=l}};Ge.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(P.arrow)};Ge.parseSubscriptAsyncArrow=function(t,e,i,n){return this.parseArrowExpression(this.startNodeAt(t,e),i,!0,n)};Ge.parseSubscript=function(t,e,i,n,r,s,a){var l=this.options.ecmaVersion>=11,h=l&&this.eat(P.questionDot);n&&h&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var p=this.eat(P.bracketL);if(p||h&&this.type!==P.parenL&&this.type!==P.backQuote||this.eat(P.dot)){var d=this.startNodeAt(e,i);d.object=t,p?(d.property=this.parseExpression(),this.expect(P.bracketR)):this.type===P.privateId&&t.type!=="Super"?d.property=this.parsePrivateIdent():d.property=this.parseIdent(this.options.allowReserved!=="never"),d.computed=!!p,l&&(d.optional=h),t=this.finishNode(d,"MemberExpression")}else if(!n&&this.eat(P.parenL)){var m=new np,y=this.yieldPos,v=this.awaitPos,S=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var M=this.parseExprList(P.parenR,this.options.ecmaVersion>=8,!1,m);if(r&&!h&&this.shouldParseAsyncArrow())return this.checkPatternErrors(m,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=y,this.awaitPos=v,this.awaitIdentPos=S,this.parseSubscriptAsyncArrow(e,i,M,a);this.checkExpressionErrors(m,!0),this.yieldPos=y||this.yieldPos,this.awaitPos=v||this.awaitPos,this.awaitIdentPos=S||this.awaitIdentPos;var b=this.startNodeAt(e,i);b.callee=t,b.arguments=M,l&&(b.optional=h),t=this.finishNode(b,"CallExpression")}else if(this.type===P.backQuote){(h||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var w=this.startNodeAt(e,i);w.tag=t,w.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(w,"TaggedTemplateExpression")}return t};Ge.parseExprAtom=function(t,e,i){this.type===P.slash&&this.readRegexp();var n,r=this.potentialArrowAt===this.start;switch(this.type){case P._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type===P.parenL&&!this.allowDirectSuper&&this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==P.dot&&this.type!==P.bracketL&&this.type!==P.parenL&&this.unexpected(),this.finishNode(n,"Super");case P._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case P.name:var s=this.start,a=this.startLoc,l=this.containsEsc,h=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!l&&h.name==="async"&&!this.canInsertSemicolon()&&this.eat(P._function))return this.overrideContext(Nt.f_expr),this.parseFunction(this.startNodeAt(s,a),0,!1,!0,e);if(r&&!this.canInsertSemicolon()){if(this.eat(P.arrow))return this.parseArrowExpression(this.startNodeAt(s,a),[h],!1,e);if(this.options.ecmaVersion>=8&&h.name==="async"&&this.type===P.name&&!l&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return h=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(P.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,a),[h],!0,e)}return h;case P.regexp:var p=this.value;return n=this.parseLiteral(p.value),n.regex={pattern:p.pattern,flags:p.flags},n;case P.num:case P.string:return this.parseLiteral(this.value);case P._null:case P._true:case P._false:return n=this.startNode(),n.value=this.type===P._null?null:this.type===P._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case P.parenL:var d=this.start,m=this.parseParenAndDistinguishExpression(r,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(m)&&(t.parenthesizedAssign=d),t.parenthesizedBind<0&&(t.parenthesizedBind=d)),m;case P.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(P.bracketR,!0,!0,t),this.finishNode(n,"ArrayExpression");case P.braceL:return this.overrideContext(Nt.b_expr),this.parseObj(!1,t);case P._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case P._class:return this.parseClass(this.startNode(),!1);case P._new:return this.parseNew();case P.backQuote:return this.parseTemplate();case P._import:return this.options.ecmaVersion>=11?this.parseExprImport(i):this.unexpected();default:return this.parseExprAtomDefault()}};Ge.parseExprAtomDefault=function(){this.unexpected()};Ge.parseExprImport=function(t){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var i=this.parseIdent(!0);if(this.type===P.parenL&&!t)return this.parseDynamicImport(e);if(this.type===P.dot)return e.meta=i,this.parseImportMeta(e);this.unexpected()};Ge.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(P.parenR)){var e=this.start;this.eat(P.comma)&&this.eat(P.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")};Ge.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="meta"&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")};Ge.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),e.raw.charCodeAt(e.raw.length-1)===110&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")};Ge.parseParenExpression=function(){this.expect(P.parenL);var t=this.parseExpression();return this.expect(P.parenR),t};Ge.shouldParseArrow=function(t){return!this.canInsertSemicolon()};Ge.parseParenAndDistinguishExpression=function(t,e){var i=this.start,n=this.startLoc,r,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,l=this.startLoc,h=[],p=!0,d=!1,m=new np,y=this.yieldPos,v=this.awaitPos,S;for(this.yieldPos=0,this.awaitPos=0;this.type!==P.parenR;)if(p?p=!1:this.expect(P.comma),s&&this.afterTrailingComma(P.parenR,!0)){d=!0;break}else if(this.type===P.ellipsis){S=this.start,h.push(this.parseParenItem(this.parseRestBinding())),this.type===P.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else h.push(this.parseMaybeAssign(!1,m,this.parseParenItem));var M=this.lastTokEnd,b=this.lastTokEndLoc;if(this.expect(P.parenR),t&&this.shouldParseArrow(h)&&this.eat(P.arrow))return this.checkPatternErrors(m,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=y,this.awaitPos=v,this.parseParenArrowList(i,n,h,e);(!h.length||d)&&this.unexpected(this.lastTokStart),S&&this.unexpected(S),this.checkExpressionErrors(m,!0),this.yieldPos=y||this.yieldPos,this.awaitPos=v||this.awaitPos,h.length>1?(r=this.startNodeAt(a,l),r.expressions=h,this.finishNodeAt(r,"SequenceExpression",M,b)):r=h[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var w=this.startNodeAt(i,n);return w.expression=r,this.finishNode(w,"ParenthesizedExpression")}else return r};Ge.parseParenItem=function(t){return t};Ge.parseParenArrowList=function(t,e,i,n){return this.parseArrowExpression(this.startNodeAt(t,e),i,!1,n)};var J9=[];Ge.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(P.dot)){t.meta=e;var i=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="target"&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),i&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var n=this.start,r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),n,r,!0,!1),this.eat(P.parenL)?t.arguments=this.parseExprList(P.parenR,this.options.ecmaVersion>=8,!1):t.arguments=J9,this.finishNode(t,"NewExpression")};Ge.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===P.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),i.tail=this.type===P.backQuote,this.finishNode(i,"TemplateElement")};Ge.parseTemplate=function(t){t===void 0&&(t={});var e=t.isTagged;e===void 0&&(e=!1);var i=this.startNode();this.next(),i.expressions=[];var n=this.parseTemplateElement({isTagged:e});for(i.quasis=[n];!n.tail;)this.type===P.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(P.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(P.braceR),i.quasis.push(n=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(i,"TemplateLiteral")};Ge.isAsyncProp=function(t){return!t.computed&&t.key.type==="Identifier"&&t.key.name==="async"&&(this.type===P.name||this.type===P.num||this.type===P.string||this.type===P.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===P.star)&&!Mn.test(this.input.slice(this.lastTokEnd,this.start))};Ge.parseObj=function(t,e){var i=this.startNode(),n=!0,r={};for(i.properties=[],this.next();!this.eat(P.braceR);){if(n)n=!1;else if(this.expect(P.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(P.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,r,e),i.properties.push(s)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")};Ge.parseProperty=function(t,e){var i=this.startNode(),n,r,s,a;if(this.options.ecmaVersion>=9&&this.eat(P.ellipsis))return t?(i.argument=this.parseIdent(!1),this.type===P.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(i,"RestElement")):(i.argument=this.parseMaybeAssign(!1,e),this.type===P.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(i,"SpreadElement"));this.options.ecmaVersion>=6&&(i.method=!1,i.shorthand=!1,(t||e)&&(s=this.start,a=this.startLoc),t||(n=this.eat(P.star)));var l=this.containsEsc;return this.parsePropertyName(i),!t&&!l&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(i)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(P.star),this.parsePropertyName(i)):r=!1,this.parsePropertyValue(i,t,n,r,s,a,e,l),this.finishNode(i,"Property")};Ge.parseGetterSetter=function(t){t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var e=t.kind==="get"?0:1;if(t.value.params.length!==e){var i=t.value.start;t.kind==="get"?this.raiseRecoverable(i,"getter should have no params"):this.raiseRecoverable(i,"setter should have exactly one param")}else t.kind==="set"&&t.value.params[0].type==="RestElement"&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")};Ge.parsePropertyValue=function(t,e,i,n,r,s,a,l){(i||n)&&this.type===P.colon&&this.unexpected(),this.eat(P.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init"):this.options.ecmaVersion>=6&&this.type===P.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,n)):!e&&!l&&this.options.ecmaVersion>=5&&!t.computed&&t.key.type==="Identifier"&&(t.key.name==="get"||t.key.name==="set")&&this.type!==P.comma&&this.type!==P.braceR&&this.type!==P.eq?((i||n)&&this.unexpected(),this.parseGetterSetter(t)):this.options.ecmaVersion>=6&&!t.computed&&t.key.type==="Identifier"?((i||n)&&this.unexpected(),this.checkUnreserved(t.key),t.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key)):this.type===P.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected()};Ge.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(P.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(P.bracketR),t.key;t.computed=!1}return t.key=this.type===P.num||this.type===P.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Ge.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)};Ge.parseMethod=function(t,e,i){var n=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=t),this.options.ecmaVersion>=8&&(n.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Sy(e,n.generator)|by|(i?UT:0)),this.expect(P.parenL),n.params=this.parseBindingList(P.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(n,"FunctionExpression")};Ge.parseArrowExpression=function(t,e,i,n){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(Sy(i,!1)|DT),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,n),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")};Ge.parseFunctionBody=function(t,e,i,n){var r=e&&this.type!==P.braceL,s=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(n),t.expression=!0,this.checkParams(t,!1);else{var l=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);(!s||l)&&(a=this.strictDirective(this.end),a&&l&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var h=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!s&&!a&&!e&&!i&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,FT),t.body=this.parseBlock(!1,void 0,a&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=h}this.exitScope()};Ge.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1){var n=i[e];if(n.type!=="Identifier")return!1}return!0};Ge.checkParams=function(t,e){for(var i=Object.create(null),n=0,r=t.params;n<r.length;n+=1){var s=r[n];this.checkLValInnerPattern(s,Cy,e?null:i)}};Ge.parseExprList=function(t,e,i,n){for(var r=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(P.comma),e&&this.afterTrailingComma(t))break;var a=void 0;i&&this.type===P.comma?a=null:this.type===P.ellipsis?(a=this.parseSpread(n),n&&this.type===P.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):a=this.parseMaybeAssign(!1,n),r.push(a)}return r};Ge.checkUnreserved=function(t){var e=t.start,i=t.end,n=t.name;if(this.inGenerator&&n==="yield"&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&n==="await"&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&n==="arguments"&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(n==="arguments"||n==="await")&&this.raise(e,"Cannot use "+n+" in class static initialization block"),this.keywords.test(n)&&this.raise(e,"Unexpected keyword '"+n+"'"),!(this.options.ecmaVersion<6&&this.input.slice(e,i).indexOf("\\")!==-1)){var r=this.strict?this.reservedWordsStrict:this.reservedWords;r.test(n)&&(!this.inAsync&&n==="await"&&this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+n+"' is reserved"))}};Ge.parseIdent=function(t){var e=this.parseIdentNode();return this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),e.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=e.start)),e};Ge.parseIdentNode=function(){var t=this.startNode();return this.type===P.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,(t.name==="class"||t.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),t};Ge.parsePrivateIdent=function(){var t=this.startNode();return this.type===P.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t)),t};Ge.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===P.semi||this.canInsertSemicolon()||this.type!==P.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(P.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")};Ge.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var Sf=ti.prototype;Sf.raise=function(t,e){var i=IT(this.input,t);e+=" ("+i.line+":"+i.column+")";var n=new SyntaxError(e);throw n.pos=t,n.loc=i,n.raisedAt=this.pos,n};Sf.raiseRecoverable=Sf.raise;Sf.curPosition=function(){if(this.options.locations)return new Au(this.curLine,this.pos-this.lineStart)};var Rs=ti.prototype,P9=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Rs.enterScope=function(t){this.scopeStack.push(new P9(t))};Rs.exitScope=function(){this.scopeStack.pop()};Rs.treatFunctionsAsVarInScope=function(t){return t.flags&Va||!this.inModule&&t.flags&Ru};Rs.declareName=function(t,e,i){var n=!1;if(e===Ur){var r=this.currentScope();n=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&r.flags&Ru&&delete this.undefinedExports[t]}else if(e===PT){var s=this.currentScope();s.lexical.push(t)}else if(e===JT){var a=this.currentScope();this.treatFunctionsAsVar?n=a.lexical.indexOf(t)>-1:n=a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var l=this.scopeStack.length-1;l>=0;--l){var h=this.scopeStack[l];if(h.lexical.indexOf(t)>-1&&!(h.flags&BT&&h.lexical[0]===t)||!this.treatFunctionsAsVarInScope(h)&&h.functions.indexOf(t)>-1){n=!0;break}if(h.var.push(t),this.inModule&&h.flags&Ru&&delete this.undefinedExports[t],h.flags&xy)break}n&&this.raiseRecoverable(i,"Identifier '"+t+"' has already been declared")};Rs.checkLocalExport=function(t){this.scopeStack[0].lexical.indexOf(t.name)===-1&&this.scopeStack[0].var.indexOf(t.name)===-1&&(this.undefinedExports[t.name]=t)};Rs.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Rs.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&xy)return e}};Rs.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&xy&&!(e.flags&DT))return e}};var rp=function(e,i,n){this.type="",this.start=i,this.end=0,e.options.locations&&(this.loc=new ip(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[i,0])},ju=ti.prototype;ju.startNode=function(){return new rp(this,this.start,this.startLoc)};ju.startNodeAt=function(t,e){return new rp(this,t,e)};function GT(t,e,i,n){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=n),this.options.ranges&&(t.range[1]=i),t}ju.finishNode=function(t,e){return GT.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)};ju.finishNodeAt=function(t,e,i,n){return GT.call(this,t,e,i,n)};ju.copyNode=function(t){var e=new rp(this,t.start,this.startLoc);for(var i in t)e[i]=t[i];return e};var VT="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",KT=VT+" Extended_Pictographic",zT=KT,HT=zT+" EBase EComp EMod EPres ExtPict",QT=HT,F9=QT,j9={9:VT,10:KT,11:zT,12:HT,13:QT,14:F9},W9="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",G9={9:"",10:"",11:"",12:"",13:"",14:W9},yx="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",YT="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",$T=YT+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ZT=$T+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",qT=ZT+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",XT=qT+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",V9=XT+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",K9={9:YT,10:$T,11:ZT,12:qT,13:XT,14:V9},eE={};function z9(t){var e=eE[t]={binary:ms(j9[t]+" "+yx),binaryOfStrings:ms(G9[t]),nonBinary:{General_Category:ms(yx),Script:ms(K9[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var bg=0,vx=[9,10,11,12,13,14];bg<vx.length;bg+=1){var H9=vx[bg];z9(H9)}var Ee=ti.prototype,br=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=eE[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};br.prototype.reset=function(e,i,n){var r=n.indexOf("v")!==-1,s=n.indexOf("u")!==-1;this.start=e|0,this.source=i+"",this.flags=n,r&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};br.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)};br.prototype.at=function(e,i){i===void 0&&(i=!1);var n=this.source,r=n.length;if(e>=r)return-1;var s=n.charCodeAt(e);if(!(i||this.switchU)||s<=55295||s>=57344||e+1>=r)return s;var a=n.charCodeAt(e+1);return a>=56320&&a<=57343?(s<<10)+a-56613888:s};br.prototype.nextIndex=function(e,i){i===void 0&&(i=!1);var n=this.source,r=n.length;if(e>=r)return r;var s=n.charCodeAt(e),a;return!(i||this.switchU)||s<=55295||s>=57344||e+1>=r||(a=n.charCodeAt(e+1))<56320||a>57343?e+1:e+2};br.prototype.current=function(e){return e===void 0&&(e=!1),this.at(this.pos,e)};br.prototype.lookahead=function(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)};br.prototype.advance=function(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)};br.prototype.eat=function(e,i){return i===void 0&&(i=!1),this.current(i)===e?(this.advance(i),!0):!1};br.prototype.eatChars=function(e,i){i===void 0&&(i=!1);for(var n=this.pos,r=0,s=e;r<s.length;r+=1){var a=s[r],l=this.at(n,i);if(l===-1||l!==a)return!1;n=this.nextIndex(n,i)}return this.pos=n,!0};Ee.validateRegExpFlags=function(t){for(var e=t.validFlags,i=t.flags,n=!1,r=!1,s=0;s<i.length;s++){var a=i.charAt(s);e.indexOf(a)===-1&&this.raise(t.start,"Invalid regular expression flag"),i.indexOf(a,s+1)>-1&&this.raise(t.start,"Duplicate regular expression flag"),a==="u"&&(n=!0),a==="v"&&(r=!0)}this.options.ecmaVersion>=15&&n&&r&&this.raise(t.start,"Invalid regular expression flag")};Ee.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))};Ee.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1){var n=i[e];t.groupNames.indexOf(n)===-1&&t.raise("Invalid named capture referenced")}};Ee.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")};Ee.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););};Ee.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))?(this.regexp_eatQuantifier(t),!0):!1};Ee.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1};Ee.regexp_eatQuantifier=function(t,e){return e===void 0&&(e=!1),this.regexp_eatQuantifierPrefix(t,e)?(t.eat(63),!0):!1};Ee.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)};Ee.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var n=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return r!==-1&&r<n&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1};Ee.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)};Ee.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1};Ee.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1};Ee.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):t.current()===63&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1};Ee.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)};Ee.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1};Ee.regexp_eatSyntaxCharacter=function(t){var e=t.current();return tE(e)?(t.lastIntValue=e,t.advance(),!0):!1};function tE(t){return t===36||t>=40&&t<=43||t===46||t===63||t>=91&&t<=94||t>=123&&t<=125}Ee.regexp_eatPatternCharacters=function(t){for(var e=t.pos,i=0;(i=t.current())!==-1&&!tE(i);)t.advance();return t.pos!==e};Ee.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return e!==-1&&e!==36&&!(e>=40&&e<=43)&&e!==46&&e!==63&&e!==91&&e!==94&&e!==124?(t.advance(),!0):!1};Ee.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t)){t.groupNames.indexOf(t.lastStringValue)!==-1&&t.raise("Duplicate capture group name"),t.groupNames.push(t.lastStringValue);return}t.raise("Invalid group")}};Ee.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1};Ee.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Ms(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Ms(t.lastIntValue);return!0}return!1};Ee.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,n=t.current(i);return t.advance(i),n===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(n=t.lastIntValue),Q9(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)};function Q9(t){return Or(t,!0)||t===36||t===95}Ee.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,n=t.current(i);return t.advance(i),n===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(n=t.lastIntValue),Y9(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)};function Y9(t){return Ea(t,!0)||t===36||t===95||t===8204||t===8205}Ee.regexp_eatAtomEscape=function(t){return this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t)?!0:(t.switchU&&(t.current()===99&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)};Ee.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1};Ee.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1};Ee.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)};Ee.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1};Ee.regexp_eatZero=function(t){return t.current()===48&&!sp(t.lookahead())?(t.lastIntValue=0,t.advance(),!0):!1};Ee.regexp_eatControlEscape=function(t){var e=t.current();return e===116?(t.lastIntValue=9,t.advance(),!0):e===110?(t.lastIntValue=10,t.advance(),!0):e===118?(t.lastIntValue=11,t.advance(),!0):e===102?(t.lastIntValue=12,t.advance(),!0):e===114?(t.lastIntValue=13,t.advance(),!0):!1};Ee.regexp_eatControlLetter=function(t){var e=t.current();return iE(e)?(t.lastIntValue=e%32,t.advance(),!0):!1};function iE(t){return t>=65&&t<=90||t>=97&&t<=122}Ee.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){e===void 0&&(e=!1);var i=t.pos,n=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(n&&r>=55296&&r<=56319){var s=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=(r-55296)*1024+(a-56320)+65536,!0}t.pos=s,t.lastIntValue=r}return!0}if(n&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&$9(t.lastIntValue))return!0;n&&t.raise("Invalid unicode escape"),t.pos=i}return!1};function $9(t){return t>=0&&t<=1114111}Ee.regexp_eatIdentityEscape=function(t){if(t.switchU)return this.regexp_eatSyntaxCharacter(t)?!0:t.eat(47)?(t.lastIntValue=47,!0):!1;var e=t.current();return e!==99&&(!t.switchN||e!==107)?(t.lastIntValue=e,t.advance(),!0):!1};Ee.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do t.lastIntValue=10*t.lastIntValue+(e-48),t.advance();while((e=t.current())>=48&&e<=57);return!0}return!1};var nE=0,Ir=1,mn=2;Ee.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(Z9(e))return t.lastIntValue=-1,t.advance(),Ir;var i=!1;if(t.switchU&&this.options.ecmaVersion>=9&&((i=e===80)||e===112)){t.lastIntValue=-1,t.advance();var n;if(t.eat(123)&&(n=this.regexp_eatUnicodePropertyValueExpression(t))&&t.eat(125))return i&&n===mn&&t.raise("Invalid property name"),n;t.raise("Invalid property name")}return nE};function Z9(t){return t===100||t===68||t===115||t===83||t===119||t===87}Ee.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,i,n),Ir}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r)}return nE};Ee.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){Pu(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(i)||t.raise("Invalid property value")};Ee.regexp_validateUnicodePropertyNameOrValue=function(t,e){if(t.unicodeProperties.binary.test(e))return Ir;if(t.switchV&&t.unicodeProperties.binaryOfStrings.test(e))return mn;t.raise("Invalid property name")};Ee.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";rE(e=t.current());)t.lastStringValue+=Ms(e),t.advance();return t.lastStringValue!==""};function rE(t){return iE(t)||t===95}Ee.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";q9(e=t.current());)t.lastStringValue+=Ms(e),t.advance();return t.lastStringValue!==""};function q9(t){return rE(t)||sp(t)}Ee.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)};Ee.regexp_eatCharacterClass=function(t){if(t.eat(91)){var e=t.eat(94),i=this.regexp_classContents(t);return t.eat(93)||t.raise("Unterminated character class"),e&&i===mn&&t.raise("Negated character class may contain strings"),!0}return!1};Ee.regexp_classContents=function(t){return t.current()===93?Ir:t.switchV?this.regexp_classSetExpression(t):(this.regexp_nonEmptyClassRanges(t),Ir)};Ee.regexp_nonEmptyClassRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var i=t.lastIntValue;t.switchU&&(e===-1||i===-1)&&t.raise("Invalid character class"),e!==-1&&i!==-1&&e>i&&t.raise("Range out of order in character class")}}};Ee.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(i===99||aE(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var n=t.current();return n!==93?(t.lastIntValue=n,t.advance(),!0):!1};Ee.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)};Ee.regexp_classSetExpression=function(t){var e=Ir,i;if(!this.regexp_eatClassSetRange(t))if(i=this.regexp_eatClassSetOperand(t)){i===mn&&(e=mn);for(var n=t.pos;t.eatChars([38,38]);){if(t.current()!==38&&(i=this.regexp_eatClassSetOperand(t))){i!==mn&&(e=Ir);continue}t.raise("Invalid character in character class")}if(n!==t.pos)return e;for(;t.eatChars([45,45]);)this.regexp_eatClassSetOperand(t)||t.raise("Invalid character in character class");if(n!==t.pos)return e}else t.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(t)){if(i=this.regexp_eatClassSetOperand(t),!i)return e;i===mn&&(e=mn)}};Ee.regexp_eatClassSetRange=function(t){var e=t.pos;if(this.regexp_eatClassSetCharacter(t)){var i=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassSetCharacter(t)){var n=t.lastIntValue;return i!==-1&&n!==-1&&i>n&&t.raise("Range out of order in character class"),!0}t.pos=e}return!1};Ee.regexp_eatClassSetOperand=function(t){return this.regexp_eatClassSetCharacter(t)?Ir:this.regexp_eatClassStringDisjunction(t)||this.regexp_eatNestedClass(t)};Ee.regexp_eatNestedClass=function(t){var e=t.pos;if(t.eat(91)){var i=t.eat(94),n=this.regexp_classContents(t);if(t.eat(93))return i&&n===mn&&t.raise("Negated character class may contain strings"),n;t.pos=e}if(t.eat(92)){var r=this.regexp_eatCharacterClassEscape(t);if(r)return r;t.pos=e}return null};Ee.regexp_eatClassStringDisjunction=function(t){var e=t.pos;if(t.eatChars([92,113])){if(t.eat(123)){var i=this.regexp_classStringDisjunctionContents(t);if(t.eat(125))return i}else t.raise("Invalid escape");t.pos=e}return null};Ee.regexp_classStringDisjunctionContents=function(t){for(var e=this.regexp_classString(t);t.eat(124);)this.regexp_classString(t)===mn&&(e=mn);return e};Ee.regexp_classString=function(t){for(var e=0;this.regexp_eatClassSetCharacter(t);)e++;return e===1?Ir:mn};Ee.regexp_eatClassSetCharacter=function(t){var e=t.pos;if(t.eat(92))return this.regexp_eatCharacterEscape(t)||this.regexp_eatClassSetReservedPunctuator(t)?!0:t.eat(98)?(t.lastIntValue=8,!0):(t.pos=e,!1);var i=t.current();return i<0||i===t.lookahead()&&X9(i)||e8(i)?!1:(t.advance(),t.lastIntValue=i,!0)};function X9(t){return t===33||t>=35&&t<=38||t>=42&&t<=44||t===46||t>=58&&t<=64||t===94||t===96||t===126}function e8(t){return t===40||t===41||t===45||t===47||t>=91&&t<=93||t>=123&&t<=125}Ee.regexp_eatClassSetReservedPunctuator=function(t){var e=t.current();return t8(e)?(t.lastIntValue=e,t.advance(),!0):!1};function t8(t){return t===33||t===35||t===37||t===38||t===44||t===45||t>=58&&t<=62||t===64||t===96||t===126}Ee.regexp_eatClassControlLetter=function(t){var e=t.current();return sp(e)||e===95?(t.lastIntValue=e%32,t.advance(),!0):!1};Ee.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1};Ee.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;sp(i=t.current());)t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e};function sp(t){return t>=48&&t<=57}Ee.regexp_eatHexDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;sE(i=t.current());)t.lastIntValue=16*t.lastIntValue+oE(i),t.advance();return t.pos!==e};function sE(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function oE(t){return t>=65&&t<=70?10+(t-65):t>=97&&t<=102?10+(t-97):t-48}Ee.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=e*64+i*8+t.lastIntValue:t.lastIntValue=e*8+i}else t.lastIntValue=e;return!0}return!1};Ee.regexp_eatOctalDigit=function(t){var e=t.current();return aE(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)};function aE(t){return t>=48&&t<=55}Ee.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var n=0;n<e;++n){var r=t.current();if(!sE(r))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+oE(r),t.advance()}return!0};var ky=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new ip(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},$e=ti.prototype;$e.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new ky(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};$e.getToken=function(){return this.next(),new ky(this)};typeof Symbol<"u"&&($e[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===P.eof,value:e}}}});$e.nextToken=function(){var t=this.curContext();if((!t||!t.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(P.eof);if(t.override)return t.override(this);this.readToken(this.fullCharCodeAtPos())};$e.readToken=function(t){return Or(t,this.options.ecmaVersion>=6)||t===92?this.readWord():this.getTokenFromCode(t)};$e.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888};$e.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(i===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(var n=void 0,r=e;(n=RT(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=n;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,i),e,this.pos,t,this.curPosition())};$e.skipLineComment=function(t){for(var e=this.pos,i=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!Ga(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,i,this.curPosition())};$e.skipSpace=function(){e:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(t>8&&t<14||t>=5760&&LT.test(String.fromCharCode(t)))++this.pos;else break e}}};$e.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)};$e.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&t===46&&e===46?(this.pos+=3,this.finishToken(P.ellipsis)):(++this.pos,this.finishToken(P.dot))};$e.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):t===61?this.finishOp(P.assign,2):this.finishOp(P.slash,1)};$e.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,n=t===42?P.star:P.modulo;return this.options.ecmaVersion>=7&&t===42&&e===42&&(++i,n=P.starstar,e=this.input.charCodeAt(this.pos+2)),e===61?this.finishOp(P.assign,i+1):this.finishOp(n,i)};$e.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(P.assign,3)}return this.finishOp(t===124?P.logicalOR:P.logicalAND,2)}return e===61?this.finishOp(P.assign,2):this.finishOp(t===124?P.bitwiseOR:P.bitwiseAND,1)};$e.readToken_caret=function(){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(P.assign,2):this.finishOp(P.bitwiseXOR,1)};$e.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Mn.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(P.incDec,2):e===61?this.finishOp(P.assign,2):this.finishOp(P.plusMin,1)};$e.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=t===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+i)===61?this.finishOp(P.assign,i+1):this.finishOp(P.bitShift,i)):e===33&&t===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(e===61&&(i=2),this.finishOp(P.relational,i))};$e.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(P.equality,this.input.charCodeAt(this.pos+2)===61?3:2):t===61&&e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(P.arrow)):this.finishOp(t===61?P.eq:P.prefix,1)};$e.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(e===46){var i=this.input.charCodeAt(this.pos+2);if(i<48||i>57)return this.finishOp(P.questionDot,2)}if(e===63){if(t>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(P.assign,3)}return this.finishOp(P.coalesce,2)}}return this.finishOp(P.question,1)};$e.readToken_numberSign=function(){var t=this.options.ecmaVersion,e=35;if(t>=13&&(++this.pos,e=this.fullCharCodeAtPos(),Or(e,!0)||e===92))return this.finishToken(P.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Ms(e)+"'")};$e.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(P.parenL);case 41:return++this.pos,this.finishToken(P.parenR);case 59:return++this.pos,this.finishToken(P.semi);case 44:return++this.pos,this.finishToken(P.comma);case 91:return++this.pos,this.finishToken(P.bracketL);case 93:return++this.pos,this.finishToken(P.bracketR);case 123:return++this.pos,this.finishToken(P.braceL);case 125:return++this.pos,this.finishToken(P.braceR);case 58:return++this.pos,this.finishToken(P.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(P.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(e===120||e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(e===111||e===79)return this.readRadixNumber(8);if(e===98||e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(P.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Ms(t)+"'")};$e.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)};$e.readRegexp=function(){for(var t,e,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(Mn.test(n)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if(n==="[")e=!0;else if(n==="]"&&e)e=!1;else if(n==="/"&&!e)break;t=n==="\\"}++this.pos}var r=this.input.slice(i,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var l=this.regexpState||(this.regexpState=new br(this));l.reset(i,r,a),this.validateRegExpFlags(l),this.validateRegExpPattern(l);var h=null;try{h=new RegExp(r,a)}catch{}return this.finishToken(P.regexp,{pattern:r,flags:a,value:h})};$e.readInt=function(t,e,i){for(var n=this.options.ecmaVersion>=12&&e===void 0,r=i&&this.input.charCodeAt(this.pos)===48,s=this.pos,a=0,l=0,h=0,p=e??1/0;h<p;++h,++this.pos){var d=this.input.charCodeAt(this.pos),m=void 0;if(n&&d===95){r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),l===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),h===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),l=d;continue}if(d>=97?m=d-97+10:d>=65?m=d-65+10:d>=48&&d<=57?m=d-48:m=1/0,m>=t)break;l=d,a=a*t+m}return n&&l===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||e!=null&&this.pos-s!==e?null:a};function i8(t,e){return e?parseInt(t,8):parseFloat(t.replace(/_/g,""))}function lE(t){return typeof BigInt!="function"?null:BigInt(t.replace(/_/g,""))}$e.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var i=this.readInt(t);return i==null&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(i=lE(this.input.slice(e,this.pos)),++this.pos):Or(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(P.num,i)};$e.readNumber=function(t){var e=this.pos;!t&&this.readInt(10,void 0,!0)===null&&this.raise(e,"Invalid number");var i=this.pos-e>=2&&this.input.charCodeAt(e)===48;i&&this.strict&&this.raise(e,"Invalid number");var n=this.input.charCodeAt(this.pos);if(!i&&!t&&this.options.ecmaVersion>=11&&n===110){var r=lE(this.input.slice(e,this.pos));return++this.pos,Or(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(P.num,r)}i&&/[89]/.test(this.input.slice(e,this.pos))&&(i=!1),n===46&&!i&&(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),(n===69||n===101)&&!i&&(n=this.input.charCodeAt(++this.pos),(n===43||n===45)&&++this.pos,this.readInt(10)===null&&this.raise(e,"Invalid number")),Or(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=i8(this.input.slice(e,this.pos),i);return this.finishToken(P.num,s)};$e.readCodePoint=function(){var t=this.input.charCodeAt(this.pos),e;if(t===123){this.options.ecmaVersion<6&&this.unexpected();var i=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(i,"Code point out of bounds")}else e=this.readHexChar(4);return e};$e.readString=function(t){for(var e="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===t)break;n===92?(e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(!1),i=this.pos):n===8232||n===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Ga(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(i,this.pos++),this.finishToken(P.string,e)};var uE={};$e.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t===uE)this.readInvalidTemplateToken();else throw t}this.inTemplateElement=!1};$e.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw uE;this.raise(t,e)};$e.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(i===96||i===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===P.template||this.type===P.invalidTemplate)?i===36?(this.pos+=2,this.finishToken(P.dollarBraceL)):(++this.pos,this.finishToken(P.backQuote)):(t+=this.input.slice(e,this.pos),this.finishToken(P.template,t));if(i===92)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(Ga(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:t+=`
`;break;default:t+=String.fromCharCode(i);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}};$e.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(P.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};$e.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ms(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var i=this.pos-1;this.invalidStringToken(i,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),(n!=="0"||e===56||e===57)&&(this.strict||t)&&this.invalidStringToken(this.pos-1-n.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return Ga(e)?"":String.fromCharCode(e)}};$e.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return i===null&&this.invalidStringToken(e,"Bad character escape sequence"),i};$e.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,i=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(Ea(r,n))this.pos+=r<=65535?1:2;else if(r===92){this.containsEsc=!0,t+=this.input.slice(i,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?Or:Ea)(a,n)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=Ms(a),i=this.pos}else break;e=!1}return t+this.input.slice(i,this.pos)};$e.readWord=function(){var t=this.readWord1(),e=P.name;return this.keywords.test(t)&&(e=wy[t]),this.finishToken(e,t)};var n8="8.10.0";ti.acorn={Parser:ti,version:n8,defaultOptions:n0,Position:Au,SourceLocation:ip,getLineInfo:IT,Node:rp,TokenType:st,tokTypes:P,keywordTypes:wy,TokContext:Dn,tokContexts:Nt,isIdentifierChar:Ea,isIdentifierStart:Or,Token:ky,isNewLine:Ga,lineBreak:Mn,lineBreakG:E9,nonASCIIwhitespace:LT};const{stringify:r8}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");const gc={"||":2,"??":3,"&&":4,"|":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},Bn=17,s8={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:Bn,ClassExpression:Bn,FunctionExpression:Bn,ObjectExpression:Bn,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function Zo(t,e){const{generator:i}=t;if(t.write("("),e!=null&&e.length>0){i[e[0].type](e[0],t);const{length:n}=e;for(let r=1;r<n;r++){const s=e[r];t.write(", "),i[s.type](s,t)}}t.write(")")}function hE(t,e,i,n){const r=t.expressionsPrecedence[e.type];if(r===Bn)return!0;const s=t.expressionsPrecedence[i.type];return r!==s?!n&&r===15&&s===14&&i.operator==="**"||r<s:r!==13&&r!==14?!1:e.operator==="**"&&i.operator==="**"?!n:r===13&&s===13&&(e.operator==="??"||i.operator==="??")?!0:n?gc[e.operator]<=gc[i.operator]:gc[e.operator]<gc[i.operator]}function mc(t,e,i,n){const{generator:r}=t;hE(t,e,i,n)?(t.write("("),r[e.type](e,t),t.write(")")):r[e.type](e,t)}function o8(t,e,i,n){const r=e.split(`
`),s=r.length-1;if(t.write(r[0].trim()),s>0){t.write(n);for(let a=1;a<s;a++)t.write(i+r[a].trim()+n);t.write(i+r[s].trim())}}function Oi(t,e,i,n){const{length:r}=e;for(let s=0;s<r;s++){const a=e[s];t.write(i),a.type[0]==="L"?t.write("// "+a.value.trim()+`
`,a):(t.write("/*"),o8(t,a.value,i,n),t.write("*/"+n))}}function a8(t){let e=t;for(;e!=null;){const{type:i}=e;if(i[0]==="C"&&i[1]==="a")return!0;if(i[0]==="M"&&i[1]==="e"&&i[2]==="m")e=e.object;else return!1}}function xg(t,e){const{generator:i}=t,{declarations:n}=e;t.write(e.kind+" ");const{length:r}=n;if(r>0){i.VariableDeclarator(n[0],t);for(let s=1;s<r;s++)t.write(", "),i.VariableDeclarator(n[s],t)}}let wx,_x,bx,xx,Sx,Cx;const l8={Program(t,e){const i=e.indent.repeat(e.indentLevel),{lineEnd:n,writeComments:r}=e;r&&t.comments!=null&&Oi(e,t.comments,i,n);const s=t.body,{length:a}=s;for(let l=0;l<a;l++){const h=s[l];r&&h.comments!=null&&Oi(e,h.comments,i,n),e.write(i),this[h.type](h,e),e.write(n)}r&&t.trailingComments!=null&&Oi(e,t.trailingComments,i,n)},BlockStatement:Cx=function(t,e){const i=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:r}=e,s=i+e.indent;e.write("{");const a=t.body;if(a!=null&&a.length>0){e.write(n),r&&t.comments!=null&&Oi(e,t.comments,s,n);const{length:l}=a;for(let h=0;h<l;h++){const p=a[h];r&&p.comments!=null&&Oi(e,p.comments,s,n),e.write(s),this[p.type](p,e),e.write(n)}e.write(i)}else r&&t.comments!=null&&(e.write(n),Oi(e,t.comments,s,n),e.write(i));r&&t.trailingComments!=null&&Oi(e,t.trailingComments,s,n),e.write("}"),e.indentLevel--},ClassBody:Cx,StaticBlock(t,e){e.write("static "),this.BlockStatement(t,e)},EmptyStatement(t,e){e.write(";")},ExpressionStatement(t,e){const i=e.expressionsPrecedence[t.expression.type];i===Bn||i===3&&t.expression.left.type[0]==="O"?(e.write("("),this[t.expression.type](t.expression,e),e.write(")")):this[t.expression.type](t.expression,e),e.write(";")},IfStatement(t,e){e.write("if ("),this[t.test.type](t.test,e),e.write(") "),this[t.consequent.type](t.consequent,e),t.alternate!=null&&(e.write(" else "),this[t.alternate.type](t.alternate,e))},LabeledStatement(t,e){this[t.label.type](t.label,e),e.write(": "),this[t.body.type](t.body,e)},BreakStatement(t,e){e.write("break"),t.label!=null&&(e.write(" "),this[t.label.type](t.label,e)),e.write(";")},ContinueStatement(t,e){e.write("continue"),t.label!=null&&(e.write(" "),this[t.label.type](t.label,e)),e.write(";")},WithStatement(t,e){e.write("with ("),this[t.object.type](t.object,e),e.write(") "),this[t.body.type](t.body,e)},SwitchStatement(t,e){const i=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:r}=e;e.indentLevel++;const s=i+e.indent,a=s+e.indent;e.write("switch ("),this[t.discriminant.type](t.discriminant,e),e.write(") {"+n);const{cases:l}=t,{length:h}=l;for(let p=0;p<h;p++){const d=l[p];r&&d.comments!=null&&Oi(e,d.comments,s,n),d.test?(e.write(s+"case "),this[d.test.type](d.test,e),e.write(":"+n)):e.write(s+"default:"+n);const{consequent:m}=d,{length:y}=m;for(let v=0;v<y;v++){const S=m[v];r&&S.comments!=null&&Oi(e,S.comments,a,n),e.write(a),this[S.type](S,e),e.write(n)}}e.indentLevel-=2,e.write(i+"}")},ReturnStatement(t,e){e.write("return"),t.argument&&(e.write(" "),this[t.argument.type](t.argument,e)),e.write(";")},ThrowStatement(t,e){e.write("throw "),this[t.argument.type](t.argument,e),e.write(";")},TryStatement(t,e){if(e.write("try "),this[t.block.type](t.block,e),t.handler){const{handler:i}=t;i.param==null?e.write(" catch "):(e.write(" catch ("),this[i.param.type](i.param,e),e.write(") ")),this[i.body.type](i.body,e)}t.finalizer&&(e.write(" finally "),this[t.finalizer.type](t.finalizer,e))},WhileStatement(t,e){e.write("while ("),this[t.test.type](t.test,e),e.write(") "),this[t.body.type](t.body,e)},DoWhileStatement(t,e){e.write("do "),this[t.body.type](t.body,e),e.write(" while ("),this[t.test.type](t.test,e),e.write(");")},ForStatement(t,e){if(e.write("for ("),t.init!=null){const{init:i}=t;i.type[0]==="V"?xg(e,i):this[i.type](i,e)}e.write("; "),t.test&&this[t.test.type](t.test,e),e.write("; "),t.update&&this[t.update.type](t.update,e),e.write(") "),this[t.body.type](t.body,e)},ForInStatement:wx=function(t,e){e.write(`for ${t.await?"await ":""}(`);const{left:i}=t;i.type[0]==="V"?xg(e,i):this[i.type](i,e),e.write(t.type[3]==="I"?" in ":" of "),this[t.right.type](t.right,e),e.write(") "),this[t.body.type](t.body,e)},ForOfStatement:wx,DebuggerStatement(t,e){e.write("debugger;",t)},FunctionDeclaration:_x=function(t,e){e.write((t.async?"async ":"")+(t.generator?"function* ":"function ")+(t.id?t.id.name:""),t),Zo(e,t.params),e.write(" "),this[t.body.type](t.body,e)},FunctionExpression:_x,VariableDeclaration(t,e){xg(e,t),e.write(";")},VariableDeclarator(t,e){this[t.id.type](t.id,e),t.init!=null&&(e.write(" = "),this[t.init.type](t.init,e))},ClassDeclaration(t,e){if(e.write("class "+(t.id?`${t.id.name} `:""),t),t.superClass){e.write("extends ");const{superClass:i}=t,{type:n}=i,r=e.expressionsPrecedence[n];(n[0]!=="C"||n[1]!=="l"||n[5]!=="E")&&(r===Bn||r<e.expressionsPrecedence.ClassExpression)?(e.write("("),this[t.superClass.type](i,e),e.write(")")):this[i.type](i,e),e.write(" ")}this.ClassBody(t.body,e)},ImportDeclaration(t,e){e.write("import ");const{specifiers:i}=t,{length:n}=i;let r=0;if(n>0){for(;r<n;){r>0&&e.write(", ");const s=i[r],a=s.type[6];if(a==="D")e.write(s.local.name,s),r++;else if(a==="N")e.write("* as "+s.local.name,s),r++;else break}if(r<n){for(e.write("{");;){const s=i[r],{name:a}=s.imported;if(e.write(a,s),a!==s.local.name&&e.write(" as "+s.local.name),++r<n)e.write(", ");else break}e.write("}")}e.write(" from ")}this.Literal(t.source,e),e.write(";")},ImportExpression(t,e){e.write("import("),this[t.source.type](t.source,e),e.write(")")},ExportDefaultDeclaration(t,e){e.write("export default "),this[t.declaration.type](t.declaration,e),e.expressionsPrecedence[t.declaration.type]!=null&&t.declaration.type[0]!=="F"&&e.write(";")},ExportNamedDeclaration(t,e){if(e.write("export "),t.declaration)this[t.declaration.type](t.declaration,e);else{e.write("{");const{specifiers:i}=t,{length:n}=i;if(n>0)for(let r=0;;){const s=i[r],{name:a}=s.local;if(e.write(a,s),a!==s.exported.name&&e.write(" as "+s.exported.name),++r<n)e.write(", ");else break}e.write("}"),t.source&&(e.write(" from "),this.Literal(t.source,e)),e.write(";")}},ExportAllDeclaration(t,e){t.exported!=null?e.write("export * as "+t.exported.name+" from "):e.write("export * from "),this.Literal(t.source,e),e.write(";")},MethodDefinition(t,e){t.static&&e.write("static ");const i=t.kind[0];(i==="g"||i==="s")&&e.write(t.kind+" "),t.value.async&&e.write("async "),t.value.generator&&e.write("*"),t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):this[t.key.type](t.key,e),Zo(e,t.value.params),e.write(" "),this[t.value.body.type](t.value.body,e)},ClassExpression(t,e){this.ClassDeclaration(t,e)},ArrowFunctionExpression(t,e){e.write(t.async?"async ":"",t);const{params:i}=t;i!=null&&(i.length===1&&i[0].type[0]==="I"?e.write(i[0].name,i[0]):Zo(e,t.params)),e.write(" => "),t.body.type[0]==="O"?(e.write("("),this.ObjectExpression(t.body,e),e.write(")")):this[t.body.type](t.body,e)},ThisExpression(t,e){e.write("this",t)},Super(t,e){e.write("super",t)},RestElement:bx=function(t,e){e.write("..."),this[t.argument.type](t.argument,e)},SpreadElement:bx,YieldExpression(t,e){e.write(t.delegate?"yield*":"yield"),t.argument&&(e.write(" "),this[t.argument.type](t.argument,e))},AwaitExpression(t,e){e.write("await ",t),mc(e,t.argument,t)},TemplateLiteral(t,e){const{quasis:i,expressions:n}=t;e.write("`");const{length:r}=n;for(let a=0;a<r;a++){const l=n[a],h=i[a];e.write(h.value.raw,h),e.write("${"),this[l.type](l,e),e.write("}")}const s=i[i.length-1];e.write(s.value.raw,s),e.write("`")},TemplateElement(t,e){e.write(t.value.raw,t)},TaggedTemplateExpression(t,e){mc(e,t.tag,t),this[t.quasi.type](t.quasi,e)},ArrayExpression:Sx=function(t,e){if(e.write("["),t.elements.length>0){const{elements:i}=t,{length:n}=i;for(let r=0;;){const s=i[r];if(s!=null&&this[s.type](s,e),++r<n)e.write(", ");else{s==null&&e.write(", ");break}}}e.write("]")},ArrayPattern:Sx,ObjectExpression(t,e){const i=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:r}=e,s=i+e.indent;if(e.write("{"),t.properties.length>0){e.write(n),r&&t.comments!=null&&Oi(e,t.comments,s,n);const a=","+n,{properties:l}=t,{length:h}=l;for(let p=0;;){const d=l[p];if(r&&d.comments!=null&&Oi(e,d.comments,s,n),e.write(s),this[d.type](d,e),++p<h)e.write(a);else break}e.write(n),r&&t.trailingComments!=null&&Oi(e,t.trailingComments,s,n),e.write(i+"}")}else r?t.comments!=null?(e.write(n),Oi(e,t.comments,s,n),t.trailingComments!=null&&Oi(e,t.trailingComments,s,n),e.write(i+"}")):t.trailingComments!=null?(e.write(n),Oi(e,t.trailingComments,s,n),e.write(i+"}")):e.write("}"):e.write("}");e.indentLevel--},Property(t,e){t.method||t.kind[0]!=="i"?this.MethodDefinition(t,e):(t.shorthand||(t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):this[t.key.type](t.key,e),e.write(": ")),this[t.value.type](t.value,e))},PropertyDefinition(t,e){if(t.static&&e.write("static "),t.computed&&e.write("["),this[t.key.type](t.key,e),t.computed&&e.write("]"),t.value==null){t.key.type[0]!=="F"&&e.write(";");return}e.write(" = "),this[t.value.type](t.value,e),e.write(";")},ObjectPattern(t,e){if(e.write("{"),t.properties.length>0){const{properties:i}=t,{length:n}=i;for(let r=0;this[i[r].type](i[r],e),++r<n;)e.write(", ")}e.write("}")},SequenceExpression(t,e){Zo(e,t.expressions)},UnaryExpression(t,e){if(t.prefix){const{operator:i,argument:n,argument:{type:r}}=t;e.write(i);const s=hE(e,n,t);!s&&(i.length>1||r[0]==="U"&&(r[1]==="n"||r[1]==="p")&&n.prefix&&n.operator[0]===i&&(i==="+"||i==="-"))&&e.write(" "),s?(e.write(i.length>1?" (":"("),this[r](n,e),e.write(")")):this[r](n,e)}else this[t.argument.type](t.argument,e),e.write(t.operator)},UpdateExpression(t,e){t.prefix?(e.write(t.operator),this[t.argument.type](t.argument,e)):(this[t.argument.type](t.argument,e),e.write(t.operator))},AssignmentExpression(t,e){this[t.left.type](t.left,e),e.write(" "+t.operator+" "),this[t.right.type](t.right,e)},AssignmentPattern(t,e){this[t.left.type](t.left,e),e.write(" = "),this[t.right.type](t.right,e)},BinaryExpression:xx=function(t,e){const i=t.operator==="in";i&&e.write("("),mc(e,t.left,t,!1),e.write(" "+t.operator+" "),mc(e,t.right,t,!0),i&&e.write(")")},LogicalExpression:xx,ConditionalExpression(t,e){const{test:i}=t,n=e.expressionsPrecedence[i.type];n===Bn||n<=e.expressionsPrecedence.ConditionalExpression?(e.write("("),this[i.type](i,e),e.write(")")):this[i.type](i,e),e.write(" ? "),this[t.consequent.type](t.consequent,e),e.write(" : "),this[t.alternate.type](t.alternate,e)},NewExpression(t,e){e.write("new ");const i=e.expressionsPrecedence[t.callee.type];i===Bn||i<e.expressionsPrecedence.CallExpression||a8(t.callee)?(e.write("("),this[t.callee.type](t.callee,e),e.write(")")):this[t.callee.type](t.callee,e),Zo(e,t.arguments)},CallExpression(t,e){const i=e.expressionsPrecedence[t.callee.type];i===Bn||i<e.expressionsPrecedence.CallExpression?(e.write("("),this[t.callee.type](t.callee,e),e.write(")")):this[t.callee.type](t.callee,e),t.optional&&e.write("?."),Zo(e,t.arguments)},ChainExpression(t,e){this[t.expression.type](t.expression,e)},MemberExpression(t,e){const i=e.expressionsPrecedence[t.object.type];i===Bn||i<e.expressionsPrecedence.MemberExpression?(e.write("("),this[t.object.type](t.object,e),e.write(")")):this[t.object.type](t.object,e),t.computed?(t.optional&&e.write("?."),e.write("["),this[t.property.type](t.property,e),e.write("]")):(t.optional?e.write("?."):e.write("."),this[t.property.type](t.property,e))},MetaProperty(t,e){e.write(t.meta.name+"."+t.property.name,t)},Identifier(t,e){e.write(t.name,t)},PrivateIdentifier(t,e){e.write(`#${t.name}`,t)},Literal(t,e){t.raw!=null?e.write(t.raw,t):t.regex!=null?this.RegExpLiteral(t,e):t.bigint!=null?e.write(t.bigint+"n",t):e.write(r8(t.value),t)},RegExpLiteral(t,e){const{regex:i}=t;e.write(`/${i.pattern}/${i.flags}`,t)}},u8={};class h8{constructor(e){const i=e??u8;this.output="",i.output!=null?(this.output=i.output,this.write=this.writeToStream):this.output="",this.generator=i.generator!=null?i.generator:l8,this.expressionsPrecedence=i.expressionsPrecedence!=null?i.expressionsPrecedence:s8,this.indent=i.indent!=null?i.indent:"  ",this.lineEnd=i.lineEnd!=null?i.lineEnd:`
`,this.indentLevel=i.startingIndentLevel!=null?i.startingIndentLevel:0,this.writeComments=i.comments?i.comments:!1,i.sourceMap!=null&&(this.write=i.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=i.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:i.sourceMap.file||i.sourceMap._file})}write(e){this.output+=e}writeToStream(e){this.output.write(e)}writeAndMap(e,i){this.output+=e,this.map(e,i)}writeToStreamAndMap(e,i){this.output.write(e),this.map(e,i)}map(e,i){if(i!=null){const{type:s}=i;if(s[0]==="L"&&s[2]==="n"){this.column=0,this.line++;return}if(i.loc!=null){const{mapping:a}=this;a.original=i.loc.start,a.name=i.name,this.sourceMap.addMapping(a)}if(s[0]==="T"&&s[8]==="E"||s[0]==="L"&&s[1]==="i"&&typeof i.value=="string"){const{length:a}=e;let{column:l,line:h}=this;for(let p=0;p<a;p++)e[p]===`
`?(l=0,h++):l++;this.column=l,this.line=h;return}}const{length:n}=e,{lineEnd:r}=this;n>0&&(this.lineEndSize>0&&(r.length===1?e[n-1]===r:e.endsWith(r))?(this.line+=this.lineEndSize,this.column=0):this.column+=n)}toString(){return this.output}}function c8(t,e){const i=new h8(e);return i.generator[t.type](t,i),i.output}var s0={},Sg={},Mx;function cE(){return Mx||(Mx=1,function(t){(function(e,i){i(t)})(bt,function(e){e.__esModule=!0;function i(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}var n=void 0,r=void 0,s=void 0,a=void 0,l=void 0,h=Function.prototype,p=function d(m,y){i(this,d),this.node=m,this.state=y};e.default={go:function(m,y){this[m.type](m,y)},find:function(m,y,v){var S=Object.create(this);S.go=function(M,b){if(m(M,b))throw new p(M,b);this[M.type](M,b)};try{S.go(y,v)}catch(M){if(M instanceof p)return M;throw M}},makeChild:function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=Object.create(this);y.super=this;for(var v in m)y[v]=m[v];return y},Program:function(m,y){for(var v=m.body,S=v.length,M=0;M<S;M++)this.go(v[M],y)},BlockStatement:function(m,y){var v=m.body;if(v!=null)for(var S=0,M=v.length;S<M;S++)this.go(v[S],y)},EmptyStatement:h,ExpressionStatement:function(m,y){this.go(m.expression,y)},IfStatement:function(m,y){this.go(m.test,y),this.go(m.consequent,y),m.alternate!=null&&this.go(m.alternate,y)},LabeledStatement:function(m,y){this.go(m.label,y),this.go(m.body,y)},BreakStatement:function(m,y){m.label&&this.go(m.label,y)},ContinueStatement:function(m,y){m.label&&this.go(m.label,y)},WithStatement:function(m,y){this.go(m.object,y),this.go(m.body,y)},SwitchStatement:function(m,y){this.go(m.discriminant,y);for(var v=m.cases,S=v.length,M=0;M<S;M++)this.go(v[M],y)},SwitchCase:function(m,y){m.test!=null&&this.go(m.test,y);for(var v=m.consequent,S=v.length,M=0;M<S;M++)this.go(v[M],y)},ReturnStatement:function(m,y){m.argument&&this.go(m.argument,y)},ThrowStatement:function(m,y){this.go(m.argument,y)},TryStatement:function(m,y){this.go(m.block,y),m.handler!=null&&this.go(m.handler,y),m.finalizer!=null&&this.go(m.finalizer,y)},CatchClause:function(m,y){m.param!=null&&this.go(m.param,y),this.go(m.body,y)},WhileStatement:function(m,y){this.go(m.test,y),this.go(m.body,y)},DoWhileStatement:function(m,y){this.go(m.body,y),this.go(m.test,y)},ForStatement:function(m,y){m.init!=null&&this.go(m.init,y),m.test!=null&&this.go(m.test,y),m.update!=null&&this.go(m.update,y),this.go(m.body,y)},ForInStatement:n=function(m,y){this.go(m.left,y),this.go(m.right,y),this.go(m.body,y)},DebuggerStatement:h,FunctionDeclaration:r=function(m,y){m.id!=null&&this.go(m.id,y);var v=m.params;if(v!=null)for(var S=0,M=v.length;S<M;S++)this.go(v[S],y);this.go(m.body,y)},VariableDeclaration:function(m,y){for(var v=m.declarations,S=v.length,M=0;M<S;M++)this.go(v[M],y)},VariableDeclarator:function(m,y){this.go(m.id,y),m.init!=null&&this.go(m.init,y)},ArrowFunctionExpression:function(m,y){var v=m.params;if(v!=null)for(var S=0,M=v.length;S<M;S++)this.go(v[S],y);this.go(m.body,y)},ThisExpression:h,ArrayExpression:l=function(m,y){for(var v=m.elements,S=v.length,M=0;M<S;M++){var b=v[M];b!=null&&this.go(v[M],y)}},ObjectExpression:function(m,y){for(var v=m.properties,S=v.length,M=0;M<S;M++)this.go(v[M],y)},Property:function(m,y){this.go(m.key,y),m.shorthand||this.go(m.value,y)},FunctionExpression:r,SequenceExpression:function(m,y){for(var v=m.expressions,S=v.length,M=0;M<S;M++)this.go(v[M],y)},UnaryExpression:function(m,y){this.go(m.argument,y)},UpdateExpression:function(m,y){this.go(m.argument,y)},AssignmentExpression:function(m,y){this.go(m.left,y),this.go(m.right,y)},BinaryExpression:a=function(m,y){this.go(m.left,y),this.go(m.right,y)},LogicalExpression:a,ConditionalExpression:function(m,y){this.go(m.test,y),this.go(m.consequent,y),this.go(m.alternate,y)},NewExpression:function(m,y){this.CallExpression(m,y)},CallExpression:function(m,y){this.go(m.callee,y);for(var v=m.arguments,S=v.length,M=0;M<S;M++)this.go(v[M],y)},MemberExpression:function(m,y){this.go(m.object,y),this.go(m.property,y)},Identifier:h,Literal:h,ForOfStatement:n,ClassDeclaration:function(m,y){m.id&&this.go(m.id,y),m.superClass&&this.go(m.superClass,y),this.go(m.body,y)},ClassBody:function(m,y){for(var v=m.body,S=v.length,M=0;M<S;M++)this.go(v[M],y)},ImportDeclaration:function(m,y){for(var v=m.specifiers,S=v.length,M=0;M<S;M++)this.go(v[M],y);this.go(m.source,y)},ImportNamespaceSpecifier:function(m,y){this.go(m.local,y)},ImportDefaultSpecifier:function(m,y){this.go(m.local,y)},ImportSpecifier:function(m,y){this.go(m.imported,y),this.go(m.local,y)},ExportDefaultDeclaration:function(m,y){this.go(m.declaration,y)},ExportNamedDeclaration:function(m,y){m.declaration&&this.go(m.declaration,y);for(var v=m.specifiers,S=v.length,M=0;M<S;M++)this.go(v[M],y);m.source&&this.go(m.source,y)},ExportSpecifier:function(m,y){this.go(m.local,y),this.go(m.exported,y)},ExportAllDeclaration:function(m,y){this.go(m.source,y)},MethodDefinition:function(m,y){this.go(m.key,y),this.go(m.value,y)},ClassExpression:function(m,y){this.ClassDeclaration(m,y)},Super:h,RestElement:s=function(m,y){this.go(m.argument,y)},SpreadElement:s,YieldExpression:function(m,y){m.argument&&this.go(m.argument,y)},TaggedTemplateExpression:function(m,y){this.go(m.tag,y),this.go(m.quasi,y)},TemplateLiteral:function(m,y){for(var v=m.quasis,S=m.expressions,M=0,b=S.length;M<b;M++)this.go(S[M],y);for(var w=0,E=v.length;w<E;w++)this.go(v[w],y)},TemplateElement:h,ObjectPattern:function(m,y){for(var v=m.properties,S=v.length,M=0;M<S;M++)this.go(v[M],y)},ArrayPattern:l,AssignmentPattern:function(m,y){this.go(m.left,y),this.go(m.right,y)},MetaProperty:function(m,y){this.go(m.meta,y),this.go(m.property,y)},AwaitExpression:function(m,y){this.go(m.argument,y)}}})}(Sg)),Sg}var Cg={},kx;function f8(){return kx||(kx=1,function(t){(function(e,i){i(t,cE())})(bt,function(e,i){e.__esModule=!0,e.default=function(h,p){return l[h.type](h,{comments:p,index:0}),h};var n=r(i);function r(h){return h&&h.__esModule?h:{default:h}}function s(h,p,d,m,y){var v=m.index,S=m.comments,M=S[v],b=void 0,w=void 0;if(M!=null)if(p==null||p.length===0){for(b=h.comments!=null?h.comments:[];M!=null&&M.end<h.end;)b.push(M),M=S[++v];m.index=v,b.length!==0&&h.comments==null&&(h.comments=b)}else{if(d){b=h.comments!=null?h.comments:[];for(var E=p[0].start;M!=null&&M.type[0]==="B"&&M.end<E;)b.push(M),M=S[++v];b.length!==0&&h.comments==null&&(h.comments=b)}for(var B=0,L=p.length;M!=null&&B<L;B++){var I=p[B];for(b=[];M!=null&&M.end<I.start;)b.push(M),M=S[++v];M!=null&&M.type[0]==="L"&&M.loc.start.line===I.loc.end.line&&(b.push(M),M=S[++v]),b.length!==0&&(I.comments=b),m.index=v,y[I.type](I,m),v=m.index,M=S[v]}for(w=[];M!=null&&M.end<h.end;)w.push(M),M=S[++v];w.length!==0&&(h.trailingComments=w),m.index=v}}var a=void 0,l=n.default.makeChild({Program:a=function(p,d){s(p,p.body,!0,d,this)},BlockStatement:a,ObjectExpression:function(p,d){s(p,p.properties,!0,d,this)},ArrayExpression:function(p,d){s(p,p.elements,!0,d,this)},SwitchStatement:function(p,d){s(p,p.cases,!1,d,this)},SwitchCase:function(p,d){s(p,p.consequent,!1,d,this)}})})}(Cg)),Cg}(function(t){(function(e,i){i(t,cE(),f8())})(bt,function(e,i,n){e.__esModule=!0,e.makeTraveler=e.attachComments=e.defaultTraveler=void 0;var r=a(i),s=a(n);function a(h){return h&&h.__esModule?h:{default:h}}function l(h){return r.default.makeChild(h)}e.defaultTraveler=r.default,e.attachComments=s.default,e.makeTraveler=l})})(s0);class p8{constructor(e){this.stack=[],this.index=-1,this.limit=e}atTop(){return this.index===-1}canUndo(){return this.stack.length===0?!1:this.index===-1||this.index>0}canRedo(){return this.stack.length===0||this.index===-1?!1:this.index<this.stack.length-1}push(e){if(this.index>=0){for(;this.index<this.stack.length;)this.stack.pop();this.index=-1}this.limit&&this.stack.length>this.limit&&this.stack.shift(),this.stack.push(e)}undo(){return this.stack.length===0?void 0:(this.index===-1&&(this.index=this.stack.length-1),this.index>0&&this.index--,this.stack[this.index])}redo(){if(this.stack.length===0||this.index===-1)return;let e=this.index+1;if(!(e>=this.stack.length))return this.index=e,this.stack[this.index]}}const Tx=[{name:"noise",type:"src",inputs:[{type:"float",name:"scale",default:10},{type:"float",name:"offset",default:.1}],glsl:"   return vec4(vec3(_noise(vec3(_st*scale, offset*time))), 1.0);"},{name:"voronoi",type:"src",inputs:[{type:"float",name:"scale",default:5},{type:"float",name:"speed",default:.3},{type:"float",name:"blending",default:.3}],glsl:`   vec3 color = vec3(.0);
     // Scale
     _st *= scale;
     // Tile the space
     vec2 i_st = floor(_st);
     vec2 f_st = fract(_st);
     float m_dist = 10.;  // minimun distance
     vec2 m_point;        // minimum point
     for (int j=-1; j<=1; j++ ) {
     for (int i=-1; i<=1; i++ ) {
     vec2 neighbor = vec2(float(i),float(j));
     vec2 p = i_st + neighbor;
     vec2 point = fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);
     point = 0.5 + 0.5*sin(time*speed + 6.2831*point);
     vec2 diff = neighbor + point - f_st;
     float dist = length(diff);
     if( dist < m_dist ) {
     m_dist = dist;
     m_point = point;
     }
     }
     }
     // Assign a color using the closest point position
     color += dot(m_point,vec2(.3,.6));
     color *= 1.0 - blending*m_dist;
     return vec4(color, 1.0);`},{name:"osc",type:"src",inputs:[{type:"float",name:"frequency",default:60},{type:"float",name:"sync",default:.1},{type:"float",name:"offset",default:0}],glsl:`   vec2 st = _st;
     float r = sin((st.x-offset/frequency+time*sync)*frequency)*0.5  + 0.5;
     float g = sin((st.x+time*sync)*frequency)*0.5 + 0.5;
     float b = sin((st.x+offset/frequency+time*sync)*frequency)*0.5  + 0.5;
     return vec4(r, g, b, 1.0);`},{name:"shape",type:"src",inputs:[{type:"float",name:"sides",default:3},{type:"float",name:"radius",default:.3},{type:"float",name:"smoothing",default:.01}],glsl:`   vec2 st = _st * 2. - 1.;
     // Angle and radius from the current pixel
     float a = atan(st.x,st.y)+3.1416;
     float r = (2.*3.1416)/sides;
     float d = cos(floor(.5+a/r)*r-a)*length(st);
     return vec4(vec3(1.0-smoothstep(radius,radius + smoothing + 0.0000001,d)), 1.0);`},{name:"gradient",type:"src",inputs:[{type:"float",name:"speed",default:0}],glsl:"   return vec4(_st, sin(time*speed), 1.0);"},{name:"src",type:"src",inputs:[{type:"sampler2D",name:"tex",default:NaN}],glsl:`   //  vec2 uv = gl_FragCoord.xy/vec2(1280., 720.);
     return texture2D(tex, fract(_st));`},{name:"solid",type:"src",inputs:[{type:"float",name:"r",default:0},{type:"float",name:"g",default:0},{type:"float",name:"b",default:0},{type:"float",name:"a",default:1}],glsl:"   return vec4(r, g, b, a);"},{name:"rotate",type:"coord",inputs:[{type:"float",name:"angle",default:10},{type:"float",name:"speed",default:0}],glsl:`   vec2 xy = _st - vec2(0.5);
     float ang = angle + speed *time;
     xy = mat2(cos(ang),-sin(ang), sin(ang),cos(ang))*xy;
     xy += 0.5;
     return xy;`},{name:"scale",type:"coord",inputs:[{type:"float",name:"amount",default:1.5},{type:"float",name:"xMult",default:1},{type:"float",name:"yMult",default:1},{type:"float",name:"offsetX",default:.5},{type:"float",name:"offsetY",default:.5}],glsl:`   vec2 xy = _st - vec2(offsetX, offsetY);
     xy*=(1.0/vec2(amount*xMult, amount*yMult));
     xy+=vec2(offsetX, offsetY);
     return xy;
     `},{name:"pixelate",type:"coord",inputs:[{type:"float",name:"pixelX",default:20},{type:"float",name:"pixelY",default:20}],glsl:`   vec2 xy = vec2(pixelX, pixelY);
     return (floor(_st * xy) + 0.5)/xy;`},{name:"posterize",type:"color",inputs:[{type:"float",name:"bins",default:3},{type:"float",name:"gamma",default:.6}],glsl:`   vec4 c2 = pow(_c0, vec4(gamma));
     c2 *= vec4(bins);
     c2 = floor(c2);
     c2/= vec4(bins);
     c2 = pow(c2, vec4(1.0/gamma));
     return vec4(c2.xyz, _c0.a);`},{name:"shift",type:"color",inputs:[{type:"float",name:"r",default:.5},{type:"float",name:"g",default:0},{type:"float",name:"b",default:0},{type:"float",name:"a",default:0}],glsl:`   vec4 c2 = vec4(_c0);
     c2.r = fract(c2.r + r);
     c2.g = fract(c2.g + g);
     c2.b = fract(c2.b + b);
     c2.a = fract(c2.a + a);
     return vec4(c2.rgba);`},{name:"repeat",type:"coord",inputs:[{type:"float",name:"repeatX",default:3},{type:"float",name:"repeatY",default:3},{type:"float",name:"offsetX",default:0},{type:"float",name:"offsetY",default:0}],glsl:`   vec2 st = _st * vec2(repeatX, repeatY);
     st.x += step(1., mod(st.y,2.0)) * offsetX;
     st.y += step(1., mod(st.x,2.0)) * offsetY;
     return fract(st);`},{name:"modulateRepeat",type:"combineCoord",inputs:[{type:"float",name:"repeatX",default:3},{type:"float",name:"repeatY",default:3},{type:"float",name:"offsetX",default:.5},{type:"float",name:"offsetY",default:.5}],glsl:`   vec2 st = _st * vec2(repeatX, repeatY);
     st.x += step(1., mod(st.y,2.0)) + _c0.r * offsetX;
     st.y += step(1., mod(st.x,2.0)) + _c0.g * offsetY;
     return fract(st);`},{name:"repeatX",type:"coord",inputs:[{type:"float",name:"reps",default:3},{type:"float",name:"offset",default:0}],glsl:`   vec2 st = _st * vec2(reps, 1.0);
     //  float f =  mod(_st.y,2.0);
     st.y += step(1., mod(st.x,2.0))* offset;
     return fract(st);`},{name:"modulateRepeatX",type:"combineCoord",inputs:[{type:"float",name:"reps",default:3},{type:"float",name:"offset",default:.5}],glsl:`   vec2 st = _st * vec2(reps, 1.0);
     //  float f =  mod(_st.y,2.0);
     st.y += step(1., mod(st.x,2.0)) + _c0.r * offset;
     return fract(st);`},{name:"repeatY",type:"coord",inputs:[{type:"float",name:"reps",default:3},{type:"float",name:"offset",default:0}],glsl:`   vec2 st = _st * vec2(1.0, reps);
     //  float f =  mod(_st.y,2.0);
     st.x += step(1., mod(st.y,2.0))* offset;
     return fract(st);`},{name:"modulateRepeatY",type:"combineCoord",inputs:[{type:"float",name:"reps",default:3},{type:"float",name:"offset",default:.5}],glsl:`   vec2 st = _st * vec2(reps, 1.0);
     //  float f =  mod(_st.y,2.0);
     st.x += step(1., mod(st.y,2.0)) + _c0.r * offset;
     return fract(st);`},{name:"kaleid",type:"coord",inputs:[{type:"float",name:"nSides",default:4}],glsl:`   vec2 st = _st;
     st -= 0.5;
     float r = length(st);
     float a = atan(st.y, st.x);
     float pi = 2.*3.1416;
     a = mod(a,pi/nSides);
     a = abs(a-pi/nSides/2.);
     return r*vec2(cos(a), sin(a));`},{name:"modulateKaleid",type:"combineCoord",inputs:[{type:"float",name:"nSides",default:4}],glsl:`   vec2 st = _st - 0.5;
     float r = length(st);
     float a = atan(st.y, st.x);
     float pi = 2.*3.1416;
     a = mod(a,pi/nSides);
     a = abs(a-pi/nSides/2.);
     return (_c0.r+r)*vec2(cos(a), sin(a));`},{name:"scroll",type:"coord",inputs:[{type:"float",name:"scrollX",default:.5},{type:"float",name:"scrollY",default:.5},{type:"float",name:"speedX",default:0},{type:"float",name:"speedY",default:0}],glsl:`
     _st.x += scrollX + time*speedX;
     _st.y += scrollY + time*speedY;
     return fract(_st);`},{name:"scrollX",type:"coord",inputs:[{type:"float",name:"scrollX",default:.5},{type:"float",name:"speed",default:0}],glsl:`   _st.x += scrollX + time*speed;
     return fract(_st);`},{name:"modulateScrollX",type:"combineCoord",inputs:[{type:"float",name:"scrollX",default:.5},{type:"float",name:"speed",default:0}],glsl:`   _st.x += _c0.r*scrollX + time*speed;
     return fract(_st);`},{name:"scrollY",type:"coord",inputs:[{type:"float",name:"scrollY",default:.5},{type:"float",name:"speed",default:0}],glsl:`   _st.y += scrollY + time*speed;
     return fract(_st);`},{name:"modulateScrollY",type:"combineCoord",inputs:[{type:"float",name:"scrollY",default:.5},{type:"float",name:"speed",default:0}],glsl:`   _st.y += _c0.r*scrollY + time*speed;
     return fract(_st);`},{name:"add",type:"combine",inputs:[{type:"float",name:"amount",default:1}],glsl:"   return (_c0+_c1)*amount + _c0*(1.0-amount);"},{name:"sub",type:"combine",inputs:[{type:"float",name:"amount",default:1}],glsl:"   return (_c0-_c1)*amount + _c0*(1.0-amount);"},{name:"layer",type:"combine",inputs:[],glsl:"   return vec4(mix(_c0.rgb, _c1.rgb, _c1.a), clamp(_c0.a + _c1.a, 0.0, 1.0));"},{name:"blend",type:"combine",inputs:[{type:"float",name:"amount",default:.5}],glsl:"   return _c0*(1.0-amount)+_c1*amount;"},{name:"mult",type:"combine",inputs:[{type:"float",name:"amount",default:1}],glsl:"   return _c0*(1.0-amount)+(_c0*_c1)*amount;"},{name:"diff",type:"combine",inputs:[],glsl:"   return vec4(abs(_c0.rgb-_c1.rgb), max(_c0.a, _c1.a));"},{name:"modulate",type:"combineCoord",inputs:[{type:"float",name:"amount",default:.1}],glsl:`   //  return fract(st+(_c0.xy-0.5)*amount);
     return _st + _c0.xy*amount;`},{name:"modulateScale",type:"combineCoord",inputs:[{type:"float",name:"multiple",default:1},{type:"float",name:"offset",default:1}],glsl:`   vec2 xy = _st - vec2(0.5);
     xy*=(1.0/vec2(offset + multiple*_c0.r, offset + multiple*_c0.g));
     xy+=vec2(0.5);
     return xy;`},{name:"modulatePixelate",type:"combineCoord",inputs:[{type:"float",name:"multiple",default:10},{type:"float",name:"offset",default:3}],glsl:`   vec2 xy = vec2(offset + _c0.x*multiple, offset + _c0.y*multiple);
     return (floor(_st * xy) + 0.5)/xy;`},{name:"modulateRotate",type:"combineCoord",inputs:[{type:"float",name:"multiple",default:1},{type:"float",name:"offset",default:0}],glsl:`   vec2 xy = _st - vec2(0.5);
     float angle = offset + _c0.x * multiple;
     xy = mat2(cos(angle),-sin(angle), sin(angle),cos(angle))*xy;
     xy += 0.5;
     return xy;`},{name:"modulateHue",type:"combineCoord",inputs:[{type:"float",name:"amount",default:1}],glsl:"   return _st + (vec2(_c0.g - _c0.r, _c0.b - _c0.g) * amount * 1.0/resolution);"},{name:"invert",type:"color",inputs:[{type:"float",name:"amount",default:1}],glsl:"   return vec4((1.0-_c0.rgb)*amount + _c0.rgb*(1.0-amount), _c0.a);"},{name:"contrast",type:"color",inputs:[{type:"float",name:"amount",default:1.6}],glsl:`   vec4 c = (_c0-vec4(0.5))*vec4(amount) + vec4(0.5);
     return vec4(c.rgb, _c0.a);`},{name:"brightness",type:"color",inputs:[{type:"float",name:"amount",default:.4}],glsl:"   return vec4(_c0.rgb + vec3(amount), _c0.a);"},{name:"mask",type:"combine",inputs:[],glsl:`   float a = _luminance(_c1.rgb);
    return vec4(_c0.rgb*a, a*_c0.a);`},{name:"luma",type:"color",inputs:[{type:"float",name:"threshold",default:.5},{type:"float",name:"tolerance",default:.1}],glsl:`   float a = smoothstep(threshold-(tolerance+0.0000001), threshold+(tolerance+0.0000001), _luminance(_c0.rgb));
     return vec4(_c0.rgb*a, a);`},{name:"thresh",type:"color",inputs:[{type:"float",name:"threshold",default:.5},{type:"float",name:"tolerance",default:.04}],glsl:"   return vec4(vec3(smoothstep(threshold-(tolerance+0.0000001), threshold+(tolerance+0.0000001), _luminance(_c0.rgb))), _c0.a);"},{name:"color",type:"color",inputs:[{type:"float",name:"r",default:1},{type:"float",name:"g",default:1},{type:"float",name:"b",default:1},{type:"float",name:"a",default:1}],glsl:`   vec4 c = vec4(r, g, b, a);
     vec4 pos = step(0.0, c); // detect whether negative
     // if > 0, return r * _c0
     // if < 0 return (1.0-r) * _c0
     return vec4(mix((1.0-_c0)*abs(c), c*_c0, pos));`},{name:"saturate",type:"color",inputs:[{type:"float",name:"amount",default:2}],glsl:`   const vec3 W = vec3(0.2125, 0.7154, 0.0721);
     vec3 intensity = vec3(dot(_c0.rgb, W));
     return vec4(mix(intensity, _c0.rgb, amount), _c0.a);`},{name:"hue",type:"color",inputs:[{type:"float",name:"hue",default:.4}],glsl:`   vec3 c = _rgbToHsv(_c0.rgb);
     c.r += hue;
     //  c.r = fract(c.r);
     return vec4(_hsvToRgb(c), _c0.a);`},{name:"colorama",type:"color",inputs:[{type:"float",name:"amount",default:.005}],glsl:`   vec3 c = _rgbToHsv(_c0.rgb);
     c += vec3(amount);
     c = _hsvToRgb(c);
     c = fract(c);
     return vec4(c, _c0.a);`},{name:"prev",type:"src",inputs:[],glsl:"   return texture2D(prevBuffer, fract(_st));"},{name:"sum",type:"color",inputs:[{type:"vec4",name:"scale",default:1}],glsl:`   vec4 v = _c0 * s;
     return v.r + v.g + v.b + v.a;
     }
     float sum(vec2 _st, vec4 s) { // vec4 is not a typo, because argument type is not overloaded
     vec2 v = _st.xy * s.xy;
     return v.x + v.y;`},{name:"r",type:"color",inputs:[{type:"float",name:"scale",default:1},{type:"float",name:"offset",default:0}],glsl:"   return vec4(_c0.r * scale + offset);"},{name:"g",type:"color",inputs:[{type:"float",name:"scale",default:1},{type:"float",name:"offset",default:0}],glsl:"   return vec4(_c0.g * scale + offset);"},{name:"b",type:"color",inputs:[{type:"float",name:"scale",default:1},{type:"float",name:"offset",default:0}],glsl:"   return vec4(_c0.b * scale + offset);"},{name:"a",type:"color",inputs:[{type:"float",name:"scale",default:1},{type:"float",name:"offset",default:0}],glsl:"   return vec4(_c0.a * scale + offset);"}];class d8{constructor(e){this.editor=e,this.undoStack=new p8,this.initialVector=[],this.funcTab={},this.transMap={},this.scanFuncs(),this.dumpDict()}dumpList(){Tx.forEach(i=>{i.inputs.forEach(n=>{n.name+""+n.type+n.default})})}scanFuncs(){Tx.forEach(i=>{this.transMap[i.name]=i,this.funcTab[i.type]===void 0&&(this.funcTab[i.type]=[]),this.funcTab[i.type].push(i)})}dumpDict(){for(let e in this.funcTab)this.funcTab[e].forEach(i=>{i.inputs.forEach(n=>{n.name+""+n.type+n.default})})}mutate(e){let i=this.editor.cm.getValue();this.undoStack.push({text:i,lastLitX:this.lastLitX});let n=!0,r=5;for(;n&&r-->=0;){var s=[];let a=ti.parse(i,{locations:!0,onComment:s});this.transform(a,e),s0.attachComments(a,s);let l=c8(a,{comments:!0});this.editor.cm.setValue(l);try{Rg.eval(l,(h,p)=>{p&&console.log("Eval error: "+l),n=p})}catch(h){console.log("Exception caught: "+h),n=h}}}doUndo(){if(this.undoStack.atTop()){let e=this.editor.cm.getValue();this.undoStack.push({text:e,lastLitX:this.lastLitX})}if(this.undoStack.canUndo()){let{text:e,lastLitX:i}=this.undoStack.undo();this.setText(e),this.lastLitX=i}}doRedo(){if(this.undoStack.canRedo()){let{text:e,lastLitX:i}=this.undoStack.redo();this.setText(e),this.lastLitX=i}}setText(e){this.editor.cm.setValue(e),Rg.eval(e,(i,n)=>{})}transform(e,i){let n=s0.makeTraveler({go:function(s,a){if(s.type==="Literal")a.literalTab.push(s);else if(s.type==="MemberExpression"){if(s.property&&s.property.type==="Literal")return}else s.type==="CallExpression"&&s.callee&&s.callee.property&&s.callee.property.name&&s.callee.property.name!=="out"&&a.functionTab.push(s);this.super.go.call(this,s,a)}}),r={};if(r.literalTab=[],r.functionTab=[],n.go(e,r),this.litCount=r.literalTab.length,this.funCount=r.functionTab.length,this.litCount!==this.initialVector.length){let s=[];for(let a=0;a<this.litCount;++a)s.push(r.literalTab[a].value);this.initialVector=s}i.changeTransform?this.glitchTrans(r,i):this.glitchLiteral(r,i)}glitchLiteral(e,i){let n=0;i.reroll?this.lastLitX!==void 0&&(n=this.lastLitX):(n=Math.floor(Math.random()*this.litCount),this.lastLitX=n);let r=e.literalTab[n];if(r){let s=this.glitchRelToInit(r.value,this.initialVector[n]),a=r.raw;r.value=s,r.raw=""+s,console.log("Literal: "+n+" changed from: "+a+" to: "+s)}}glitchNumber(e){e===0&&(e=1);let i=e*2;return Math.round(Math.random()*i*1e3)/1e3}glitchRelToInit(e,i){return i===void 0?glitchNumber(e):(i===0&&(i=.5),Math.round(Math.random()*i*2*1e3)/1e3)}glitchTrans(e,i){let n=Math.floor(Math.random()*this.funCount);if(e.functionTab[n]===void 0||e.functionTab[n].callee===void 0||e.functionTab[n].callee.property===void 0){console.log("No valid functionTab for index: "+n);return}let r=e.functionTab[n].callee.property.name;if(r==null){console.log("No name for callee");return}let s=this.transMap[r].type;if(s==null){console.log("ftype undefined for: "+r);return}let a=this.funcTab[s];if(a==null){console.log("no funcTab entry for: "+s);return}let l=Math.floor(Math.random()*a.length),h=a[l].name;if(r==="modulate"&&h==="modulateScrollX"){console.log("Function: "+n+" changing from: "+r+" can't change to: "+h);return}e.functionTab[n].callee.property.name=h,console.log("Function: "+n+" changed from: "+r+" to: "+h)}}let g8=class extends XR{constructor(e){super(),console.log("*** Editor class created"),this.mutator=new d8(this);const i={};Object.entries(b9).forEach(([r,s])=>i[r]=()=>{s=="editor: eval block"?this.emit("repl: eval",this.getCurrentBlock().text):s=="editor: eval line"?this.emit("repl: eval",this.getLine()):s=="editor:toggleComment"?(this.cm.toggleComment(),this.emit(s,this)):s==="editor:formatCode"?this.formatCode():s=="gallery:saveToURL"?this.emit("editor: save to URL",this.cm.getValue()):this.emit(s,this)});const n={theme:"tomorrow-night-eighties",value:"hello",mode:{name:"javascript",globalVars:!0},lineWrapping:!0,styleSelectedText:!0,extraKeys:i};this.cm=_9.fromTextArea(e,n),window.cm=this.cm,this.cm.refresh()}clear(){this.cm.setValue(`
 
 // Type some code on a new line (such as "osc().out()"), and press CTRL+shift+enter`)}setValue(e){this.cm.setValue(e)}getValue(){return this.cm.getValue()}formatCode(){const e=IJ(this.cm.getValue(),{indent_size:2,break_chained_methods:!0,indent_with_tabs:!0});this.cm.setValue(e)}addCodeToTop(e=""){const i=this.cm.getValue(),n=`
${e}

${i}
`;this.cm.setValue(n)}toggle(){this.isShowing?this.hide():this.show()}getLine(){var e=this.cm.getCursor(),i=this.cm.getLine(e.line);return this.flashCode({line:e.line,ch:0},{line:e.line+1,ch:0}),i}flashCode(e,i){e||(e={line:this.cm.firstLine(),ch:0}),i||(i={line:this.cm.lastLine()+1,ch:0});var n=this.cm.markText(e,i,{className:"styled-background"});setTimeout(()=>n.clear(),300)}getCurrentBlock(){for(var e=this.cm,i=e.getCursor(),n=i.line,r=i.line;n>0&&e.getLine(n)!=="";)n--;for(;r<e.lineCount()&&e.getLine(r)!=="";)r++;var s={line:n,ch:0},a={line:r,ch:0},l=e.getRange(s,a);return this.flashCode(s,a),{start:s,end:a,text:l}}};class m8 extends p0{constructor(e,i,n){super(e),this.local=i.components[e]={},i.editor=this,this.emit=n}load(e){mL.init(this.logElement),this.editor=new g8(this.textEl),this.editor.on("*",(i,n)=>{this.emit(i,n)}),this.innerText=document.getElementsByClassName("CodeMirror")[0],this.innerText.style.transition="opacity 0.5s"}hide(){this.innerText.style.opacity=0}show(){this.innerText.style.opacity=1,this.innerText.style.pointerEvents="all"}update(e){return e.showInfo===!0&&e.showExtensions===!1||e.showUI===!1?this.hide():this.show(),!1}createElement({width:e=window.innerWidth,height:i=window.innerHeight}={}){return this.textEl=Yt` <textarea></textarea>`,this.logElement=Yt`<div class="console cm-s-tomorrow-night-eighties"></div>`,Yt`<div id="editor-container" style="display:flex;flex-direction:column;">
       <div style="position:relative;flex:auto;padding:15px">${this.textEl}</div>
       ${this.logElement}
       </div>`}}function fE(t,e){return Yt`
  <body>
    <div id="hydra-ui">
      ${t.cache(v9,"hydra-canvas").render(t,e)}
      <!---<canvas id="audio-canvas">
      </canvas>--->
    </div>
  ${ej(t,e)}
  ${t.cache(m8,"editor").render(t,e)}
  <div style="position: absolute; top: 0">
  ${t.ui_components.map((i,n)=>t.cache(i,`${i.name}-ui`).render(t,e))}
  </div>
  </body>
 `}const Jr=uL();Jr.use(sR());Jr.use(NJ);Jr.use(D3);Jr.use(WF);Jr.use(O3);Jr.use(N3);Jr.route("/",fE);Jr.route("/dev",fE);Jr.mount("body");
